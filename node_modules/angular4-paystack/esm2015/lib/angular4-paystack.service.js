/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Inject } from '@angular/core';
import { PUBLIC_KEY_TOKEN } from './paystack-token';
import * as i0 from "@angular/core";
import * as i1 from "./paystack-token";
/**
 * @record
 */
import * as ɵngcc0 from '@angular/core';
function MyWindow() { }
if (false) {
    /** @type {?} */
    MyWindow.prototype.PaystackPop;
}
export class Angular4PaystackService {
    /**
     * @param {?} token
     */
    constructor(token) {
        this.token = token;
    }
    /**
     * @return {?}
     */
    loadScript() {
        return new Promise((/**
         * @param {?} resolve
         * @return {?}
         */
        resolve => {
            if (window.PaystackPop && typeof window.PaystackPop.setup === 'function') {
                resolve();
                return;
            }
            /** @type {?} */
            const script = window.document.createElement('script');
            window.document.head.appendChild(script);
            /** @type {?} */
            const onLoadFunc = (/**
             * @return {?}
             */
            () => {
                script.removeEventListener('load', onLoadFunc);
                resolve();
            });
            script.addEventListener('load', onLoadFunc);
            script.setAttribute('src', 'https://js.paystack.co/v1/inline.js');
        }));
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    checkInput(obj) {
        if (!obj.key && !this.token) {
            return 'ANGULAR-PAYSTACK: Please insert a your public key';
        }
        if (!obj.email) {
            return 'ANGULAR-PAYSTACK: Paystack email cannot be empty';
        }
        if (!obj.amount) {
            return 'ANGULAR-PAYSTACK: Paystack amount cannot be empty';
        }
        if (!obj.ref) {
            return 'ANGULAR-PAYSTACK: Paystack ref cannot be empty';
        }
        return '';
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    getPaystackOptions(obj) {
        /** @type {?} */
        const paystackOptions = {
            key: obj.key || this.token,
            email: obj.email,
            amount: obj.amount,
            ref: obj.ref,
            metadata: obj.metadata || {},
            currency: obj.currency || 'NGN',
            plan: obj.plan || '',
            channels: obj.channels,
            quantity: obj.quantity || '',
            subaccount: obj.subaccount || '',
            transaction_charge: obj.transaction_charge || 0,
            // tslint:disable-line
            bearer: obj.bearer || '',
        };
        return paystackOptions;
    }
}
Angular4PaystackService.ɵfac = function Angular4PaystackService_Factory(t) { return new (t || Angular4PaystackService)(ɵngcc0.ɵɵinject(PUBLIC_KEY_TOKEN)); };
Angular4PaystackService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: Angular4PaystackService, factory: Angular4PaystackService.ɵfac, providedIn: 'root' });
/** @nocollapse */
Angular4PaystackService.ctorParameters = () => [
    { type: String, decorators: [{ type: Inject, args: [PUBLIC_KEY_TOKEN,] }] }
];
/** @nocollapse */ Angular4PaystackService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function Angular4PaystackService_Factory() { return new Angular4PaystackService(i0.ɵɵinject(i1.PUBLIC_KEY_TOKEN)); }, token: Angular4PaystackService, providedIn: "root" });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(Angular4PaystackService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: String, decorators: [{
                type: Inject,
                args: [PUBLIC_KEY_TOKEN]
            }] }]; }, null); })();
if (false) {
    /**
     * @type {?}
     * @private
     */
    Angular4PaystackService.prototype.token;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjQtcGF5c3RhY2suc2VydmljZS5qcyIsInNvdXJjZXMiOlsibmc6L2FuZ3VsYXI0LXBheXN0YWNrL2xpYi9hbmd1bGFyNC1wYXlzdGFjay5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNwRDtBQUFxQztBQUVmO0FBQUk7QUFDekI7O0FBREQsdUJBSUM7QUFDRDtBQUFhO0FBRVYsSUFORCwrQkFFRTtBQUNKO0FBTUEsTUFBTSxPQUFPLHVCQUF1QjtBQUNwQztBQUFRO0FBQXdCO0FBQVEsSUFBdEMsWUFBOEMsS0FBYTtBQUFJLFFBQWpCLFVBQUssR0FBTCxLQUFLLENBQVE7QUFBQyxJQUFFLENBQUM7QUFDakU7QUFDTztBQUFtQjtBQUN4QixJQURBLFVBQVU7QUFBSyxRQUNiLE9BQU8sSUFBSSxPQUFPO0FBQU07QUFDTjtBQUF1QjtBQUFZLFFBRGxDLE9BQU8sQ0FBQyxFQUFFO0FBQ2pDLFlBQU0sSUFBSSxNQUFNLENBQUMsV0FBVyxJQUFJLE9BQU8sTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEtBQUssVUFBVSxFQUFFO0FBQ2hGLGdCQUFRLE9BQU8sRUFBRSxDQUFDO0FBQ2xCLGdCQUFRLE9BQU87QUFDZixhQUFPO0FBQ1A7QUFBNkIsa0JBQWpCLE1BQU0sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUM7QUFDNUQsWUFBTSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDL0M7QUFBNkIsa0JBQWpCLFVBQVU7QUFBUTtBQUNOO0FBQWdCLFlBRGYsR0FBRyxFQUFFO0FBQzlCLGdCQUFRLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDdkQsZ0JBQVEsT0FBTyxFQUFFLENBQUM7QUFDbEIsWUFBTSxDQUFDLENBQUE7QUFDUCxZQUFNLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDbEQsWUFBTSxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxxQ0FBcUMsQ0FBQyxDQUFDO0FBQ3hFLFFBQUksQ0FBQyxFQUFDLENBQUM7QUFDUCxJQUFFLENBQUM7QUFDSDtBQUNPO0FBQXNCO0FBQW1CO0FBQzlDLElBREEsVUFBVSxDQUFDLEdBQTZCO0FBQUksUUFDMUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ2pDLFlBQU0sT0FBTyxtREFBbUQsQ0FBQztBQUNqRSxTQUFLO0FBQ0wsUUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRTtBQUNwQixZQUFNLE9BQU8sa0RBQWtELENBQUM7QUFDaEUsU0FBSztBQUNMLFFBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7QUFDckIsWUFBTSxPQUFPLG1EQUFtRCxDQUFDO0FBQ2pFLFNBQUs7QUFDTCxRQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO0FBQ2xCLFlBQU0sT0FBTyxnREFBZ0QsQ0FBQztBQUM5RCxTQUFLO0FBQ0wsUUFBSSxPQUFPLEVBQUUsQ0FBQztBQUNkLElBQUUsQ0FBQztBQUNIO0FBQ087QUFBc0I7QUFBbUI7QUFBUSxJQUF0RCxrQkFBa0IsQ0FBQyxHQUFvQjtBQUFJO0FBQ3JDLGNBQUUsZUFBZSxHQUFvQjtBQUM3QyxZQUFNLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLO0FBQ2hDLFlBQU0sS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLO0FBQ3RCLFlBQU0sTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNO0FBQ3hCLFlBQU0sR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHO0FBQ2xCLFlBQU0sUUFBUSxFQUFFLEdBQUcsQ0FBQyxRQUFRLElBQUksRUFBRTtBQUNsQyxZQUFNLFFBQVEsRUFBRSxHQUFHLENBQUMsUUFBUSxJQUFJLEtBQUs7QUFDckMsWUFBTSxJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFO0FBQzFCLFlBQU0sUUFBUSxFQUFFLEdBQUcsQ0FBQyxRQUFRO0FBQzVCLFlBQU0sUUFBUSxFQUFFLEdBQUcsQ0FBQyxRQUFRLElBQUksRUFBRTtBQUNsQyxZQUFNLFVBQVUsRUFBRSxHQUFHLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDdEMsWUFBTSxrQkFBa0IsRUFBRSxHQUFHLENBQUMsa0JBQWtCLElBQUksQ0FBQztBQUFFO0FBQzNDLFlBQU4sTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNLElBQUksRUFBRTtBQUM5QixTQUFLO0FBQ0wsUUFBSSxPQUFPLGVBQWUsQ0FBQztBQUMzQixJQUFFLENBQUM7QUFDSDttREF4REMsVUFBVSxTQUFDLGtCQUNWLFVBQVUsRUFBRSxNQUFNLGVBQ25CO3lKQUNJO0FBQUM7QUFBbUI7QUFDVSx5Q0FBcEIsTUFBTSxTQUFDLGdCQUFnQjtBQUFRO0FBQUc7Ozs7Ozs7OztrQ0FRTTtBQUFDO0FBQ2pEO0FBQVE7QUFBaUI7QUFDaEM7QUFBUSxJQVZNLHdDQUErQzs7QUFmQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUlBLEFBSEEsQUFFQSxBQU9BLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUF2REEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBQVUJMSUNfS0VZX1RPS0VOIH0gZnJvbSAnLi9wYXlzdGFjay10b2tlbic7XHJcbmltcG9ydCB7IFBheXN0YWNrT3B0aW9ucyB9IGZyb20gJy4vcGF5c3RhY2stb3B0aW9ucyc7XHJcblxyXG5pbnRlcmZhY2UgTXlXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xyXG4gIFBheXN0YWNrUG9wOiB7XHJcbiAgICBzZXR1cChvcHRpb25zOiBQYXJ0aWFsPFBheXN0YWNrT3B0aW9ucz4pOiB7IG9wZW5JZnJhbWUoKTogYW55IH1cclxuICB9O1xyXG59XHJcbmRlY2xhcmUgdmFyIHdpbmRvdzogTXlXaW5kb3c7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQW5ndWxhcjRQYXlzdGFja1NlcnZpY2Uge1xyXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoUFVCTElDX0tFWV9UT0tFTikgcHJpdmF0ZSB0b2tlbjogc3RyaW5nKSB7fVxyXG5cclxuICBsb2FkU2NyaXB0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICBpZiAod2luZG93LlBheXN0YWNrUG9wICYmIHR5cGVvZiB3aW5kb3cuUGF5c3RhY2tQb3Auc2V0dXAgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHNjcmlwdCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgd2luZG93LmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgY29uc3Qgb25Mb2FkRnVuYyA9ICgpID0+IHtcclxuICAgICAgICBzY3JpcHQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZEZ1bmMpO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfTtcclxuICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBvbkxvYWRGdW5jKTtcclxuICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vanMucGF5c3RhY2suY28vdjEvaW5saW5lLmpzJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoZWNrSW5wdXQob2JqOiBQYXJ0aWFsPFBheXN0YWNrT3B0aW9ucz4pOiBzdHJpbmcge1xyXG4gICAgaWYgKCFvYmoua2V5ICYmICF0aGlzLnRva2VuKSB7XHJcbiAgICAgIHJldHVybiAnQU5HVUxBUi1QQVlTVEFDSzogUGxlYXNlIGluc2VydCBhIHlvdXIgcHVibGljIGtleSc7XHJcbiAgICB9XHJcbiAgICBpZiAoIW9iai5lbWFpbCkge1xyXG4gICAgICByZXR1cm4gJ0FOR1VMQVItUEFZU1RBQ0s6IFBheXN0YWNrIGVtYWlsIGNhbm5vdCBiZSBlbXB0eSc7XHJcbiAgICB9XHJcbiAgICBpZiAoIW9iai5hbW91bnQpIHtcclxuICAgICAgcmV0dXJuICdBTkdVTEFSLVBBWVNUQUNLOiBQYXlzdGFjayBhbW91bnQgY2Fubm90IGJlIGVtcHR5JztcclxuICAgIH1cclxuICAgIGlmICghb2JqLnJlZikge1xyXG4gICAgICByZXR1cm4gJ0FOR1VMQVItUEFZU1RBQ0s6IFBheXN0YWNrIHJlZiBjYW5ub3QgYmUgZW1wdHknO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGF5c3RhY2tPcHRpb25zKG9iajogUGF5c3RhY2tPcHRpb25zKTogUGF5c3RhY2tPcHRpb25zIHtcclxuICAgIGNvbnN0IHBheXN0YWNrT3B0aW9uczogUGF5c3RhY2tPcHRpb25zID0ge1xyXG4gICAgICBrZXk6IG9iai5rZXkgfHwgdGhpcy50b2tlbixcclxuICAgICAgZW1haWw6IG9iai5lbWFpbCxcclxuICAgICAgYW1vdW50OiBvYmouYW1vdW50LFxyXG4gICAgICByZWY6IG9iai5yZWYsXHJcbiAgICAgIG1ldGFkYXRhOiBvYmoubWV0YWRhdGEgfHwge30sXHJcbiAgICAgIGN1cnJlbmN5OiBvYmouY3VycmVuY3kgfHwgJ05HTicsXHJcbiAgICAgIHBsYW46IG9iai5wbGFuIHx8ICcnLFxyXG4gICAgICBjaGFubmVsczogb2JqLmNoYW5uZWxzLFxyXG4gICAgICBxdWFudGl0eTogb2JqLnF1YW50aXR5IHx8ICcnLFxyXG4gICAgICBzdWJhY2NvdW50OiBvYmouc3ViYWNjb3VudCB8fCAnJyxcclxuICAgICAgdHJhbnNhY3Rpb25fY2hhcmdlOiBvYmoudHJhbnNhY3Rpb25fY2hhcmdlIHx8IDAsIC8vIHRzbGludDpkaXNhYmxlLWxpbmVcclxuICAgICAgYmVhcmVyOiBvYmouYmVhcmVyIHx8ICcnLFxyXG4gICAgfTtcclxuICAgIHJldHVybiBwYXlzdGFja09wdGlvbnM7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=