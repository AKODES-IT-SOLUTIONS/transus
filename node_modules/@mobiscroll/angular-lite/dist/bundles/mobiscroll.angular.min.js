/* eslint-disable */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('@angular/core'),require('@angular/forms'),require('@angular/common'),exports, require('@angular/core'), require('@angular/common'), require('@angular/forms')) :
  typeof define === 'function' && define.amd ? define(['@angular/core','@angular/forms','@angular/common','exports', '@angular/core', '@angular/common', '@angular/forms'], factory) :
  (global = global || self, factory(global.ng.core,global.ng.forms,global.ng.common,global.mobiscroll = {}, global.ng.core, global.ng.common, global.ng.forms));
}(this, (function (ɵngcc0,ɵngcc1,ɵngcc2,exports, core, common, forms) { 
var _c0 = ["initElement"];
function MbscInput_span_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "span", 5);
} }
function MbscInput_span_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 6);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r2.errorMessage);
} }
var _c1 = ["*"];
var _c2 = ["rootElement"];
function MbscTextarea_span_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 4);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.errorMessage);
} }
function MbscDropdown_span_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 4);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.errorMessage);
} }
function MbscCheckbox_span_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 4);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.errorMessage);
} }
function MbscSwitch_span_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 4);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.errorMessage);
} }
function MbscRadio_span_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 4);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.errorMessage);
} }
function MbscSegmented_span_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "span");
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassMap("mbsc-ic mbsc-ic-" + ctx_r1.icon);
} }
var _c3 = ["inputElements"];
function MbscSlider_input_2_Template(rf, ctx) { if (rf & 1) {
    var _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "input", 2, 3);
    ɵngcc0.ɵɵlistener("blur", function MbscSlider_input_2_Template_input_blur_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.onTouch($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var v_r1 = ctx.$implicit;
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("disabled", ctx_r0.disabled);
    ɵngcc0.ɵɵattribute("value", ctx_r0.dummyArray.length > 1 && ctx_r0.initialValue ? ctx_r0.initialValue[v_r1] : ctx_r0.initialValue)("data-step-labels", ctx_r0.dataStepLabels)("data-template", ctx_r0.valueTemplate)("data-tooltip", ctx_r0.tooltip ? "true" : null)("data-highlight", ctx_r0.highlight)("data-live", ctx_r0.live)("data-icon", ctx_r0.icon ? ctx_r0.icon : null)("data-val", ctx_r0.val ? ctx_r0.val : null)("data-label-style", ctx_r0.labelStyle)("data-input-style", ctx_r0.inputStyle)("name", ctx_r0.name)("max", ctx_r0.max !== undefined ? ctx_r0.max : null)("min", ctx_r0.min !== undefined ? ctx_r0.min : null)("step", ctx_r0.step !== undefined ? ctx_r0.step : null);
} }
'use strict';

  /* eslint-disable */

  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */

  /* global Reflect, Promise */
  var extendStatics = function (d, b) {
    extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    };

    return extendStatics(d, b);
  };

  function __extends(d, b) {
    extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }

  var mobiscroll = mobiscroll || {},
      util = {};

  var os,
      vers,
      majorVersion,
      minorVersion,
      version = [],
      isBrowser = typeof window !== 'undefined',
      isDark = isBrowser && window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches,
      userAgent = isBrowser ? navigator.userAgent : '',
      platform = isBrowser ? navigator.platform : '',
      maxTouchPoints = isBrowser ? navigator.maxTouchPoints : 0,
      isSafari = /Safari/.test(userAgent),
      device = userAgent.match(/Android|iPhone|iPad|iPod|Windows Phone|Windows|MSIE/i),
      raf = isBrowser && window.requestAnimationFrame || function (func) {
    return setTimeout(func, 20);
  };

  if (/Android/i.test(device)) {
    os = 'android';
    vers = userAgent.match(/Android\s+([\d.]+)/i);

    if (vers) {
      version = vers[0].replace('Android ', '').split('.');
    }
  } else if (/iPhone|iPad|iPod/i.test(device) || /iPhone|iPad|iPod/i.test(platform) || platform === 'MacIntel' && maxTouchPoints > 1) {
    // On iPad with iOS 13 desktop site request is automatically enabled in Safari,
    // so 'iPad' is no longer present in the user agent string.
    // In this case we check `navigator.platform` and `navigator.maxTouchPoints`.
    // maxTouchPoints is needed to exclude desktop Mac OS X.
    os = 'ios';
    vers = userAgent.match(/OS\s+([\d_]+)/i);

    if (vers) {
      version = vers[0].replace(/_/g, '.').replace('OS ', '').split('.');
    }
  } else if (/Windows Phone/i.test(device)) {
    os = 'wp';
  } else if (/Windows|MSIE/i.test(device)) {
    os = 'windows';
  }

  majorVersion = version[0];
  minorVersion = version[1];

  function testProps(props) {
    var i;

    for (i in props) {
      if (mod[props[i]] !== undefined) {
        return true;
      }
    }

    return false;
  }

  function testPrefix() {
    var prefixes = ['Webkit', 'Moz', 'O', 'ms'],
        p;

    for (p in prefixes) {
      if (testProps([prefixes[p] + 'Transform'])) {
        return '-' + prefixes[p].toLowerCase() + '-';
      }
    }

    return '';
  }

  function testTouch(e, elm) {
    if (e.type == 'touchstart') {
      elm.__mbscTouched = 1;
    } else if (elm.__mbscTouched) {
      delete elm.__mbscTouched;
      return false;
    }

    return true;
  }

  function listen(el, event, handler, opt) {
    if (el) {
      el.addEventListener(event, handler, opt);
    }
  }

  function unlisten(el, event, handler, opt) {
    if (el) {
      el.removeEventListener(event, handler, opt);
    }
  }

  function matches(element, selector) {
    if (!selector || !element || element.nodeType !== 1) {
      return false;
    }

    var matchesSelector = element.matches || element.matchesSelector || element.webkitMatchesSelector || element.mozMatchesSelector || element.msMatchesSelector;
    return matchesSelector.call(element, selector);
  }

  function closest(el, target, selector) {
    while (target) {
      if (matches(target, selector)) {
        return target;
      }

      target = target !== el ? target.parentNode : null;
    }

    return null;
  }

  function trigger(elm, name, data) {
    var evt;

    try {
      evt = new CustomEvent(name, {
        detail: data,
        bubbles: true,
        cancelable: true
      });
    } catch (e) {
      evt = document.createEvent('Event');
      evt.initEvent(name, true, true);
      evt.detail = data;
    }

    elm.dispatchEvent(evt);
  }

  var animEnd,
      canvas,
      mod,
      cssPrefix,
      hasGhostClick,
      hasTransition,
      isWebView,
      isWkWebView,
      jsPrefix,
      win;

  if (isBrowser) {
    win = window;
    canvas = document.createElement('canvas');
    mod = document.createElement('modernizr').style;
    cssPrefix = testPrefix();
    jsPrefix = cssPrefix.replace(/^-/, '').replace(/-$/, '').replace('moz', 'Moz');
    animEnd = mod.animation !== undefined ? 'animationend' : 'webkitAnimationEnd';
    hasTransition = mod.transition !== undefined; // UIWebView on iOS still has the ghost click, 
    // WkWebView does not have a ghost click, but it's hard to tell if it's UIWebView or WkWebView
    // In addition in iOS 12.2 if we enable tap handling, it brakes the form inputs
    // (keyboard appears, but the cursor is not in the input).

    isWebView = os === 'ios' && !isSafari;
    isWkWebView = isWebView && win.webkit && win.webkit.messageHandlers;
    hasGhostClick = mod.touchAction === undefined || isWebView && !isWkWebView;
  }

  var cssNumber = {
    'column-count': 1,
    'columns': 1,
    'font-weight': 1,
    'line-height': 1,
    'opacity': 1,
    'z-index': 1,
    'zoom': 1
  },
      propMap = {
    'readonly': 'readOnly'
  },
      emptyArray = [],
      _slice = Array.prototype.slice;

  function isFunction(value) {
    return typeof value === "function";
  }

  function isObject(obj) {
    return typeof obj === "object";
  }

  function likeArray(obj) {
    return typeof obj.length == 'number';
  }

  function camelize(str) {
    return str.replace(/-+(.)?/g, function (match, chr) {
      return chr ? chr.toUpperCase() : '';
    });
  }

  function extend(target, source, deep) {
    for (var key in source) {
      if (deep && ($.isPlainObject(source[key]) || $.isArray(source[key]))) {
        if ($.isPlainObject(source[key]) && !$.isPlainObject(target[key]) || $.isArray(source[key]) && !$.isArray(target[key])) {
          target[key] = {};
        }

        extend(target[key], source[key], deep);
      } else if (source[key] !== undefined) {
        target[key] = source[key];
      }
    }
  }

  function dasherize(str) {
    return str.replace(/::/g, '/').replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2').replace(/([a-z\d])([A-Z])/g, '$1_$2').replace(/_/g, '-').toLowerCase();
  }

  function maybeAddPx(name, value) {
    return typeof value == "number" && !cssNumber[dasherize(name)] ? value + "px" : value;
  }

  var Dom = function () {
    var Dom = function Dom(arr) {
      var _this = this,
          i = 0; // Create array-like object


      for (i = 0; i < arr.length; i++) {
        _this[i] = arr[i];
      }

      _this.length = arr.length; // Return collection with methods

      return $(this);
    };

    var $ = function $(selector, context) {
      var arr = [],
          i = 0;

      if (selector && !context) {
        if (selector instanceof Dom) {
          return selector;
        }
      }

      if (isFunction(selector)) {
        return $(document).ready(selector);
      }

      if (selector) {
        // String
        if (typeof selector === 'string') {
          var els, tempParent, html;
          selector = html = selector.trim();

          if (html.indexOf('<') >= 0 && html.indexOf('>') >= 0) {
            var toCreate = 'div';

            if (html.indexOf('<li') === 0) {
              toCreate = 'ul';
            }

            if (html.indexOf('<tr') === 0) {
              toCreate = 'tbody';
            }

            if (html.indexOf('<td') === 0 || html.indexOf('<th') === 0) {
              toCreate = 'tr';
            }

            if (html.indexOf('<tbody') === 0) {
              toCreate = 'table';
            }

            if (html.indexOf('<option') === 0) {
              toCreate = 'select';
            }

            tempParent = document.createElement(toCreate);
            tempParent.innerHTML = html;

            for (i = 0; i < tempParent.childNodes.length; i++) {
              arr.push(tempParent.childNodes[i]);
            }
          } else {
            if (!context && selector[0] === '#' && !selector.match(/[ .<>:~]/)) {
              // Pure ID selector
              els = [document.getElementById(selector.split('#')[1])];
            } else {
              if (context instanceof Dom) {
                context = context[0];
              } // Other selectors


              els = (context || document).querySelectorAll(selector);
            }

            for (i = 0; i < els.length; i++) {
              if (els[i]) {
                arr.push(els[i]);
              }
            }
          }
        } // Node/element
        else if (selector.nodeType || selector === window || selector === document) {
            arr.push(selector);
          } //Array of elements or instance of Dom
          else if (selector.length > 0 && selector[0].nodeType) {
              for (i = 0; i < selector.length; i++) {
                arr.push(selector[i]);
              }
            } else if ($.isArray(selector)) {
              arr = selector;
            }
      }

      return new Dom(arr);
    };

    Dom.prototype = {
      ready: function ready(callback) {
        if (document.attachEvent ? document.readyState == 'complete' : document.readyState != 'loading') {
          callback($);
        } else {
          document.addEventListener('DOMContentLoaded', function () {
            callback($);
          }, false);
        }

        return this;
      },
      concat: emptyArray.concat,
      empty: function empty() {
        return this.each(function () {
          this.innerHTML = '';
        });
      },
      map: function map(fn) {
        return $($.map(this, function (el, i) {
          return fn.call(el, i, el);
        }));
      },
      slice: function slice() {
        return $(_slice.apply(this, arguments));
      },
      // Classes and attriutes
      // NOTE: element.classList attribure is not supported on android 2.3!!!
      addClass: function addClass(className) {
        if (typeof className === 'undefined') {
          return this;
        }

        var classes = className.split(' ');

        for (var i = 0; i < classes.length; i++) {
          for (var j = 0; j < this.length; j++) {
            if (typeof this[j].classList !== 'undefined' && classes[i] !== '') {
              this[j].classList.add(classes[i]);
            }
          }
        }

        return this;
      },
      removeClass: function removeClass(className) {
        if (typeof className === 'undefined') {
          return this;
        }

        var classes = className.split(' ');

        for (var i = 0; i < classes.length; i++) {
          for (var j = 0; j < this.length; j++) {
            if (typeof this[j].classList !== 'undefined' && classes[i] !== '') {
              this[j].classList.remove(classes[i]);
            }
          }
        }

        return this;
      },
      hasClass: function hasClass(className) {
        return this[0] ? this[0].classList.contains(className) : false;
      },
      toggleClass: function toggleClass(className) {
        var classes = className.split(' ');

        for (var i = 0; i < classes.length; i++) {
          for (var j = 0; j < this.length; j++) {
            if (typeof this[j].classList !== 'undefined') {
              this[j].classList.toggle(classes[i]);
            }
          }
        }

        return this;
      },
      closest: function closest(selector, context) {
        var node = this[0],
            collection = false;

        if (isObject(selector)) {
          collection = $(selector);
        }

        while (node && !(collection ? collection.indexOf(node) >= 0 : matches(node, selector))) {
          node = node !== context && node.nodeType !== node.DOCUMENT_NODE && node.parentNode;
        }

        return $(node);
      },
      attr: function attr(attrs, value) {
        var attr;

        if (arguments.length === 1 && typeof attrs === 'string') {
          // Get attr
          if (this.length) {
            attr = this[0].getAttribute(attrs);
            return attr || attr === '' ? attr : undefined;
          }
        } else {
          // Set attrs
          for (var i = 0; i < this.length; i++) {
            if (arguments.length === 2) {
              // String
              this[i].setAttribute(attrs, value);
            } else {
              // Object
              for (var attrName in attrs) {
                this[i][attrName] = attrs[attrName];
                this[i].setAttribute(attrName, attrs[attrName]);
              }
            }
          }

          return this;
        }
      },
      removeAttr: function removeAttr(attr) {
        for (var i = 0; i < this.length; i++) {
          this[i].removeAttribute(attr);
        }

        return this;
      },
      prop: function prop(props, value) {
        props = propMap[props] || props;

        if (arguments.length === 1 && typeof props === 'string') {
          // Get prop
          return this[0] ? this[0][props] : undefined;
        } else {
          // Set props
          for (var i = 0; i < this.length; i++) {
            this[i][props] = value;
          }

          return this;
        }
      },
      val: function val(value) {
        if (typeof value === 'undefined') {
          if (this.length && this[0].multiple) {
            return $.map(this.find('option:checked'), function (v) {
              return v.value;
            });
          }

          return this[0] ? this[0].value : undefined;
        }

        if (this.length && this[0].multiple) {
          $.each(this[0].options, function () {
            this.selected = value.indexOf(this.value) != -1;
          });
        } else {
          for (var i = 0; i < this.length; i++) {
            this[i].value = value;
          }
        }

        return this;
      },
      //Events
      on: function on(eventName, targetSelector, listener, capture) {
        var boundListener,
            elm,
            event,
            events = eventName.split(' '),
            i,
            j;

        function handleLiveEvent(e) {
          var target = e.target;

          while (target) {
            if ($(target).is(targetSelector)) {
              listener.call(target, e);
            }

            target = target !== this ? target.parentNode : null;
          }
        }

        function handleNamespaces(el, name, listener, capture) {
          var namespace = name.split('.');

          if (!el.DomNameSpaces) {
            el.DomNameSpaces = [];
          }

          el.DomNameSpaces.push({
            namespace: namespace[1],
            event: namespace[0],
            listener: listener,
            capture: capture
          });
          el.addEventListener(namespace[0], listener, capture);
        }

        for (i = 0; i < this.length; i++) {
          elm = this[i];

          if (isFunction(targetSelector) || targetSelector === false) {
            // Usual events
            if (isFunction(targetSelector)) {
              capture = listener || false;
              listener = targetSelector;
            }

            for (j = 0; j < events.length; j++) {
              event = events[j]; // check for namespaces

              if (event.indexOf('.') != -1) {
                handleNamespaces(elm, event, listener, capture);
              } else {
                elm.addEventListener(event, listener, capture);
              }
            }
          } else {
            // Live events
            boundListener = handleLiveEvent.bind(elm);

            for (j = 0; j < events.length; j++) {
              event = events[j];

              if (!elm.DomLiveListeners) {
                elm.DomLiveListeners = [];
              }

              elm.DomLiveListeners.push({
                listener: listener,
                liveListener: boundListener
              });

              if (event.indexOf('.') != -1) {
                handleNamespaces(elm, event, boundListener, capture);
              } else {
                elm.addEventListener(event, boundListener, capture);
              }
            }
          }
        }

        return this;
      },
      off: function off(eventName, targetSelector, listener, capture) {
        var elm,
            event,
            events,
            i,
            j,
            k,
            liveListeners,
            that = this;

        function removeEvents(event) {
          var el,
              i,
              j,
              item,
              nameSpaces,
              parts = event.split('.'),
              name = parts[0],
              ns = parts[1];

          for (i = 0; i < that.length; ++i) {
            el = that[i];
            nameSpaces = el.DomNameSpaces;

            if (nameSpaces) {
              for (j = 0; j < nameSpaces.length; ++j) {
                item = nameSpaces[j];

                if (item.namespace == ns && (item.event == name || !name)) {
                  el.removeEventListener(item.event, item.listener, item.capture);
                  item.removed = true;
                }
              } // remove the events from the DomNameSpaces array


              for (j = nameSpaces.length - 1; j >= 0; --j) {
                if (nameSpaces[j].removed) {
                  nameSpaces.splice(j, 1);
                }
              }
            }
          }
        }

        events = eventName.split(' ');

        for (i = 0; i < events.length; i++) {
          event = events[i];

          for (j = 0; j < this.length; j++) {
            elm = this[j];
            liveListeners = elm.DomLiveListeners;

            if (isFunction(targetSelector) || targetSelector === false) {
              // Usual events
              if (isFunction(targetSelector)) {
                capture = listener || false;
                listener = targetSelector;
              }

              if (event.indexOf('.') === 0) {
                // remove namespace events
                removeEvents(event.substr(1));
              } else {
                elm.removeEventListener(event, listener, capture);
              }
            } else {
              // Live event
              if (liveListeners) {
                for (k = 0; k < liveListeners.length; k++) {
                  if (liveListeners[k].listener === listener) {
                    elm.removeEventListener(event, liveListeners[k].liveListener, capture);
                  }
                }
              }

              if (elm.DomNameSpaces && elm.DomNameSpaces.length && event) {
                removeEvents(event);
              }
            }
          }
        }

        return this;
      },
      trigger: function trigger$1(eventName, eventData) {
        var events = eventName.split(' ');

        for (var i = 0; i < events.length; i++) {
          for (var j = 0; j < this.length; j++) {
            trigger(this[j], events[i], eventData);
          }
        }

        return this;
      },
      // Sizing/Styles
      width: function width(dim) {
        if (dim !== undefined) {
          return this.css('width', dim);
        }

        if (this[0] === window) {
          return window.innerWidth;
        } else if (this[0] === document) {
          return document.documentElement.scrollWidth;
        } else {
          return this.length > 0 ? parseFloat(this.css('width')) : null;
        }
      },
      height: function height(dim) {
        if (dim !== undefined) {
          return this.css('height', dim);
        }

        if (this[0] === window) {
          return window.innerHeight;
        } else if (this[0] === document) {
          var body = document.body,
              html = document.documentElement;
          return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);
        } else {
          return this.length > 0 ? parseFloat(this.css('height')) : null;
        }
      },
      innerWidth: function innerWidth() {
        var elm = this;

        if (this.length > 0) {
          if (this[0].innerWidth) {
            return this[0].innerWidth;
          } else {
            var size = this[0].offsetWidth,
                sides = ['left', 'right'];
            sides.forEach(function (side) {
              size -= parseInt(elm.css(camelize('border-' + side + '-width')) || 0, 10);
            });
            return size;
          }
        }
      },
      innerHeight: function innerHeight() {
        var elm = this;

        if (this.length > 0) {
          if (this[0].innerHeight) {
            return this[0].innerHeight;
          } else {
            var size = this[0].offsetHeight,
                sides = ['top', 'bottom'];
            sides.forEach(function (side) {
              size -= parseInt(elm.css(camelize('border-' + side + '-width')) || 0, 10);
            });
            return size;
          }
        }
      },
      offset: function offset() {
        if (this.length > 0) {
          var el = this[0],
              box = el.getBoundingClientRect(),
              doc = document.documentElement;
          return {
            top: box.top + window.pageYOffset - doc.clientTop,
            left: box.left + window.pageXOffset - doc.clientLeft
          };
        }
      },
      hide: function hide() {
        for (var i = 0; i < this.length; i++) {
          this[i].style.display = 'none';
        }

        return this;
      },
      show: function show() {
        for (var i = 0; i < this.length; i++) {
          if (this[i].style.display == "none") {
            this[i].style.display = '';
          }

          if (getComputedStyle(this[i], '').getPropertyValue("display") == "none") {
            this[i].style.display = 'block';
          }
        }

        return this;
      },
      clone: function clone() {
        return this.map(function () {
          return this.cloneNode(true);
        });
      },
      styles: function styles() {
        return this[0] ? window.getComputedStyle(this[0], null) : undefined;
      },
      css: function css(property, value) {
        var i,
            key,
            element = this[0],
            css = '';

        if (arguments.length < 2) {
          if (!element) {
            return;
          }

          if (typeof property === 'string') {
            return element.style[property] || getComputedStyle(element, '').getPropertyValue(property);
          }
        }

        if (typeof property === 'string') {
          if (!value && value !== 0) {
            this.each(function () {
              this.style.removeProperty(dasherize(property));
            });
          } else {
            css = dasherize(property) + ":" + maybeAddPx(property, value);
          }
        } else {
          for (key in property) {
            if (!property[key] && property[key] !== 0) {
              for (i = 0; i < this.length; i++) {
                this[i].style.removeProperty(dasherize(key));
              }
            } else {
              css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';';
            }
          }
        }

        return this.each(function () {
          this.style.cssText += ';' + css;
        });
      },
      each: function each(callback) {
        for (var i = 0; i < this.length; i++) {
          if (callback.apply(this[i], [i, this[i]]) === false) {
            break;
          }
        }

        return this;
      },
      filter: function filter(callback) {
        var matchedItems = [];

        for (var i = 0; i < this.length; i++) {
          if (isFunction(callback)) {
            if (callback.call(this[i], i, this[i])) {
              matchedItems.push(this[i]);
            }
          } else if (matches(this[i], callback)) {
            matchedItems.push(this[i]);
          }
        }

        return new Dom(matchedItems);
      },
      html: function html(_html) {
        if (typeof _html === 'undefined') {
          return this[0] ? this[0].innerHTML : undefined;
        } else {
          this.empty();

          for (var i = 0; i < this.length; i++) {
            this[i].innerHTML = _html;
          }

          return this;
        }
      },
      text: function text(_text) {
        if (typeof _text === 'undefined') {
          return this[0] ? this[0].textContent.trim() : null;
        } else {
          for (var i = 0; i < this.length; i++) {
            this[i].textContent = _text;
          }

          return this;
        }
      },
      is: function is(selector) {
        return this.length > 0 && matches(this[0], selector);
      },
      not: function not(selector) {
        var nodes = [];

        if (isFunction(selector) && selector.call !== undefined) {
          this.each(function (idx) {
            if (!selector.call(this, idx)) {
              nodes.push(this);
            }
          });
        } else {
          var excludes = typeof selector == 'string' ? this.filter(selector) : likeArray(selector) && isFunction(selector.item) ? _slice.call(selector) : $(selector);

          if (isObject(excludes)) {
            excludes = $.map(excludes, function (el) {
              return el;
            });
          }

          this.each(function (i, el) {
            if (excludes.indexOf(el) < 0) {
              nodes.push(el);
            }
          });
        }

        return $(nodes);
      },
      indexOf: function indexOf(el) {
        for (var i = 0; i < this.length; i++) {
          if (this[i] === el) {
            return i;
          }
        }
      },
      index: function index(element) {
        return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0]);
      },
      get: function get(idx) {
        return idx === undefined ? _slice.call(this) : this[idx >= 0 ? idx : idx + this.length];
      },
      eq: function eq(index) {
        if (typeof index === 'undefined') {
          return this;
        }

        var length = this.length,
            returnIndex;

        if (index > length - 1) {
          return new Dom([]);
        }

        if (index < 0) {
          returnIndex = length + index;
          return returnIndex < 0 ? new Dom([]) : new Dom([this[returnIndex]]);
        }

        return new Dom([this[index]]);
      },
      append: function append(newChild) {
        var i, j;

        for (i = 0; i < this.length; i++) {
          if (typeof newChild === 'string') {
            var tempDiv = document.createElement('div');
            tempDiv.innerHTML = newChild;

            while (tempDiv.firstChild) {
              this[i].appendChild(tempDiv.firstChild);
            }
          } else if (newChild instanceof Dom) {
            for (j = 0; j < newChild.length; j++) {
              this[i].appendChild(newChild[j]);
            }
          } else {
            this[i].appendChild(newChild);
          }
        }

        return this;
      },
      appendTo: function appendTo(parent) {
        $(parent).append(this);
        return this;
      },
      prepend: function prepend(newChild) {
        var i, j;

        for (i = 0; i < this.length; i++) {
          if (typeof newChild === 'string') {
            var tempDiv = document.createElement('div');
            tempDiv.innerHTML = newChild;

            for (j = tempDiv.childNodes.length - 1; j >= 0; j--) {
              this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0]);
            } // this[i].insertAdjacentHTML('afterbegin', newChild);

          } else if (newChild instanceof Dom) {
            for (j = 0; j < newChild.length; j++) {
              this[i].insertBefore(newChild[j], this[i].childNodes[0]);
            }
          } else {
            this[i].insertBefore(newChild, this[i].childNodes[0]);
          }
        }

        return this;
      },
      prependTo: function prependTo(parent) {
        $(parent).prepend(this);
        return this;
      },
      insertBefore: function insertBefore(selector) {
        var before = $(selector);

        for (var i = 0; i < this.length; i++) {
          if (before.length === 1) {
            before[0].parentNode.insertBefore(this[i], before[0]);
          } else if (before.length > 1) {
            for (var j = 0; j < before.length; j++) {
              before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j]);
            }
          }
        }

        return this;
      },
      insertAfter: function insertAfter(selector) {
        var after = $(selector);

        for (var i = 0; i < this.length; i++) {
          if (after.length === 1) {
            after[0].parentNode.insertBefore(this[i], after[0].nextSibling);
          } else if (after.length > 1) {
            for (var j = 0; j < after.length; j++) {
              after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling);
            }
          }
        }

        return this;
      },
      next: function next(selector) {
        if (this.length > 0) {
          if (selector) {
            if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) {
              return new Dom([this[0].nextElementSibling]);
            } else {
              return new Dom([]);
            }
          } else {
            if (this[0].nextElementSibling) {
              return new Dom([this[0].nextElementSibling]);
            } else {
              return new Dom([]);
            }
          }
        } else {
          return new Dom([]);
        }
      },
      nextAll: function nextAll(selector) {
        var nextEls = [],
            el = this[0];

        if (!el) {
          return new Dom([]);
        }

        while (el.nextElementSibling) {
          var next = el.nextElementSibling;

          if (selector) {
            if ($(next).is(selector)) {
              nextEls.push(next);
            }
          } else {
            nextEls.push(next);
          }

          el = next;
        }

        return new Dom(nextEls);
      },
      prev: function prev(selector) {
        if (this.length > 0) {
          if (selector) {
            if (this[0].previousElementSibling && $(this[0].previousElementSibling).is(selector)) {
              return new Dom([this[0].previousElementSibling]);
            } else {
              return new Dom([]);
            }
          } else {
            if (this[0].previousElementSibling) {
              return new Dom([this[0].previousElementSibling]);
            } else {
              return new Dom([]);
            }
          }
        } else {
          return new Dom([]);
        }
      },
      prevAll: function prevAll(selector) {
        var prevEls = [];
        var el = this[0];

        if (!el) {
          return new Dom([]);
        }

        while (el.previousElementSibling) {
          var prev = el.previousElementSibling;

          if (selector) {
            if ($(prev).is(selector)) {
              prevEls.push(prev);
            }
          } else {
            prevEls.push(prev);
          }

          el = prev;
        }

        return new Dom(prevEls);
      },
      parent: function parent(selector) {
        var parents = [];

        for (var i = 0; i < this.length; i++) {
          if (this[i].parentNode !== null) {
            if (selector) {
              if ($(this[i].parentNode).is(selector)) {
                parents.push(this[i].parentNode);
              }
            } else {
              parents.push(this[i].parentNode);
            }
          }
        }

        return $($.unique(parents));
      },
      parents: function parents(selector) {
        var parents = [];

        for (var i = 0; i < this.length; i++) {
          var parent = this[i].parentNode;

          while (parent) {
            if (selector) {
              if ($(parent).is(selector)) {
                parents.push(parent);
              }
            } else {
              parents.push(parent);
            }

            parent = parent.parentNode;
          }
        }

        return $($.unique(parents));
      },
      find: function find(selector) {
        var foundElements = [];

        for (var i = 0; i < this.length; i++) {
          var found = this[i].querySelectorAll(selector);

          for (var j = 0; j < found.length; j++) {
            foundElements.push(found[j]);
          }
        }

        return new Dom(foundElements);
      },
      children: function children(selector) {
        var children = [];

        for (var i = 0; i < this.length; i++) {
          var childNodes = this[i].childNodes;

          for (var j = 0; j < childNodes.length; j++) {
            if (!selector) {
              if (childNodes[j].nodeType === 1) {
                children.push(childNodes[j]);
              }
            } else {
              if (childNodes[j].nodeType === 1 && $(childNodes[j]).is(selector)) {
                children.push(childNodes[j]);
              }
            }
          }
        }

        return new Dom($.unique(children));
      },
      remove: function remove() {
        for (var i = 0; i < this.length; i++) {
          if (this[i].parentNode) {
            this[i].parentNode.removeChild(this[i]);
          }
        }

        return this;
      },
      add: function add() {
        var dom = this;
        var i, j;

        for (i = 0; i < arguments.length; i++) {
          var toAdd = $(arguments[i]);

          for (j = 0; j < toAdd.length; j++) {
            dom[dom.length] = toAdd[j];
            dom.length++;
          }
        }

        return dom;
      },
      before: function before(elm) {
        $(elm).insertBefore(this);
        return this;
      },
      after: function after(elm) {
        $(elm).insertAfter(this);
        return this;
      },
      scrollTop: function scrollTop(value) {
        if (!this.length) {
          return;
        }

        var hasScrollTop = 'scrollTop' in this[0];

        if (value === undefined) {
          return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset;
        }

        return this.each(hasScrollTop ? function () {
          this.scrollTop = value;
        } : function () {
          this.scrollTo(this.scrollX, value);
        });
      },
      scrollLeft: function scrollLeft(value) {
        if (!this.length) {
          return;
        }

        var hasScrollLeft = 'scrollLeft' in this[0];

        if (value === undefined) {
          return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset;
        }

        return this.each(hasScrollLeft ? function () {
          this.scrollLeft = value;
        } : function () {
          this.scrollTo(value, this.scrollY);
        });
      },
      contents: function contents() {
        return this.map(function (i, v) {
          return _slice.call(v.childNodes);
        });
      },
      nextUntil: function nextUntil(selector) {
        var n = this,
            array = [];

        while (n.length && !n.filter(selector).length) {
          array.push(n[0]);
          n = n.next();
        }

        return $(array);
      },
      prevUntil: function prevUntil(selector) {
        var n = this,
            array = [];

        while (n.length && !$(n).filter(selector).length) {
          array.push(n[0]);
          n = n.prev();
        }

        return $(array);
      },
      detach: function detach() {
        return this.remove();
      }
    }; // Link to prototype

    $.fn = Dom.prototype;
    return $;
  }(); // Export to local scope


  var $ = Dom; // Export to mobiscroll

  mobiscroll.$ = Dom; // DOM Library Utilites

  $.inArray = function (elem, array, i) {
    return emptyArray.indexOf.call(array, elem, i);
  };

  $.extend = function (target) {
    var deep,
        args = _slice.call(arguments, 1);

    if (typeof target == 'boolean') {
      deep = target;
      target = args.shift();
    }

    target = target || {};
    args.forEach(function (arg) {
      extend(target, arg, deep);
    });
    return target;
  };

  $.isFunction = isFunction;

  $.isArray = function (arr) {
    return Object.prototype.toString.apply(arr) === '[object Array]';
  };

  $.isPlainObject = function (obj) {
    return isObject(obj) && obj !== null && obj !== obj.window && Object.getPrototypeOf(obj) == Object.prototype;
  };

  $.each = function (obj, callback) {
    var i, prop;

    if (!isObject(obj) || !callback) {
      return;
    }

    if ($.isArray(obj) || obj instanceof Dom) {
      // Array
      for (i = 0; i < obj.length; i++) {
        if (callback.call(obj[i], i, obj[i]) === false) {
          break;
        }
      }
    } else {
      // Object
      for (prop in obj) {
        // eslint-disable-next-line no-prototype-builtins
        if (obj.hasOwnProperty(prop) && prop !== 'length') {
          if (callback.call(obj[prop], prop, obj[prop]) === false) {
            break;
          }
        }
      }
    }

    return this;
  };

  $.unique = function (arr) {
    var unique = [];

    for (var i = 0; i < arr.length; i++) {
      if (unique.indexOf(arr[i]) === -1) {
        unique.push(arr[i]);
      }
    }

    return unique;
  };

  $.map = function (elements, callback) {
    var value,
        values = [],
        i,
        key;

    if (likeArray(elements)) {
      for (i = 0; i < elements.length; i++) {
        value = callback(elements[i], i);

        if (value !== null) {
          values.push(value);
        }
      }
    } else {
      for (key in elements) {
        value = callback(elements[key], key);

        if (value !== null) {
          values.push(value);
        }
      }
    }

    return values.length > 0 ? $.fn.concat.apply([], values) : values;
  };

  function noop() {}

  function isString(s) {
    return typeof s === 'string';
  }

  function constrain(val, min, max) {
    return Math.max(min, Math.min(val, max));
  }

  function vibrate(time) {
    if ('vibrate' in navigator) {
      navigator.vibrate(time || 50);
    }
  }

  function getPercent(v, min, max) {
    return (v - min) * 100 / (max - min);
  }

  function getBoolAttr(attr, def, $elm) {
    var v = $elm.attr(attr);
    return v === undefined || v === '' ? def : v === 'true';
  }

  var tapped = 0;
  var allowQuick;

  function preventClick() {
    // Prevent ghost click
    tapped++;
    setTimeout(function () {
      tapped--;
    }, 500);
  }

  function triggerClick(ev, control) {
    // Prevent duplicate triggers on the same element
    // e.g. a form checkbox inside a listview item
    if (control.mbscClick) {
      return;
    }

    var touch = (ev.originalEvent || ev).changedTouches[0],
        evt = document.createEvent('MouseEvents');
    evt.initMouseEvent('click', true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
    evt.isMbscTap = true; // Prevent ionic to bust our click
    // This works for Ionic 1 - 3, not sure about 4

    evt.isIonicTap = true; // This will allow a click fired together with this click
    // We need this, because clicking on a label will trigger a click
    // on the associated input as well, which should not be busted

    allowQuick = true;
    control.mbscChange = true;
    control.mbscClick = true;
    control.dispatchEvent(evt);
    allowQuick = false; // Prevent ghost click

    preventClick();
    setTimeout(function () {
      delete control.mbscClick;
    });
  }

  function getCoord(e, c, page) {
    var ev = e.originalEvent || e,
        prop = (page ? 'page' : 'client') + c; // Multi touch support

    if (ev.targetTouches && ev.targetTouches[0]) {
      return ev.targetTouches[0][prop];
    }

    if (ev.changedTouches && ev.changedTouches[0]) {
      return ev.changedTouches[0][prop];
    }

    return e[prop];
  }

  function getControlType($elm) {
    var attrs = ['switch', 'range', 'rating', 'segmented', 'stepper'];
    var elm = $elm[0];
    var role = $elm.attr('data-role');
    var type = $elm.attr('type') || elm.nodeName.toLowerCase();

    if (/(switch|range|rating|segmented|stepper|select)/.test(role)) {
      type = role;
    } else {
      for (var i = 0; i < attrs.length; i++) {
        if ($elm.is('[mbsc-' + attrs[i] + ']')) {
          type = attrs[i];
        }
      }
    }

    return type;
  }

  function activateControl(control, type, ev) {
    control.focus();

    if (/(button|submit|checkbox|switch|radio)/.test(type)) {
      ev.preventDefault();
    }

    if (!/select/.test(type)) {
      triggerClick(ev, control);
    }
  }

  function tap(that, el, handler, prevent, tolerance, time) {
    var startX,
        startY,
        target,
        moved,
        startTime,
        $ = mobiscroll.$,
        $elm = $(el);
    tolerance = tolerance || 9;

    function onStart(ev) {
      if (!target) {
        // Can't always call preventDefault here, it kills page scroll
        // if (prevent) {
        //     ev.preventDefault();
        // }
        target = this;
        startX = getCoord(ev, 'X');
        startY = getCoord(ev, 'Y');
        moved = false;
        startTime = new Date();
      }
    }

    function onMove(ev) {
      // If movement is more than 20px, don't fire the click event handler
      if (target && !moved && (Math.abs(getCoord(ev, 'X') - startX) > tolerance || Math.abs(getCoord(ev, 'Y') - startY) > tolerance)) {
        moved = true;
      }
    }

    function onEnd(ev) {
      if (target) {
        if (time && new Date() - startTime < 100 || !moved) {
          // ev.preventDefault();
          // handler.call(target, ev, that);
          triggerClick(ev, ev.target);
        } else {
          preventClick();
        }

        target = false;
      }
    }

    function onClick(ev) {
      if (prevent) {
        ev.preventDefault();
      } // If handler was not called on touchend, call it on click;


      handler.call(this, ev, that);
    }

    function onCancel() {
      target = false;
    }

    $elm.each(function (i, elm) {
      if (that.settings.tap) {
        listen(elm, 'touchstart', onStart, {
          passive: true
        });
        listen(elm, 'touchcancel', onCancel);
        listen(elm, 'touchmove', onMove, {
          passive: true
        });
        listen(elm, 'touchend', onEnd);
      }

      listen(elm, 'click', onClick);

      elm.__mbscOff = function () {
        unlisten(elm, 'touchstart', onStart, {
          passive: true
        });
        unlisten(elm, 'touchcancel', onCancel);
        unlisten(elm, 'touchmove', onMove, {
          passive: true
        });
        unlisten(elm, 'touchend', onEnd);
        unlisten(elm, 'click', onClick);
        delete elm.__mbscOff;
      };
    });
  }

  function tapOff($elm) {
    if ($elm && $elm[0] && $elm[0].__mbscOff) {
      $elm[0].__mbscOff();
    }
  } // Prevent standard behaviour on body click


  function bustClick(ev) {
    // Textarea needs the mousedown event
    if (tapped && !allowQuick && !ev.isMbscTap && !(ev.target.nodeName == 'TEXTAREA' && ev.type == 'mousedown')) {
      ev.stopPropagation();
      ev.preventDefault();
      return false;
    }
  }

  if (isBrowser) {
    ['mouseover', 'mousedown', 'mouseup', 'click'].forEach(function (ev) {
      document.addEventListener(ev, bustClick, true);
    });

    if (os == 'android' && majorVersion < 5) {
      document.addEventListener('change', function (ev) {
        if (tapped && ev.target.type == 'checkbox' && !ev.target.mbscChange) {
          ev.stopPropagation();
          ev.preventDefault();
        }

        delete ev.target.mbscChange;
      }, true);
    }
  }

  /*!
   * Mobiscroll v4.10.9
   * http://mobiscroll.com
   *
   *
   * Copyright 2010-2018, Acid Media
   *
   */

  function getWidth(el) {
    return el[0].innerWidth || el.innerWidth();
  }

  function getThemeName(s) {
    var themeName = s.theme,
        themeVariant = s.themeVariant;

    if (themeName == 'auto' || !themeName) {
      themeName = ms.autoTheme;
    }

    if (themeName == 'default') {
      themeName = 'mobiscroll';
    }

    if ((themeVariant === 'dark' || isDark && themeVariant === 'auto') && ms.themes.form[themeName + '-dark']) {
      themeName = themeName + '-dark';
    } else if (themeVariant === 'light' && /.+-dark$/.test(themeName)) {
      themeName = themeName.replace(/-dark$/, '');
    }

    return themeName;
  }

  function autoInit(selector, Component, hasRefresh) {
    if (isBrowser) {
      $$1(function () {
        $$1(selector).each(function () {
          new Component(this, {});
        });
        $$1(document).on('mbsc-enhance', function (ev, settings) {
          if ($$1(ev.target).is(selector)) {
            new Component(ev.target, settings || {});
          } else {
            $$1(selector, ev.target).each(function () {
              new Component(this, settings || {});
            });
          }
        });

        if (hasRefresh) {
          $$1(document).on('mbsc-refresh', function (ev) {
            var inst;

            if ($$1(ev.target).is(selector)) {
              inst = instances[ev.target.id];

              if (inst) {
                inst.refresh();
              }
            } else {
              $$1(selector, ev.target).each(function () {
                inst = instances[this.id];

                if (inst) {
                  inst.refresh();
                }
              });
            }
          });
        }
      });
    }
  }

  var ms,
      $$1 = mobiscroll.$,
      id = +new Date(),
      instances = {},
      classes = {},
      empty = {},
      breakpoints = {
    xsmall: 0,
    small: 576,
    medium: 768,
    large: 992,
    xlarge: 1200
  },
      extend$1 = $$1.extend;
  extend$1(util, {
    getCoord: getCoord,
    preventClick: preventClick,
    vibrate: vibrate
  });
  ms = extend$1(mobiscroll, {
    $: $$1,
    version: '4.10.9',
    autoTheme: 'mobiscroll',
    themes: {
      form: {},
      page: {},
      frame: {},
      scroller: {},
      listview: {},
      navigation: {},
      progress: {},
      card: {}
    },
    platform: {
      name: os,
      majorVersion: majorVersion,
      minorVersion: minorVersion
    },
    i18n: {},
    instances: instances,
    classes: classes,
    util: util,
    settings: {},
    setDefaults: function setDefaults(o) {
      extend$1(this.settings, o);
    },
    customTheme: function customTheme(name, baseTheme) {
      var i,
          themes = mobiscroll.themes,
          comps = ['frame', 'scroller', 'listview', 'navigation', 'form', 'page', 'progress', 'card'];

      for (i = 0; i < comps.length; i++) {
        themes[comps[i]][name] = extend$1({}, themes[comps[i]][baseTheme], {
          baseTheme: baseTheme
        });
      }
    }
  });

  var Base = function Base(el, settings) {
    var ctx,
        lang,
        preset,
        resp,
        s,
        theme,
        themeName,
        trigger,
        defaults,
        that = this;
    that.settings = {};
    that.element = el;
    that._init = noop;
    that._destroy = noop;
    that._processSettings = noop;

    that._checkResp = function (width) {
      if (that && that._responsive) {
        var newResp = getResponsiveSettings(width);

        if (resp !== newResp) {
          resp = newResp;
          that.init({});
          return true;
        }
      }
    };

    that._getRespCont = function () {
      return $$1(s.context == 'body' ? window : s.context);
    };

    that.init = function (newSettings, newValue) {
      var key, value; // In case of settings update save the old value

      if (newSettings && that.getVal) {
        value = that.getVal();
      } // Reset settings object


      for (key in that.settings) {
        delete that.settings[key];
      }

      s = that.settings; // Update original user settings

      extend$1(settings, newSettings); // Load user defaults

      if (that._hasDef) {
        defaults = ms.settings;
      } // Create settings object


      extend$1(s, that._defaults, defaults, settings);
      ctx = that._getRespCont();

      if (that._responsive) {
        if (!resp) {
          resp = getResponsiveSettings();
        }

        extend$1(s, resp);
      } // Get theme defaults


      if (that._hasTheme) {
        themeName = getThemeName(s);
        settings.theme = themeName;
        theme = ms.themes[that._class] ? ms.themes[that._class][themeName] : {};
      } // Get language defaults


      if (that._hasLang) {
        lang = ms.i18n[s.lang];
      } // Update settings object


      extend$1(s, theme, lang, defaults, settings, resp);

      that._processSettings(resp || {}); // Load preset settings


      if (that._presets) {
        preset = that._presets[s.preset];

        if (preset) {
          preset = preset.call(el, that, settings, resp);
          extend$1(s, preset, settings, resp);
        }
      }

      that._init(newSettings); // In case of settings update reset the value.
      // This is needed to adapt the value for the updated settings
      // E.g. min/max, date format, etc.


      if (newSettings && that.setVal) {
        that.setVal(newValue === undefined ? value : newValue, true);
      }

      trigger('onInit');
    };

    that.destroy = function () {
      if (that) {
        that._destroy();

        trigger('onDestroy'); // Delete scroller instance

        delete instances[el.id];
        that = null;
      }
    };
    /**
     * Attach tap event to the given element.
     */


    that.tap = function (el, handler, prevent, tolerance, time) {
      tap(that, el, handler, prevent, tolerance, time);
    };
    /**
     * Triggers an event
     */


    that.trigger = function (name, ev) {
      var ret,
          i,
          v,
          s = [defaults, theme, preset, settings];

      for (i = 0; i < 4; i++) {
        v = s[i];

        if (v && v[name]) {
          ret = v[name].call(el, ev || {}, that);
        }
      }

      return ret;
    };
    /**
     * Sets one ore more options.
     */


    that.option = function (opt, value, newValue) {
      var obj = {},
          // preserve settings that are possible to change runtime
      dynamic = ['data', 'invalid', 'valid', 'readonly'];

      if (/calendar|eventcalendar|range/.test(s.preset)) {
        dynamic.push('marked', 'labels', 'colors');
      }

      if (typeof opt === 'object') {
        obj = opt;
      } else {
        obj[opt] = value;
      }

      dynamic.forEach(function (v) {
        settings[v] = s[v];
      });
      that.init(obj, newValue);
    };
    /**
     * Returns the mobiscroll instance.
     */


    that.getInst = function () {
      return that;
    };

    settings = settings || {};
    trigger = that.trigger;

    function getResponsiveSettings(w) {
      var result = empty,
          width;

      if (s.responsive) {
        width = w || getWidth(ctx);
        $$1.each(s.responsive, function (key, value) {
          if (width >= (value.breakpoint || breakpoints[key])) {
            result = value;
          }
        });
      }

      return result;
    }

    function construct() {
      $$1(el).addClass('mbsc-comp'); // Autogenerate id

      if (!el.id) {
        el.id = 'mobiscroll' + ++id;
      } else if (instances[el.id]) {
        instances[el.id].destroy();
      } // Save instance


      instances[el.id] = that;
      that.__ready = true;
    }

    if (!that.__ready) {
      construct();
    }
  };

  var Observable = function () {
    function Observable() {
      this.keyCount = 0;
      this.subscribers = new Map();
    }

    Observable.prototype.subscribe = function (handler) {
      var key = this.keyCount++;
      this.subscribers.set(key, handler);
      return key;
    };

    Observable.prototype.unsubscribe = function (handler) {
      if (typeof handler === 'number') {
        this.subscribers.delete(handler);
      } else {
        var foundKey_1 = null;
        this.subscribers.forEach(function (fn, key) {
          if (fn === handler) {
            foundKey_1 = key;
          }
        });
        this.subscribers.delete(foundKey_1);
      }
    };

    Observable.prototype.next = function (value) {
      this.subscribers.forEach(function (handler) {
        handler(value);
      });
    };

    return Observable;
  }();

  var MbscOptionsService = (function () {
      function MbscOptionsService() {
      }
      Object.defineProperty(MbscOptionsService.prototype, "options", {
          get: function () {
              return this._options;
          },
          set: function (o) {
              this._options = o;
          },
          enumerable: true,
          configurable: true
      });
      MbscOptionsService.ctorParameters = function () { return []; };
MbscOptionsService.ɵfac = function MbscOptionsService_Factory(t) { return new (t || MbscOptionsService)(); };
MbscOptionsService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: MbscOptionsService, factory: function (t) { return MbscOptionsService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscOptionsService, [{
        type: core.Injectable
    }], function () { return []; }, null); })();
      return MbscOptionsService;
  }());
  var MbscInputService = (function () {
      function MbscInputService() {
          this._controlSet = false;
          this._componentRef = undefined;
      }
      Object.defineProperty(MbscInputService.prototype, "isControlSet", {
          get: function () {
              return this._controlSet;
          },
          set: function (v) {
              this._controlSet = v;
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscInputService.prototype, "input", {
          get: function () {
              return this._componentRef;
          },
          set: function (v) {
              this._componentRef = v;
          },
          enumerable: true,
          configurable: true
      });
      MbscInputService.ctorParameters = function () { return []; };
MbscInputService.ɵfac = function MbscInputService_Factory(t) { return new (t || MbscInputService)(); };
MbscInputService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: MbscInputService, factory: function (t) { return MbscInputService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscInputService, [{
        type: core.Injectable
    }], function () { return []; }, null); })();
      return MbscInputService;
  }());
  var MbscBase = (function () {
      function MbscBase(initialElem, zone) {
          this.initialElem = initialElem;
          this.zone = zone;
          this.options = {};
          this.onInit = new core.EventEmitter();
          this.onDestroy = new core.EventEmitter();
          this.inlineOptionsObj = {};
          this.pendingValue = undefined;
          this.themeClassesSet = false;
          this.instance = null;
          this.element = null;
          this.inlineOptionsObj.zone = zone;
      }
      MbscBase.prototype.getInlineEvents = function () {
          var _this = this;
          var _loop_1 = function (prop) {
              if (this_1[prop] instanceof (core.EventEmitter) && (!this_1.options || !(this_1.options[prop]))) {
                  this_1.inlineOptionsObj[prop] = function (event, inst) {
                      event.inst = inst;
                      _this[prop].emit(event);
                  };
              }
          };
          var this_1 = this;
          for (var prop in this) {
              _loop_1(prop);
          }
      };
      MbscBase.prototype.setThemeClasses = function () {
          $$1(this.initialElem.nativeElement).addClass(this.getThemeClasses());
          this.themeClassesSet = true;
      };
      MbscBase.prototype.clearThemeClasses = function () {
          $$1(this.initialElem.nativeElement).removeClass(this.getThemeClasses());
      };
      MbscBase.prototype.getThemeClasses = function () {
          var s = this.instance.settings;
          return 'mbsc-control-ng mbsc-' + s.theme + (s.baseTheme ? ' mbsc-' + s.baseTheme : '');
      };
      MbscBase.prototype.setElement = function () {
          this.element = this.initialElem.nativeElement;
          var contentInput = $$1('input', this.initialElem.nativeElement);
          if (contentInput.length) {
              this.element = contentInput[0];
          }
      };
      MbscBase.prototype.ngAfterViewInit = function () {
          this.setElement();
          this.startInit();
      };
      MbscBase.prototype.startInit = function () {
          var _this = this;
          this.getInlineEvents();
          var ionInput = this.getIonInput();
          if (ionInput && (ionInput.getInputElement || ionInput.then) && this.element.nodeName !== "INPUT") {
              if (ionInput.getInputElement) {
                  ionInput.getInputElement().then(function (inp) {
                      _this.setElement();
                      _this.initControl();
                  });
              }
              else {
                  ionInput.then(function (ionInpComponent) {
                      ionInpComponent
                          .getInputElement()
                          .then(function (inp) {
                          _this.setElement();
                          _this.initControl();
                      });
                  });
              }
          }
          else if (!this.instance) {
              this.initControl();
          }
      };
      MbscBase.prototype.getIonInput = function () {
          var v = this._view;
          var native = this.initialElem.nativeElement;
          var ionInputNode = native.nodeName === "ION-INPUT";
          var inp1 = ionInputNode && v && v._data && v._data.componentView && v._data.componentView.component;
          var inp2 = ionInputNode && native.componentOnReady && native.componentOnReady();
          return inp1 || inp2;
      };
      MbscBase.prototype.initControl = function () { };
      MbscBase.prototype.ngOnDestroy = function () {
          if (this.instance) {
              this.instance.destroy();
          }
      };
      MbscBase.prototype.updateOptions = function (newOptions, optionChanged, invalidChanged, dataChanged) {
          var _this = this;
          if (optionChanged || invalidChanged) {
              setTimeout(function () {
                  if (newOptions.theme && _this.themeClassesSet) {
                      _this.clearThemeClasses();
                  }
                  _this.instance.option(newOptions, undefined, _this.pendingValue);
                  if (newOptions.theme && _this.themeClassesSet) {
                      _this.setThemeClasses();
                  }
              });
          }
          else if (dataChanged) {
              this.refreshData(this.data);
          }
          else if (this.instance.redraw) {
              this.instance.redraw();
          }
      };
      MbscBase.prototype.ngOnChanges = function (changes) {
          var optionChange = false, cloneChange = false, invalidChange = false, dataChange = false, newOptions = {};
          for (var prop in changes) {
              if (!changes[prop].firstChange && prop !== 'options' && prop !== 'value') {
                  if (this.cloneDictionary && this.cloneDictionary[prop]) {
                      this.makeClone(prop, changes[prop].currentValue);
                      if (this.instance) {
                          this.instance.settings[prop] = changes[prop].currentValue;
                      }
                      if (prop == 'invalid') {
                          invalidChange = true;
                      }
                      if (prop == 'data') {
                          dataChange = true;
                      }
                      cloneChange = true;
                  }
                  else {
                      newOptions[prop] = changes[prop].currentValue;
                      optionChange = true;
                  }
              }
              else if (!changes[prop].firstChange && prop !== 'value') {
                  newOptions = extend$1(changes[prop].currentValue, newOptions);
                  optionChange = true;
              }
              else if (changes[prop].firstChange) {
                  if (prop !== 'options' && prop !== 'value') {
                      this.inlineOptionsObj[prop] = changes[prop].currentValue;
                  }
              }
          }
          if (cloneChange) {
              extend$1(newOptions, this.cloneDictionary);
          }
          if (optionChange || cloneChange) {
              this.updateOptions(newOptions, optionChange, invalidChange, dataChange);
          }
      };
      MbscBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
      ]; };
      MbscBase.propDecorators = {
          'options': [{ type: core.Input, args: ['mbsc-options',] },],
          'cssClass': [{ type: core.Input },],
          'theme': [{ type: core.Input },],
          'themeVariant': [{ type: core.Input },],
          'lang': [{ type: core.Input },],
          'rtl': [{ type: core.Input },],
          'responsive': [{ type: core.Input },],
          'onInit': [{ type: core.Output },],
          'onDestroy': [{ type: core.Output },],
      };
MbscBase.ɵfac = function MbscBase_Factory(t) { return new (t || MbscBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscBase, selectors: [["", "mbsc-b", ""]], inputs: { options: ["mbsc-options", "options"], cssClass: "cssClass", theme: "theme", themeVariant: "themeVariant", lang: "lang", rtl: "rtl", responsive: "responsive" }, outputs: { onInit: "onInit", onDestroy: "onDestroy" }, features: [ɵngcc0.ɵɵNgOnChangesFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }]; }, { options: [{
            type: core.Input,
            args: ['mbsc-options']
        }], onInit: [{
            type: core.Output
        }], onDestroy: [{
            type: core.Output
        }], cssClass: [{
            type: core.Input
        }], theme: [{
            type: core.Input
        }], themeVariant: [{
            type: core.Input
        }], lang: [{
            type: core.Input
        }], rtl: [{
            type: core.Input
        }], responsive: [{
            type: core.Input
        }] }); })();
      return MbscBase;
  }());
  var MbscValueBase = (function (_super) {
      __extends(MbscValueBase, _super);
      function MbscValueBase(initialElem, zone) {
          var _this = _super.call(this, initialElem, zone) || this;
          _this.initialValue = undefined;
          return _this;
      }
      MbscValueBase.prototype.setNewValue = function (v) { };
      MbscValueBase.prototype.setNewValueProxy = function (v) {
          if (!this.instance) {
              this.initialValue = v;
          }
          this.setNewValue(v);
      };
      MbscValueBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
      ]; };
MbscValueBase.ɵfac = function MbscValueBase_Factory(t) { return new (t || MbscValueBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscValueBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscValueBase, selectors: [["", "mbsc-v-b", ""]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscValueBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-v-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }]; }, null); })();
      return MbscValueBase;
  }(MbscBase));
  var MbscCloneBase = (function (_super) {
      __extends(MbscCloneBase, _super);
      function MbscCloneBase(initElem, zone) {
          var _this = _super.call(this, initElem, zone) || this;
          _this.cloneDictionary = {};
          return _this;
      }
      MbscCloneBase.prototype.makeClone = function (setting, value) {
          if (value) {
              this.cloneDictionary[setting] = [];
              for (var i = 0; i < value.length; i++) {
                  this.cloneDictionary[setting].push(value[i]);
              }
          }
          else {
              this.cloneDictionary[setting] = value;
          }
      };
      MbscCloneBase.prototype.ngDoCheck = function () {
          var changed = false, data = false, invalid = false;
          for (var key in this.cloneDictionary) {
              if (this[key] !== undefined && !deepEqualsArray(this[key], this.cloneDictionary[key])) {
                  this.makeClone(key, this[key]);
                  this.instance.settings[key] = this[key];
                  changed = true;
                  if (key == 'invalid') {
                      invalid = true;
                  }
                  if (key == 'data') {
                      data = true;
                  }
              }
          }
          if (changed && this.instance) {
              this.updateOptions(this.cloneDictionary, false, invalid, data);
          }
      };
      MbscCloneBase.prototype.ngOnInit = function () {
          for (var key in this.cloneDictionary) {
              this.makeClone(key, this[key]);
          }
      };
      MbscCloneBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
      ]; };
MbscCloneBase.ɵfac = function MbscCloneBase_Factory(t) { return new (t || MbscCloneBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscCloneBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscCloneBase, selectors: [["", "mbsc-c-b", ""]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscCloneBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-c-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }]; }, null); })();
      return MbscCloneBase;
  }(MbscValueBase));
  var MbscControlBase = (function (_super) {
      __extends(MbscControlBase, _super);
      function MbscControlBase(initialElement, zone, control, _inputService, _view) {
          var _this = _super.call(this, initialElement, zone) || this;
          _this.control = control;
          _this._inputService = _inputService;
          _this._view = _view;
          _this._needsTimeout = true;
          _this.onChange = function () { };
          _this.onTouch = function () { };
          _this.onChangeEmitter = new core.EventEmitter();
          _this.oldAccessor = null;
          _this.overwriteAccessor();
          if (_inputService) {
              _inputService.isControlSet = true;
          }
          return _this;
      }
      Object.defineProperty(MbscControlBase.prototype, "optionExtensions", {
          get: function () {
              var _this = this;
              var externalOnClose = this.options && this.options.onClose;
              var externalOnFill = this.options && this.options.onFill;
              var onCloseEmitter = this.onClose;
              return {
                  onFill: function (event, inst) {
                      if (_this.oldAccessor) {
                          _this.oldAccessor.writeValue(event.valueText);
                      }
                      else {
                          var ionInput = _this.getIonInput();
                          if (ionInput) {
                              ionInput.value = event.valueText;
                          }
                      }
                      if (externalOnFill) {
                          externalOnFill(event, inst);
                      }
                  },
                  onClose: function (event, inst) {
                      _this.onTouch();
                      if (externalOnClose) {
                          externalOnClose(event, inst);
                      }
                      if (onCloseEmitter) {
                          event.inst = inst;
                          onCloseEmitter.emit(event);
                      }
                  }
              };
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscControlBase.prototype, "enableManualEdit", {
          get: function () {
              var nsf = this.showOnFocus === false || this.options.showOnFocus === false, nst = this.showOnTap === false || this.options.showOnTap === false;
              return nsf && nst;
          },
          enumerable: true,
          configurable: true
      });
      MbscControlBase.prototype.handleChange = function (element) {
          var that = this;
          $$1(element || this.element).on('change', function () {
              that.zone.run(function () {
                  var elmValue = that.element.value;
                  var instValue = that.instance._value;
                  if (elmValue !== instValue && (instValue !== null || elmValue !== '') && that.enableManualEdit) {
                      that.instance.setVal(elmValue, true, true);
                  }
                  else {
                      var value = that.instance.getVal();
                      if (that.control) {
                          if (!valueEquals(value, that.control.model)) {
                              that.onChange(value);
                              that.control.control.patchValue(value);
                          }
                      }
                      else {
                          that.onChangeEmitter.emit(value);
                      }
                  }
              });
          });
          function valueEquals(v1, v2) {
              if (v1 === v2) {
                  return true;
              }
              if (v1 instanceof Date && v2 instanceof Date) {
                  return (+v1) === (+v2);
              }
              return false;
          }
      };
      MbscControlBase.prototype.overwriteAccessor = function () {
          if (this.control) {
              if (this.control.valueAccessor !== this) {
                  this.oldAccessor = this.control.valueAccessor;
              }
              this.control.valueAccessor = this;
          }
      };
      MbscControlBase.prototype.ngAfterViewInit = function () {
          _super.prototype.ngAfterViewInit.call(this);
          this.handleChange();
          this.overwriteAccessor();
          if (this.control && this.control._setUpControl) {
              this.control._setUpControl();
          }
      };
      MbscControlBase.prototype.registerOnChange = function (fn) {
          this.onChange = fn;
      };
      MbscControlBase.prototype.registerOnTouched = function (fn) {
          this.onTouch = fn;
      };
      MbscControlBase.prototype.setDisabledState = function (isDisabled) {
          this.disabled = isDisabled;
          if (this.oldAccessor && this.oldAccessor.setDisabledState) {
              this.oldAccessor.setDisabledState(isDisabled);
          }
          if (this.instance && this.instance.disable && this.instance.enable) {
              if (isDisabled) {
                  this.instance.disable();
              }
              else {
                  this.instance.enable();
              }
          }
      };
      MbscControlBase.prototype.writeValue = function (v) {
          var _this = this;
          if (this._needsTimeout) {
              this.pendingValue = v;
              setTimeout(function () {
                  _this.pendingValue = undefined;
                  _this.setNewValueProxy(v);
              });
          }
          else {
              this.setNewValueProxy(v);
          }
      };
      MbscControlBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
          { type: forms.NgControl, },
          { type: MbscInputService, },
          { type: core.ViewContainerRef, },
      ]; };
      MbscControlBase.propDecorators = {
          'labelStyle': [{ type: core.Input, args: ['label-style',] },],
          'inputStyle': [{ type: core.Input, args: ['input-style',] },],
          'showOnFocus': [{ type: core.Input },],
          'showOnTap': [{ type: core.Input },],
          'disabled': [{ type: core.Input },],
      };
MbscControlBase.ɵfac = function MbscControlBase_Factory(t) { return new (t || MbscControlBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl), ɵngcc0.ɵɵdirectiveInject(MbscInputService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef)); };
MbscControlBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscControlBase, selectors: [["", "mbsc-cc-b", ""]], inputs: { disabled: "disabled", labelStyle: ["label-style", "labelStyle"], inputStyle: ["input-style", "inputStyle"], showOnFocus: "showOnFocus", showOnTap: "showOnTap" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscControlBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-cc-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: ɵngcc1.NgControl }, { type: MbscInputService }, { type: ɵngcc0.ViewContainerRef }]; }, { disabled: [{
            type: core.Input
        }], labelStyle: [{
            type: core.Input,
            args: ['label-style']
        }], inputStyle: [{
            type: core.Input,
            args: ['input-style']
        }], showOnFocus: [{
            type: core.Input
        }], showOnTap: [{
            type: core.Input
        }] }); })();
      return MbscControlBase;
  }(MbscCloneBase));
  var MbscFrameBase = (function (_super) {
      __extends(MbscFrameBase, _super);
      function MbscFrameBase(initialElem, zone, control, _inputService, view) {
          var _this = _super.call(this, initialElem, zone, control, _inputService, view) || this;
          _this.onBeforeClose = new core.EventEmitter();
          _this.onBeforeShow = new core.EventEmitter();
          _this.onCancel = new core.EventEmitter();
          _this.onClose = new core.EventEmitter();
          _this.onFill = new core.EventEmitter();
          _this.onMarkupReady = new core.EventEmitter();
          _this.onPosition = new core.EventEmitter();
          _this.onShow = new core.EventEmitter();
          return _this;
      }
      Object.defineProperty(MbscFrameBase.prototype, "inline", {
          get: function () {
              return (this.display || (this.options && this.options.display)) === 'inline';
          },
          enumerable: true,
          configurable: true
      });
      MbscFrameBase.prototype.ngOnInit = function () {
          this.cloneDictionary.invalid = [];
          this.cloneDictionary.valid = [];
          _super.prototype.ngOnInit.call(this);
      };
      MbscFrameBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
          { type: forms.NgControl, },
          { type: MbscInputService, },
          { type: core.ViewContainerRef, },
      ]; };
      MbscFrameBase.propDecorators = {
          'options': [{ type: core.Input },],
          'dropdown': [{ type: core.Input },],
          'anchor': [{ type: core.Input },],
          'animate': [{ type: core.Input },],
          'buttons': [{ type: core.Input },],
          'closeOnOverlayTap': [{ type: core.Input },],
          'context': [{ type: core.Input },],
          'display': [{ type: core.Input },],
          'showInput': [{ type: core.Input },],
          'focusOnClose': [{ type: core.Input },],
          'focusTrap': [{ type: core.Input },],
          'headerText': [{ type: core.Input },],
          'scrollLock': [{ type: core.Input },],
          'touchUi': [{ type: core.Input },],
          'onBeforeClose': [{ type: core.Output },],
          'onBeforeShow': [{ type: core.Output },],
          'onCancel': [{ type: core.Output },],
          'onClose': [{ type: core.Output },],
          'onFill': [{ type: core.Output },],
          'onMarkupReady': [{ type: core.Output },],
          'onPosition': [{ type: core.Output },],
          'onShow': [{ type: core.Output },],
      };
MbscFrameBase.ɵfac = function MbscFrameBase_Factory(t) { return new (t || MbscFrameBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl), ɵngcc0.ɵɵdirectiveInject(MbscInputService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef)); };
MbscFrameBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscFrameBase, selectors: [["", "mbsc-fr-b", ""]], inputs: { options: "options", dropdown: "dropdown", anchor: "anchor", animate: "animate", buttons: "buttons", closeOnOverlayTap: "closeOnOverlayTap", context: "context", display: "display", showInput: "showInput", focusOnClose: "focusOnClose", focusTrap: "focusTrap", headerText: "headerText", scrollLock: "scrollLock", touchUi: "touchUi" }, outputs: { onBeforeClose: "onBeforeClose", onBeforeShow: "onBeforeShow", onCancel: "onCancel", onClose: "onClose", onFill: "onFill", onMarkupReady: "onMarkupReady", onPosition: "onPosition", onShow: "onShow" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscFrameBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-fr-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: ɵngcc1.NgControl }, { type: MbscInputService }, { type: ɵngcc0.ViewContainerRef }]; }, { options: [{
            type: core.Input
        }], dropdown: [{
            type: core.Input
        }], anchor: [{
            type: core.Input
        }], animate: [{
            type: core.Input
        }], buttons: [{
            type: core.Input
        }], closeOnOverlayTap: [{
            type: core.Input
        }], context: [{
            type: core.Input
        }], display: [{
            type: core.Input
        }], showInput: [{
            type: core.Input
        }], focusOnClose: [{
            type: core.Input
        }], focusTrap: [{
            type: core.Input
        }], headerText: [{
            type: core.Input
        }], scrollLock: [{
            type: core.Input
        }], touchUi: [{
            type: core.Input
        }], onBeforeClose: [{
            type: core.Output
        }], onBeforeShow: [{
            type: core.Output
        }], onCancel: [{
            type: core.Output
        }], onClose: [{
            type: core.Output
        }], onFill: [{
            type: core.Output
        }], onMarkupReady: [{
            type: core.Output
        }], onPosition: [{
            type: core.Output
        }], onShow: [{
            type: core.Output
        }] }); })();
      return MbscFrameBase;
  }(MbscControlBase));
  var MbscScrollerBase = (function (_super) {
      __extends(MbscScrollerBase, _super);
      function MbscScrollerBase(initialElement, zone, control, _inputService, view) {
          var _this = _super.call(this, initialElement, zone, control, _inputService, view) || this;
          _this.onWheelChange = new core.EventEmitter();
          _this.onSet = new core.EventEmitter();
          _this.onItemTap = new core.EventEmitter();
          _this.onClear = new core.EventEmitter();
          return _this;
      }
      MbscScrollerBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
          { type: forms.NgControl, },
          { type: MbscInputService, },
          { type: core.ViewContainerRef, },
      ]; };
      MbscScrollerBase.propDecorators = {
          'circular': [{ type: core.Input },],
          'height': [{ type: core.Input },],
          'layout': [{ type: core.Input },],
          'maxWidth': [{ type: core.Input },],
          'minWidth': [{ type: core.Input },],
          'multiline': [{ type: core.Input },],
          'readonly': [{ type: core.Input },],
          'rows': [{ type: core.Input },],
          'showLabel': [{ type: core.Input },],
          'showScrollArrows': [{ type: core.Input },],
          'wheels': [{ type: core.Input },],
          'width': [{ type: core.Input },],
          'validate': [{ type: core.Input },],
          'cancelText': [{ type: core.Input },],
          'clearText': [{ type: core.Input },],
          'selectedText': [{ type: core.Input },],
          'setText': [{ type: core.Input },],
          'formatValue': [{ type: core.Input },],
          'parseValue': [{ type: core.Input },],
          'onWheelChange': [{ type: core.Output, args: ['onChange',] },],
          'onSet': [{ type: core.Output },],
          'onItemTap': [{ type: core.Output },],
          'onClear': [{ type: core.Output },],
      };
MbscScrollerBase.ɵfac = function MbscScrollerBase_Factory(t) { return new (t || MbscScrollerBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl), ɵngcc0.ɵɵdirectiveInject(MbscInputService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef)); };
MbscScrollerBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscScrollerBase, selectors: [["", "mbsc-s-b", ""]], inputs: { circular: "circular", height: "height", layout: "layout", maxWidth: "maxWidth", minWidth: "minWidth", multiline: "multiline", readonly: "readonly", rows: "rows", showLabel: "showLabel", showScrollArrows: "showScrollArrows", wheels: "wheels", width: "width", validate: "validate", cancelText: "cancelText", clearText: "clearText", selectedText: "selectedText", setText: "setText", formatValue: "formatValue", parseValue: "parseValue" }, outputs: { onWheelChange: "onChange", onSet: "onSet", onItemTap: "onItemTap", onClear: "onClear" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscScrollerBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-s-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: ɵngcc1.NgControl }, { type: MbscInputService }, { type: ɵngcc0.ViewContainerRef }]; }, { circular: [{
            type: core.Input
        }], height: [{
            type: core.Input
        }], layout: [{
            type: core.Input
        }], maxWidth: [{
            type: core.Input
        }], minWidth: [{
            type: core.Input
        }], multiline: [{
            type: core.Input
        }], readonly: [{
            type: core.Input
        }], rows: [{
            type: core.Input
        }], showLabel: [{
            type: core.Input
        }], showScrollArrows: [{
            type: core.Input
        }], wheels: [{
            type: core.Input
        }], width: [{
            type: core.Input
        }], validate: [{
            type: core.Input
        }], cancelText: [{
            type: core.Input
        }], clearText: [{
            type: core.Input
        }], selectedText: [{
            type: core.Input
        }], setText: [{
            type: core.Input
        }], formatValue: [{
            type: core.Input
        }], parseValue: [{
            type: core.Input
        }], onWheelChange: [{
            type: core.Output,
            args: ['onChange']
        }], onSet: [{
            type: core.Output
        }], onItemTap: [{
            type: core.Output
        }], onClear: [{
            type: core.Output
        }] }); })();
      return MbscScrollerBase;
  }(MbscFrameBase));
  var MbscBaseModule = (function () {
      function MbscBaseModule() {
      }
      MbscBaseModule.ctorParameters = function () { return []; };
MbscBaseModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: MbscBaseModule });
MbscBaseModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function MbscBaseModule_Factory(t) { return new (t || MbscBaseModule)(); }, imports: [[common.CommonModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MbscBaseModule, { declarations: [MbscBase, MbscValueBase, MbscCloneBase, MbscControlBase], imports: [ɵngcc2.CommonModule] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscBaseModule, [{
        type: core.NgModule,
        args: [{
                imports: [common.CommonModule],
                declarations: [MbscBase, MbscValueBase, MbscCloneBase, MbscControlBase]
            }]
    }], function () { return []; }, null); })();
      return MbscBaseModule;
  }());
  function deepEqualsArray(a1, a2) {
      if (a1 === a2) {
          return true;
      }
      else if (!a1 || !a2 || a1.length !== a2.length) {
          return false;
      }
      else {
          for (var i = 0; i < a1.length; i++) {
              if (a1[i] !== a2[i]) {
                  return false;
              }
          }
          return true;
      }
  }
  function emptyOrTrue(val) {
      return (typeof (val) === 'string' && (val === 'true' || val === '')) || !!val;
  }

  function _inheritsLoose(subClass, superClass) {
    subClass.prototype = Object.create(superClass.prototype);
    subClass.prototype.constructor = subClass;
    subClass.__proto__ = superClass;
  }

  function _assertThisInitialized(self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  }

  var wrapClass = 'mbsc-input-wrap';
  var events = ['touchend', 'touchcancel', 'mousedown', 'mousemove', 'mouseup', 'mouseleave'];
  var defaults = {
    tap: hasGhostClick
  };
  var $active;

  function addIcon($control, ic) {
    var icons = {},
        control = $control[0],
        $parent = $control.parent(),
        errorMsg = $parent.find('.mbsc-err-msg'),
        align = $control.attr('data-icon-align') || 'left',
        icon = $control.attr('data-icon');

    if ($parent.hasClass(wrapClass)) {
      $parent = $parent.parent();
    } else {
      // Wrap input
      $$1('<span class="' + wrapClass + '"></span>').insertAfter($control).append($control);
    }

    if (errorMsg) {
      $parent.find('.' + wrapClass).append(errorMsg);
    }

    if (icon) {
      if (icon.indexOf('{') !== -1) {
        icons = JSON.parse(icon);
      } else {
        icons[align] = icon;
      }
    }

    if (control.type == 'file') {
      // Set icon
      icons.right = $control.attr('data-icon-upload') || 'upload';
    }

    if (icon || ic) {
      extend$1(icons, ic);
      $parent.addClass((icons.right ? 'mbsc-ic-right ' : '') + (icons.left ? ' mbsc-ic-left' : '')).find('.' + wrapClass).append('<span class="mbsc-input-fill"></span>').append(icons.left ? '<span class="mbsc-input-ic mbsc-left-ic mbsc-ic mbsc-ic-' + icons.left + '"></span>' : '').append(icons.right ? '<span class="mbsc-input-ic mbsc-right-ic mbsc-ic mbsc-ic-' + icons.right + '"></span>' : '');
    }
  }

  function addIconToggle(that, $parent, $control) {
    var icons = {},
        control = $control[0],
        toggle = $control.attr('data-password-toggle'),
        iconShow = $control.attr('data-icon-show') || 'eye',
        iconHide = $control.attr('data-icon-hide') || 'eye-blocked';

    if (toggle) {
      icons.right = control.type == 'password' ? iconShow : iconHide;
    }

    addIcon($control, icons);

    if (toggle) {
      tap(that, $parent.find('.mbsc-right-ic').addClass('mbsc-input-toggle'), function () {
        if (control.type == "text") {
          control.type = "password";
          $$1(this).addClass('mbsc-ic-' + iconShow).removeClass('mbsc-ic-' + iconHide);
        } else {
          control.type = "text";
          $$1(this).removeClass('mbsc-ic-' + iconShow).addClass('mbsc-ic-' + iconHide);
        }
      });
    }
  }

  function wrapLabel($parent, type, inputStyle, labelStyle, elm) {
    // Wrap non-empty text nodes in span with mbsc-label class
    if (type == 'segmented') {
      $parent.closest('.mbsc-segmented').addClass(inputStyle == 'box' ? 'mbsc-input-box' : '').addClass(inputStyle == 'outline' ? 'mbsc-input-outline' : '');
    } else if (type != 'button' && type != 'submit') {
      $parent.addClass('mbsc-control-w').addClass(inputStyle == 'box' ? 'mbsc-input-box' : '').addClass(inputStyle == 'outline' ? 'mbsc-input-outline' : '').addClass(labelStyle == 'inline' ? 'mbsc-label-inline' : '').addClass(labelStyle == 'stacked' ? 'mbsc-label-stacked' : '').addClass(labelStyle == 'floating' ? 'mbsc-label-floating' : '').addClass(labelStyle == 'floating' && elm.value ? 'mbsc-label-floating-active' : '').find('label').addClass('mbsc-label').each(function (i, v) {
        $$1(v).attr('title', $$1(v).text());
      });
      $parent.contents().filter(function () {
        return this.nodeType == 3 && this.nodeValue && /\S/.test(this.nodeValue);
      }).each(function () {
        $$1('<span class="mbsc-label" title="' + this.textContent.trim() + '"></span>').insertAfter(this).append(this);
      });
    }
  }

  function getRipple(theme) {
    var ripple = mobiscroll.themes.form[theme];
    return ripple && ripple.addRipple ? ripple : null;
  }

  function getAttr($elm, attr, def) {
    var v = $elm.attr(attr);
    return v === undefined || v === '' ? def : v;
  }

  function getCssClass(s) {
    var theme = getThemeName(s);
    var baseTheme = mobiscroll.themes.form[theme].baseTheme;
    return 'mbsc-' + theme + (baseTheme ? ' mbsc-' + baseTheme : '') + (s.rtl ? ' mbsc-rtl' : ' mbsc-ltr');
  }

  var FormControl =
  /*#__PURE__*/
  function () {
    function FormControl(elm, settings) {
      var _this = this;

      var s = extend$1({}, defaults, mobiscroll.settings, settings);
      var $elm = $$1(elm);
      var $p = $elm.parent();
      var $parent = $p.hasClass('mbsc-input-wrap') ? $p.parent() : $p; // Check for inline mobiscroll components

      var $frame = $elm.next().hasClass('mbsc-fr') ? $elm.next() : null;
      var type = getControlType($elm);
      var inputStyle = getAttr($elm, 'data-input-style', s.inputStyle);
      var labelStyle = getAttr($elm, 'data-label-style', s.labelStyle);

      if (elm.mbscInst) {
        elm.mbscInst.destroy();
      }

      if ($frame) {
        $frame.insertAfter($parent);
      }

      s.theme = getThemeName(s);

      if (s.rtl === undefined && s.lang && mobiscroll.i18n[s.lang]) {
        s.rtl = mobiscroll.i18n[s.lang].rtl;
      }

      wrapLabel($parent, type, inputStyle, labelStyle, elm);
      $elm.addClass('mbsc-control'); // Attach events

      this._handle = this._handle.bind(this); // Prevent 300ms click latency

      events.forEach(function (ev) {
        $elm.on(ev, _this._handle);
      }); // Touch events are added separately, needs to be passive listener

      listen(elm, 'touchstart', this._handle, {
        passive: true
      });
      listen(elm, 'touchmove', this._handle, {
        passive: true
      });
      this.settings = s;
      this._type = type;
      this._elm = elm;
      this._$elm = $elm;
      this._$parent = $parent;
      this._$frame = $frame;
      this._ripple = getRipple(s.theme);
      this._isFloating = labelStyle == 'floating' || $parent.hasClass('mbsc-label-floating');
      this.cssClass = getCssClass(s);
      this.getClassElm().addClass(this.cssClass);
      elm.mbscInst = this;
    }

    var _proto = FormControl.prototype;

    _proto.getClassElm = function getClassElm() {
      return this._$parent;
    };

    _proto.destroy = function destroy() {
      var _this2 = this;

      var $elm = this._$elm;
      var elm = this._elm;
      $elm.removeClass('mbsc-control');
      this.getClassElm().removeClass(this.cssClass);
      events.forEach(function (ev) {
        $elm.off(ev, _this2._handle);
      });
      unlisten(elm, 'touchstart', this._handle, {
        passive: true
      });
      unlisten(elm, 'touchmove', this._handle, {
        passive: true
      });
      delete elm.mbscInst;
    };

    _proto.option = function option(s) {
      extend$1(this.settings, s);
      var classElm = this.getClassElm();

      if (this.cssClass) {
        classElm.removeClass(this.cssClass);
      }

      this.cssClass = getCssClass(this.settings);
      classElm.addClass(this.cssClass);
      this._ripple = getRipple(this.settings.theme);
    };

    _proto._handle = function _handle(ev) {
      switch (ev.type) {
        case 'touchstart':
        case 'mousedown':
          this._onStart(ev);

          break;

        case 'touchmove':
        case 'mousemove':
          this._onMove(ev);

          break;

        case 'touchend':
        case 'touchcancel':
        case 'mouseup':
        case 'mouseleave':
          this._onEnd(ev);

          break;
      }
    };

    _proto._addRipple = function _addRipple(ev) {
      if (this._ripple && this._$rippleElm) {
        this._ripple.addRipple(this._$rippleElm, ev);
      }
    };

    _proto._removeRipple = function _removeRipple() {
      if (this._ripple && this._$rippleElm) {
        this._ripple.removeRipple();
      }
    };

    _proto._onStart = function _onStart(ev) {
      var elm = this._elm;

      if (testTouch(ev, elm)) {
        this._startX = getCoord(ev, 'X');
        this._startY = getCoord(ev, 'Y');

        if ($active) {
          $active.removeClass('mbsc-active');
        }

        if (!elm.disabled) {
          this._isActive = true;
          $active = this._$elm;
          $active.addClass('mbsc-active');

          this._addRipple(ev);
        }
      }

      if (ev.type == 'touchstart') {
        this._$elm.closest('.mbsc-no-touch').removeClass('mbsc-no-touch');
      }
    };

    _proto._onMove = function _onMove(ev) {
      // If movement is more than 9px, don't fire the click event handler
      if (this._isActive && Math.abs(getCoord(ev, 'X') - this._startX) > 9 || Math.abs(getCoord(ev, 'Y') - this._startY) > 9) {
        this._$elm.removeClass('mbsc-active');

        this._removeRipple();

        this._isActive = false;
      }
    };

    _proto._onEnd = function _onEnd(ev) {
      var _this3 = this;

      var control = this._elm;
      var type = this._type;

      if (this._isActive && this.settings.tap && ev.type == 'touchend' && !control.readOnly) {
        activateControl(control, type, ev);
      }

      if (this._isActive) {
        setTimeout(function () {
          _this3._$elm.removeClass('mbsc-active');

          _this3._removeRipple();
        }, 100);
      }

      this._isActive = false;
      $active = null;
    };

    return FormControl;
  }();
  mobiscroll.themes.form.mobiscroll = {};

  var events$1 = ['focus', 'change', 'blur', 'animationstart'];
  var Input =
  /*#__PURE__*/
  function (_FormControl) {
    _inheritsLoose(Input, _FormControl);

    function Input(elm, settings) {
      var _this;

      _this = _FormControl.call(this, elm, settings) || this;
      var $elm = _this._$elm;
      var $parent = _this._$parent;
      var $dummy = $parent.find('.mbsc-select-input, .mbsc-color-input');
      addIconToggle(_assertThisInitialized(_this), $parent, $elm);
      _this._checkLabel = _this._checkLabel.bind(_assertThisInitialized(_this));
      _this._mouseDown = _this._mouseDown.bind(_assertThisInitialized(_this));
      _this._setText = _this._setText.bind(_assertThisInitialized(_this));

      if (elm.type == 'file') {
        // Copy attributes and create dummy input
        var $existing = $parent.find('.mbsc-file-input');
        _this._$input = $existing.length ? $existing : $$1('<input type="text" class="' + ($elm.attr('class') || '') + ' mbsc-file-input" placeholder="' + ($elm.attr('placeholder') || '') + '"/>').insertAfter($elm); // Copy value on file upload

        $elm.on('change', _this._setText);
      }

      $parent.addClass('mbsc-input').on('mousedown', _this._mouseDown); // Attach events

      events$1.forEach(function (ev) {
        $elm.on(ev, _this._checkLabel);
      }); // Move the dummy input after the element for correct styling

      if ($dummy.length) {
        $elm.after($dummy);

        if ($dummy.hasClass('mbsc-select-input')) {
          _this._delm = $dummy[0];

          _this.refresh();
        }
      }

      return _this;
    }

    var _proto = Input.prototype;

    _proto._setText = function _setText(ev) {
      var files = ev.target.files;
      var names = [];

      for (var i = 0; i < files.length; ++i) {
        names.push(files[i].name);
      }

      this._$input.val(names);
    };

    _proto._checkLabel = function _checkLabel(ev) {
      if (this._isFloating) {
        // In case of select we need to check the dummy element
        var elm = this._delm || this._elm; // In case of autofill in webkit browsers the animationstart event will fire 
        // due to the empty animation added in the css,
        // because there's no other event in case of the initial autofill

        if (elm.value || document.activeElement === elm || ev && (ev.type == 'focus' || ev.type == 'animationstart' && this._$elm.is('*:-webkit-autofill'))) {
          this._$parent.addClass('mbsc-label-floating-active');
        } else {
          this._$parent.removeClass('mbsc-label-floating-active');
        }
      }
    };

    _proto._mouseDown = function _mouseDown(ev) {
      // Will prevent floating label animation when loosing focus only for a brief moment
      if (document.activeElement === this._elm && ev.target !== this._elm) {
        ev.preventDefault();
      }
    };

    _proto.refresh = function refresh() {
      this._checkLabel();
    };

    _proto.destroy = function destroy() {
      var _this2 = this;

      _FormControl.prototype.destroy.call(this);

      this._$parent.off('mousedown', this._mouseDown).removeClass('mbsc-ic-left mbsc-ic-right').find('.mbsc-input-ic').remove();

      this._$parent.find('.mbsc-input-fill').remove();

      events$1.forEach(function (ev) {
        _this2._$elm.off(ev, _this2._checkLabel);
      });

      this._$elm.off('change', this._setText);
    };

    return Input;
  }(FormControl); // Init mbsc-input elements on page load

  autoInit('[mbsc-input]', Input);

  var MbscFormBase = (function (_super) {
      __extends(MbscFormBase, _super);
      function MbscFormBase(hostElem, _formService, zone) {
          var _this = _super.call(this, hostElem, zone) || this;
          _this._formService = _formService;
          _this.disabled = false;
          return _this;
      }
      MbscFormBase.prototype.ngOnInit = function () {
          this._inheritedOptions = this._formService ? this._formService.options : {};
      };
      MbscFormBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, },
          { type: core.NgZone, },
      ]; };
      MbscFormBase.propDecorators = {
          'color': [{ type: core.Input },],
          'options': [{ type: core.Input },],
          'disabled': [{ type: core.Input },],
          'name': [{ type: core.Input },],
          '_initElem': [{ type: core.ViewChild, args: ['initElement', { static: false },] },],
      };
MbscFormBase.ɵfac = function MbscFormBase_Factory(t) { return new (t || MbscFormBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscFormBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscFormBase, selectors: [["", "mbsc-f-b", ""]], viewQuery: function MbscFormBase_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._initElem = _t.first);
    } }, inputs: { color: "color", options: "options", disabled: "disabled", name: "name" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscFormBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-f-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService }, { type: ɵngcc0.NgZone }]; }, { color: [{
            type: core.Input
        }], options: [{
            type: core.Input
        }], disabled: [{
            type: core.Input
        }], name: [{
            type: core.Input
        }], _initElem: [{
            type: core.ViewChild,
            args: ['initElement', { static: false }]
        }] }); })();
      return MbscFormBase;
  }(MbscBase));
  var MbscFormValueBase = (function (_super) {
      __extends(MbscFormValueBase, _super);
      function MbscFormValueBase(hostElem, _formService, _inputService, _control, zone) {
          var _this = _super.call(this, hostElem, _formService, zone) || this;
          _this._control = _control;
          _this.onChange = function () { };
          _this.onTouch = function () { };
          _this.errorMessage = '';
          _this.valueChangeEmitter = new core.EventEmitter();
          if (_control && (!_inputService || !_inputService.isControlSet)) {
              if (_control.valueAccessor && _control.valueAccessor.oldAccessor !== undefined) {
                  _control.valueAccessor.oldAccessor = _this;
              }
              else {
                  _control.valueAccessor = _this;
              }
          }
          return _this;
      }
      Object.defineProperty(MbscFormValueBase.prototype, "readonly", {
          set: function (val) {
              this._readonly = emptyOrTrue(val);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscFormValueBase.prototype, "innerValue", {
          get: function () {
              return this._value;
          },
          set: function (v) {
              this._value = v;
              this.onChange(v);
              this.valueChangeEmitter.emit(v);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscFormValueBase.prototype, "value", {
          set: function (v) {
              this._value = v;
              this.refresh();
          },
          enumerable: true,
          configurable: true
      });
      MbscFormValueBase.prototype.registerOnChange = function (fn) {
          this.onChange = fn;
      };
      MbscFormValueBase.prototype.registerOnTouched = function (fn) {
          this.onTouch = fn;
      };
      MbscFormValueBase.prototype.setDisabledState = function (isDisabled) {
          this.disabled = isDisabled;
      };
      MbscFormValueBase.prototype.writeValue = function (v) {
          this._value = v;
          this.refresh();
      };
      MbscFormValueBase.prototype.refresh = function () {
          var _this = this;
          if (this.instance && this.instance.refresh) {
              setTimeout(function () {
                  _this.instance.refresh();
              });
          }
          else {
              this._needRefresh = true;
          }
      };
      MbscFormValueBase.prototype.ngAfterViewInit = function () {
          _super.prototype.ngAfterViewInit.call(this);
          if (this._needRefresh) {
              this.refresh();
          }
      };
      MbscFormValueBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, decorators: [{ type: core.Optional },] },
          { type: forms.NgControl, },
          { type: core.NgZone, },
      ]; };
      MbscFormValueBase.propDecorators = {
          'readonly': [{ type: core.Input },],
          'value': [{ type: core.Input },],
          'error': [{ type: core.Input },],
          'errorMessage': [{ type: core.Input },],
          'valueChangeEmitter': [{ type: core.Output, args: ['valueChange',] },],
      };
MbscFormValueBase.ɵfac = function MbscFormValueBase_Factory(t) { return new (t || MbscFormValueBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscFormValueBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscFormValueBase, selectors: [["", "mbsc-fv-b", ""]], inputs: { readonly: "readonly", value: "value", error: "error", errorMessage: "errorMessage" }, outputs: { valueChangeEmitter: "valueChange" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscFormValueBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-fv-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc1.NgControl }, { type: ɵngcc0.NgZone }]; }, { readonly: [{
            type: core.Input
        }], value: [{
            type: core.Input
        }], error: [{
            type: core.Input
        }], errorMessage: [{
            type: core.Input
        }], valueChangeEmitter: [{
            type: core.Output,
            args: ['valueChange']
        }] }); })();
      return MbscFormValueBase;
  }(MbscFormBase));
  var MbscInputBase = (function (_super) {
      __extends(MbscInputBase, _super);
      function MbscInputBase(initialElem, _formService, _inputService, _control, zone) {
          var _this = _super.call(this, initialElem, _formService, _inputService, _control, zone) || this;
          _this.type = 'text';
          _this.placeholder = '';
          return _this;
      }
      MbscInputBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, decorators: [{ type: core.Optional },] },
          { type: forms.NgControl, },
          { type: core.NgZone, },
      ]; };
      MbscInputBase.propDecorators = {
          'autocomplete': [{ type: core.Input },],
          'autocapitalize': [{ type: core.Input },],
          'autocorrect': [{ type: core.Input },],
          'spellcheck': [{ type: core.Input },],
          'autofocus': [{ type: core.Input },],
          'minlength': [{ type: core.Input },],
          'maxlength': [{ type: core.Input },],
          'required': [{ type: core.Input },],
          'icon': [{ type: core.Input },],
          'iconAlign': [{ type: core.Input, args: ['icon-align',] },],
          'type': [{ type: core.Input },],
          'passwordToggle': [{ type: core.Input, args: ['password-toggle',] },],
          'iconShow': [{ type: core.Input, args: ['icon-show',] },],
          'iconHide': [{ type: core.Input, args: ['icon-hide',] },],
          'iconUpload': [{ type: core.Input, args: ['icon-upload',] },],
          'inputStyle': [{ type: core.Input, args: ['input-style',] },],
          'labelStyle': [{ type: core.Input, args: ['label-style',] },],
          'placeholder': [{ type: core.Input },],
      };
MbscInputBase.ɵfac = function MbscInputBase_Factory(t) { return new (t || MbscInputBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscInputBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscInputBase, selectors: [["", "mbsc-i-b", ""]], inputs: { autocomplete: "autocomplete", autocapitalize: "autocapitalize", autocorrect: "autocorrect", spellcheck: "spellcheck", autofocus: "autofocus", minlength: "minlength", maxlength: "maxlength", required: "required", icon: "icon", iconAlign: ["icon-align", "iconAlign"], type: "type", passwordToggle: ["password-toggle", "passwordToggle"], iconShow: ["icon-show", "iconShow"], iconHide: ["icon-hide", "iconHide"], iconUpload: ["icon-upload", "iconUpload"], inputStyle: ["input-style", "inputStyle"], labelStyle: ["label-style", "labelStyle"], placeholder: "placeholder" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscInputBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-i-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc1.NgControl }, { type: ɵngcc0.NgZone }]; }, { autocomplete: [{
            type: core.Input
        }], autocapitalize: [{
            type: core.Input
        }], autocorrect: [{
            type: core.Input
        }], spellcheck: [{
            type: core.Input
        }], autofocus: [{
            type: core.Input
        }], minlength: [{
            type: core.Input
        }], maxlength: [{
            type: core.Input
        }], required: [{
            type: core.Input
        }], icon: [{
            type: core.Input
        }], iconAlign: [{
            type: core.Input,
            args: ['icon-align']
        }], type: [{
            type: core.Input
        }], passwordToggle: [{
            type: core.Input,
            args: ['password-toggle']
        }], iconShow: [{
            type: core.Input,
            args: ['icon-show']
        }], iconHide: [{
            type: core.Input,
            args: ['icon-hide']
        }], iconUpload: [{
            type: core.Input,
            args: ['icon-upload']
        }], inputStyle: [{
            type: core.Input,
            args: ['input-style']
        }], labelStyle: [{
            type: core.Input,
            args: ['label-style']
        }], placeholder: [{
            type: core.Input
        }] }); })();
      return MbscInputBase;
  }(MbscFormValueBase));
  var MbscInput = (function (_super) {
      __extends(MbscInput, _super);
      function MbscInput(initialElem, _formService, _inputService, _control, zone) {
          var _this = _super.call(this, initialElem, _formService, _inputService, _control, zone) || this;
          _this._inputService = _inputService;
          _this.controlNg = true;
          _this.dropdown = false;
          _inputService.input = _this;
          return _this;
      }
      MbscInput.prototype.initControl = function () {
          var _this = this;
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Input(this._initElem.nativeElement, options);
          setTimeout(function () {
              _this.instance.refresh();
          });
      };
      MbscInput.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
      ]; };
      MbscInput.propDecorators = {
          'min': [{ type: core.Input },],
          'max': [{ type: core.Input },],
          'step': [{ type: core.Input },],
          'pattern': [{ type: core.Input },],
          'accept': [{ type: core.Input },],
          'multiple': [{ type: core.Input },],
          'controlNg': [{ type: core.Input },],
          'dropdown': [{ type: core.Input },],
      };
MbscInput.ɵfac = function MbscInput_Factory(t) { return new (t || MbscInput)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscInput.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscInput, selectors: [["mbsc-input"]], hostVars: 4, hostBindings: function MbscInput_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-control-ng", ctx.controlNg)("mbsc-err", ctx.error);
    } }, inputs: { min: "min", max: "max", step: "step", pattern: "pattern", accept: "accept", multiple: "multiple", controlNg: "controlNg", dropdown: "dropdown" }, features: [ɵngcc0.ɵɵProvidersFeature([MbscInputService]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 7, vars: 42, consts: [[1, "mbsc-input-wrap"], [3, "type", "placeholder", "ngModel", "disabled", "readonly", "ngModelChange", "blur"], ["initElement", ""], ["class", "mbsc-select-ic mbsc-ic mbsc-ic-arrow-down5", 4, "ngIf"], ["class", "mbsc-err-msg", 4, "ngIf"], [1, "mbsc-select-ic", "mbsc-ic", "mbsc-ic-arrow-down5"], [1, "mbsc-err-msg"]], template: function MbscInput_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label");
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementStart(2, "span", 0);
        ɵngcc0.ɵɵelementStart(3, "input", 1, 2);
        ɵngcc0.ɵɵlistener("ngModelChange", function MbscInput_Template_input_ngModelChange_3_listener($event) { return ctx.innerValue = $event; })("blur", function MbscInput_Template_input_blur_3_listener($event) { return ctx.onTouch($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(5, MbscInput_span_5_Template, 1, 0, "span", 3);
        ɵngcc0.ɵɵtemplate(6, MbscInput_span_6_Template, 2, 1, "span", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-err", ctx.error)("mbsc-select", ctx.dropdown)("mbsc-input-box", ctx.inputStyle == "box")("mbsc-input-outline", ctx.inputStyle == "outline")("mbsc-label-stacked", ctx.labelStyle == "stacked")("mbsc-label-inline", ctx.labelStyle == "inline")("mbsc-label-floating", ctx.labelStyle == "floating");
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("type", ctx.type)("placeholder", ctx.placeholder)("ngModel", ctx.innerValue)("disabled", ctx.disabled)("readonly", ctx._readonly);
        ɵngcc0.ɵɵattribute("name", ctx.name)("data-icon", ctx.icon ? ctx.icon : null)("data-icon-align", ctx.iconAlign ? ctx.iconAlign : null)("data-password-toggle", ctx.passwordToggle ? "true" : null)("data-icon-show", ctx.iconShow ? ctx.iconShow : null)("data-icon-hide", ctx.iconHide ? ctx.iconHide : null)("data-icon-upload", ctx.iconUpload ? ctx.iconUpload : null)("min", ctx.min)("max", ctx.max)("minlength", ctx.minlength)("maxlength", ctx.maxlength)("autocomplete", ctx.autocomplete)("autocapitalize", ctx.autocapitalize)("autocorrect", ctx.autocorrect)("spellcheck", ctx.spellcheck)("autofocus", ctx.autofocus)("step", ctx.step)("pattern", ctx.pattern)("required", ctx.required)("accept", ctx.accept)("multiple", ctx.multiple);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.dropdown);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.error && ctx.errorMessage);
    } }, directives: [ɵngcc1.DefaultValueAccessor, ɵngcc1.NgControlStatus, ɵngcc1.NgModel, ɵngcc1.MinLengthValidator, ɵngcc1.MaxLengthValidator, ɵngcc1.PatternValidator, ɵngcc1.RequiredValidator, ɵngcc2.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscInput, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-input',
                host: {
                    '[class.mbsc-control-ng]': 'controlNg',
                    '[class.mbsc-err]': 'error'
                },
                template: "\n        <label\n            [class.mbsc-err]=\"error\" [class.mbsc-select]=\"dropdown\"\n            [class.mbsc-input-box]=\"inputStyle == 'box'\"\n            [class.mbsc-input-outline]=\"inputStyle == 'outline'\"\n            [class.mbsc-label-stacked]=\"labelStyle == 'stacked'\"\n            [class.mbsc-label-inline]=\"labelStyle == 'inline'\"\n            [class.mbsc-label-floating]=\"labelStyle == 'floating'\"\n        >\n            <ng-content></ng-content>\n            <span class=\"mbsc-input-wrap\">\n                <input #initElement [type]=\"type\" [placeholder]=\"placeholder\" [(ngModel)]=\"innerValue\" (blur)=\"onTouch($event)\"\n                    [attr.name]=\"name\"\n                    [attr.data-icon]=\"icon ? icon : null\"\n                    [attr.data-icon-align]=\"iconAlign ? iconAlign : null\"\n                    [attr.data-password-toggle]=\"passwordToggle ? 'true': null\"\n                    [attr.data-icon-show]=\"iconShow ? iconShow : null\"\n                    [attr.data-icon-hide]=\"iconHide ? iconHide : null\"\n                    [attr.data-icon-upload]=\"iconUpload ? iconUpload : null\"\n                    [attr.min]=\"min\"\n                    [attr.max]=\"max\"\n                    [attr.minlength]=\"minlength\"\n                    [attr.maxlength]=\"maxlength\"\n                    [attr.autocomplete]=\"autocomplete\"\n                    [attr.autocapitalize]=\"autocapitalize\"\n                    [attr.autocorrect]=\"autocorrect\"\n                    [attr.spellcheck]=\"spellcheck\"\n                    [attr.autofocus]=\"autofocus\"\n                    [attr.step]=\"step\"\n                    [attr.pattern]=\"pattern\"\n                    [attr.required]=\"required\"\n                    [attr.accept]=\"accept\"\n                    [attr.multiple]=\"multiple\"\n                    [disabled]=\"disabled\"\n                    [readonly]=\"_readonly\" />\n                <span *ngIf=\"dropdown\" class=\"mbsc-select-ic mbsc-ic mbsc-ic-arrow-down5\"></span>\n                <span *ngIf=\"error && errorMessage\" class=\"mbsc-err-msg\">{{errorMessage}}</span>\n            </span>\n        </label>\n    ",
                providers: [MbscInputService]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, { min: [{
            type: core.Input
        }], max: [{
            type: core.Input
        }], step: [{
            type: core.Input
        }], pattern: [{
            type: core.Input
        }], accept: [{
            type: core.Input
        }], multiple: [{
            type: core.Input
        }], controlNg: [{
            type: core.Input
        }], dropdown: [{
            type: core.Input
        }] }); })();
      return MbscInput;
  }(MbscInputBase));
  var MbscInputModule = (function () {
      function MbscInputModule() {
      }
      MbscInputModule.ctorParameters = function () { return []; };
MbscInputModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: MbscInputModule });
MbscInputModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function MbscInputModule_Factory(t) { return new (t || MbscInputModule)(); }, imports: [[forms.FormsModule, common.CommonModule, MbscBaseModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MbscInputModule, { declarations: [MbscInput, MbscInputBase, MbscFormBase, MbscFormValueBase], imports: [ɵngcc1.FormsModule, ɵngcc2.CommonModule, MbscBaseModule], exports: [MbscInput] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscInputModule, [{
        type: core.NgModule,
        args: [{
                imports: [forms.FormsModule, common.CommonModule, MbscBaseModule],
                declarations: [MbscInput, MbscInputBase, MbscFormBase, MbscFormValueBase],
                exports: [MbscInput]
            }]
    }], function () { return []; }, null); })();
      return MbscInputModule;
  }());

  var Button =
  /*#__PURE__*/
  function (_FormControl) {
    _inheritsLoose(Button, _FormControl);

    function Button(elm, settings) {
      var _this;

      _this = _FormControl.call(this, elm, settings) || this;
      var $elm = _this._$elm;
      var hasIcon = $elm.attr('data-icon');
      $elm.addClass('mbsc-btn mbsc-no-touch').find('.mbsc-btn-ic').remove();

      if (hasIcon) {
        $elm.prepend('<span class="mbsc-btn-ic mbsc-ic mbsc-ic-' + hasIcon + '"></span>');

        if ($elm.text() === "") {
          $elm.addClass('mbsc-btn-icon-only');
        }
      }

      _this._$rippleElm = $elm;
      return _this;
    }

    var _proto = Button.prototype;

    _proto.getClassElm = function getClassElm() {
      return this._$elm;
    };

    return Button;
  }(FormControl); // Init mbsc-button elements on page load

  autoInit('[mbsc-button]', Button);

  var CheckBox =
  /*#__PURE__*/
  function (_FormControl) {
    _inheritsLoose(CheckBox, _FormControl);

    function CheckBox(elm, settings) {
      var _this;

      _this = _FormControl.call(this, elm, settings) || this;

      _this._$parent.prepend(_this._$elm).addClass('mbsc-checkbox mbsc-control-w').find('.mbsc-checkbox-box').remove();

      _this._$elm.after('<span class="mbsc-checkbox-box"></span>');

      return _this;
    }

    return CheckBox;
  }(FormControl); // Init mbsc-checkbox elements on page load

  autoInit('[mbsc-checkbox]', CheckBox);

  var Radio =
  /*#__PURE__*/
  function (_FormControl) {
    _inheritsLoose(Radio, _FormControl);

    function Radio(elm, settings) {
      var _this;

      _this = _FormControl.call(this, elm, settings) || this;

      _this._$parent.addClass('mbsc-radio mbsc-control-w').find('.mbsc-radio-box').remove();

      _this._$elm.after('<span class="mbsc-radio-box"><span></span></span>');

      return _this;
    }

    return Radio;
  }(FormControl); // Init mbsc-radio elements on page load

  autoInit('[mbsc-radio]', Radio);

  var Select =
  /*#__PURE__*/
  function (_Input) {
    _inheritsLoose(Select, _Input);

    function Select(elm, settings) {
      var _this;

      _this = _Input.call(this, elm, settings) || this;
      var $elm = _this._$elm;
      var $parent = _this._$parent;
      var $existing = $parent.find('.mbsc-select-input');
      var $input = $existing.length ? $existing : $$1('<input tabindex="-1" class="mbsc-select-input mbsc-control" readonly>');
      _this._$input = $input;
      _this._delm = $input[0];
      _this._setText = _this._setText.bind(_assertThisInitialized(_this));
      $parent.addClass('mbsc-select' + (_this._$frame ? ' mbsc-select-inline' : ''));
      $elm.after($input);
      $input.after('<span class="mbsc-select-ic mbsc-ic mbsc-ic-arrow-down5"></span>'); // Update dummy input text on change

      $elm.on('change', _this._setText);

      _this._setText();

      return _this;
    }

    var _proto = Select.prototype;

    _proto.destroy = function destroy() {
      _Input.prototype.destroy.call(this);

      this._$parent.find('.mbsc-select-ic').remove();

      this._$elm.off('change', this._setText);
    };

    _proto._setText = function _setText() {
      var elm = this._elm;
      var $elm = $$1(elm); // Check if select and mobiscroll select was not initialized

      if ($elm.is('select') && !$elm.hasClass('mbsc-comp')) {
        this._$input.val(elm.selectedIndex != -1 ? elm.options[elm.selectedIndex].text : '');
      } // Check floating label


      this.refresh();
    };

    return Select;
  }(Input); // Init mbsc-select elements on page load

  autoInit('[mbsc-dropdown]', Select);

  var events$2 = ['change', 'keydown', 'input', 'scroll'];
  var sizeDebounce;

  function sizeTextAreas() {
    clearTimeout(sizeDebounce);
    sizeDebounce = setTimeout(function () {
      $$1('textarea.mbsc-control').each(function () {
        sizeTextArea(this);
      });
    }, 100);
  }

  function sizeTextArea(control) {
    var height,
        lineNr,
        line,
        rowNr = $$1(control).attr('rows') || 6;

    if (control.offsetHeight) {
      control.style.height = '';
      line = control.scrollHeight - control.offsetHeight;
      height = control.offsetHeight + (line > 0 ? line : 0);
      lineNr = Math.round(height / 24);

      if (lineNr > rowNr) {
        //control.scrollTop = height;
        height = 24 * rowNr + (height - lineNr * 24);
        $$1(control).addClass('mbsc-textarea-scroll');
      } else {
        $$1(control).removeClass('mbsc-textarea-scroll');
      }

      if (height) {
        control.style.height = height + 'px';
      }
    }
  }

  function scrollTextArea(elm) {
    var $elm = $$1(elm);

    if (!$elm.hasClass('mbsc-textarea-scroll')) {
      var line = elm.scrollHeight - elm.offsetHeight,
          height = elm.offsetHeight + line,
          lineNr = Math.round(height / 24),
          rowNr = $elm.attr('rows') || 6;

      if (lineNr <= rowNr) {
        elm.scrollTop = 0;
        elm.style.height = height + 'px';
      }
    }
  }

  if (isBrowser) {
    // Set height of textareas on viewport size changes
    $$1(window).on('resize orientationchange', sizeTextAreas);
  }

  var TextArea =
  /*#__PURE__*/
  function (_Input) {
    _inheritsLoose(TextArea, _Input);

    function TextArea(elm, settings) {
      var _this;

      _this = _Input.call(this, elm, settings) || this;

      _this._$parent.addClass('mbsc-textarea');

      events$2.forEach(function (ev) {
        _this._$elm.on(ev, _this._handle);
      });
      sizeTextArea(elm);
      return _this;
    }

    var _proto = TextArea.prototype;

    _proto.destroy = function destroy() {
      var _this2 = this;

      _Input.prototype.destroy.call(this);

      events$2.forEach(function (ev) {
        _this2._$elm.off(ev, _this2._handle);
      });
    };

    _proto.refresh = function refresh() {
      _Input.prototype.refresh.call(this);

      clearTimeout(this._debounce);
      sizeTextArea(this._elm);
    };

    _proto._handle = function _handle(ev) {
      _Input.prototype._handle.call(this, ev);

      switch (ev.type) {
        case 'change':
          sizeTextArea(this._elm);
          break;

        case 'keydown':
        case 'input':
          this._onInput(ev);

          break;

        case 'scroll':
          scrollTextArea(this._elm);
      }
    };

    _proto._onInput = function _onInput() {
      var _this3 = this;

      clearTimeout(this._debounce);
      this._debounce = setTimeout(function () {
        sizeTextArea(_this3._elm);
      }, 100);
    };

    return TextArea;
  }(Input);

  autoInit('[mbsc-textarea]', TextArea);

  var SegmentedItem =
  /*#__PURE__*/
  function (_FormControl) {
    _inheritsLoose(SegmentedItem, _FormControl);

    function SegmentedItem(elm, settings) {
      var _this;

      _this = _FormControl.call(this, elm, settings) || this;
      var $segmentCont;
      var $segment;
      var $elm = _this._$elm;
      var $parent = _this._$parent;

      if (!$parent.hasClass('mbsc-segmented-item-ready')) {
        $segmentCont = $$1('<div class="mbsc-segmented mbsc-segmented-group mbsc-no-touch"></div>');
        $parent.after($segmentCont);
        $parent.parent().find('input[name="' + $elm.attr('name') + '"]').each(function () {
          var $input = $$1(this);
          $segment = $input.parent().addClass('mbsc-segmented-item mbsc-segmented-item-ready');
          $$1('<span class="mbsc-segmented-content">' + ($input.attr('data-icon') ? '<span class="mbsc-ic mbsc-ic-' + $input.attr('data-icon') + '"></span>' : '') + '</span>').append($segment.contents()).appendTo($segment);
          $segment.prepend($input);
          $segmentCont.append($segment);
        });
      }

      _this._$rippleElm = $elm.next();
      return _this;
    }

    var _proto = SegmentedItem.prototype;

    _proto.getClassElm = function getClassElm() {
      return this._$elm.closest('.mbsc-segmented');
    };

    return SegmentedItem;
  }(FormControl); // Init mbsc-segmented elements on page load

  autoInit('[mbsc-segmented]', SegmentedItem);

  function createStepper($elm, action, delay, isReadOnly, stopProp, ripple) {
    var $btn,
        changed,
        index,
        running,
        source,
        startX,
        startY,
        step,
        timer,
        check = isReadOnly || noop;

    function onBtnStart(ev) {
      var proceed;
      $btn = $$1(ev.currentTarget);
      step = +$btn.attr('data-step');
      index = +$btn.attr('data-index');
      changed = true;

      if (stopProp) {
        ev.stopPropagation();
      }

      if (ev.type == 'touchstart') {
        $btn.closest('.mbsc-no-touch').removeClass('mbsc-no-touch');
      }

      if (ev.type == 'mousedown') {
        // Prevent focus
        ev.preventDefault();
      }

      if (ev.type != 'keydown') {
        //e.preventDefault();
        startX = getCoord(ev, 'X');
        startY = getCoord(ev, 'Y');
        proceed = testTouch(ev, this);
      } else {
        proceed = ev.keyCode === 32;
      }

      if (!running && proceed && !$btn.hasClass('mbsc-disabled')) {
        if (start(index, step, ev)) {
          $btn.addClass('mbsc-active');

          if (ripple) {
            ripple.addRipple($btn.find('.mbsc-segmented-content'), ev);
          }
        }

        if (ev.type == 'mousedown') {
          $$1(document).on('mousemove', onBtnMove).on('mouseup', onBtnEnd);
        }
      }
    }

    function onBtnMove(ev) {
      if (Math.abs(startX - getCoord(ev, 'X')) > 7 || Math.abs(startY - getCoord(ev, 'Y')) > 7) {
        changed = true;
        stop();
      }
    }

    function onBtnEnd(ev) {
      if (ev.type == 'touchend') {
        // Prevents iOS scroll on double tap
        ev.preventDefault();
      }

      stop();

      if (ev.type == 'mouseup') {
        $$1(document).off('mousemove', onBtnMove).off('mouseup', onBtnEnd);
      }
    }

    function stop() {
      running = false;
      clearInterval(timer);

      if ($btn) {
        $btn.removeClass('mbsc-active');

        if (ripple) {
          setTimeout(function () {
            ripple.removeRipple();
          }, 100);
        }
      }
    }

    function start(i, st, ev) {
      if (!running && !check(i)) {
        index = i;
        step = st;
        source = ev;
        running = true;
        changed = false;
        setTimeout(tick, 100);
      }

      return running;
    }

    function tick() {
      if ($btn && $btn.hasClass('mbsc-disabled')) {
        stop();
        return;
      }

      if (running || !changed) {
        changed = true;
        action(index, step, source, tick);
      }

      if (running && delay) {
        clearInterval(timer);
        timer = setInterval(function () {
          action(index, step, source);
        }, delay);
      }
    }

    function destroy() {
      $elm.each(function (i, el) {
        unlisten(el, 'touchstart', onBtnStart, {
          passive: true
        });
        unlisten(el, 'mousedown', onBtnStart);
        unlisten(el, 'keydown', onBtnStart);
        unlisten(el, 'touchmove', onBtnMove, {
          passive: true
        });
        unlisten(el, 'touchend', onBtnEnd);
        unlisten(el, 'touchcancel', onBtnEnd);
        unlisten(el, 'keyup', onBtnEnd);
      });
    }

    $elm.each(function (i, el) {
      listen(el, 'touchstart', onBtnStart, {
        passive: true
      });
      listen(el, 'mousedown', onBtnStart);
      listen(el, 'keydown', onBtnStart);
      listen(el, 'touchmove', onBtnMove, {
        passive: true
      });
      listen(el, 'touchend', onBtnEnd);
      listen(el, 'touchcancel', onBtnEnd);
      listen(el, 'keyup', onBtnEnd);
    });
    return {
      start: start,
      stop: stop,
      destroy: destroy
    };
  }

  var Stepper = function Stepper(control, settings) {
    var $btnPlus,
        $btnMinus,
        $controls,
        cssClass = '',
        displayValue,
        max,
        min,
        inputStyle,
        ripple,
        scale,
        step,
        stepper,
        s,
        theme,
        val,
        that = this,
        $control = $$1(control),
        ready,
        $parent,
        old = val;

    function onChange() {
      var v;

      if (!control.disabled) {
        v = parseFloat($$1(this).val());
        setValue(isNaN(v) ? val : v);
      }
    }

    function checkDisabled() {
      return control.disabled;
    }

    function stepValue(index, dir) {
      setValue(val + dir * step);
    }

    function setValue(v, fill, change) {
      old = val;

      if (fill === undefined) {
        fill = true;
      }

      if (change === undefined) {
        change = fill;
      }

      val = round(v);
      $controls.removeClass('mbsc-disabled');

      if (fill) {
        $control.val(val);
      }

      if (val == min) {
        $btnMinus.addClass('mbsc-disabled');
      }

      if (val == max) {
        $btnPlus.addClass('mbsc-disabled');
      }

      if (val !== old && change) {
        $control.trigger('change');
      }
    }

    function getAttr(attr, def, str) {
      var v = $control.attr(attr);
      return v === undefined || v === '' ? def : str ? v : +v;
    }

    function round(v) {
      return +Math.min(max, Math.max(Math.round(v / step) * step, min)).toFixed(scale);
    } // Call the parent constructor


    Base.call(this, control, settings, true);
    /* TRIALFUNC */

    that.getVal = function () {
      var v = parseFloat($control.val());
      v = isNaN(v) ? val : v;
      return round(v);
    };

    that.setVal = function (v, fill, change) {
      v = parseFloat(v);
      setValue(isNaN(v) ? val : v, fill, change);
    };

    that._init = function () {
      ready = $control.parent().hasClass('mbsc-stepper');
      $parent = ready ? $control.closest('.mbsc-stepper-cont') : $control.parent();
      s = that.settings;
      min = settings.min === undefined ? getAttr('min', s.min) : settings.min;
      max = settings.max === undefined ? getAttr('max', s.max) : settings.max;
      step = settings.step === undefined ? getAttr('step', s.step) : settings.step;
      scale = Math.abs(step) < 1 ? (step + '').split('.')[1].length : 0;
      inputStyle = settings.inputStyle === undefined ? getAttr('data-input-style', s.inputStyle, true) : settings.inputStyle;
      displayValue = $control.attr('data-val') || s.val;
      val = round(+control.value || 0);
      theme = mobiscroll.themes.form[s.theme];
      ripple = theme && theme.addRipple ? theme : null;

      if (!ready) {
        $parent.addClass('mbsc-stepper-cont mbsc-no-touch mbsc-control-w').addClass(inputStyle == 'box' ? 'mbsc-input-box' : '').addClass(inputStyle == 'outline' ? 'mbsc-input-outline' : '').append('<span class="mbsc-segmented mbsc-stepper' + '"></span>').find('.mbsc-stepper').append('<span class="mbsc-segmented-item mbsc-stepper-control mbsc-stepper-minus ' + (val == min ? 'mbsc-disabled' : '') + '" data-step="-1" tabindex="0"><span class="mbsc-segmented-content"><span class="mbsc-ic mbsc-ic-minus"></span></span></span>').append('<span class="mbsc-segmented-item mbsc-stepper-control mbsc-stepper-plus ' + (val == max ? 'mbsc-disabled' : '') + '"  data-step="1" tabindex="0"><span class="mbsc-segmented-content"> <span class="mbsc-ic mbsc-ic-plus"></span></span></span>').prepend($control);
      }

      if (cssClass) {
        $parent.removeClass(cssClass).find('.mbsc-segmented').removeClass(cssClass);
      }

      cssClass = 'mbsc-' + s.theme + (theme.baseTheme ? ' mbsc-' + theme.baseTheme : '') + (s.rtl ? ' mbsc-rtl' : ' mbsc-ltr');
      $parent.addClass(cssClass).find('.mbsc-segmented').addClass(cssClass);
      $btnMinus = $$1('.mbsc-stepper-minus', $parent);
      $btnPlus = $$1('.mbsc-stepper-plus', $parent);
      $controls = $$1('.mbsc-stepper-control', $parent);

      if (!ready) {
        if (displayValue == 'left') {
          $parent.addClass('mbsc-stepper-val-left');
          $control.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content"></span></span>');
        } else if (displayValue == 'right') {
          $parent.addClass('mbsc-stepper-val-right');
          $btnPlus.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content"></span></span>');
        } else {
          $btnMinus.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content mbsc-stepper-val"></span></span>');
        }
      }

      if (!stepper) {
        $control.on('change', onChange);
        stepper = createStepper($controls, stepValue, 150, checkDisabled, false, ripple);
      }

      $control.val(val).attr('data-role', 'stepper').attr('min', min).attr('max', max).attr('step', step).addClass('mbsc-control');
      control.mbscInst = that;
    };

    that._destroy = function () {
      $control.removeClass('mbsc-control').off('change', onChange);
      stepper.destroy();
      delete control.mbscInst;
    };

    that.init();
  };
  Stepper.prototype = {
    _class: 'stepper',
    _hasDef: true,
    _hasTheme: true,
    _hasLang: true,
    _defaults: {
      min: 0,
      max: 100,
      step: 1
    }
  };
  classes.Stepper = Stepper; // Init mbsc-stepper elements on page load

  autoInit('[mbsc-stepper]', Stepper);

  var ProgressBase = function ProgressBase(elm, settings, inherit) {
    var $elm,
        $parent,
        cssClass,
        s,
        that = this; // Call the parent constructor

    Base.call(this, elm, settings, true);
    that.__init = noop;
    that.__destroy = noop;

    that._init = function () {
      var wasInit;
      s = that.settings;
      $elm = $$1(elm); // Check if the element was already initialized

      wasInit = !!$parent;
      $parent = $elm.parent();
      $parent = $parent.hasClass('mbsc-input-wrap') ? $parent.parent() : $parent;
      that._$parent = $parent;

      if (cssClass) {
        $parent.removeClass(cssClass);
      }

      cssClass = that._css + ' mbsc-progress-w mbsc-control-w ' + getCssClass(s);
      $parent.addClass(cssClass);
      $elm.addClass('mbsc-control');

      that.__init();

      if (!wasInit) {
        that._attachChange();
      } // Show initial value


      that.refresh();
      elm.mbscInst = that;
    };

    that._destroy = function () {
      that.__destroy();

      $parent.removeClass(cssClass);
      $elm.removeClass('mbsc-control');
      delete elm.mbscInst;
    };

    if (!inherit) {
      that.init();
    }
  };

  var SliderBase = function SliderBase(elm, settings, inherit) {
    var $elm,
        $handle,
        $handleCont,
        $handles,
        $listeners,
        $parent,
        $track,
        action,
        base,
        changed,
        diffX,
        diffY,
        diff,
        endX,
        endY,
        handleIndex,
        isHover,
        isPressed,
        isRtl,
        live,
        max,
        min,
        moved,
        multiple,
        oldValue,
        step,
        s,
        scale,
        startX,
        startY,
        stepDecimal,
        timer,
        totalWidth,
        value,
        that = this,
        lastUpdate = new Date();

    function onStart(ev) {
      if (ev.type === 'mousedown') {
        ev.preventDefault();
      }

      if (testTouch(ev, this) && (!action || isHover) && !elm.disabled && !elm.readOnly
      /* TRIALCOND */
      ) {
          if (s.stopProp) {
            ev.stopPropagation();
          }

          action = true;
          moved = false;
          changed = false;
          startX = getCoord(ev, 'X');
          startY = getCoord(ev, 'Y');
          endX = startX;
          $track.removeClass('mbsc-progress-anim');
          $handle = multiple ? $$1('.mbsc-slider-handle', this) : $handles;

          if ($handleCont) {
            $handleCont.removeClass('mbsc-handle-curr');
          }

          $handleCont = $handle.parent().addClass('mbsc-active mbsc-handle-curr');
          $elm.addClass('mbsc-active');
          handleIndex = +$handle.attr('data-index');
          totalWidth = $track[0].offsetWidth;
          diff = $track[0].getBoundingClientRect().left;

          if (ev.type === 'mousedown') {
            isPressed = true;
            $$1(document).on('mousemove', onMove).on('mouseup', onEnd);
          }

          if (ev.type === 'mouseenter') {
            isHover = true;
            $$1(document).on('mousemove', onMove);
          }
        }
    }

    function onMove(ev) {
      if (action) {
        endX = getCoord(ev, 'X');
        endY = getCoord(ev, 'Y');
        diffX = endX - startX;
        diffY = endY - startY;

        if (Math.abs(diffX) > 5) {
          moved = true;
        }

        if (moved || isPressed || isHover) {
          if (Math.abs(lastUpdate - new Date()) > 50) {
            lastUpdate = new Date();
            updateSlider(endX, s.round, live && (!isHover || isPressed));
          }
        }

        if (moved) {
          ev.preventDefault();
        } else if (Math.abs(diffY) > 7 && ev.type == 'touchmove') {
          cleanUp();
        }
      }
    }

    function onEnd(ev) {
      if (action) {
        ev.preventDefault();

        if (!multiple) {
          $track.addClass('mbsc-progress-anim');
        }

        if (isHover && !isPressed) {
          updateValue(value[handleIndex], handleIndex, false, false, true);
        } else {
          updateSlider(endX, true, true);
        }

        if (!moved && !changed) {
          if (ev.type == 'touchend') {
            // Prevent ghost click
            preventClick();
          }

          that._onTap(value[handleIndex]);
        }

        if (ev.type == 'mouseup') {
          isPressed = false;
        }

        if (ev.type == 'mouseleave') {
          isHover = false;
        }

        if (!isHover) {
          cleanUp();
        }
      }
    }

    function onCancel() {
      if (action) {
        cleanUp();
      }
    }

    function onChange() {
      var v = that._readValue($$1(this)),
          i = +$$1(this).attr('data-index');

      if (v !== value[i]) {
        value[i] = v;
        oldValue[i] = v;
        updateValue(v, i);
      }
    }

    function onClick(ev) {
      // Prevent propagating click to label
      ev.stopPropagation();
    }

    function onLabelClick(ev) {
      // Prevent change on label click for swithes
      ev.preventDefault();
    }

    function onKeyDown(ev) {
      var dir;

      if (!elm.disabled) {
        switch (ev.keyCode) {
          case 38:
          case 39:
            dir = 1;
            break;

          case 40:
          case 37:
            dir = -1;
            break;
        }

        if (dir) {
          ev.preventDefault();

          if (!timer) {
            handleIndex = +$$1(this).attr('data-index');
            updateValue(value[handleIndex] + step * dir, handleIndex, true);
            timer = setInterval(function () {
              updateValue(value[handleIndex] + step * dir, handleIndex, true);
            }, 200);
          }
        }
      }
    }

    function onKeyUp(ev) {
      ev.preventDefault();
      clearInterval(timer);
      timer = null;
    }

    function cleanUp() {
      action = false;
      $handleCont.removeClass('mbsc-active');
      $elm.removeClass('mbsc-active'); // Detach document events

      $$1(document).off('mousemove', onMove).off('mouseup', onEnd);
    }

    function updateSlider(pos, round, fill) {
      var percent = round ? Math.min(Math[that._rounding || 'round'](Math.max((pos - diff) * 100 / totalWidth, 0) / scale / step) * step * 100 / (max - min + base), 100) : Math.max(0, Math.min((pos - diff) * 100 / totalWidth, 100));

      if (isRtl) {
        percent = 100 - percent;
      }

      updateValue(Math.round((min - base + percent / scale) * stepDecimal) / stepDecimal, handleIndex, fill, percent);
    }

    function updateValue(v, index, fill, percent, refresh, change) {
      var $handle = $handles.eq(index),
          $handleCont = $handle.parent();
      v = Math.min(max, Math.max(v, min));

      if (change === undefined) {
        change = fill;
      }

      if (that._update) {
        v = that._update(v, value, index, percent, multiple, refresh, $handleCont);
      } else {
        $handleCont.css({
          left: isRtl ? 'auto' : (percent || getPercent(v, min, max)) + '%',
          right: isRtl ? (percent || getPercent(v, min, max)) + '%' : 'auto'
        });
      }

      if (v > min) {
        $handleCont.removeClass('mbsc-slider-start');
      } else if (value[index] > min || refresh) {
        $handleCont.addClass('mbsc-slider-start');
      } // Store new value


      if (fill) {
        value[index] = v;
      } // Check if value changed


      if (fill && oldValue[index] != v) {
        changed = true;
        oldValue[index] = v; // Set new value to the input

        that._fillValue(v, index, change);
      }

      $handle.attr('aria-valuenow', v);
    } // Call the parent constructor


    ProgressBase.call(this, elm, settings, true);
    that._onTap = noop;
    that.___init = noop;
    that.___destroy = noop;

    that._attachChange = function () {
      $elm.on(s.changeEvent, onChange);
    };

    that.__init = function () {
      var wasInit;

      if ($handles) {
        wasInit = true;
        $handles.parent().remove();
      }

      that.___init();

      $parent = that._$parent;
      $track = that._$track;
      $elm = $parent.find('input');
      s = that.settings;
      min = that._min;
      max = that._max;
      base = that._base || 0;
      step = that._step;
      live = that._live;
      stepDecimal = step % 1 !== 0 ? 100 / (+(step % 1).toFixed(2) * 100) : 1;
      scale = 100 / (max - min + base) || 100;
      multiple = $elm.length > 1;
      isRtl = s.rtl;
      value = [];
      oldValue = []; // Read values

      $elm.each(function (i) {
        value[i] = that._readValue($$1(this));
        $$1(this).attr('data-index', i);
      });
      $handles = $parent.find('.mbsc-slider-handle');
      $listeners = $parent.find(multiple ? '.mbsc-slider-handle-cont' : '.mbsc-progress-cont'); // Attach events

      $handles.on('keydown', onKeyDown).on('keyup', onKeyUp).on('blur', onKeyUp);
      $listeners.each(function (i, listener) {
        listen(listener, 'touchstart', onStart, {
          passive: true
        });
        listen(listener, 'mousedown', onStart);
        listen(listener, 'touchend', onEnd);
        listen(listener, 'touchcancel', onEnd);
        listen(listener, 'pointercancel', onCancel);

        if (s.hover) {
          listen(listener, 'mouseenter', onStart);
          listen(listener, 'mouseleave', onEnd);
        }
      });

      if (!wasInit) {
        $elm.on('click', onClick);
        $parent.on('click', onLabelClick); // Attach to document to avoid non-passive listener warnings

        listen(document, 'touchmove', onMove, {
          passive: false
        });
      }
    };

    that.__destroy = function () {
      $parent.off('click', onLabelClick);
      $elm.off(s.changeEvent, onChange).off('click', onClick);
      $handles.off('keydown', onKeyDown).off('keyup', onKeyUp).off('blur', onKeyUp);
      $listeners.each(function (i, listener) {
        unlisten(listener, 'touchstart', onStart, {
          passive: true
        });
        unlisten(listener, 'mousedown', onStart);
        unlisten(listener, 'touchend', onEnd);
        unlisten(listener, 'touchcancel', onEnd);
        unlisten(listener, 'pointercancel', onCancel);
        unlisten(listener, 'mouseenter', onStart);
        unlisten(listener, 'mouseleave', onEnd);
        unlisten(document, 'touchmove', onMove, {
          passive: false
        });
      });

      that.___destroy();
    };

    that.refresh = function () {
      $elm.each(function (i) {
        updateValue(that._readValue($$1(this)), i, true, false, true, false);
      });
    };

    that.getVal = function () {
      return multiple ? value.slice(0) : value[0];
    };

    that.setVal = that._setVal = function (val, fill, change) {
      if (!$$1.isArray(val)) {
        val = [val];
      }

      $$1.each(val, function (i, v) {
        value[i] = v;
      });
      $$1.each(val, function (i, v) {
        updateValue(v, i, true, false, true, change);
      });
    };

    if (!inherit) {
      that.init();
    }
  };

  var Switch = function Switch(elm, settings) {
    var $elm,
        $parent,
        s,
        formControl,
        that = this;
    settings = settings || {};
    extend$1(settings, {
      changeEvent: 'click',
      round: false
    }); // Call the parent constructor

    SliderBase.call(this, elm, settings, true);

    that._readValue = function () {
      return elm.checked ? 1 : 0;
    };

    that._fillValue = function (v, index, change) {
      $elm.prop('checked', !!v);

      if (change) {
        $elm.trigger('change');
      }
    };

    that._onTap = function (v) {
      that._setVal(v ? 0 : 1);
    };

    that.___init = function () {
      s = that.settings;
      $elm = $$1(elm);
      $parent = $elm.parent();
      $parent.find('.mbsc-switch-track').remove();
      $parent.prepend($elm);
      $elm.attr('data-role', 'switch').after('<span class="mbsc-progress-cont mbsc-switch-track">' + '<span class="mbsc-progress-track mbsc-progress-anim">' + '<span class="mbsc-slider-handle-cont">' + '<span class="mbsc-slider-handle mbsc-switch-handle" data-index="0">' + '<span class="mbsc-switch-txt-off">' + s.offText + '</span>' + '<span class="mbsc-switch-txt-on">' + s.onText + '</span>' + '</span></span></span></span>');

      if (formControl) {
        formControl.destroy();
      }

      formControl = new FormControl(elm, s);
      that._$track = $parent.find('.mbsc-progress-track');
      that._min = 0;
      that._max = 1;
      that._step = 1;
    };

    that.___destroy = function () {
      formControl.destroy();
    };

    that.getVal = function () {
      return elm.checked;
    };

    that.setVal = function (val, fill, change) {
      that._setVal(val ? 1 : 0, fill, change);
    };

    that.init();
  };
  Switch.prototype = {
    _class: 'switch',
    _css: 'mbsc-switch',
    _hasTheme: true,
    _hasLang: true,
    _hasDef: true,
    _defaults: {
      stopProp: true,
      offText: 'Off',
      onText: 'On'
    }
  };
  classes.Switch = Switch; // Init mbsc-switch elements on page load

  autoInit('[mbsc-switch]', Switch);

  // eslint-disable-next-line no-unused-vars
  var Progress = function Progress(elm, settings, inherit) {
    var $display,
        $elm,
        $parent,
        $progress,
        $target,
        $track,
        min,
        max,
        inputStyle,
        labelStyle,
        s,
        template,
        value,
        valueText,
        that = this;

    function onChange() {
      var v = getAttr('value', min);

      if (v !== value) {
        updateValue(v);
      }
    }

    function getAttr(attr, def, str) {
      var v = $elm.attr(attr);
      return v === undefined || v === '' ? def : str ? v : +v;
    }

    function updateValue(v, refresh, fill, change) {
      v =
      /* TRIALCONDREV */
      Math.min(max, Math.max(v, min));
      $progress.css('width', (v - min) * 100 / (max - min) + '%');

      if (fill === undefined) {
        fill = true;
      }

      if (change === undefined) {
        change = fill;
      }

      if (v !== value || refresh) {
        // Display value
        that._display(v);
      }

      if (v !== value) {
        // Set new value
        value = v; // Put new value in the progress element

        if (fill) {
          $elm.attr('value', value);
        } // Trigger change on the element


        if (change) {
          $elm.trigger('change');
        }
      }
    } // Call the parent constructor


    ProgressBase.call(this, elm, settings, true);

    that._display = function (v) {
      valueText = template && s.returnAffix ? template.replace(/\{value\}/, v).replace(/\{max\}/, max) : v;

      if ($target) {
        $target.html(valueText);
      }

      if ($display) {
        $display.html(valueText);
      }
    };

    that._attachChange = function () {
      $elm.on('change', onChange);
    };

    that.__init = function () {
      var displayValue, i, stepLabels, wasInit;
      s = that.settings;
      $elm = $$1(elm); // Check if the element was already initialized

      wasInit = !!$parent;
      $parent = that._$parent; // Read settings from data attributes or settings object

      min = that._min = settings.min === undefined ? getAttr('min', s.min) : settings.min;
      max = that._max = settings.max === undefined ? getAttr('max', s.max) : settings.max;
      inputStyle = settings.inputStyle === undefined ? getAttr('data-input-style', s.inputStyle, true) : settings.inputStyle;
      labelStyle = settings.labelStyle === undefined ? getAttr('data-label-style', s.labelStyle, true) : settings.labelStyle;
      value = getAttr('value', min);
      displayValue = $elm.attr('data-val') || s.val;
      stepLabels = $elm.attr('data-step-labels');
      stepLabels = stepLabels ? JSON.parse(stepLabels) : s.stepLabels;
      template = $elm.attr('data-template') || (max == 100 && !s.template ? '{value}%' : s.template);

      if (!wasInit) {
        wrapLabel($parent, null, inputStyle, labelStyle, elm);
        addIcon($elm); // Generate track and progress

        $parent.find('.mbsc-input-wrap').append('<span class="mbsc-progress-cont"><span class="mbsc-progress-track mbsc-progress-anim"><span class="mbsc-progress-bar"></span></span></span>');
        $progress = that._$progress = $parent.find('.mbsc-progress-bar');
        $track = that._$track = $parent.find('.mbsc-progress-track');
      } else {
        if (displayValue) {
          $display.remove();
          $parent.removeClass('mbsc-progress-value-' + (displayValue == 'right' ? 'right' : 'left'));
        }

        if (stepLabels) {
          $$1('.mbsc-progress-step-label', $track).remove();
        }
      } // Set attributes


      $elm.attr('min', min).attr('max', max); // Generate value container on left or right side

      if (displayValue) {
        $display = $$1('<span class="mbsc-progress-value"></span>');
        $parent.addClass('mbsc-progress-value-' + (displayValue == 'right' ? 'right' : 'left')).find('.mbsc-input-wrap').append($display);
      } // Generate step labels


      if (stepLabels) {
        for (i = 0; i < stepLabels.length; ++i) {
          $track.append('<span class="mbsc-progress-step-label" style="' + (s.rtl ? 'right' : 'left') + ': ' + (stepLabels[i] - min) * 100 / (max - min) + '%" >' + stepLabels[i] + '</span>');
        }
      }

      $target = $$1($elm.attr('data-target') || s.target);
    };

    that.__destroy = function () {
      $parent.removeClass('mbsc-ic-left mbsc-ic-right').find('.mbsc-progress-cont').remove();
      $parent.find('.mbsc-input-ic').remove();
      $elm.off('change', onChange);
    };

    that.refresh = function () {
      updateValue(getAttr('value', min), true, false);
    };

    that.getVal = function () {
      return value;
    };

    that.setVal = function (v, fill, change) {
      updateValue(v, true, fill, change);
    };

    if (!inherit) {
      that.init();
    }
  };
  Progress.prototype = {
    _class: 'progress',
    _css: 'mbsc-progress',
    _hasTheme: true,
    _hasLang: true,
    _hasDef: true,
    _defaults: {
      min: 0,
      max: 100,
      returnAffix: true
    }
  };
  classes.Progress = Progress; // Init mbsc-progress elements on page load

  autoInit('[mbsc-progress]', Progress);

  var Slider = function Slider(elm, settings, inherit) {
    var $elm,
        $parent,
        $progress,
        $tooltips,
        $track,
        hasProgress,
        hasTooltip,
        isRange,
        isRtl,
        max,
        min,
        step,
        s,
        that = this; // Call the parent constructor

    Progress.call(this, elm, settings, true);
    var progressInit = that.__init,
        progressDestroy = that.__destroy;
    SliderBase.call(this, elm, settings, true);
    var sliderInit = that.__init,
        sliderDestroy = that.__destroy; // ---

    that.__init = function () {
      progressInit();
      sliderInit();
    };

    that.__destroy = function () {
      progressDestroy();
      sliderDestroy();
    };

    that._update = function (v, value, index, percent, multiple, refresh, $handleCont) {
      if (isRange) {
        if (index === 0) {
          v = Math.min(v, value[1]);
          $progress.css({
            width: getPercent(value[1], min, max) - getPercent(v, min, max) + '%',
            left: isRtl ? 'auto' : getPercent(v, min, max) + '%',
            right: isRtl ? getPercent(v, min, max) + '%' : 'auto'
          });
        } else {
          v = Math.max(v, value[0]);
          $progress.css({
            width: getPercent(v, min, max) - getPercent(value[0], min, max) + '%'
          });
        }
      } else if (multiple || !hasProgress) {
        $handleCont.css({
          left: isRtl ? 'auto' : (percent || getPercent(v, min, max)) + '%',
          right: isRtl ? (percent || getPercent(v, min, max)) + '%' : 'auto'
        });
      } else {
        $progress.css('width', (percent || getPercent(v, min, max)) + '%');
      }

      if (hasTooltip) {
        $tooltips.eq(index).html(v);
      } // Display value in the specified container(s)


      if (!multiple && (value[index] != v || refresh)) {
        that._display(v);
      } // Return validated value


      return v;
    };

    that._readValue = function ($elm) {
      return +$elm.val();
    };

    that._fillValue = function (v, index, change) {
      $elm.eq(index).val(v);

      if (change) {
        $elm.eq(index).trigger('change');
      }
    };

    that._markupReady = function () {
      var i, stepNr;

      if (hasTooltip) {
        $parent.addClass('mbsc-slider-has-tooltip');
      } // Generate step marks


      if (step != 1) {
        stepNr = (max - min) / step;

        for (i = 0; i <= stepNr; ++i) {
          $track.append('<span class="mbsc-slider-step" style="' + (isRtl ? 'right' : 'left') + ':' + 100 / stepNr * i + '%"></span>');
        }
      } // Generate slider handles


      $elm.each(function (i, elm) {
        var value = +elm.value;

        if (elm.type == 'range') {
          // Set min / max / step properties for all inputs
          $$1(elm).attr('min', min).attr('max', max).attr('step', step);
        }

        (hasProgress ? $progress : $track).append('<span class="mbsc-slider-handle-cont' + (isRange && !i ? ' mbsc-slider-handle-left' : '') + (isRange && !i && value > (max - min) / 2 ? ' mbsc-handle-curr' : '') + '">' + '<span tabindex="0" class="mbsc-slider-handle" aria-valuemin="' + min + '" aria-valuemax="' + max + '" data-index="' + i + '"></span>' + (hasTooltip ? '<span class="mbsc-slider-tooltip"></span>' : '') + '</span>');
      });
      $tooltips = $parent.find('.mbsc-slider-tooltip');
    };

    that.___init = function () {
      if ($parent) {
        $parent.removeClass('mbsc-slider-has-tooltip');

        if (step != 1) {
          $$1('.mbsc-slider-step', $track).remove();
        }
      }

      $parent = that._$parent;
      $track = that._$track;
      $progress = that._$progress;
      $elm = $parent.find('input');
      s = that.settings;
      min = that._min;
      max = that._max;
      that._step = step = settings.step === undefined ? +$elm.attr('step') || s.step : settings.step;
      that._live = getBoolAttr('data-live', s.live, $elm);
      hasTooltip = getBoolAttr('data-tooltip', s.tooltip, $elm);
      hasProgress = getBoolAttr('data-highlight', s.highlight, $elm) && $elm.length < 3;
      isRange = hasProgress && $elm.length == 2;
      isRtl = s.rtl;

      that._markupReady();
    };

    if (!inherit) {
      that.init();
    }
  };
  Slider.prototype = {
    _class: 'progress',
    _css: 'mbsc-progress mbsc-slider',
    _hasTheme: true,
    _hasLang: true,
    _hasDef: true,
    _defaults: {
      changeEvent: 'change',
      stopProp: true,
      min: 0,
      max: 100,
      step: 1,
      live: true,
      highlight: true,
      round: true,
      returnAffix: true
    }
  };
  classes.Slider = Slider; // Init mbsc-slider elements on page load

  autoInit('[mbsc-slider]', Slider);

  var Rating = function Rating(elm, settings, inherit) {
    var $progress,
        $track,
        max,
        min,
        empty,
        filled,
        s,
        that = this,
        $elm = $$1(elm); // Call the parent constructor

    Slider.call(this, elm, settings, true);

    that._update = function (v, value, index, percent, multiple, refresh) {
      $progress.css('width', getPercent(v, 0, max) + '%'); // Display value in the specified container(s)

      if (!multiple && (value[index] != v || refresh)) {
        that._display(v);
      } // Return validated value


      return v;
    };

    that._markupReady = function () {
      var i,
          emptyString = '',
          filledString = '';
      $track = that._$track;
      $progress = that._$progress;
      s = that.settings;
      min = that._min;
      max = that._max;
      that._base = min;
      that._rounding = s.rtl ? 'floor' : 'ceil';
      empty = $elm.attr('data-empty') || s.empty;
      filled = $elm.attr('data-filled') || s.filled;

      for (i = 0; i < max; ++i) {
        emptyString += '<span class="mbsc-ic mbsc-ic-' + empty + '"></span>';
        filledString += '<span class="mbsc-ic mbsc-ic-' + filled + '"></span>';
      }

      $track.html(emptyString);
      $track.append($progress);
      $progress.html(filledString);
      $track.append('<span class="mbsc-rating-handle-cont' + '">' + '<span tabindex="0" class="mbsc-slider-handle" aria-valuemin="' + min + '" aria-valuemax="' + max + '" data-index="0"></span>' + '</span>');
    };

    if (!inherit) {
      that.init();
    }
  };
  Rating.prototype = {
    _class: 'progress',
    _css: 'mbsc-progress mbsc-rating',
    _hasTheme: true,
    _hasLang: true,
    _hasDef: true,
    _defaults: {
      changeEvent: 'change',
      stopProp: true,
      min: 1,
      max: 5,
      step: 1,
      live: true,
      round: true,
      hover: true,
      highlight: true,
      returnAffix: true,
      empty: 'star',
      filled: 'star3'
    }
  };
  classes.Rating = Rating; // Init mbsc-rating elements on page load

  autoInit('[mbsc-rating]', Rating);

  var nr = 1;
  var CollapsibleBase =
  /*#__PURE__*/
  function () {
    function CollapsibleBase(elm, settings) {
      var _this = this;

      var content;
      var $header;
      var $content;
      var $elm = $$1(elm);
      this.settings = settings;
      this._isOpen = settings.isOpen || false;
      $elm.addClass('mbsc-collapsible ' + (this._isOpen ? 'mbsc-collapsible-open' : ''));

      if ($elm.hasClass('mbsc-card')) {
        // card enhance
        $header = $elm.find('.mbsc-card-header').eq(0).addClass('mbsc-collapsible-header');
        $content = $elm.find('.mbsc-card-content').eq(0).addClass('mbsc-collapsible-content');
      } else if ($elm.hasClass('mbsc-form-group') || $elm.hasClass('mbsc-form-group-inset')) {
        // form group enhance
        $header = $elm.find('.mbsc-form-group-title').eq(0).addClass('mbsc-collapsible-header');
        $content = $elm.find('.mbsc-form-group-content').eq(0).addClass('mbsc-collapsible-content');
      } else {
        // if it is used independently
        $header = $elm.find('.mbsc-collapsible-header').eq(0);
        $content = $elm.find('.mbsc-collapsible-content').eq(0);
      }

      content = $content[0];

      if (content && !content.id) {
        content.id = 'mbsc-collapsible-' + nr++;
      }

      if ($header.length && content) {
        var $collapsibleIcon = $$1('<span class="mbsc-collapsible-icon mbsc-ic mbsc-ic-arrow-down5"></span>');
        tap(this, $header, function () {
          _this.collapse();
        });
        $header.attr('role', 'button').attr('aria-expanded', this._isOpen).attr('aria-controls', content.id).attr('tabindex', '0').on('mousedown', this.onMouseDown).on('keydown', this.onKeyDown).append($collapsibleIcon);
      }

      elm.mbscInst = this;
      this._$header = $header;
      this._$content = $content;
      this._$elm = $elm;
      this._$accordionParent = $elm.parent('[mbsc-accordion], mbsc-accordion, .mbsc-accordion');
      this.show = this.show.bind(this);
      this.hide = this.hide.bind(this);
      this.toggle = this.toggle.bind(this);
      this.onKeyDown = this.onKeyDown.bind(this);
      this.onMouseDown = this.onMouseDown.bind(this);
    }

    var _proto = CollapsibleBase.prototype;

    _proto.collapse = function collapse(show) {
      var $elm = this._$elm;
      var $content = this._$content;

      var removeHeight = function removeHeight() {
        $content.off('transitionend', removeHeight).css('height', '');
      };

      if (show === undefined) {
        show = !this._isOpen;
      }

      if (show && this._isOpen || !show && !this._isOpen || !$content.length) {
        return;
      }

      if (show) {
        if (hasTransition) {
          $content.on('transitionend', removeHeight).css('height', $content[0].scrollHeight);
        }

        $elm.addClass('mbsc-collapsible-open');
      } else {
        if (hasTransition) {
          $content.css('height', getComputedStyle($content[0]).height);
        }

        setTimeout(function () {
          $content.css('height', 0);
          $elm.removeClass('mbsc-collapsible-open');
        }, 50);
      }

      if (show && this._$accordionParent) {
        this._$accordionParent.find('.mbsc-collapsible-open').each(function () {
          if (this !== $elm[0]) {
            this.mbscInst.hide();
          }
        });
      }

      this._isOpen = show;

      this._$header.attr('aria-expanded', this._isOpen);
    };

    _proto.show = function show() {
      this.collapse(true);
    };

    _proto.hide = function hide() {
      this.collapse(false);
    };

    _proto.toggle = function toggle() {
      this.collapse();
    };

    _proto.destroy = function destroy() {
      this._$elm.removeClass('mbsc-collapsible mbsc-collapsible-open');

      this._$content.removeClass('mbsc-collapsible-content');

      this._$header.removeClass('mbsc-collapsible-header').off('mousedown', this.onMouseDown).off('keydown', this.onKeyDown).find('.mbsc-collapsible-icon').remove();

      tapOff(this._$header);
    };

    _proto.onKeyDown = function onKeyDown(ev) {
      if (ev.which === 32 || ev.keyCode == 13) {
        //space or enter 
        ev.preventDefault();
        this.collapse();
      }
    };

    _proto.onMouseDown = function onMouseDown(ev) {
      // prevent focus on mouse down
      ev.preventDefault();
    };

    return CollapsibleBase;
  }();
  classes.CollapsibleBase = CollapsibleBase;

  var id$1 = 0;

  function initControls($ctx, controls, s, shallow) {
    $$1('input,select,textarea,progress,button', $ctx).each(function () {
      var control = this,
          $control = $$1(control),
          //$parent = $control.parent(),
      type = getControlType($control); // Skip elements with data-enhance="false"

      if ($control.attr('data-enhance') != 'false'
      /* TRIALCOND */
      ) {
          if ($control.hasClass('mbsc-control')) {
            if (control.mbscInst) {
              control.mbscInst.option({
                theme: s.theme,
                lang: s.lang,
                rtl: s.rtl,
                onText: s.onText,
                offText: s.offText,
                stopProp: s.stopProp
              });
            }
          } else {
            if (!control.id) {
              control.id = 'mbsc-form-control-' + ++id$1;
            }

            switch (type) {
              case 'button':
              case 'submit':
                controls[control.id] = new Button(control, {
                  theme: s.theme,
                  rtl: s.rtl,
                  tap: s.tap
                });
                break;

              case 'switch':
                controls[control.id] = new Switch(control, {
                  theme: s.theme,
                  lang: s.lang,
                  rtl: s.rtl,
                  tap: s.tap,
                  onText: s.onText,
                  offText: s.offText,
                  stopProp: s.stopProp
                });
                break;

              case 'checkbox':
                controls[control.id] = new CheckBox(control, {
                  tap: s.tap,
                  theme: s.theme,
                  rtl: s.rtl
                });
                break;

              case 'range':
                if (!$$1(control).parent().hasClass('mbsc-slider')) {
                  controls[control.id] = new Slider(control, {
                    theme: s.theme,
                    lang: s.lang,
                    rtl: s.rtl,
                    stopProp: s.stopProp,
                    labelStyle: s.labelStyle
                  });
                }

                break;

              case 'rating':
                controls[control.id] = new Rating(control, {
                  theme: s.theme,
                  lang: s.lang,
                  rtl: s.rtl,
                  stopProp: s.stopProp
                });
                break;

              case 'progress':
                controls[control.id] = new Progress(control, {
                  theme: s.theme,
                  lang: s.lang,
                  rtl: s.rtl,
                  labelStyle: s.labelStyle
                });
                break;

              case 'radio':
                controls[control.id] = new Radio(control, {
                  tap: s.tap,
                  theme: s.theme,
                  rtl: s.rtl
                });
                break;

              case 'select':
              case 'select-one':
              case 'select-multiple':
                controls[control.id] = new Select(control, {
                  tap: s.tap,
                  inputStyle: s.inputStyle,
                  labelStyle: s.labelStyle,
                  theme: s.theme,
                  rtl: s.rtl
                });
                break;

              case 'textarea':
                controls[control.id] = new TextArea(control, {
                  tap: s.tap,
                  inputStyle: s.inputStyle,
                  labelStyle: s.labelStyle,
                  theme: s.theme,
                  rtl: s.rtl
                });
                break;

              case 'segmented':
                controls[control.id] = new SegmentedItem(control, {
                  theme: s.theme,
                  rtl: s.rtl,
                  tap: s.tap,
                  inputStyle: s.inputStyle
                });
                break;

              case 'stepper':
                controls[control.id] = new Stepper(control, {
                  theme: s.theme,
                  rtl: s.rtl
                });
                break;

              case 'hidden':
                return;

              default:
                controls[control.id] = new Input(control, {
                  tap: s.tap,
                  inputStyle: s.inputStyle,
                  labelStyle: s.labelStyle,
                  theme: s.theme,
                  rtl: s.rtl
                });
                break;
            }
          }
        }
    });
    $$1('[data-collapsible]:not(.mbsc-collapsible)', $ctx).each(function () {
      var control = this,
          $control = $$1(control),
          isOpen = $control.attr('data-open');

      if (!control.id) {
        control.id = 'mbsc-form-control-' + ++id$1;
      }

      controls[control.id] = new CollapsibleBase(control, {
        isOpen: isOpen !== undefined && isOpen != 'false'
      });
      instances[control.id] = controls[control.id];
    }); // Set initial height for textareas

    if (!shallow) {
      sizeTextAreas();
    }
  }

  var innerStyle = 'position:absolute;left:0;top:0;';
  var style = innerStyle + 'right:0;bottom:0;overflow:hidden;z-index:-1;';
  var markup = '<div style="' + style + '"><div style="' + innerStyle + '"></div></div>' + '<div style="' + style + '"><div style="' + innerStyle + 'width:200%;height:200%;"></div></div>';
  var observer;
  var count = 0;
  function resizeObserver(el, callback, zone) {
    function reset() {
      expandChild.style.width = '100000px';
      expandChild.style.height = '100000px';
      expand.scrollLeft = 100000;
      expand.scrollTop = 100000;
      shrink.scrollLeft = 100000;
      shrink.scrollTop = 100000;
    }

    function checkHidden() {
      var now = new Date();
      hiddenRafId = 0;

      if (!stopCheck) {
        if (now - lastCheck > 200 && !expand.scrollTop && !expand.scrollLeft) {
          lastCheck = now;
          reset();
        }

        if (!hiddenRafId) {
          hiddenRafId = raf(checkHidden);
        }
      }
    }

    function onScroll() {
      if (!rafId) {
        rafId = raf(onResize);
      }
    }

    function onResize() {
      rafId = 0;
      reset();
      callback();
    }

    var expand;
    var expandChild;
    var helper;
    var hiddenRafId;
    var rafId;
    var shrink;
    var stopCheck;
    var lastCheck = 0; //let isHidden = true;

    if (window.ResizeObserver) {
      if (!observer) {
        observer = new ResizeObserver(function (entries) {
          for (var _iterator = entries, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var entry = _ref;

            entry.target.__mbscResize();
          }
        });
      }

      count++;
      el.__mbscResize = callback;
      observer.observe(el);
    } else {
      helper = document.createElement('div');
      helper.innerHTML = markup;
      helper.dir = 'ltr'; // Need this to work in rtl as well;

      shrink = helper.childNodes[1];
      expand = helper.childNodes[0];
      expandChild = expand.childNodes[0];
      el.appendChild(helper);
      expand.addEventListener('scroll', onScroll);
      shrink.addEventListener('scroll', onScroll);

      if (zone) {
        zone.runOutsideAngular(function () {
          raf(checkHidden);
        });
      } else {
        raf(checkHidden);
      }
    }

    return {
      detach: function detach() {
        if (observer) {
          count--;
          observer.unobserve(el);

          if (!count) {
            observer = null;
          }
        } else {
          el.removeChild(helper);
          stopCheck = true;
        }
      }
    };
  }

  var $activeElm,
      preventShow,
      themes = mobiscroll.themes,
      needsFixed = /(iphone|ipod)/i.test(userAgent) && majorVersion >= 7,
      isAndroid = os == 'android',
      isIOS = os == 'ios',
      isIOS8 = isIOS && majorVersion == 8,
      halfBorder = isIOS && majorVersion > 7,
      prevdef = function prevdef(ev) {
    ev.preventDefault();
  };

  var EDITABLE = 'input,select,textarea,button';
  var ALLOW_ENTER = 'textarea,button,input[type="button"],input[type="submit"]';
  var FOCUSABLE = EDITABLE + ',[tabindex="0"]';
  var Frame = function Frame(el, settings, inherit) {
    var //$ariaDiv,
    $ctx,
        $header,
        $lock,
        $markup,
        $overlay,
        $persp,
        $popup,
        $wnd,
        $wrapper,
        buttons,
        btn,
        ctx,
        doAnim,
        hasContext,
        isModal,
        isInserted,
        isPointer,
        markup,
        modalWidth,
        modalHeight,
        needsDimensions,
        needsLock,
        observer,
        overlay,
        popup,
        posDebounce,
        prevInst,
        s,
        scrollLock,
        touched,
        trigger,
        wndWidth,
        wndHeight,
        that = this,
        $elm = $$1(el),
        elmList = [],
        lastFocus = new Date();

    function onBtnStart(ev) {
      // Need this to prevent opening of sidemenus or similar
      if (s.stopProp) {
        ev.stopPropagation();
      }

      var b = closest(this, ev.target, '.mbsc-fr-btn-e');

      if (!b) {
        return;
      } // Can't call preventDefault here, it kills page scroll


      if (btn) {
        btn.removeClass('mbsc-active');
      }

      btn = $$1(b); // Active button

      if (!btn.hasClass('mbsc-disabled') && !btn.hasClass('mbsc-fr-btn-nhl')) {
        btn.addClass('mbsc-active');
      }

      if (ev.type === 'mousedown') {
        $$1(document).on('mouseup', onBtnEnd);
      }
    }

    function onBtnEnd(ev) {
      if (btn) {
        btn.removeClass('mbsc-active');
        btn = null;
      }

      if (ev.type === 'mouseup') {
        $$1(document).off('mouseup', onBtnEnd);
      }
    }

    function onScroll(ev) {
      if (scrollLock && markup.contains(ev.target)) {
        ev.preventDefault();
      }
    }

    function onWndKeyDown(ev) {
      if (mobiscroll.activeInstance == that) {
        if (ev.keyCode == 13 && (!$$1(ev.target).is(ALLOW_ENTER) || ev.shiftKey)) {
          that.select();
        } else if (ev.keyCode == 27) {
          that.cancel();
        }
      }
    }

    function onShow(prevFocus) {
      if (!prevFocus && !isAndroid && that._activeElm) {
        //overlay.focus();
        lastFocus = new Date();

        that._activeElm.focus();
      } //that.ariaMessage(s.ariaMessage);

    }

    function onHide(prevAnim) {
      var $activeEl = $activeElm,
          focus = s.focusOnClose;

      that._markupRemove();

      $markup.remove();

      if (isModal) {
        ctx.mbscModals--;

        if (s.scrollLock) {
          ctx.mbscLock--;
        }

        if (!ctx.mbscLock) {
          $lock.removeClass('mbsc-fr-lock');
        }

        if (needsLock) {
          ctx.mbscIOSLock--;

          if (!ctx.mbscIOSLock) {
            $lock.removeClass('mbsc-fr-lock-ios');
            $ctx.css({
              top: '',
              left: ''
            });
            $wnd.scrollLeft(ctx.mbscScrollLeft);
            $wnd.scrollTop(ctx.mbscScrollTop);
          }
        } // The follwing should be done only if no other
        // instance was opened during the hide animation


        if (!ctx.mbscModals) {
          $lock.removeClass('mbsc-fr-lock-ctx');
        }

        if (!ctx.mbscModals || prevInst) {
          // Put focus back to the last active element
          if (!prevAnim) {
            if (!$activeEl) {
              $activeEl = $elm;
            }

            setTimeout(function () {
              if (focus === undefined || focus === true) {
                preventShow = true;
                $activeEl[0].focus();
              } else if (focus) {
                $$1(focus)[0].focus();
              }
            }, 200);
          }
        }
      }

      prevInst = undefined;
      isInserted = false;
      trigger('onHide');
    }

    function onPosition() {
      clearTimeout(posDebounce);
      posDebounce = setTimeout(function () {
        if (that.position(true)) {
          // Trigger reflow, needed on iOS safari, when orientation is changed
          popup.style.visibility = 'hidden';
          popup.offsetHeight;
          popup.style.visibility = '';
        }
      }, 200);
    }

    function onFocus(ev) {
      if (mobiscroll.activeInstance == that && ev.target.nodeType && !overlay.contains(ev.target) && new Date() - lastFocus > 100) {
        lastFocus = new Date();

        that._activeElm.focus();
      }
    }

    function insertMarkup(prevAnim, prevFocus) {
      function onAnimEnd() {
        $markup.off(animEnd, onAnimEnd).removeClass('mbsc-anim-in mbsc-anim-trans mbsc-anim-trans-' + doAnim).find('.mbsc-fr-popup').removeClass('mbsc-anim-' + doAnim);
        onShow(prevFocus);
      }

      function onOverlayStart(ev) {
        if (!target && ev.target == overlay) {
          target = true;
          moved = false;
          startX = getCoord(ev, 'X');
          startY = getCoord(ev, 'Y');
        }
      }

      function onOverlayMove(ev) {
        if (target && !moved && (Math.abs(getCoord(ev, 'X') - startX) > 9 || Math.abs(getCoord(ev, 'Y') - startY) > 9)) {
          moved = true;
        }
      } // Might be not visible if immediately hidden


      if (!that._isVisible) {
        return;
      } // Show


      if (isModal) {
        $markup.appendTo($ctx);
      } else if ($elm.is('div') && !that._hasContent) {
        // Insert inside the element on which was initialized
        $elm.empty().append($markup);
      } else {
        // Insert after the element
        if ($elm.hasClass('mbsc-control')) {
          var $wrap = $elm.closest('.mbsc-control-w');
          $markup.insertAfter($wrap);

          if ($wrap.hasClass('mbsc-select')) {
            $wrap.addClass('mbsc-select-inline');
          }
        } else {
          $markup.insertAfter($elm);
        }
      }

      isInserted = true;

      that._markupInserted($markup);

      trigger('onMarkupInserted', {
        target: markup
      });

      if (isModal && s.closeOnOverlayTap) {
        var moved, target, startX, startY;
        listen(overlay, 'touchstart', onOverlayStart, {
          passive: true
        });
        listen(overlay, 'touchmove', onOverlayMove, {
          passive: true
        });
        $overlay.on('mousedown', onOverlayStart).on('mousemove', onOverlayMove).on('touchcancel', function () {
          target = false;
        }).on('touchend click', function (ev) {
          if (target && !moved) {
            that.cancel();

            if (ev.type == 'touchend') {
              preventClick();
            }
          }

          target = false;
        });
      }

      $markup.on('mousedown', '.mbsc-btn-e,.mbsc-fr-btn-e', prevdef).on('keydown', '.mbsc-fr-btn-e', function (ev) {
        if (ev.keyCode == 32) {
          // Space
          ev.preventDefault();
          ev.stopPropagation();
          this.click();
        }
      }).on('keydown', function (ev) {
        // Trap focus inside modal
        if (ev.keyCode == 32 && !$$1(ev.target).is(EDITABLE)) {
          // Prevent page scroll on space press
          ev.preventDefault();
        } else if (ev.keyCode == 9 && isModal && s.focusTrap) {
          // Tab
          var $focusable = $markup.find(FOCUSABLE).filter(function () {
            return this.offsetWidth > 0 || this.offsetHeight > 0;
          }),
              index = $focusable.index($$1(':focus', $markup)),
              i = $focusable.length - 1,
              target = 0;

          if (ev.shiftKey) {
            i = 0;
            target = -1;
          }

          if (index === i) {
            $focusable.eq(target)[0].focus();
            ev.preventDefault();
          }
        }
      }).on('touchend', '.mbsc-fr-btn-e', onBtnEnd);
      listen(markup, 'touchstart', onBtnStart, {
        passive: true
      });
      listen(markup, 'mousedown', onBtnStart); // Need event capture for this

      listen(markup, 'touchstart', function () {
        if (!touched) {
          touched = true;
          $ctx.find('.mbsc-no-touch').removeClass('mbsc-no-touch');
        }
      }, {
        passive: true,
        capture: true
      }); // Init buttons

      $$1.each(buttons, function (i, b) {
        that.tap($$1('.mbsc-fr-btn' + i, $markup), function (ev) {
          b = isString(b) ? that.buttons[b] : b;
          (isString(b.handler) ? that.handlers[b.handler] : b.handler).call(this, ev, that);
        }, true);
      });

      that._attachEvents($markup); // Set position


      if (that.position() === false) {
        return;
      }

      if (isModal || that._checkSize) {
        observer = resizeObserver(markup, onPosition, s.zone);
      }

      if (isModal) {
        $markup.removeClass('mbsc-fr-pos');

        if (doAnim && !prevAnim) {
          $markup.addClass('mbsc-anim-in mbsc-anim-trans mbsc-anim-trans-' + doAnim).on(animEnd, onAnimEnd).find('.mbsc-fr-popup').addClass('mbsc-anim-' + doAnim);
        } else {
          onShow(prevFocus);
        }
      }

      trigger('onShow', {
        target: markup,
        valueText: that._tempValue
      });
    }

    function show(beforeShow, $elm) {
      if (that._isVisible) {
        return;
      }

      if (beforeShow) {
        beforeShow();
      }

      if (that.show() !== false) {
        $activeElm = $elm;
      }
    }

    function set() {
      that._fillValue();

      trigger('onSet', {
        valueText: that._value
      });
    }

    function cancel() {
      trigger('onCancel', {
        valueText: that._value
      });
    }

    function clear() {
      that.setVal(null, true);
    } // Call the parent constructor


    Base.call(this, el, settings, true);
    /**
     * Positions the scroller on the screen.
     */

    that.position = function (check) {
      var anchor,
          anchorWidth,
          anchorHeight,
          anchorPos,
          anchorTop,
          anchorLeft,
          arrow,
          arrowWidth,
          arrowHeight,
          docHeight,
          docWidth,
          isWrapped,
          newHeight,
          newWidth,
          oldHeight,
          oldWidth,
          width,
          top,
          left,
          css = {},
          scrollLeft = 0,
          scrollTop = 0,
          minWidth = 0,
          totalWidth = 0;

      if (!isInserted) {
        return false;
      }

      oldWidth = wndWidth;
      oldHeight = wndHeight;
      newHeight = Math.min(markup.offsetHeight, hasContext ? Infinity : window.innerHeight);
      newWidth = Math.min(markup.offsetWidth, hasContext ? Infinity : window.innerWidth);

      if (!newWidth || !newHeight || wndWidth === newWidth && wndHeight === newHeight && check) {
        return;
      }

      if (that._checkResp(newWidth)) {
        return false;
      }

      wndWidth = newWidth;
      wndHeight = newHeight;

      if (that._isFullScreen || /top|bottom/.test(s.display)) {
        // Set width, if document is larger than viewport, needs to be set before onPosition (for calendar)
        $popup.width(newWidth);
      } else if (isModal) {
        // Reset width
        $wrapper.width('');
      }

      that._position($markup); // Call position for nested mobiscroll components
      // $('.mbsc-comp', $markup).each(function () {
      //     var inst = instances[this.id];
      //     if (inst && inst !== that && inst.position) {
      //         inst.position();
      //     }
      // });


      if (!that._isFullScreen && /center|bubble/.test(s.display)) {
        $$1('.mbsc-w-p', $markup).each(function () {
          // Need fractional values here, so offsetWidth is not ok
          width = this.getBoundingClientRect().width;
          totalWidth += width;
          minWidth = width > minWidth ? width : minWidth;
        });
        isWrapped = totalWidth > newWidth - 16 || s.tabs === true;
        $wrapper.css({
          'width': that._isLiquid ? Math.min(s.maxPopupWidth, newWidth - 16) : Math.ceil(isWrapped ? minWidth : totalWidth),
          'white-space': isWrapped ? '' : 'nowrap'
        });
      }

      if (trigger('onPosition', {
        target: markup,
        popup: popup,
        hasTabs: isWrapped,
        oldWidth: oldWidth,
        oldHeight: oldHeight,
        windowWidth: newWidth,
        windowHeight: newHeight
      }) === false || !isModal) {
        return;
      }

      if (needsDimensions) {
        scrollLeft = $wnd.scrollLeft();
        scrollTop = $wnd.scrollTop();

        if (wndWidth) {
          $persp.css({
            width: '',
            height: ''
          });
        }
      }

      modalWidth = popup.offsetWidth;
      modalHeight = popup.offsetHeight;
      scrollLock = modalHeight <= newHeight && modalWidth <= newWidth;

      if (s.display == 'center') {
        left = Math.max(0, scrollLeft + (newWidth - modalWidth) / 2);
        top = Math.max(0, scrollTop + (newHeight - modalHeight) / 2);
      } else if (s.display == 'bubble') {
        anchor = s.anchor === undefined ? $elm : $$1(s.anchor);
        arrow = $$1('.mbsc-fr-arr-i', $markup)[0];
        anchorPos = anchor.offset();
        anchorTop = anchorPos.top + (hasContext ? scrollTop - $ctx.offset().top : 0);
        anchorLeft = anchorPos.left + (hasContext ? scrollLeft - $ctx.offset().left : 0);
        anchorWidth = anchor[0].offsetWidth;
        anchorHeight = anchor[0].offsetHeight;
        arrowWidth = arrow.offsetWidth;
        arrowHeight = arrow.offsetHeight; // Horizontal positioning

        left = constrain(anchorLeft - (modalWidth - anchorWidth) / 2, scrollLeft + 3, scrollLeft + newWidth - modalWidth - 3); // Vertical positioning
        // Below the input

        top = anchorTop + anchorHeight + arrowHeight / 2;

        if (top + modalHeight + 8 > scrollTop + newHeight && anchorTop - modalHeight - arrowHeight / 2 > scrollTop) {
          $popup.removeClass('mbsc-fr-bubble-bottom').addClass('mbsc-fr-bubble-top'); // Above the input

          top = anchorTop - modalHeight - arrowHeight / 2;
        } else {
          $popup.removeClass('mbsc-fr-bubble-top').addClass('mbsc-fr-bubble-bottom');
        } // Set arrow position


        $$1('.mbsc-fr-arr', $markup).css({
          left: constrain(anchorLeft + anchorWidth / 2 - (left + (modalWidth - arrowWidth) / 2), 0, arrowWidth)
        }); // Lock scroll only if popup is entirely in the viewport

        scrollLock = top > scrollTop && left > scrollLeft && top + modalHeight <= scrollTop + newHeight && left + modalWidth <= scrollLeft + newWidth;
      } else {
        left = scrollLeft;
        top = s.display == 'top' ? scrollTop : Math.max(0, scrollTop + newHeight - modalHeight);
      }

      if (needsDimensions) {
        // If top + modal height > doc height, increase doc height
        docHeight = Math.max(top + modalHeight, hasContext ? ctx.scrollHeight : $$1(document).height());
        docWidth = Math.max(left + modalWidth, hasContext ? ctx.scrollWidth : $$1(document).width());
        $persp.css({
          width: docWidth,
          height: docHeight
        }); // Check if scroll needed

        if (s.scroll && s.display == 'bubble' && (top + modalHeight + 8 > scrollTop + newHeight || anchorTop > scrollTop + newHeight || anchorTop + anchorHeight < scrollTop)) {
          $wnd.scrollTop(Math.min(anchorTop, top + modalHeight - newHeight + 8, docHeight - newHeight));
        }
      }

      css.top = Math.floor(top);
      css.left = Math.floor(left);
      $popup.css(css);
      return true;
    };
    /**
     * Show mobiscroll on focus and click event of the parameter.
     * @param {HTMLElement} elm - Events will be attached to this element.
     * @param {Function} [beforeShow=undefined] - Optional function to execute before showing mobiscroll.
     */


    that.attachShow = function (elm, beforeShow) {
      var $label,
          $elm = $$1(elm).off('.mbsc'),
          readOnly = $elm.prop('readonly');
      tapOff($elm);

      if (s.display !== 'inline') {
        if ((s.showOnFocus || s.showOnTap) && $elm.is('input,select')) {
          $elm.prop('readonly', true).on('mousedown.mbsc', function (ev) {
            // Prevent input to get focus on tap (virtual keyboard pops up on some devices)
            ev.preventDefault();
          }).on('focus.mbsc', function () {
            if (that._isVisible) {
              // Don't allow input focus if mobiscroll is being opened
              this.blur();
            }
          });
          $label = $$1('label[for="' + $elm.attr('id') + '"]');

          if (!$label.length) {
            $label = $elm.closest('label');
          }
        }

        if (!$elm.is('select')) {
          if (s.showOnFocus) {
            $elm.on('focus.mbsc', function () {
              if (!preventShow) {
                show(beforeShow, $elm);
              } else {
                preventShow = false;
              }
            });
          }

          if (s.showOnTap) {
            $elm.on('keydown.mbsc', function (ev) {
              if (ev.keyCode == 32 || ev.keyCode == 13) {
                // Space or Enter
                ev.preventDefault();
                ev.stopPropagation();
                show(beforeShow, $elm);
              }
            });
            that.tap($elm, function (ev) {
              if (ev.isMbscTap) {
                touched = true;
              }

              show(beforeShow, $elm);
            });

            if ($label && $label.length) {
              tapOff($label);
              that.tap($label, function (ev) {
                ev.preventDefault();

                if (ev.target !== $elm[0]) {
                  show(beforeShow, $elm);
                }
              });
            }
          }
        }

        elmList.push({
          readOnly: readOnly,
          el: $elm,
          lbl: $label
        });
      }
    };
    /**
     * Set button handler.
     */


    that.select = function () {
      if (isModal) {
        that.hide(false, 'set', false, set);
      } else {
        set();
      }
    };
    /**
     * Cancel and hide the scroller instance.
     */


    that.cancel = function () {
      if (isModal) {
        that.hide(false, 'cancel', false, cancel);
      } else {
        cancel();
      }
    };
    /**
     * Clear button handler.
     */


    that.clear = function () {
      that._clearValue();

      trigger('onClear');

      if (isModal && that._isVisible && !that.live) {
        that.hide(false, 'clear', false, clear);
      } else {
        clear();
      }
    };
    /**
     * Enables the scroller and the associated input.
     */


    that.enable = function () {
      s.disabled = false;
      $$1.each(elmList, function (i, v) {
        if (v.el.is('input,select')) {
          v.el[0].disabled = false;
        }
      });
    };
    /**
     * Disables the scroller and the associated input.
     */


    that.disable = function () {
      s.disabled = true;
      $$1.each(elmList, function (i, v) {
        if (v.el.is('input,select')) {
          v.el[0].disabled = true;
        }
      });
    };
    /**
     * Shows the scroller instance.
     * @param {Boolean} prevAnim - Prevent animation if true
     * @param {Boolean} prevFocus - Prevent focusing if true
     */


    that.show = function (prevAnim, prevFocus) {
      var hasButtons, html, scrollLeft, scrollTop;

      if (s.disabled || that._isVisible) {
        return;
      } // Parse value from input


      that._readValue();

      if (trigger('onBeforeShow') === false) {
        return false;
      }

      $activeElm = null;
      doAnim = s.animate;
      buttons = s.buttons || [];
      needsDimensions = hasContext || s.display == 'bubble';
      needsLock = needsFixed && !needsDimensions && s.scrollLock;
      hasButtons = buttons.length > 0; //touched = false;

      if (doAnim !== false) {
        if (s.display == 'top') {
          doAnim = doAnim || 'slidedown';
        } else if (s.display == 'bottom') {
          doAnim = doAnim || 'slideup';
        } else if (s.display == 'center' || s.display == 'bubble') {
          doAnim = doAnim || 'pop';
        }
      }

      if (isModal) {
        wndWidth = 0;
        wndHeight = 0;

        if (needsLock && !$lock.hasClass('mbsc-fr-lock-ios')) {
          //$lock.scrollTop(0);
          ctx.mbscScrollTop = scrollTop = Math.max(0, $wnd.scrollTop());
          ctx.mbscScrollLeft = scrollLeft = Math.max(0, $wnd.scrollLeft());
          $ctx.css({
            top: -scrollTop + 'px',
            left: -scrollLeft + 'px'
          });
        }

        $lock.addClass((s.scrollLock ? 'mbsc-fr-lock' : '') + (needsLock ? ' mbsc-fr-lock-ios' : '') + (hasContext ? ' mbsc-fr-lock-ctx' : '')); // Hide virtual keyboard

        if ($$1(document.activeElement).is('input,textarea')) {
          document.activeElement.blur();
        } // Save active instance to previous


        prevInst = mobiscroll.activeInstance; // Set active instance

        mobiscroll.activeInstance = that; // Keep track of modals opened per context

        ctx.mbscModals = (ctx.mbscModals || 0) + 1;

        if (needsLock) {
          ctx.mbscIOSLock = (ctx.mbscIOSLock || 0) + 1;
        }

        if (s.scrollLock) {
          ctx.mbscLock = (ctx.mbscLock || 0) + 1;
        }
      } // Create wheels containers


      html = '<div lang="' + s.lang + '" class="mbsc-fr mbsc-' + s.theme + (s.baseTheme ? ' mbsc-' + s.baseTheme : '') + ' mbsc-fr-' + s.display + ' ' + (s.cssClass || '') + ' ' + (s.compClass || '') + (that._isLiquid ? ' mbsc-fr-liq' : '') + (isModal ? ' mbsc-fr-pos' + (s.showOverlay ? '' : ' mbsc-fr-no-overlay') : '') + (isPointer ? ' mbsc-fr-pointer' : '') + (halfBorder ? ' mbsc-fr-hb' : '') + (touched ? '' : ' mbsc-no-touch') + (needsLock ? ' mbsc-platform-ios' : '') + (hasButtons ? buttons.length >= 3 ? ' mbsc-fr-btn-block ' : '' : ' mbsc-fr-nobtn') + '">' + (isModal ? '<div class="mbsc-fr-persp">' + (s.showOverlay ? '<div class="mbsc-fr-overlay"></div>' : '') + // Overlay
      '<div role="dialog" class="mbsc-fr-scroll">' : '') + '<div class="mbsc-fr-popup' + (s.rtl ? ' mbsc-rtl' : ' mbsc-ltr') + (s.headerText ? ' mbsc-fr-has-hdr' : '') + '">' + ( // Popup
      s.display === 'bubble' ? '<div class="mbsc-fr-arr-w"><div class="mbsc-fr-arr-i"><div class="mbsc-fr-arr"></div></div></div>' : '') + ( // Bubble arrow
      isModal ? '<div class="mbsc-fr-focus" tabindex="-1"></div>' : '') + '<div class="mbsc-fr-w">' + ( // Popup content
      //'<div aria-live="assertive" class="mbsc-fr-aria mbsc-fr-hdn"></div>' +
      s.headerText ? '<div class="mbsc-fr-hdr">' + (isString(s.headerText) ? s.headerText : '') + '</div>' : '') + // Header
      '<div class="mbsc-fr-c">'; // Wheel group container

      html += that._generateContent();
      html += '</div>';

      if (hasButtons) {
        var b,
            i,
            j,
            l = buttons.length;
        html += '<div class="mbsc-fr-btn-cont">';

        for (i = 0; i < buttons.length; i++) {
          j = s.btnReverse ? l - i - 1 : i;
          b = buttons[j];
          b = isString(b) ? that.buttons[b] : b;

          if (b.handler === 'set') {
            b.parentClass = 'mbsc-fr-btn-s';
          }

          if (b.handler === 'cancel') {
            b.parentClass = 'mbsc-fr-btn-c';
          }

          html += '<div' + (s.btnWidth ? ' style="width:' + 100 / buttons.length + '%"' : '') + ' class="mbsc-fr-btn-w ' + (b.parentClass || '') + '">' + '<div tabindex="0" role="button" class="mbsc-fr-btn' + j + ' mbsc-fr-btn-e ' + (b.cssClass === undefined ? s.btnClass : b.cssClass) + (b.icon ? ' mbsc-ic mbsc-ic-' + b.icon : '') + '">' + (b.text || '') + '</div></div>';
        }

        html += '</div>';
      }

      html += '</div></div></div></div>' + (isModal ? '</div></div>' : '');
      $markup = $$1(html);
      $persp = $$1('.mbsc-fr-persp', $markup);
      $overlay = $$1('.mbsc-fr-scroll', $markup);
      $wrapper = $$1('.mbsc-fr-w', $markup);
      $popup = $$1('.mbsc-fr-popup', $markup);
      $header = $$1('.mbsc-fr-hdr', $markup); //$ariaDiv = $('.mbsc-fr-aria', $markup);

      markup = $markup[0];
      overlay = $overlay[0];
      popup = $popup[0];
      that._activeElm = $$1('.mbsc-fr-focus', $markup)[0];
      that._markup = $markup;
      that._isVisible = true;
      that.markup = markup;

      that._markupReady($markup);

      trigger('onMarkupReady', {
        target: markup
      }); // Attach events

      if (isModal) {
        // Enter / ESC
        $$1(window).on('keydown', onWndKeyDown); // Prevent scroll if not specified otherwise

        if (s.scrollLock) {
          listen(document, 'touchmove', onScroll, {
            passive: false
          });
          listen(document, 'mousewheel', onScroll, {
            passive: false
          });
          listen(document, 'wheel', onScroll, {
            passive: false
          });
        }

        if (s.focusTrap) {
          $wnd.on('focusin', onFocus);
        }
      }

      if (isModal) {
        // Wait for the toolbar and addressbar to appear on iOS
        setTimeout(function () {
          insertMarkup(prevAnim, prevFocus);
        }, needsLock ? 100 : 0);
      } else {
        insertMarkup(prevAnim, prevFocus);
      }
    };
    /**
     * Hides the scroller instance.
     */


    that.hide = function (prevAnim, btn, force, callback) {
      function onAnimEnd() {
        $markup.off(animEnd, onAnimEnd);
        onHide(prevAnim);
      } // If onClose handler returns false, prevent hide


      if (!that._isVisible || !force && !that._isValid && btn == 'set' || !force && trigger('onBeforeClose', {
        valueText: that._tempValue,
        button: btn
      }) === false) {
        return false;
      }

      that._isVisible = false;

      if (observer) {
        observer.detach();
        observer = null;
      }

      if (isModal) {
        if ($$1(document.activeElement).is('input,textarea') && popup.contains(document.activeElement)) {
          document.activeElement.blur();
        }

        if (mobiscroll.activeInstance == that) {
          mobiscroll.activeInstance = prevInst;
        }

        $$1(window).off('keydown', onWndKeyDown);
        $wnd.off('focusin', onFocus);
        unlisten(document, 'touchmove', onScroll, {
          passive: false
        });
        unlisten(document, 'mousewheel', onScroll, {
          passive: false
        });
        unlisten(document, 'wheel', onScroll, {
          passive: false
        });
      } // Hide wheels and overlay


      if ($markup) {
        if (isModal && isInserted && doAnim && !prevAnim) {
          $markup.addClass('mbsc-anim-out mbsc-anim-trans mbsc-anim-trans-' + doAnim).on(animEnd, onAnimEnd).find('.mbsc-fr-popup').addClass('mbsc-anim-' + doAnim);
        } else {
          onHide(prevAnim);
        }

        that._detachEvents($markup);
      }

      if (callback) {
        callback();
      } // For validation


      $elm.trigger('blur');
      trigger('onClose', {
        valueText: that._value
      });
    }; // that.ariaMessage = function (txt) {
    //     $ariaDiv.html('');
    //     setTimeout(function () {
    //         $ariaDiv.html(txt);
    //     }, 100);
    // };

    /**
     * Return true if the scroller is currently visible.
     */


    that.isVisible = function () {
      return that._isVisible;
    }; // Protected functions to override


    that.setVal = noop;
    that.getVal = noop;
    that._generateContent = noop;
    that._attachEvents = noop;
    that._detachEvents = noop;
    that._readValue = noop;
    that._clearValue = noop;
    that._fillValue = noop;
    that._markupReady = noop;
    that._markupInserted = noop;
    that._markupRemove = noop;
    that._position = noop;
    that.__processSettings = noop;
    that.__init = noop;
    that.__destroy = noop; // Generic frame functions

    /**
     * Destroys the mobiscroll instance.
     */

    that._destroy = function () {
      // Force hide without animation
      that.hide(true, false, true);
      $elm.off('.mbsc');
      tapOff($elm); // Remove all events from elements

      $$1.each(elmList, function (i, v) {
        v.el.off('.mbsc').prop('readonly', v.readOnly);
        tapOff(v.el);

        if (v.lbl) {
          v.lbl.off('.mbsc');
          tapOff(v.lbl);
        }
      });

      that.__destroy();
    };

    that._updateHeader = function () {
      var t = s.headerText,
          txt = t ? typeof t === 'function' ? t.call(el, that._tempValue) : t.replace(/\{value\}/i, that._tempValue) : '';
      $header.html(txt || '&nbsp;');
    };

    that._getRespCont = function () {
      hasContext = s.context != 'body';
      $wnd = $$1(hasContext ? s.context : window);
      return s.display == 'inline' ? $elm.is('div') ? $elm : $elm.parent() : $wnd;
    };

    that._processSettings = function (resp) {
      var b, i;

      that.__processSettings(resp);

      isPointer = !s.touchUi;

      if (isPointer) {
        s.display = resp.display || settings.display || 'bubble';
        s.buttons = resp.buttons || settings.buttons || [];
        s.showOverlay = resp.showOverlay || settings.showOverlay || false;
      } // Add default buttons


      s.buttons = s.buttons || (s.display !== 'inline' ? ['cancel', 'set'] : []); // Hide header text in inline mode by default

      s.headerText = s.headerText === undefined ? s.display !== 'inline' ? '{value}' : false : s.headerText;
      buttons = s.buttons || [];
      isModal = s.display !== 'inline';
      $ctx = $$1(s.context);
      $lock = hasContext ? $ctx : $$1('body,html');
      ctx = $ctx[0];
      that.live = true; // If no set button is found, live mode is activated

      for (i = 0; i < buttons.length; i++) {
        b = buttons[i];

        if (b == 'ok' || b == 'set' || b.handler == 'set') {
          that.live = false;
        }
      }

      that.buttons.set = {
        text: s.setText,
        icon: s.setIcon,
        handler: 'set'
      };
      that.buttons.cancel = {
        text: s.cancelText,
        icon: s.cancelIcon,
        handler: 'cancel'
      };
      that.buttons.close = {
        text: s.closeText,
        icon: s.closeIcon,
        handler: 'cancel'
      };
      that.buttons.clear = {
        text: s.clearText,
        icon: s.clearIcon,
        handler: 'clear'
      };
      that._isInput = $elm.is('input');
    };
    /**
     * Scroller initialization.
     */


    that._init = function (newSettings) {
      var wasVisible = that._isVisible,
          wasReady = wasVisible && !$markup.hasClass('mbsc-fr-pos');

      if (wasVisible) {
        that.hide(true, false, true);
      } // Unbind all events (if re-init)


      $elm.off('.mbsc');
      tapOff($elm);

      that.__init(newSettings);

      that._isLiquid = s.layout == 'liquid';

      if (isModal) {
        that._readValue();

        if (!that._hasContent && !s.skipShow) {
          that.attachShow($elm);
        }

        if (wasVisible) {
          that.show(wasReady);
        }
      } else {
        that.show();
      }

      $elm.removeClass('mbsc-cloak').filter('input, select, textarea').on('change.mbsc', function () {
        if (!that._preventChange) {
          that.setVal($elm.val(), true, false);
        }

        that._preventChange = false;
      });
    };

    that.buttons = {};
    that.handlers = {
      set: that.select,
      cancel: that.cancel,
      clear: that.clear
    };
    that._value = null;
    that._isValid = true;
    that._isVisible = false; // Constructor

    s = that.settings;
    trigger = that.trigger;

    if (!inherit) {
      that.init();
    }
  };
  Frame.prototype._defaults = {
    // Localization
    lang: 'en',
    setText: 'Set',
    selectedText: '{count} selected',
    closeText: 'Close',
    cancelText: 'Cancel',
    clearText: 'Clear',
    // Options
    context: 'body',
    maxPopupWidth: 600,
    disabled: false,
    closeOnOverlayTap: true,
    showOnFocus: isAndroid || isIOS,
    // Needed for ion-input
    showOnTap: true,
    display: 'center',
    scroll: true,
    scrollLock: true,
    showOverlay: true,
    tap: true,
    touchUi: true,
    btnClass: 'mbsc-fr-btn',
    btnWidth: true,
    focusTrap: true,
    focusOnClose: !isIOS8 // Temporary for iOS8

  };
  classes.Frame = Frame;
  themes.frame.mobiscroll = {
    headerText: false,
    btnWidth: false
  };
  themes.scroller.mobiscroll = extend$1({}, themes.frame.mobiscroll, {
    rows: 5,
    showLabel: false,
    selectedLineBorder: 1,
    weekDays: 'min',
    checkIcon: 'ion-ios7-checkmark-empty',
    btnPlusClass: 'mbsc-ic mbsc-ic-arrow-down5',
    btnMinusClass: 'mbsc-ic mbsc-ic-arrow-up5',
    btnCalPrevClass: 'mbsc-ic mbsc-ic-arrow-left5',
    btnCalNextClass: 'mbsc-ic mbsc-ic-arrow-right5'
  });

  if (isBrowser) {
    // Prevent re-show on window focus
    $$1(window).on('focus', function () {
      if ($activeElm) {
        preventShow = true;
      }
    });
  }

  var Popup = function Popup(el, settings, inherit) {
    function addContent($m) {
      /* TRIAL */
      if (!$$1('.mbsc-fr-c', $m).hasClass('mbsc-wdg-c')
      /* TRIALCOND */
      ) {
          $$1('.mbsc-fr-c', $m).addClass('mbsc-wdg-c').append($elm.show());

          if (!$$1('.mbsc-w-p', $m).length) {
            $$1('.mbsc-fr-c', $m).addClass('mbsc-w-p');
          }
        }
    }

    var s,
        $prev,
        $elm = $$1(el),
        that = this; // Call the parent constructor

    Frame.call(this, el, settings, true);
    /* TRIALFUNC */

    that._generateContent = function () {
      return '';
    };

    that._markupReady = function ($m) {
      if (s.display != 'inline') {
        addContent($m);
      }
    };

    that._markupInserted = function ($m) {
      if (s.display == 'inline') {
        addContent($m);
      }

      $m.trigger('mbsc-enhance', [{
        theme: s.theme,
        lang: s.lang
      }]);
    };

    that._markupRemove = function () {
      $elm.hide();

      if ($prev && $prev.parent().length) {
        $prev.after($elm);
      }
    };

    that.__processSettings = function () {
      s = that.settings;
      that.buttons.ok = {
        text: s.okText,
        icon: s.okIcon,
        handler: 'set'
      };
      s.buttons = s.buttons || (s.display == 'inline' ? [] : ['ok']);

      if (!$prev && $elm.parent().length) {
        $prev = $$1(document.createComment('popup'));
        $elm.before($prev);
      }

      $elm.hide();
    }; // Constructor


    if (!inherit) {
      that.init();
    }
  };
  Popup.prototype = {
    _hasDef: true,
    _hasTheme: true,
    _hasContent: true,
    _hasLang: true,
    _responsive: true,
    _class: 'popup',
    _defaults: extend$1({}, Frame.prototype._defaults, {
      compClass: 'mbsc-wdg',
      okText: 'OK',
      headerText: false
    })
  };
  classes.Popup = Popup;
  classes.Widget = Popup;
  mobiscroll.themes.popup = mobiscroll.themes.frame;

  var hasPromise = isBrowser && !!window.Promise;
  var popupQueue = [];
  var notificationQueue = [];
  var activeNotification;

  function showPopup(popup) {
    if (!popupQueue.length) {
      popup.show();
    }

    popupQueue.push(popup);
  }

  function showNotification(notification) {
    var isAny = notificationQueue.length;
    notificationQueue.push(notification); // Only show notification if no popup is visible
    // otherwise postpone it until popup is closed

    if (!popupQueue.length) {
      // If there's a visible notification, hide it.
      // The notification will be shown after hide animation is complete
      if (isAny) {
        notificationQueue[0].hide();
      } else {
        // Prevent focus on show for notifications
        notification.show(false, true);
      }
    }
  }

  function getSettings(queue, settings, resolve, more) {
    //const active = mobiscroll.activeInstance;
    return extend$1({
      display: settings.display || 'center',
      cssClass: 'mbsc-alert',
      okText: settings.okText,
      cancelText: settings.cancelText,
      context: settings.context,
      theme: settings.theme,
      closeOnOverlayTap: false,
      onBeforeClose: function onBeforeClose() {
        queue.shift();
      },
      onHide: function onHide(ev, inst) {
        //mobiscroll.activeInstance = active;
        if (resolve) {
          resolve(inst._resolve);
        }

        if (settings.callback) {
          settings.callback(inst._resolve);
        }

        if (inst) {
          inst.destroy();
        } // Show next


        if (popupQueue.length) {
          popupQueue[0].show();
        } else if (notificationQueue.length) {
          // Prevent focus on show for notifications
          notificationQueue[0].show(false, true);
        }
      }
    }, more);
  }

  function getMessage(settings) {
    return (settings.title ? '<h2>' + settings.title + '</h2>' : '') + '<p>' + (settings.message || '') + '</p>';
  }

  function showAlert(popup, settings, resolve) {
    var inst = new Popup(popup, getSettings(popupQueue, settings, resolve));
    showPopup(inst);
  }

  function showConfirm(popup, settings, resolve) {
    var inst = new Popup(popup, getSettings(popupQueue, settings, resolve, {
      buttons: ['cancel', 'ok'],
      onSet: function onSet() {
        inst._resolve = true;
      }
    }));
    inst._resolve = false;
    showPopup(inst);
  }

  function showPrompt(popup, settings, resolve) {
    var input, label;
    var inst = new Popup(popup, getSettings(popupQueue, settings, resolve, {
      buttons: ['cancel', 'ok'],
      onMarkupReady: function onMarkupReady(event, inst) {
        var s = inst.settings;
        label = inst._markup.find('label');
        label.addClass('mbsc-' + s.theme + (s.baseTheme ? ' mbsc-' + s.baseTheme : ''));
        input = inst._markup.find('input')[0];
        setTimeout(function () {
          input.focus();
          input.setSelectionRange(0, input.value.length);
        }, 300);
      },
      onSet: function onSet() {
        inst._resolve = input.value;
      }
    }));
    inst._resolve = null;
    showPopup(inst);
  }

  function showSnackbar(popup, settings, resolve, cssClass, animation) {
    var notificationTimer;
    var inst = new Popup(popup, getSettings(notificationQueue, settings, resolve, {
      display: settings.display || 'bottom',
      animate: animation,
      cssClass: (cssClass || 'mbsc-snackbar') + (settings.color ? ' mbsc-' + settings.color : ''),
      scrollLock: false,
      focusTrap: false,
      buttons: [],
      onMarkupReady: function onMarkupReady(event, inst) {
        var s = inst.settings;

        var button = inst._markup.find('button');

        button.addClass('mbsc-' + s.theme + (s.baseTheme ? ' mbsc-' + s.baseTheme : ''));
      },
      onShow: function onShow(ev, inst) {
        activeNotification = inst;

        if (settings.duration !== false) {
          notificationTimer = setTimeout(function () {
            if (inst) {
              inst.hide();
            }
          }, settings.duration || 3000);
        }

        if (settings.button) {
          inst.tap($$1('.mbsc-snackbar-btn', ev.target), function () {
            inst.hide();

            if (settings.button.action) {
              settings.button.action.call(this);
            }
          });
        }
      },
      onClose: function onClose() {
        activeNotification = null;
        clearTimeout(notificationTimer);
      }
    }));
    showNotification(inst);
  }

  function showToast(popup, settings, resolve) {
    showSnackbar(popup, settings, resolve, 'mbsc-toast', 'fade');
  }

  function show(func, popup, settings) {
    var p;

    if (hasPromise) {
      p = new Promise(function (resolve) {
        func(popup, settings, resolve);
      });
    } else {
      func(popup, settings);
    }

    return p;
  }

  mobiscroll.alert = function (settings) {
    var popup = document.createElement('div');
    popup.innerHTML = getMessage(settings);
    return show(showAlert, popup, settings);
  };

  mobiscroll.confirm = function (settings) {
    var popup = document.createElement('div');
    popup.innerHTML = getMessage(settings);
    return show(showConfirm, popup, settings);
  };

  mobiscroll.prompt = function (settings) {
    var popup = document.createElement('div');
    popup.innerHTML = getMessage(settings) + '<label class="mbsc-input">' + (settings.label ? '<span class="mbsc-label">' + settings.label + '</span>' : '') + '<input class="mbsc-control" tabindex="0" type="' + (settings.inputType || 'text') + '" placeholder="' + (settings.placeholder || '') + '" value="' + (settings.value || '') + '">' + '</label>';
    return show(showPrompt, popup, settings);
  };

  mobiscroll.snackbar = function (settings) {
    var popup = document.createElement('div'),
        btn = settings.button;
    popup.innerHTML = '<div class="mbsc-snackbar-cont"><div class="mbsc-snackbar-msg">' + (settings.message || '') + '</div>' + (btn ? '<button class="mbsc-snackbar-btn mbsc-btn mbsc-btn-flat">' + (btn.icon ? '<span class="mbsc-ic ' + (btn.text ? 'mbsc-btn-ic ' : '') + 'mbsc-ic-' + btn.icon + '"></span>' : '') + (btn.text || '') + '</button>' : '') + '</div>';
    return show(showSnackbar, popup, settings);
  };

  mobiscroll.toast = function (settings) {
    var popup = document.createElement('div');
    popup.innerHTML = '<div class="mbsc-toast-msg">' + (settings.message || '') + '</div>';
    return show(showToast, popup, settings);
  };

  mobiscroll.notification = {
    dismiss: function dismiss() {
      if (activeNotification) {
        activeNotification.hide();
      }
    }
  };

  var halfBorder$1 = os == 'ios' && majorVersion > 7;
  var Form = function Form(el, settings) {
    var s,
        cssClass = '',
        $ctx = $$1(el),
        controls = {},
        that = this;

    function touched() {
      $ctx.removeClass('mbsc-no-touch');
    } // Call the parent constructor


    Base.call(this, el, settings, true);

    that.refresh = function (shallow) {
      if (s.enhance) {
        initControls($ctx, controls, s, shallow);
      }
    };
    /**
     * Form initialization.
     */


    that._init = function () {
      if (!mobiscroll.themes.form[s.theme]) {
        s.theme = 'mobiscroll';
      }

      if (!$ctx.hasClass('mbsc-form')) {
        $ctx.show();
        listen($ctx[0], 'touchstart', touched, {
          passive: true
        });
      }

      if (cssClass) {
        $ctx.removeClass(cssClass);
      } // --- TRIAL SERVER CODE START ---


      cssClass = 'mbsc-form mbsc-no-touch mbsc-' + s.theme + (halfBorder$1 ? ' mbsc-form-hb' : '') + (s.baseTheme ? ' mbsc-' + s.baseTheme : '') + (s.rtl ? ' mbsc-rtl' : ' mbsc-ltr') + (s.inputStyle == 'box' ? ' mbsc-form-box' : '') + (s.inputStyle == 'outline' ? ' mbsc-form-outline' : ''); // --- TRIAL SERVER CODE END ---

      $ctx.addClass(cssClass).removeClass('mbsc-cloak');
      that.refresh();
    };
    /**
     * Destroys the mobiscroll instance.
     */


    that._destroy = function () {
      $ctx.removeClass(cssClass);
      unlisten($ctx[0], 'touchstart', touched, {
        passive: true
      });

      for (var id in controls) {
        controls[id].destroy();
      }
    };
    /**
     * Object with the underlying form control instances
     * keys are the element id's
     */


    that.controls = controls; // Constructor

    s = that.settings;
    that.init();
  }; // Extend defaults

  Form.prototype = {
    _hasDef: true,
    _hasTheme: true,
    _hasLang: true,
    _class: 'form',
    _defaults: {
      tap: hasGhostClick,
      stopProp: true,
      rtl: false,
      enhance: true
    }
  };
  classes.Form = Form; // Init mbsc-form elements on page load

  autoInit('[mbsc-enhance],[mbsc-form]', Form, true);

  var MbscForm = (function (_super) {
      __extends(MbscForm, _super);
      function MbscForm(initialElem, _formService, zone) {
          var _this = _super.call(this, initialElem, zone) || this;
          _this._formService = _formService;
          _this.enhance = false;
          return _this;
      }
      MbscForm.prototype.ngOnInit = function () {
          this.optionsObj = extend$1({}, this.options, this.inlineOptionsObj);
          this._formService.options = this.optionsObj;
      };
      MbscForm.prototype.initControl = function () {
          var opt = this.options;
          if (opt && opt.enhance === undefined) {
              opt.enhance = false;
          }
          var options = extend$1({}, opt, this.inlineOptionsObj);
          this.instance = new Form(this.rootElem.nativeElement, options);
      };
      MbscForm.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, },
          { type: core.NgZone, },
      ]; };
      MbscForm.propDecorators = {
          'options': [{ type: core.Input, args: ['options',] },],
          'enhance': [{ type: core.Input },],
          'context': [{ type: core.Input },],
          'inputStyle': [{ type: core.Input, args: ['input-style',] },],
          'labelStyle': [{ type: core.Input, args: ['label-style',] },],
          'rootElem': [{ type: core.ViewChild, args: ['rootElement', { static: false },] },],
      };
MbscForm.ɵfac = function MbscForm_Factory(t) { return new (t || MbscForm)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscForm.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscForm, selectors: [["mbsc-form"]], viewQuery: function MbscForm_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c2, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.rootElem = _t.first);
    } }, inputs: { options: "options", enhance: "enhance", context: "context", inputStyle: ["input-style", "inputStyle"], labelStyle: ["label-style", "labelStyle"] }, exportAs: ["mobiscroll"], features: [ɵngcc0.ɵɵProvidersFeature([MbscOptionsService]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 3, vars: 0, consts: [["rootElement", ""]], template: function MbscForm_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "div", null, 0);
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵelementEnd();
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscForm, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-form',
                template: "<div #rootElement><ng-content></ng-content></div>",
                providers: [MbscOptionsService],
                exportAs: 'mobiscroll'
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService }, { type: ɵngcc0.NgZone }]; }, { options: [{
            type: core.Input,
            args: ['options']
        }], enhance: [{
            type: core.Input
        }], context: [{
            type: core.Input
        }], inputStyle: [{
            type: core.Input,
            args: ['input-style']
        }], labelStyle: [{
            type: core.Input,
            args: ['label-style']
        }], rootElem: [{
            type: core.ViewChild,
            args: ['rootElement', { static: false }]
        }] }); })();
      return MbscForm;
  }(MbscBase));
  var MbscTextarea = (function (_super) {
      __extends(MbscTextarea, _super);
      function MbscTextarea(initialElem, _formService, _inputService, _control, zone) {
          var _this = _super.call(this, initialElem, _formService, _inputService, _control, zone) || this;
          _this._inputService = _inputService;
          _inputService.input = _this;
          return _this;
      }
      MbscTextarea.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new TextArea(this._initElem.nativeElement, options);
      };
      MbscTextarea.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
      ]; };
      MbscTextarea.propDecorators = {
          'rows': [{ type: core.Input },],
          'wrap': [{ type: core.Input },],
      };
MbscTextarea.ɵfac = function MbscTextarea_Factory(t) { return new (t || MbscTextarea)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscTextarea.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscTextarea, selectors: [["mbsc-textarea"]], hostAttrs: [1, "mbsc-control-ng"], inputs: { rows: "rows", wrap: "wrap" }, features: [ɵngcc0.ɵɵProvidersFeature([MbscInputService]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 6, vars: 30, consts: [[1, "mbsc-input-wrap"], [3, "placeholder", "ngModel", "disabled", "readonly", "ngModelChange", "blur"], ["initElement", ""], ["class", "mbsc-err-msg", 4, "ngIf"], [1, "mbsc-err-msg"]], template: function MbscTextarea_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label");
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementStart(2, "span", 0);
        ɵngcc0.ɵɵelementStart(3, "textarea", 1, 2);
        ɵngcc0.ɵɵlistener("ngModelChange", function MbscTextarea_Template_textarea_ngModelChange_3_listener($event) { return ctx.innerValue = $event; })("blur", function MbscTextarea_Template_textarea_blur_3_listener($event) { return ctx.onTouch($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(5, MbscTextarea_span_5_Template, 2, 1, "span", 3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-err", ctx.error)("mbsc-input-box", ctx.inputStyle == "box")("mbsc-input-outline", ctx.inputStyle == "outline")("mbsc-label-stacked", ctx.labelStyle == "stacked")("mbsc-label-inline", ctx.labelStyle == "inline")("mbsc-label-floating", ctx.labelStyle == "floating");
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("placeholder", ctx.placeholder)("ngModel", ctx.innerValue)("disabled", ctx.disabled)("readonly", ctx._readonly);
        ɵngcc0.ɵɵattribute("name", ctx.name)("rows", ctx.rows)("wrap", ctx.wrap)("minlength", ctx.minlength)("maxlength", ctx.maxlength)("autocomplete", ctx.autocomplete)("autocapitalize", ctx.autocapitalize)("autocorrect", ctx.autocorrect)("spellcheck", ctx.spellcheck)("autofocus", ctx.autofocus)("required", ctx.required)("data-icon", ctx.icon ? ctx.icon : null)("data-icon-align", ctx.iconAlign ? ctx.iconAlign : null);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.error && ctx.errorMessage);
    } }, directives: [ɵngcc1.DefaultValueAccessor, ɵngcc1.NgControlStatus, ɵngcc1.NgModel, ɵngcc1.MinLengthValidator, ɵngcc1.MaxLengthValidator, ɵngcc1.RequiredValidator, ɵngcc2.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscTextarea, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-textarea',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n            <label \n                [class.mbsc-err]=\"error\"\n                [class.mbsc-input-box]=\"inputStyle == 'box'\"\n                [class.mbsc-input-outline]=\"inputStyle == 'outline'\"\n                [class.mbsc-label-stacked]=\"labelStyle == 'stacked'\"\n                [class.mbsc-label-inline]=\"labelStyle == 'inline'\"\n                [class.mbsc-label-floating]=\"labelStyle == 'floating'\"\n            >\n            <ng-content></ng-content>\n            <span class=\"mbsc-input-wrap\">\n                <textarea #initElement [placeholder]=\"placeholder\" [(ngModel)]=\"innerValue\" (blur)=\"onTouch($event)\"\n                    [attr.name]=\"name\"\n                    [attr.rows]=\"rows\"\n                    [attr.wrap]=\"wrap\"\n                    [attr.minlength]=\"minlength\"\n                    [attr.maxlength]=\"maxlength\"\n                    [attr.autocomplete]=\"autocomplete\" \n                    [attr.autocapitalize]=\"autocapitalize\"\n                    [attr.autocorrect]=\"autocorrect\"\n                    [attr.spellcheck]=\"spellcheck\"\n                    [attr.autofocus]=\"autofocus\"\n                    [attr.required]=\"required\"\n                    [attr.data-icon]=\"icon ? icon : null\"\n                    [attr.data-icon-align]=\"iconAlign ? iconAlign : null\"\n                    [disabled]=\"disabled\"\n                    [readonly]=\"_readonly\"></textarea>\n                <span *ngIf=\"error && errorMessage\" class=\"mbsc-err-msg\">{{errorMessage}}</span>\n            </span>\n        </label>\n    ",
                providers: [MbscInputService]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, { rows: [{
            type: core.Input
        }], wrap: [{
            type: core.Input
        }] }); })();
      return MbscTextarea;
  }(MbscInputBase));
  var MbscDropdown = (function (_super) {
      __extends(MbscDropdown, _super);
      function MbscDropdown(hostElem, formService, _inputService, control, zone) {
          var _this = _super.call(this, hostElem, formService, _inputService, control, zone) || this;
          _this._inputService = _inputService;
          _inputService.input = _this;
          return _this;
      }
      Object.defineProperty(MbscDropdown.prototype, "value", {
          set: function (v) {
              var _this = this;
              this._value = v;
              setTimeout(function () {
                  _this.instance._setText();
              });
          },
          enumerable: true,
          configurable: true
      });
      MbscDropdown.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Select(this._initElem.nativeElement, options);
          var that = this;
          setTimeout(function () {
              that.instance._setText();
          });
      };
      MbscDropdown.prototype.writeValue = function (v) {
          this._value = v;
          if (this.instance) {
              var that_1 = this;
              setTimeout(function () {
                  that_1.instance._setText();
              });
          }
      };
      MbscDropdown.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
      ]; };
      MbscDropdown.propDecorators = {
          'label': [{ type: core.Input },],
          'icon': [{ type: core.Input },],
          'iconAlign': [{ type: core.Input, args: ['icon-align',] },],
          'value': [{ type: core.Input },],
          'inputStyle': [{ type: core.Input, args: ['input-style',] },],
          'labelStyle': [{ type: core.Input, args: ['label-style',] },],
      };
MbscDropdown.ɵfac = function MbscDropdown_Factory(t) { return new (t || MbscDropdown)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscDropdown.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscDropdown, selectors: [["mbsc-dropdown"]], hostAttrs: [1, "mbsc-control-ng"], inputs: { value: "value", label: "label", icon: "icon", iconAlign: ["icon-align", "iconAlign"], inputStyle: ["input-style", "inputStyle"], labelStyle: ["label-style", "labelStyle"] }, features: [ɵngcc0.ɵɵProvidersFeature([MbscInputService]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 7, vars: 19, consts: [[1, "mbsc-input-wrap"], [3, "ngModel", "disabled", "ngModelChange", "blur"], ["initElement", ""], ["class", "mbsc-err-msg", 4, "ngIf"], [1, "mbsc-err-msg"]], template: function MbscDropdown_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label");
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementStart(2, "span", 0);
        ɵngcc0.ɵɵelementStart(3, "select", 1, 2);
        ɵngcc0.ɵɵlistener("ngModelChange", function MbscDropdown_Template_select_ngModelChange_3_listener($event) { return ctx.innerValue = $event; })("blur", function MbscDropdown_Template_select_blur_3_listener($event) { return ctx.onTouch($event); });
        ɵngcc0.ɵɵprojection(5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, MbscDropdown_span_6_Template, 2, 1, "span", 3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-err", ctx.error)("mbsc-input-box", ctx.inputStyle == "box")("mbsc-input-outline", ctx.inputStyle == "outline")("mbsc-label-stacked", ctx.labelStyle == "stacked")("mbsc-label-inline", ctx.labelStyle == "inline")("mbsc-label-floating", ctx.labelStyle == "floating");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.label, " ");
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngModel", ctx.innerValue)("disabled", ctx.disabled);
        ɵngcc0.ɵɵattribute("name", ctx.name)("data-icon", ctx.icon ? ctx.icon : null)("data-icon-align", ctx.iconAlign ? ctx.iconAlign : null);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.error && ctx.errorMessage);
    } }, directives: [ɵngcc1.SelectControlValueAccessor, ɵngcc1.NgControlStatus, ɵngcc1.NgModel, ɵngcc2.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscDropdown, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-dropdown',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n            <label \n                [class.mbsc-err]=\"error\"\n                [class.mbsc-input-box]=\"inputStyle == 'box'\"\n                [class.mbsc-input-outline]=\"inputStyle == 'outline'\"\n                [class.mbsc-label-stacked]=\"labelStyle == 'stacked'\"\n                [class.mbsc-label-inline]=\"labelStyle == 'inline'\"\n                [class.mbsc-label-floating]=\"labelStyle == 'floating'\"\n            >\n            {{label}}\n            <span class=\"mbsc-input-wrap\">\n                <select #initElement\n                    [(ngModel)]=\"innerValue\" \n                    [attr.name]=\"name\"\n                    [attr.data-icon]=\"icon ? icon : null\"\n                    [attr.data-icon-align]=\"iconAlign ? iconAlign : null\"\n                    [disabled]=\"disabled\"\n                    (blur)=\"onTouch($event)\">\n                    <ng-content></ng-content>\n                </select>\n                <span *ngIf=\"error && errorMessage\" class=\"mbsc-err-msg\">{{errorMessage}}</span>\n            </span>\n        </label>\n    ",
                providers: [MbscInputService]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, { value: [{
            type: core.Input
        }], label: [{
            type: core.Input
        }], icon: [{
            type: core.Input
        }], iconAlign: [{
            type: core.Input,
            args: ['icon-align']
        }], inputStyle: [{
            type: core.Input,
            args: ['input-style']
        }], labelStyle: [{
            type: core.Input,
            args: ['label-style']
        }] }); })();
      return MbscDropdown;
  }(MbscFormValueBase));
  var MbscButton = (function (_super) {
      __extends(MbscButton, _super);
      function MbscButton(hostElem, formService, zone) {
          var _this = _super.call(this, hostElem, formService, zone) || this;
          _this._flat = false;
          _this._block = false;
          _this._outline = false;
          _this._classesObj = {};
          _this.type = 'button';
          return _this;
      }
      Object.defineProperty(MbscButton.prototype, "cssClasses", {
          get: function () {
              for (var k in this._classesObj) {
                  delete this._classesObj[k];
              }
              this._classesObj['mbsc-btn-flat'] = this._flat;
              this._classesObj['mbsc-btn-block'] = this._block;
              this._classesObj['mbsc-btn-outline'] = this._outline;
              if (this.classes) {
                  var cssClasses = this.classes.split(' ');
                  if (cssClasses.length) {
                      for (var i = 0; i < cssClasses.length; i++) {
                          if (cssClasses[i]) {
                              this._classesObj[cssClasses[i]] = true;
                          }
                      }
                  }
              }
              if (this.color) {
                  this._classesObj['mbsc-btn-' + this.color] = true;
              }
              return this._classesObj;
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscButton.prototype, "flat", {
          set: function (val) {
              this._flat = emptyOrTrue(val);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscButton.prototype, "block", {
          set: function (val) {
              this._block = emptyOrTrue(val);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscButton.prototype, "outline", {
          set: function (val) {
              this._outline = emptyOrTrue(val);
          },
          enumerable: true,
          configurable: true
      });
      MbscButton.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Button(this._initElem.nativeElement, options);
      };
      MbscButton.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
      ]; };
      MbscButton.propDecorators = {
          'classes': [{ type: core.Input, args: ['class',] },],
          'type': [{ type: core.Input },],
          'icon': [{ type: core.Input },],
          'flat': [{ type: core.Input },],
          'block': [{ type: core.Input },],
          'outline': [{ type: core.Input },],
      };
MbscButton.ɵfac = function MbscButton_Factory(t) { return new (t || MbscButton)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscButton.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscButton, selectors: [["mbsc-button"]], inputs: { flat: "flat", block: "block", outline: "outline", classes: ["class", "classes"], type: "type", icon: "icon" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 3, vars: 5, consts: [[3, "type", "ngClass", "disabled"], ["initElement", ""]], template: function MbscButton_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "button", 0, 1);
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("type", ctx.type)("ngClass", ctx.cssClasses)("disabled", ctx.disabled);
        ɵngcc0.ɵɵattribute("name", ctx.name)("data-icon", ctx.icon ? ctx.icon : null);
    } }, directives: [ɵngcc2.NgClass], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscButton, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-button',
                template: "\n        <button #initElement \n            [type]=\"type\"\n            [ngClass]=\"cssClasses\"\n            [attr.name]=\"name\"\n            [attr.data-icon]=\"icon ? icon : null\"\n            [disabled]=\"disabled\">\n            <ng-content></ng-content>\n        </button>\n    ",
                changeDetection: core.ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, { flat: [{
            type: core.Input
        }], block: [{
            type: core.Input
        }], outline: [{
            type: core.Input
        }], classes: [{
            type: core.Input,
            args: ['class']
        }], type: [{
            type: core.Input
        }], icon: [{
            type: core.Input
        }] }); })();
      return MbscButton;
  }(MbscFormBase));
  var MbscCheckbox = (function (_super) {
      __extends(MbscCheckbox, _super);
      function MbscCheckbox(hostElem, cdr, formService, _inputService, control, zone) {
          var _this = _super.call(this, hostElem, formService, _inputService, control, zone) || this;
          _this.cdr = cdr;
          _this._colorClass = {};
          return _this;
      }
      Object.defineProperty(MbscCheckbox.prototype, "colorClass", {
          get: function () {
              for (var k in this._colorClass) {
                  delete this._colorClass[k];
              }
              if (this.color) {
                  this._colorClass['mbsc-checkbox-' + this.color] = true;
              }
              if (this.error) {
                  this._colorClass['mbsc-err'] = true;
              }
              return this._colorClass;
          },
          enumerable: true,
          configurable: true
      });
      MbscCheckbox.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new CheckBox(this._initElem.nativeElement, options);
      };
      MbscCheckbox.prototype.writeValue = function (v) {
          this._value = v;
          this.cdr.detectChanges();
      };
      MbscCheckbox.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.ChangeDetectorRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, decorators: [{ type: core.Optional },] },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
      ]; };
      MbscCheckbox.propDecorators = {
          'color': [{ type: core.Input },],
          'inputStyle': [{ type: core.Input, args: ['input-style',] },],
          'labelStyle': [{ type: core.Input, args: ['label-style',] },],
      };
MbscCheckbox.ɵfac = function MbscCheckbox_Factory(t) { return new (t || MbscCheckbox)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscCheckbox.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscCheckbox, selectors: [["mbsc-checkbox"]], hostAttrs: [1, "mbsc-control-ng"], inputs: { color: "color", inputStyle: ["input-style", "inputStyle"], labelStyle: ["label-style", "labelStyle"] }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 5, vars: 7, consts: [[3, "ngClass"], ["type", "checkbox", 3, "disabled", "ngModel", "ngModelChange", "blur"], ["initElement", ""], ["class", "mbsc-err-msg", 4, "ngIf"], [1, "mbsc-err-msg"]], template: function MbscCheckbox_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵelementStart(1, "input", 1, 2);
        ɵngcc0.ɵɵlistener("ngModelChange", function MbscCheckbox_Template_input_ngModelChange_1_listener($event) { return ctx.innerValue = $event; })("blur", function MbscCheckbox_Template_input_blur_1_listener($event) { return ctx.onTouch($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵprojection(3);
        ɵngcc0.ɵɵtemplate(4, MbscCheckbox_span_4_Template, 2, 1, "span", 3);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ctx.colorClass);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled)("ngModel", ctx.innerValue);
        ɵngcc0.ɵɵattribute("name", ctx.name)("data-label-style", ctx.labelStyle)("data-input-style", ctx.inputStyle);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.error && ctx.errorMessage);
    } }, directives: [ɵngcc2.NgClass, ɵngcc1.CheckboxControlValueAccessor, ɵngcc1.NgControlStatus, ɵngcc1.NgModel, ɵngcc2.NgIf], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscCheckbox, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-checkbox',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n        <label [ngClass]=\"colorClass\">\n            <input #initElement \n                type=\"checkbox\"\n                [attr.name]=\"name\"\n                [disabled]=\"disabled\"\n                [attr.data-label-style]=\"labelStyle\"\n                [attr.data-input-style]=\"inputStyle\"\n                [(ngModel)]=\"innerValue\"\n                (blur)=\"onTouch($event)\" />\n            <ng-content></ng-content>\n            <span *ngIf=\"error && errorMessage\" class=\"mbsc-err-msg\">{{errorMessage}}</span>\n        </label>\n    ",
                changeDetection: core.ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.ChangeDetectorRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, { color: [{
            type: core.Input
        }], inputStyle: [{
            type: core.Input,
            args: ['input-style']
        }], labelStyle: [{
            type: core.Input,
            args: ['label-style']
        }] }); })();
      return MbscCheckbox;
  }(MbscFormValueBase));
  var MbscSwitch = (function (_super) {
      __extends(MbscSwitch, _super);
      function MbscSwitch(hostElem, zone, _formService, control) {
          var _this = _super.call(this, hostElem, zone, control, null, null) || this;
          _this._formService = _formService;
          _this.disabled = false;
          _this.onChangeEmitter = new core.EventEmitter();
          _this._colorClass = {};
          return _this;
      }
      Object.defineProperty(MbscSwitch.prototype, "value", {
          set: function (v) {
              this.setNewValueProxy(v);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscSwitch.prototype, "colorClass", {
          get: function () {
              for (var k in this._colorClass) {
                  delete this._colorClass[k];
              }
              if (this.color) {
                  this._colorClass['mbsc-switch-' + this.color] = true;
              }
              if (this.error) {
                  this._colorClass['mbsc-err'] = true;
              }
              return this._colorClass;
          },
          enumerable: true,
          configurable: true
      });
      MbscSwitch.prototype.setNewValue = function (v) {
          if (this.instance) {
              if (this.instance.getVal() !== v) {
                  this.instance.setVal(v, true, false);
              }
          }
      };
      MbscSwitch.prototype.ngOnInit = function () {
          this._inheritedOptions = this._formService ? this._formService.options : {};
          _super.prototype.ngOnInit.call(this);
      };
      MbscSwitch.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Switch(this._initElem.nativeElement, options);
          if (this.initialValue !== undefined) {
              this.instance.setVal(this.initialValue, true, false);
          }
      };
      MbscSwitch.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
      ]; };
      MbscSwitch.propDecorators = {
          'options': [{ type: core.Input, args: ['options',] },],
          'disabled': [{ type: core.Input },],
          'name': [{ type: core.Input },],
          'color': [{ type: core.Input },],
          'error': [{ type: core.Input },],
          'errorMessage': [{ type: core.Input },],
          'value': [{ type: core.Input, args: ['value',] },],
          'onChangeEmitter': [{ type: core.Output, args: ['valueChange',] },],
          '_initElem': [{ type: core.ViewChild, args: ['initElement', { static: false },] },],
      };
MbscSwitch.ɵfac = function MbscSwitch_Factory(t) { return new (t || MbscSwitch)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8)); };
MbscSwitch.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscSwitch, selectors: [["mbsc-switch"]], viewQuery: function MbscSwitch_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._initElem = _t.first);
    } }, hostAttrs: [1, "mbsc-control-ng"], inputs: { value: "value", options: "options", disabled: "disabled", name: "name", color: "color", error: "error", errorMessage: "errorMessage" }, outputs: { onChangeEmitter: "valueChange" }, exportAs: ["mobiscroll"], features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 5, vars: 6, consts: [[3, "ngClass"], ["class", "mbsc-err-msg", 4, "ngIf"], ["type", "checkbox", "data-role", "switch", 3, "disabled", "blur"], ["initElement", ""], [1, "mbsc-err-msg"]], template: function MbscSwitch_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵtemplate(2, MbscSwitch_span_2_Template, 2, 1, "span", 1);
        ɵngcc0.ɵɵelementStart(3, "input", 2, 3);
        ɵngcc0.ɵɵlistener("blur", function MbscSwitch_Template_input_blur_3_listener($event) { return ctx.onTouch($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ctx.colorClass);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.error && ctx.errorMessage);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled);
        ɵngcc0.ɵɵattribute("name", ctx.name)("data-label-style", ctx.labelStyle)("data-input-style", ctx.inputStyle);
    } }, directives: [ɵngcc2.NgClass, ɵngcc2.NgIf], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscSwitch, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-switch',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n        <label [ngClass]=\"colorClass\">\n            <ng-content></ng-content>\n            <span *ngIf=\"error && errorMessage\" class=\"mbsc-err-msg\">{{errorMessage}}</span>\n            <input #initElement \n                type=\"checkbox\"\n                data-role=\"switch\"\n                [attr.name]=\"name\"\n                [attr.data-label-style]=\"labelStyle\"\n                [attr.data-input-style]=\"inputStyle\"\n                [disabled]=\"disabled\"\n                (blur)=\"onTouch($event)\" />\n        </label>\n    ",
                exportAs: 'mobiscroll',
                changeDetection: core.ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }]; }, { value: [{
            type: core.Input,
            args: ['value']
        }], options: [{
            type: core.Input,
            args: ['options']
        }], disabled: [{
            type: core.Input
        }], name: [{
            type: core.Input
        }], color: [{
            type: core.Input
        }], error: [{
            type: core.Input
        }], errorMessage: [{
            type: core.Input
        }], onChangeEmitter: [{
            type: core.Output,
            args: ['valueChange']
        }], _initElem: [{
            type: core.ViewChild,
            args: ['initElement', { static: false }]
        }] }); })();
      return MbscSwitch;
  }(MbscControlBase));
  var MbscStepper = (function (_super) {
      __extends(MbscStepper, _super);
      function MbscStepper(hostElement, zone, _formService, control) {
          var _this = _super.call(this, hostElement, zone, control, null, null) || this;
          _this._formService = _formService;
          _this.min = undefined;
          _this.max = undefined;
          _this.step = undefined;
          _this.val = undefined;
          _this.disabled = false;
          _this._colorClass = {};
          _this.onChangeEmitter = new core.EventEmitter();
          return _this;
      }
      Object.defineProperty(MbscStepper.prototype, "readonly", {
          set: function (val) {
              this._readonly = emptyOrTrue(val);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscStepper.prototype, "value", {
          set: function (v) {
              this.setNewValueProxy(v);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscStepper.prototype, "colorClass", {
          get: function () {
              for (var k in this._colorClass) {
                  delete this._colorClass[k];
              }
              if (this.color) {
                  this._colorClass['mbsc-stepper-' + this.color] = true;
              }
              return this._colorClass;
          },
          enumerable: true,
          configurable: true
      });
      MbscStepper.prototype.setNewValue = function (v) {
          if (this.instance && this.instance.getVal() !== v) {
              this.instance.setVal(v, true, false);
          }
      };
      MbscStepper.prototype.ngOnInit = function () {
          this._inheritedOptions = this._formService ? this._formService.options : {};
          _super.prototype.ngOnInit.call(this);
      };
      MbscStepper.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Stepper(this._initElem.nativeElement, options);
          if (this.initialValue !== undefined) {
              this.instance.setVal(this.initialValue, true, false);
          }
      };
      MbscStepper.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
      ]; };
      MbscStepper.propDecorators = {
          'readonly': [{ type: core.Input },],
          'options': [{ type: core.Input, args: ['options',] },],
          'value': [{ type: core.Input },],
          'name': [{ type: core.Input },],
          'min': [{ type: core.Input },],
          'max': [{ type: core.Input },],
          'step': [{ type: core.Input },],
          'val': [{ type: core.Input },],
          'disabled': [{ type: core.Input },],
          'color': [{ type: core.Input },],
          'onChangeEmitter': [{ type: core.Output, args: ['valueChange',] },],
          '_initElem': [{ type: core.ViewChild, args: ['initElement', { static: false },] },],
      };
MbscStepper.ɵfac = function MbscStepper_Factory(t) { return new (t || MbscStepper)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8)); };
MbscStepper.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscStepper, selectors: [["mbsc-stepper"]], viewQuery: function MbscStepper_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._initElem = _t.first);
    } }, hostAttrs: [1, "mbsc-control-ng"], inputs: { readonly: "readonly", value: "value", options: "options", name: "name", min: "min", max: "max", step: "step", val: "val", disabled: "disabled", color: "color" }, outputs: { onChangeEmitter: "valueChange" }, exportAs: ["mobiscroll"], features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 4, vars: 10, consts: [[3, "ngClass"], ["data-role", "stepper", 3, "disabled", "readonly"], ["initElement", ""]], template: function MbscStepper_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelement(2, "input", 1, 2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ctx.colorClass);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled)("readonly", ctx._readonly);
        ɵngcc0.ɵɵattribute("name", ctx.name)("min", ctx.min !== undefined ? ctx.min : null)("max", ctx.max !== undefined ? ctx.max : null)("step", ctx.step !== undefined ? ctx.step : null)("data-val", ctx.val ? ctx.val : null)("data-label-style", ctx.labelStyle)("data-input-style", ctx.inputStyle);
    } }, directives: [ɵngcc2.NgClass], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscStepper, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-stepper',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n        <div [ngClass]=\"colorClass\">\n            <ng-content></ng-content>\n            <input #initElement\n                data-role=\"stepper\"\n                [attr.name]=\"name\"\n                [attr.min]=\"min !== undefined ? min : null\"\n                [attr.max]=\"max !== undefined ? max : null\"\n                [attr.step]=\"step !== undefined ? step : null\"\n                [attr.data-val]=\"val ? val : null\"\n                [attr.data-label-style]=\"labelStyle\"\n                [attr.data-input-style]=\"inputStyle\"\n                [disabled]=\"disabled\" \n                [readonly]=\"_readonly\"/>\n        </div>\n    ",
                exportAs: 'mobiscroll',
                changeDetection: core.ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }]; }, { readonly: [{
            type: core.Input
        }], value: [{
            type: core.Input
        }], options: [{
            type: core.Input,
            args: ['options']
        }], name: [{
            type: core.Input
        }], min: [{
            type: core.Input
        }], max: [{
            type: core.Input
        }], step: [{
            type: core.Input
        }], val: [{
            type: core.Input
        }], disabled: [{
            type: core.Input
        }], color: [{
            type: core.Input
        }], onChangeEmitter: [{
            type: core.Output,
            args: ['valueChange']
        }], _initElem: [{
            type: core.ViewChild,
            args: ['initElement', { static: false }]
        }] }); })();
      return MbscStepper;
  }(MbscControlBase));
  var MbscProgress = (function (_super) {
      __extends(MbscProgress, _super);
      function MbscProgress(hostElement, zone, _formService, control) {
          var _this = _super.call(this, hostElement, zone, control, null, null) || this;
          _this._formService = _formService;
          _this.max = undefined;
          _this.icon = undefined;
          _this.iconAlign = undefined;
          _this.val = undefined;
          _this.disabled = false;
          _this._colorClass = {};
          return _this;
      }
      Object.defineProperty(MbscProgress.prototype, "value", {
          set: function (v) {
              this.setNewValueProxy(v);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscProgress.prototype, "dataStepLabels", {
          get: function () {
              if (typeof (this.stepLabels) === 'string') {
                  return this.stepLabels;
              }
              else {
                  return null;
              }
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscProgress.prototype, "colorClass", {
          get: function () {
              for (var k in this._colorClass) {
                  delete this._colorClass[k];
              }
              if (this.color) {
                  this._colorClass['mbsc-progress-' + this.color] = true;
              }
              return this._colorClass;
          },
          enumerable: true,
          configurable: true
      });
      MbscProgress.prototype.setNewValue = function (v) {
          if (this.instance && this.instance.getVal() !== v) {
              this.instance.setVal(v, true, false);
          }
      };
      MbscProgress.prototype.ngOnInit = function () {
          this._inheritedOptions = this._formService ? this._formService.options : {};
          _super.prototype.ngOnInit.call(this);
      };
      MbscProgress.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Progress(this._initElem.nativeElement, options);
          if (this.initialValue !== undefined) {
              this.instance.setVal(this.initialValue, true, false);
          }
      };
      MbscProgress.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
      ]; };
      MbscProgress.propDecorators = {
          'options': [{ type: core.Input, args: ['options',] },],
          'value': [{ type: core.Input },],
          'max': [{ type: core.Input },],
          'icon': [{ type: core.Input },],
          'iconAlign': [{ type: core.Input, args: ['icon-align',] },],
          'val': [{ type: core.Input },],
          'disabled': [{ type: core.Input },],
          'stepLabels': [{ type: core.Input, args: ['step-labels',] },],
          'color': [{ type: core.Input },],
          '_initElem': [{ type: core.ViewChild, args: ['initElement', { static: false },] },],
      };
MbscProgress.ɵfac = function MbscProgress_Factory(t) { return new (t || MbscProgress)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8)); };
MbscProgress.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscProgress, selectors: [["mbsc-progress"]], viewQuery: function MbscProgress_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._initElem = _t.first);
    } }, hostAttrs: [1, "mbsc-control-ng"], inputs: { value: "value", options: "options", max: "max", icon: "icon", iconAlign: ["icon-align", "iconAlign"], val: "val", disabled: "disabled", stepLabels: ["step-labels", "stepLabels"], color: "color" }, exportAs: ["mobiscroll"], features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 4, vars: 8, consts: [[3, "ngClass"], ["initElement", ""]], template: function MbscProgress_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelement(2, "progress", null, 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ctx.colorClass);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵattribute("data-step-labels", ctx.dataStepLabels)("data-icon", ctx.icon ? ctx.icon : null)("data-icon-align", ctx.iconAlign ? ctx.iconAlign : null)("data-label-style", ctx.labelStyle)("data-input-style", ctx.inputStyle)("max", ctx.max !== undefined ? ctx.max : null)("data-val", ctx.val !== undefined ? ctx.val : null);
    } }, directives: [ɵngcc2.NgClass], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscProgress, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-progress',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n        <label [ngClass]=\"colorClass\">\n            <ng-content></ng-content>\n            <progress #initElement\n                [attr.data-step-labels]=\"dataStepLabels\"\n                [attr.data-icon]=\"icon ? icon : null\"\n                [attr.data-icon-align]=\"iconAlign ? iconAlign : null\"\n                [attr.data-label-style]=\"labelStyle\"\n                [attr.data-input-style]=\"inputStyle\"\n                [attr.max]=\"max !== undefined ? max : null\"\n                [attr.data-val]=\"val !== undefined ? val : null\"\n            >\n            </progress>\n        </label>\n    ",
                exportAs: 'mobiscroll',
                changeDetection: core.ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }]; }, { value: [{
            type: core.Input
        }], options: [{
            type: core.Input,
            args: ['options']
        }], max: [{
            type: core.Input
        }], icon: [{
            type: core.Input
        }], iconAlign: [{
            type: core.Input,
            args: ['icon-align']
        }], val: [{
            type: core.Input
        }], disabled: [{
            type: core.Input
        }], stepLabels: [{
            type: core.Input,
            args: ['step-labels']
        }], color: [{
            type: core.Input
        }], _initElem: [{
            type: core.ViewChild,
            args: ['initElement', { static: false }]
        }] }); })();
      return MbscProgress;
  }(MbscControlBase));
  var groupName = 1;
  var MbscRadioService = (function () {
      function MbscRadioService() {
          this._lastValue = null;
          this._valueObservable = new Observable();
      }
      Object.defineProperty(MbscRadioService.prototype, "name", {
          get: function () {
              if (!this._name) {
                  this._name = 'mbsc-radio-group-' + (groupName++);
              }
              return this._name;
          },
          set: function (n) {
              this._name = n;
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscRadioService.prototype, "multiSelect", {
          get: function () {
              return this._multiSelect;
          },
          set: function (v) {
              this._multiSelect = v;
          },
          enumerable: true,
          configurable: true
      });
      MbscRadioService.prototype.onValueChanged = function () {
          return this._valueObservable;
      };
      MbscRadioService.prototype.changeValue = function (v) {
          this._valueObservable.next(v);
          this._lastValue = v;
      };
      Object.defineProperty(MbscRadioService.prototype, "getLastValue", {
          get: function () {
              return this._lastValue;
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscRadioService.prototype, "color", {
          get: function () {
              return this._color;
          },
          set: function (v) {
              this._color = v;
          },
          enumerable: true,
          configurable: true
      });
      MbscRadioService.ctorParameters = function () { return []; };
MbscRadioService.ɵfac = function MbscRadioService_Factory(t) { return new (t || MbscRadioService)(); };
MbscRadioService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: MbscRadioService, factory: function (t) { return MbscRadioService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscRadioService, [{
        type: core.Injectable
    }], function () { return []; }, null); })();
      return MbscRadioService;
  }());
  var MbscRadioGroupBase = (function (_super) {
      __extends(MbscRadioGroupBase, _super);
      function MbscRadioGroupBase(hostElement, formService, _inputService, _radioService, control, zone) {
          var _this = _super.call(this, hostElement, formService, _inputService, control, zone) || this;
          _this._radioService = _radioService;
          _this.valueObserver = _this._radioService.onValueChanged().subscribe(function (v) {
              _this.innerValue = v;
              _this.onTouch();
          });
          return _this;
      }
      Object.defineProperty(MbscRadioGroupBase.prototype, "value", {
          set: function (v) {
              this._value = v;
              this._radioService.changeValue(v);
          },
          enumerable: true,
          configurable: true
      });
      MbscRadioGroupBase.prototype.ngOnInit = function () {
          _super.prototype.ngOnInit.call(this);
          if (this.name) {
              this._radioService.name = this.name;
          }
          if (this.color) {
              this._radioService.color = this.color;
          }
      };
      MbscRadioGroupBase.prototype.writeValue = function (v) {
          this._value = v;
          this._radioService.changeValue(v);
      };
      MbscRadioGroupBase.prototype.updateOptions = function () { };
      MbscRadioGroupBase.prototype.ngOnDestroy = function () {
          this._radioService.onValueChanged().unsubscribe(this.valueObserver);
          _super.prototype.ngOnDestroy.call(this);
      };
      MbscRadioGroupBase.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, decorators: [{ type: core.Optional },] },
          { type: MbscRadioService, },
          { type: forms.NgControl, },
          { type: core.NgZone, },
      ]; };
      MbscRadioGroupBase.propDecorators = {
          'name': [{ type: core.Input },],
          'value': [{ type: core.Input },],
      };
MbscRadioGroupBase.ɵfac = function MbscRadioGroupBase_Factory(t) { return new (t || MbscRadioGroupBase)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService, 8), ɵngcc0.ɵɵdirectiveInject(MbscRadioService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscRadioGroupBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MbscRadioGroupBase, selectors: [["", "mbsc-rg-b", ""]], inputs: { value: "value", name: "name" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscRadioGroupBase, [{
        type: core.Directive,
        args: [{ selector: '[mbsc-rg-b]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService, decorators: [{
                type: core.Optional
            }] }, { type: MbscRadioService }, { type: ɵngcc1.NgControl }, { type: ɵngcc0.NgZone }]; }, { value: [{
            type: core.Input
        }], name: [{
            type: core.Input
        }] }); })();
      return MbscRadioGroupBase;
  }(MbscFormValueBase));
  var MbscRadioGroup = (function (_super) {
      __extends(MbscRadioGroup, _super);
      function MbscRadioGroup(hostElement, formService, _inputService, radioService, control, zone) {
          return _super.call(this, hostElement, formService, _inputService, radioService, control, zone) || this;
      }
      MbscRadioGroup.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, decorators: [{ type: core.Optional },] },
          { type: MbscRadioService, },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
      ]; };
MbscRadioGroup.ɵfac = function MbscRadioGroup_Factory(t) { return new (t || MbscRadioGroup)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService, 8), ɵngcc0.ɵɵdirectiveInject(MbscRadioService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscRadioGroup.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscRadioGroup, selectors: [["mbsc-radio-group"]], features: [ɵngcc0.ɵɵProvidersFeature([MbscRadioService]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 1, vars: 0, template: function MbscRadioGroup_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscRadioGroup, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-radio-group',
                template: "<ng-content></ng-content>",
                providers: [MbscRadioService]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService, decorators: [{
                type: core.Optional
            }] }, { type: MbscRadioService }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, null); })();
      return MbscRadioGroup;
  }(MbscRadioGroupBase));
  var MbscRadio = (function (_super) {
      __extends(MbscRadio, _super);
      function MbscRadio(hostElement, formService, _radioService, zone) {
          var _this = _super.call(this, hostElement, formService, zone) || this;
          _this._radioService = _radioService;
          _this._colorClass = {};
          var v = _this._radioService.getLastValue;
          if (v !== null) {
              _this.modelValue = v;
          }
          _this.valueObserver = _this._radioService.onValueChanged().subscribe(function (v) {
              _this.modelValue = v;
          });
          return _this;
      }
      Object.defineProperty(MbscRadio.prototype, "checked", {
          get: function () {
              return this.value == this.modelValue;
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscRadio.prototype, "colorClass", {
          get: function () {
              for (var k in this._colorClass) {
                  delete this._colorClass[k];
              }
              if (this.color) {
                  this._colorClass['mbsc-radio-' + this.color] = true;
              }
              if (this.error) {
                  this._colorClass['mbsc-err'] = true;
              }
              return this._colorClass;
          },
          enumerable: true,
          configurable: true
      });
      MbscRadio.prototype.clicked = function (e) {
          this._radioService.changeValue(this.value);
      };
      MbscRadio.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Radio(this._initElem.nativeElement, options);
      };
      MbscRadio.prototype.ngOnInit = function () {
          _super.prototype.ngOnInit.call(this);
          this.name = this._radioService.name;
          this.color = this._radioService.color;
      };
      MbscRadio.prototype.ngOnDestroy = function () {
          this._radioService.onValueChanged().unsubscribe(this.valueObserver);
          _super.prototype.ngOnDestroy.call(this);
      };
      MbscRadio.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscRadioService, },
          { type: core.NgZone, },
      ]; };
      MbscRadio.propDecorators = {
          'value': [{ type: core.Input },],
          'error': [{ type: core.Input },],
          'errorMessage': [{ type: core.Input },],
      };
MbscRadio.ɵfac = function MbscRadio_Factory(t) { return new (t || MbscRadio)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscRadioService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscRadio.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscRadio, selectors: [["mbsc-radio"]], hostAttrs: [1, "mbsc-control-ng"], inputs: { value: "value", error: "error", errorMessage: "errorMessage" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 5, vars: 7, consts: [[3, "ngClass"], ["type", "radio", 3, "value", "checked", "disabled", "click"], ["initElement", ""], ["class", "mbsc-err-msg", 4, "ngIf"], [1, "mbsc-err-msg"]], template: function MbscRadio_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵelementStart(1, "input", 1, 2);
        ɵngcc0.ɵɵlistener("click", function MbscRadio_Template_input_click_1_listener($event) { return ctx.clicked($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵprojection(3);
        ɵngcc0.ɵɵtemplate(4, MbscRadio_span_4_Template, 2, 1, "span", 3);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ctx.colorClass);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("value", ctx.value)("checked", ctx.checked)("disabled", ctx.disabled);
        ɵngcc0.ɵɵattribute("name", ctx.name)("value", ctx.value);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.error && ctx.errorMessage);
    } }, directives: [ɵngcc2.NgClass, ɵngcc2.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscRadio, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-radio',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n        <label [ngClass]=\"colorClass\">\n            <input #initElement \n                type=\"radio\" \n                [attr.name]=\"name\" \n                [attr.value]=\"value\"\n                [value]=\"value\" \n                [checked]=\"checked\"\n                [disabled]=\"disabled\"\n                (click)=\"clicked($event)\" />\n            <ng-content></ng-content>\n            <span *ngIf=\"error && errorMessage\" class=\"mbsc-err-msg\">{{errorMessage}}</span>\n        </label>\n    "
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscRadioService }, { type: ɵngcc0.NgZone }]; }, { value: [{
            type: core.Input
        }], error: [{
            type: core.Input
        }], errorMessage: [{
            type: core.Input
        }] }); })();
      return MbscRadio;
  }(MbscFormBase));
  var MbscSegmentedGroup = (function (_super) {
      __extends(MbscSegmentedGroup, _super);
      function MbscSegmentedGroup(hostElement, formService, _inputService, radioService, control, zone) {
          var _this = _super.call(this, hostElement, formService, _inputService, radioService, control, zone) || this;
          _this.select = 'single';
          return _this;
      }
      Object.defineProperty(MbscSegmentedGroup.prototype, "multiSelect", {
          get: function () {
              return this.select == 'multiple';
          },
          enumerable: true,
          configurable: true
      });
      MbscSegmentedGroup.prototype.ngOnInit = function () {
          _super.prototype.ngOnInit.call(this);
          this._radioService.multiSelect = this.multiSelect;
          if (this.color) {
              this._radioService.color = this.color;
          }
      };
      MbscSegmentedGroup.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscInputService, decorators: [{ type: core.Optional },] },
          { type: MbscRadioService, },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
      ]; };
      MbscSegmentedGroup.propDecorators = {
          'select': [{ type: core.Input },],
      };
MbscSegmentedGroup.ɵfac = function MbscSegmentedGroup_Factory(t) { return new (t || MbscSegmentedGroup)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscInputService, 8), ɵngcc0.ɵɵdirectiveInject(MbscRadioService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscSegmentedGroup.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscSegmentedGroup, selectors: [["mbsc-segmented-group"]], inputs: { select: "select" }, features: [ɵngcc0.ɵɵProvidersFeature([MbscRadioService]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 2, vars: 0, consts: [[1, "mbsc-segmented", "mbsc-segmented-group", "mbsc-no-touch"]], template: function MbscSegmentedGroup_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementEnd();
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscSegmentedGroup, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-segmented-group',
                template: "<div class=\"mbsc-segmented mbsc-segmented-group mbsc-no-touch\"><ng-content></ng-content></div>",
                providers: [MbscRadioService]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscInputService, decorators: [{
                type: core.Optional
            }] }, { type: MbscRadioService }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, { select: [{
            type: core.Input
        }] }); })();
      return MbscSegmentedGroup;
  }(MbscRadioGroupBase));
  var MbscSegmented = (function (_super) {
      __extends(MbscSegmented, _super);
      function MbscSegmented(hostElement, formService, _radioService, zone) {
          var _this = _super.call(this, hostElement, formService, zone) || this;
          _this._radioService = _radioService;
          _this.checkedChange = new core.EventEmitter();
          var v = _this._radioService.getLastValue;
          if (v !== null) {
              _this.modelValue = v;
          }
          _this.valueObserver = _this._radioService.onValueChanged().subscribe(function (v) {
              _this.modelValue = v;
          });
          return _this;
      }
      Object.defineProperty(MbscSegmented.prototype, "isChecked", {
          get: function () {
              if (this.multiSelect) {
                  if (this.checked !== undefined) {
                      return this.checked;
                  }
                  else {
                      return this.modelValue && this.modelValue.includes(this.value);
                  }
              }
              else {
                  return this.value == this.modelValue;
              }
          },
          enumerable: true,
          configurable: true
      });
      MbscSegmented.prototype.clicked = function (e) {
          if (this.multiSelect && this.checked !== undefined) {
              this.checkedChange.emit(!(!!this.checked));
          }
          else {
              if (this.multiSelect) {
                  if (this.modelValue.includes(this.value)) {
                      var i = this.modelValue.indexOf(this.value);
                      this.modelValue.splice(i, 1);
                  }
                  else {
                      this.modelValue.push(this.value);
                  }
                  this._radioService.changeValue(this.modelValue);
              }
              else {
                  this._radioService.changeValue(this.value);
              }
          }
      };
      Object.defineProperty(MbscSegmented.prototype, "cssClass", {
          get: function () {
              var cl = 'mbsc-segmented-item';
              if (this.color) {
                  cl += ' mbsc-segmented-' + this.color;
              }
              return cl;
          },
          enumerable: true,
          configurable: true
      });
      MbscSegmented.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new SegmentedItem(this._initElem.nativeElement, options);
      };
      MbscSegmented.prototype.ngOnInit = function () {
          _super.prototype.ngOnInit.call(this);
          this.name = this._radioService.name;
          this.multiSelect = this._radioService.multiSelect;
          this.color = this._radioService.color;
      };
      MbscSegmented.prototype.ngOnDestroy = function () {
          this._radioService.onValueChanged().unsubscribe(this.valueObserver);
          _super.prototype.ngOnDestroy.call(this);
      };
      MbscSegmented.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: MbscRadioService, },
          { type: core.NgZone, },
      ]; };
      MbscSegmented.propDecorators = {
          'icon': [{ type: core.Input },],
          'value': [{ type: core.Input },],
          'checked': [{ type: core.Input },],
          'checkedChange': [{ type: core.Output },],
      };
MbscSegmented.ɵfac = function MbscSegmented_Factory(t) { return new (t || MbscSegmented)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(MbscRadioService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscSegmented.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscSegmented, selectors: [["mbsc-segmented"]], hostVars: 2, hostBindings: function MbscSegmented_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassMap(ctx.cssClass);
    } }, inputs: { icon: "icon", value: "value", checked: "checked" }, outputs: { checkedChange: "checkedChange" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 6, vars: 8, consts: [[1, "mbsc-segmented-item-ready"], ["data-role", "segmented", 3, "type", "value", "checked", "disabled", "click"], ["initElement", ""], [1, "mbsc-segmented-content"], [3, "class", 4, "ngIf"]], template: function MbscSegmented_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵelementStart(1, "input", 1, 2);
        ɵngcc0.ɵɵlistener("click", function MbscSegmented_Template_input_click_1_listener($event) { return ctx.clicked($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(3, "span", 3);
        ɵngcc0.ɵɵtemplate(4, MbscSegmented_span_4_Template, 1, 3, "span", 4);
        ɵngcc0.ɵɵprojection(5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("type", ctx.multiSelect ? "checkbox" : "radio")("value", ctx.value)("checked", ctx.isChecked)("disabled", ctx.disabled);
        ɵngcc0.ɵɵattribute("name", ctx.name)("value", ctx.value)("data-icon", ctx.icon ? ctx.icon : null);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.icon);
    } }, directives: [ɵngcc2.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscSegmented, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-segmented',
                host: { '[class]': 'cssClass' },
                template: "\n        <label class=\"mbsc-segmented-item-ready\">\n            <input #initElement \n                data-role=\"segmented\"\n                [type]=\"multiSelect ? 'checkbox' : 'radio'\" \n                [value]=\"value\" \n                [checked]=\"isChecked\"\n                [disabled]=\"disabled\"\n                [attr.name]=\"name\" \n                [attr.value]=\"value\"\n                [attr.data-icon]=\"icon ? icon : null\"\n                (click)=\"clicked($event)\" />\n            <span class=\"mbsc-segmented-content\">\n                <span *ngIf=\"icon\" class=\"{{'mbsc-ic mbsc-ic-' + icon }}\"></span>\n                <ng-content></ng-content>\n            </span>\n        </label>\n    "
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: MbscRadioService }, { type: ɵngcc0.NgZone }]; }, { icon: [{
            type: core.Input
        }], value: [{
            type: core.Input
        }], checked: [{
            type: core.Input
        }], checkedChange: [{
            type: core.Output
        }] }); })();
      return MbscSegmented;
  }(MbscFormBase));
  var MbscSlider = (function (_super) {
      __extends(MbscSlider, _super);
      function MbscSlider(hostElement, _formService, zone, control) {
          var _this = _super.call(this, hostElement, zone, control, null, null) || this;
          _this._formService = _formService;
          _this._dummy = undefined;
          _this._needsTimeout = false;
          _this.disabled = false;
          _this._colorClass = {};
          _this.onChangeEmitter = new core.EventEmitter();
          return _this;
      }
      Object.defineProperty(MbscSlider.prototype, "isMulti", {
          get: function () {
              return this._lastValue instanceof Array;
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscSlider.prototype, "dummyArray", {
          get: function () {
              if (!this._dummy || (this.isMulti && this._lastValue && this._lastValue.length && this._dummy.length !== this._lastValue.length)) {
                  this._dummy = Array(this.isMulti ? this._lastValue.length : 1).fill(0).map(function (x, i) { return i; });
              }
              return this._dummy;
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscSlider.prototype, "dataStepLabels", {
          get: function () {
              if (typeof (this.stepLabels) === 'string') {
                  return this.stepLabels;
              }
              else {
                  return null;
              }
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscSlider.prototype, "value", {
          set: function (v) {
              this.setNewValueProxy(v);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscSlider.prototype, "colorClass", {
          get: function () {
              for (var k in this._colorClass) {
                  delete this._colorClass[k];
              }
              if (this.color) {
                  this._colorClass['mbsc-slider-' + this.color] = true;
              }
              return this._colorClass;
          },
          enumerable: true,
          configurable: true
      });
      MbscSlider.prototype.reInitialize = function () {
          var _this = this;
          this.instance.destroy();
          this.setElement();
          this.inputElements.forEach(function (input, index) {
              if (index) {
                  _this.handleChange(input.nativeElement);
              }
          });
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Slider(this.inputElements.first.nativeElement, options);
      };
      MbscSlider.prototype.setNewValue = function (v) {
          var _this = this;
          this._lastValue = v;
          if (this.instance) {
              var innerValue = this.instance.getVal();
              if (this.isMulti && (!innerValue || innerValue.length != v.length)) {
                  setTimeout(function () {
                      _this.reInitialize();
                      _this.instance.setVal(_this._lastValue, true, false);
                  });
              }
              else {
                  var changed = (this.isMulti && !deepEqualsArray(innerValue, v)) || (!this.isMulti && innerValue !== v);
                  if (changed) {
                      this.instance.setVal(v, true, false);
                  }
              }
          }
      };
      MbscSlider.prototype.ngOnInit = function () {
          this._inheritedOptions = this._formService ? this._formService.options : {};
          _super.prototype.ngOnInit.call(this);
      };
      MbscSlider.prototype.initControl = function () {
          var _this = this;
          this.inputElements.forEach(function (input, index) {
              if (index) {
                  _this.handleChange(input.nativeElement);
              }
          });
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Slider(this.inputElements.first.nativeElement, options);
          if (this.initialValue !== undefined && this.initialValue !== null) {
              this.instance.setVal(this.initialValue, true, false);
          }
      };
      MbscSlider.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: core.NgZone, },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
      ]; };
      MbscSlider.propDecorators = {
          'options': [{ type: core.Input, args: ['options',] },],
          'name': [{ type: core.Input },],
          'tooltip': [{ type: core.Input },],
          'highlight': [{ type: core.Input },],
          'live': [{ type: core.Input },],
          'valueTemplate': [{ type: core.Input, args: ['value-template',] },],
          'icon': [{ type: core.Input },],
          'val': [{ type: core.Input },],
          'max': [{ type: core.Input },],
          'min': [{ type: core.Input },],
          'step': [{ type: core.Input },],
          'disabled': [{ type: core.Input },],
          'stepLabels': [{ type: core.Input, args: ['step-labels',] },],
          'value': [{ type: core.Input, args: ['value',] },],
          'color': [{ type: core.Input },],
          'onChangeEmitter': [{ type: core.Output, args: ['valueChange',] },],
          'inputElements': [{ type: core.ViewChildren, args: ['inputElements',] },],
      };
MbscSlider.ɵfac = function MbscSlider_Factory(t) { return new (t || MbscSlider)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8)); };
MbscSlider.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscSlider, selectors: [["mbsc-slider"]], viewQuery: function MbscSlider_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c3, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.inputElements = _t);
    } }, hostAttrs: [1, "mbsc-control-ng"], inputs: { value: "value", options: "options", name: "name", tooltip: "tooltip", highlight: "highlight", live: "live", valueTemplate: ["value-template", "valueTemplate"], icon: "icon", val: "val", max: "max", min: "min", step: "step", disabled: "disabled", stepLabels: ["step-labels", "stepLabels"], color: "color" }, outputs: { onChangeEmitter: "valueChange" }, exportAs: ["mobiscroll"], features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 3, vars: 2, consts: [[3, "ngClass"], ["type", "range", 3, "disabled", "blur", 4, "ngFor", "ngForOf"], ["type", "range", 3, "disabled", "blur"], ["inputElements", ""]], template: function MbscSlider_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵtemplate(2, MbscSlider_input_2_Template, 2, 15, "input", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ctx.colorClass);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.dummyArray);
    } }, directives: [ɵngcc2.NgClass, ɵngcc2.NgForOf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscSlider, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-slider',
                host: { 'class': 'mbsc-control-ng' },
                template: "\n        <label [ngClass]=\"colorClass\">\n            <ng-content></ng-content>\n            <input #inputElements *ngFor=\"let v of dummyArray\" \n                type=\"range\"\n                [disabled]=\"disabled\"\n                [attr.value]=\"dummyArray.length > 1 && initialValue ? initialValue[v]: initialValue\"\n                [attr.data-step-labels]=\"dataStepLabels\"\n                [attr.data-template]=\"valueTemplate\"\n                [attr.data-tooltip]=\"tooltip ? 'true' : null\"\n                [attr.data-highlight]=\"highlight\"\n                [attr.data-live]=\"live\"\n                [attr.data-icon]=\"icon ? icon : null\"\n                [attr.data-val]=\"val ? val : null\"\n                [attr.data-label-style]=\"labelStyle\"\n                [attr.data-input-style]=\"inputStyle\"\n                [attr.name]=\"name\"\n                [attr.max]=\"max !== undefined ? max : null\"\n                [attr.min]=\"min !== undefined ? min : null\"\n                [attr.step]=\"step !== undefined ? step : null\"\n                (blur)=\"onTouch($event)\" />\n        </label>\n    ",
                exportAs: 'mobiscroll'
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }]; }, { value: [{
            type: core.Input,
            args: ['value']
        }], options: [{
            type: core.Input,
            args: ['options']
        }], name: [{
            type: core.Input
        }], tooltip: [{
            type: core.Input
        }], highlight: [{
            type: core.Input
        }], live: [{
            type: core.Input
        }], valueTemplate: [{
            type: core.Input,
            args: ['value-template']
        }], icon: [{
            type: core.Input
        }], val: [{
            type: core.Input
        }], max: [{
            type: core.Input
        }], min: [{
            type: core.Input
        }], step: [{
            type: core.Input
        }], disabled: [{
            type: core.Input
        }], stepLabels: [{
            type: core.Input,
            args: ['step-labels']
        }], color: [{
            type: core.Input
        }], onChangeEmitter: [{
            type: core.Output,
            args: ['valueChange']
        }], inputElements: [{
            type: core.ViewChildren,
            args: ['inputElements']
        }] }); })();
      return MbscSlider;
  }(MbscControlBase));
  var MbscRating = (function (_super) {
      __extends(MbscRating, _super);
      function MbscRating(hostElem, zone, formService, control) {
          var _this = _super.call(this, hostElem, zone, control, null, null) || this;
          _this.formService = formService;
          _this.min = undefined;
          _this.max = undefined;
          _this.step = undefined;
          _this.disabled = false;
          _this.val = undefined;
          _this.onChangeEmitter = new core.EventEmitter();
          _this._colorClass = {};
          return _this;
      }
      Object.defineProperty(MbscRating.prototype, "readonly", {
          set: function (val) {
              this._readonly = emptyOrTrue(val);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscRating.prototype, "value", {
          set: function (v) {
              this.setNewValueProxy(v);
          },
          enumerable: true,
          configurable: true
      });
      Object.defineProperty(MbscRating.prototype, "colorClass", {
          get: function () {
              for (var k in this._colorClass) {
                  delete this._colorClass[k];
              }
              if (this.color) {
                  this._colorClass['mbsc-rating-' + this.color] = true;
              }
              return this._colorClass;
          },
          enumerable: true,
          configurable: true
      });
      MbscRating.prototype.setNewValue = function (v) {
          if (this.instance) {
              if (this.instance.getVal() !== v) {
                  this.instance.setVal(v, true, false);
              }
          }
      };
      MbscRating.prototype.ngOnInit = function () {
          this._inheritedOptions = this.formService ? this.formService.options : {};
          _super.prototype.ngOnInit.call(this);
      };
      MbscRating.prototype.initControl = function () {
          var options = extend$1({}, this._inheritedOptions, this.options, this.inlineOptionsObj);
          this.instance = new Rating(this.element, options);
          if (this.initialValue !== undefined) {
              this.instance.setVal(this.initialValue, true, false);
          }
      };
      MbscRating.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: core.NgZone, },
          { type: MbscOptionsService, decorators: [{ type: core.Optional },] },
          { type: forms.NgControl, decorators: [{ type: core.Optional },] },
      ]; };
      MbscRating.propDecorators = {
          'options': [{ type: core.Input },],
          'name': [{ type: core.Input },],
          'min': [{ type: core.Input },],
          'max': [{ type: core.Input },],
          'step': [{ type: core.Input },],
          'disabled': [{ type: core.Input },],
          'empty': [{ type: core.Input },],
          'filled': [{ type: core.Input },],
          'readonly': [{ type: core.Input },],
          'val': [{ type: core.Input },],
          'template': [{ type: core.Input },],
          'value': [{ type: core.Input, args: ['value',] },],
          'onChangeEmitter': [{ type: core.Output, args: ['valueChange',] },],
          'color': [{ type: core.Input },],
      };
MbscRating.ɵfac = function MbscRating_Factory(t) { return new (t || MbscRating)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgControl, 8)); };
MbscRating.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscRating, selectors: [["mbsc-rating"]], hostAttrs: [1, "mbsc-control-ng"], inputs: { readonly: "readonly", value: "value", options: "options", name: "name", min: "min", max: "max", step: "step", disabled: "disabled", empty: "empty", filled: "filled", val: "val", template: "template", color: "color" }, outputs: { onChangeEmitter: "valueChange" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 3, vars: 13, consts: [[3, "ngClass"], ["type", "rating", "data-role", "rating", 3, "disabled", "readonly", "blur"]], template: function MbscRating_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "label", 0);
        ɵngcc0.ɵɵprojection(1);
        ɵngcc0.ɵɵelementStart(2, "input", 1);
        ɵngcc0.ɵɵlistener("blur", function MbscRating_Template_input_blur_2_listener($event) { return ctx.onTouch($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ctx.colorClass);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled)("readonly", ctx._readonly);
        ɵngcc0.ɵɵattribute("name", ctx.name)("min", ctx.min !== undefined ? ctx.min : null)("max", ctx.max !== undefined ? ctx.max : null)("step", ctx.step !== undefined ? ctx.step : null)("data-val", ctx.val ? ctx.val : null)("data-template", ctx.template ? ctx.template : null)("data-empty", ctx.empty)("data-filled", ctx.filled)("data-label-style", ctx.labelStyle)("data-input-style", ctx.inputStyle);
    } }, directives: [ɵngcc2.NgClass], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscRating, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-rating',
                host: { 'class': 'mbsc-control-ng' },
                template: "<label [ngClass]=\"colorClass\">\n        <ng-content></ng-content>\n        <input type=\"rating\" data-role=\"rating\" \n            [attr.name]=\"name\"\n            [attr.min]=\"min !== undefined ? min : null\"\n            [attr.max]=\"max !== undefined ? max : null\"\n            [attr.step]=\"step !== undefined ? step : null\"\n            [attr.data-val]=\"val ? val : null\"\n            [attr.data-template]=\"template ? template : null\"\n            [attr.data-empty]=\"empty\"\n            [attr.data-filled]=\"filled\"\n            [attr.data-label-style]=\"labelStyle\"\n            [attr.data-input-style]=\"inputStyle\"\n            [disabled]=\"disabled\"\n            [readonly]=\"_readonly\"\n            (blur)=\"onTouch($event)\" />\n    </label>"
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc1.NgControl, decorators: [{
                type: core.Optional
            }] }]; }, { readonly: [{
            type: core.Input
        }], value: [{
            type: core.Input,
            args: ['value']
        }], options: [{
            type: core.Input
        }], name: [{
            type: core.Input
        }], min: [{
            type: core.Input
        }], max: [{
            type: core.Input
        }], step: [{
            type: core.Input
        }], disabled: [{
            type: core.Input
        }], empty: [{
            type: core.Input
        }], filled: [{
            type: core.Input
        }], val: [{
            type: core.Input
        }], template: [{
            type: core.Input
        }], onChangeEmitter: [{
            type: core.Output,
            args: ['valueChange']
        }], color: [{
            type: core.Input
        }] }); })();
      return MbscRating;
  }(MbscControlBase));
  var MbscFormGroup = (function () {
      function MbscFormGroup(initialElem) {
          this.initialElem = initialElem;
          this.collapsible = null;
          this._open = false;
          this.instance = null;
          this.element = null;
          this.element = initialElem;
      }
      Object.defineProperty(MbscFormGroup.prototype, "open", {
          set: function (v) {
              if (this._open != v && this.instance) {
                  if (v) {
                      this.instance.show();
                  }
                  else {
                      this.instance.hide();
                  }
              }
              this._open = v;
          },
          enumerable: true,
          configurable: true
      });
      MbscFormGroup.prototype.emptyOrTrue = function (v) {
          return emptyOrTrue(v);
      };
      MbscFormGroup.prototype.ngAfterViewInit = function () {
          if (this.collapsible !== null) {
              this.instance = new CollapsibleBase(this.element.nativeElement, { isOpen: this._open !== false });
          }
      };
      MbscFormGroup.prototype.ngOnDestroy = function () {
          if (this.instance) {
              this.instance.destroy();
          }
      };
      MbscFormGroup.ctorParameters = function () { return [
          { type: core.ElementRef, },
      ]; };
      MbscFormGroup.propDecorators = {
          'collapsible': [{ type: core.Input },],
          'open': [{ type: core.Input },],
          'inset': [{ type: core.Input },],
      };
MbscFormGroup.ɵfac = function MbscFormGroup_Factory(t) { return new (t || MbscFormGroup)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
MbscFormGroup.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscFormGroup, selectors: [["mbsc-form-group"]], hostVars: 4, hostBindings: function MbscFormGroup_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-form-group-inset", ctx.emptyOrTrue(ctx.inset))("mbsc-form-group", !ctx.emptyOrTrue(ctx.inset));
    } }, inputs: { collapsible: "collapsible", open: "open", inset: "inset" }, ngContentSelectors: _c1, decls: 1, vars: 0, template: function MbscFormGroup_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%] { display: block; }"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscFormGroup, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-form-group',
                template: '<ng-content></ng-content>',
                host: {
                    '[class.mbsc-form-group-inset]': 'emptyOrTrue(inset)',
                    '[class.mbsc-form-group]': '!emptyOrTrue(inset)'
                },
                styles: [':host { display: block; }']
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { collapsible: [{
            type: core.Input
        }], open: [{
            type: core.Input
        }], inset: [{
            type: core.Input
        }] }); })();
      return MbscFormGroup;
  }());
  var MbscFormGroupTitle = (function () {
      function MbscFormGroupTitle() {
      }
      MbscFormGroupTitle.ctorParameters = function () { return []; };
MbscFormGroupTitle.ɵfac = function MbscFormGroupTitle_Factory(t) { return new (t || MbscFormGroupTitle)(); };
MbscFormGroupTitle.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscFormGroupTitle, selectors: [["mbsc-form-group-title"]], hostVars: 2, hostBindings: function MbscFormGroupTitle_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-form-group-title", true);
    } }, ngContentSelectors: _c1, decls: 1, vars: 0, template: function MbscFormGroupTitle_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%] { display: block; }"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscFormGroupTitle, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-form-group-title',
                template: '<ng-content></ng-content>',
                host: {
                    '[class.mbsc-form-group-title]': 'true'
                },
                styles: [':host { display: block; }']
            }]
    }], function () { return []; }, null); })();
      return MbscFormGroupTitle;
  }());
  var MbscFormGroupContent = (function () {
      function MbscFormGroupContent() {
      }
      MbscFormGroupContent.ctorParameters = function () { return []; };
MbscFormGroupContent.ɵfac = function MbscFormGroupContent_Factory(t) { return new (t || MbscFormGroupContent)(); };
MbscFormGroupContent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscFormGroupContent, selectors: [["mbsc-form-group-content"]], hostVars: 2, hostBindings: function MbscFormGroupContent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-form-group-content", true);
    } }, ngContentSelectors: _c1, decls: 1, vars: 0, template: function MbscFormGroupContent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%] { display: block; }"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscFormGroupContent, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-form-group-content',
                template: '<ng-content></ng-content>',
                host: {
                    '[class.mbsc-form-group-content]': 'true'
                },
                styles: [':host { display: block; }']
            }]
    }], function () { return []; }, null); })();
      return MbscFormGroupContent;
  }());
  var MbscAccordion = (function () {
      function MbscAccordion() {
      }
      MbscAccordion.ctorParameters = function () { return []; };
MbscAccordion.ɵfac = function MbscAccordion_Factory(t) { return new (t || MbscAccordion)(); };
MbscAccordion.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscAccordion, selectors: [["mbsc-accordion"]], hostVars: 2, hostBindings: function MbscAccordion_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("mbsc-accordion", true);
    } }, ngContentSelectors: _c1, decls: 1, vars: 0, template: function MbscAccordion_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%] { display: block; }"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscAccordion, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-accordion',
                template: '<ng-content></ng-content>',
                host: {
                    '[class.mbsc-accordion]': 'true'
                },
                styles: [':host { display: block; }']
            }]
    }], function () { return []; }, null); })();
      return MbscAccordion;
  }());
  var comp = [
      MbscForm,
      MbscTextarea,
      MbscDropdown,
      MbscButton,
      MbscCheckbox,
      MbscSwitch,
      MbscStepper,
      MbscProgress,
      MbscRadioGroup,
      MbscRadioGroupBase,
      MbscRadio,
      MbscSegmentedGroup,
      MbscSegmented,
      MbscSlider,
      MbscRating,
      MbscFormGroup,
      MbscFormGroupTitle,
      MbscFormGroupContent,
      MbscAccordion
  ];
  var MbscFormsModule = (function () {
      function MbscFormsModule() {
      }
      MbscFormsModule.ctorParameters = function () { return []; };
MbscFormsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: MbscFormsModule });
MbscFormsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function MbscFormsModule_Factory(t) { return new (t || MbscFormsModule)(); }, imports: [[forms.FormsModule, common.CommonModule, MbscBaseModule, MbscInputModule], MbscInputModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MbscFormsModule, { declarations: [MbscForm, MbscTextarea, MbscDropdown, MbscButton, MbscCheckbox, MbscSwitch, MbscStepper, MbscProgress, MbscRadioGroup, MbscRadioGroupBase, MbscRadio, MbscSegmentedGroup, MbscSegmented, MbscSlider, MbscRating, MbscFormGroup, MbscFormGroupTitle, MbscFormGroupContent, MbscAccordion], imports: [ɵngcc1.FormsModule, ɵngcc2.CommonModule, MbscBaseModule, MbscInputModule], exports: [MbscForm, MbscTextarea, MbscDropdown, MbscButton, MbscCheckbox, MbscSwitch, MbscStepper, MbscProgress, MbscRadioGroup, MbscRadioGroupBase, MbscRadio, MbscSegmentedGroup, MbscSegmented, MbscSlider, MbscRating, MbscFormGroup, MbscFormGroupTitle, MbscFormGroupContent, MbscAccordion, MbscInputModule, MbscInput] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscFormsModule, [{
        type: core.NgModule,
        args: [{
                imports: [forms.FormsModule, common.CommonModule, MbscBaseModule, MbscInputModule],
                declarations: comp,
                exports: [comp, MbscInputModule, MbscInput]
            }]
    }], function () { return []; }, null); })();
      return MbscFormsModule;
  }());

  // ---

  var Page = function Page(el, settings) {
    var cssClass = '',
        $elm = $$1(el),
        that = this,
        s = that.settings; // Call the parent constructor

    Base.call(this, el, settings, true);
    /**
     * Page initialization.
     */

    that._init = function () {
      var ctx = s.context,
          $ctx = $$1(ctx),
          $topMenu = $ctx.find('.mbsc-ms-top .mbsc-ms'),
          $bottomMenu = $ctx.find('.mbsc-ms-bottom .mbsc-ms'),
          css = {};

      if (ctx == 'body') {
        $$1('body,html').addClass('mbsc-page-ctx');
      } else {
        $ctx.addClass('mbsc-page-ctx');
      }

      if (cssClass) {
        $elm.removeClass(cssClass);
      }

      if ($topMenu.length) {
        css.paddingTop = $topMenu[0].offsetHeight;
      }

      if ($bottomMenu.length) {
        css.paddingBottom = $bottomMenu[0].offsetHeight;
      }

      cssClass = 'mbsc-page mbsc-' + s.theme + (s.baseTheme ? ' mbsc-' + s.baseTheme : '') + (s.rtl ? ' mbsc-rtl' : ' mbsc-ltr');
      $elm.addClass(cssClass).removeClass('mbsc-cloak').css(css);
    };
    /**
     * Destroys the mobiscroll instance.
     */


    that._destroy = function () {
      $elm.removeClass(cssClass);
    }; // Constructor


    s = that.settings;
    that.init();
  }; // Extend defaults

  Page.prototype = {
    _hasDef: true,
    _hasTheme: true,
    _hasLang: true,
    _class: 'page',
    _defaults: {
      context: 'body'
    }
  };
  classes.Page = Page;
  mobiscroll.themes.page.mobiscroll = {}; // ---
  // Page end
  // Init mbsc-page elements on page load or when mbsc-enhance event is triggeres

  autoInit('[mbsc-page]', Page);

  var MbscPage = (function (_super) {
      __extends(MbscPage, _super);
      function MbscPage(hostElement, optionsService, zone) {
          var _this = _super.call(this, hostElement, zone) || this;
          _this.optionsService = optionsService;
          return _this;
      }
      MbscPage.prototype.ngOnInit = function () {
          var optionsObj = extend$1({}, this.options, this.inlineOptionsObj);
          this.optionsService.options = optionsObj;
      };
      MbscPage.prototype.initControl = function () {
          var options = extend$1({}, this.options, this.inlineOptionsObj);
          this.instance = new Page(this.initElem.nativeElement, options);
      };
      MbscPage.ctorParameters = function () { return [
          { type: core.ElementRef, },
          { type: MbscOptionsService, },
          { type: core.NgZone, },
      ]; };
      MbscPage.propDecorators = {
          'options': [{ type: core.Input },],
          'context': [{ type: core.Input },],
          'initElem': [{ type: core.ViewChild, args: ['initElement', { static: false },] },],
      };
MbscPage.ɵfac = function MbscPage_Factory(t) { return new (t || MbscPage)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscPage.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscPage, selectors: [["mbsc-page"]], viewQuery: function MbscPage_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.initElem = _t.first);
    } }, inputs: { options: "options", context: "context" }, exportAs: ["mobiscroll"], features: [ɵngcc0.ɵɵProvidersFeature([MbscOptionsService]), ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 3, vars: 0, consts: [["initElement", ""]], template: function MbscPage_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "div", null, 0);
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵelementEnd();
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscPage, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-page',
                template: '<div #initElement><ng-content></ng-content></div>',
                providers: [MbscOptionsService],
                exportAs: 'mobiscroll'
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService }, { type: ɵngcc0.NgZone }]; }, { options: [{
            type: core.Input
        }], context: [{
            type: core.Input
        }], initElem: [{
            type: core.ViewChild,
            args: ['initElement', { static: false }]
        }] }); })();
      return MbscPage;
  }(MbscBase));
  var MbscNote = (function () {
      function MbscNote(initialElem) {
          this.initialElem = initialElem;
          this.color = 'primary';
      }
      Object.defineProperty(MbscNote.prototype, "classNames", {
          get: function () {
              return 'mbsc-note mbsc-note-' + this.color;
          },
          enumerable: true,
          configurable: true
      });
      MbscNote.ctorParameters = function () { return [
          { type: core.ElementRef, },
      ]; };
      MbscNote.propDecorators = {
          'color': [{ type: core.Input },],
      };
MbscNote.ɵfac = function MbscNote_Factory(t) { return new (t || MbscNote)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
MbscNote.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscNote, selectors: [["mbsc-note"]], hostVars: 2, hostBindings: function MbscNote_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassMap(ctx.classNames);
    } }, inputs: { color: "color" }, ngContentSelectors: _c1, decls: 1, vars: 0, template: function MbscNote_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%] { display: block; }"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscNote, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-note',
                template: '<ng-content></ng-content>',
                host: {
                    '[class]': 'classNames'
                },
                styles: [':host { display: block; }']
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { color: [{
            type: core.Input
        }] }); })();
      return MbscNote;
  }());
  var MbscAvatar = (function () {
      function MbscAvatar() {
          this.draggable = false;
      }
      MbscAvatar.ctorParameters = function () { return []; };
      MbscAvatar.propDecorators = {
          'draggable': [{ type: core.Input },],
          'src': [{ type: core.Input },],
          'alt': [{ type: core.Input },],
      };
MbscAvatar.ɵfac = function MbscAvatar_Factory(t) { return new (t || MbscAvatar)(); };
MbscAvatar.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscAvatar, selectors: [["mbsc-avatar"]], inputs: { draggable: "draggable", src: "src", alt: "alt" }, decls: 1, vars: 3, consts: [[1, "mbsc-avatar", 3, "src", "alt", "draggable"]], template: function MbscAvatar_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "img", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("src", ctx.src, ɵngcc0.ɵɵsanitizeUrl)("alt", ctx.alt)("draggable", ctx.draggable);
    } }, encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscAvatar, [{
        type: core.Component,
        args: [{
                selector: 'mbsc-avatar',
                template: '<img class="mbsc-avatar" [src]="src" [alt]="alt" [draggable]="draggable" />'
            }]
    }], function () { return []; }, { draggable: [{
            type: core.Input
        }], src: [{
            type: core.Input
        }], alt: [{
            type: core.Input
        }] }); })();
      return MbscAvatar;
  }());
  var MbscPageModule = (function () {
      function MbscPageModule() {
      }
      MbscPageModule.ctorParameters = function () { return []; };
MbscPageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: MbscPageModule });
MbscPageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function MbscPageModule_Factory(t) { return new (t || MbscPageModule)(); }, imports: [[MbscBaseModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MbscPageModule, { declarations: [MbscPage, MbscNote, MbscAvatar], imports: [MbscBaseModule], exports: [MbscPage, MbscNote, MbscAvatar] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscPageModule, [{
        type: core.NgModule,
        args: [{
                imports: [MbscBaseModule],
                declarations: [MbscPage, MbscNote, MbscAvatar],
                exports: [MbscPage, MbscNote, MbscAvatar]
            }]
    }], function () { return []; }, null); })();
      return MbscPageModule;
  }());

  var MbscCommercialComponent = function (_super) {
    __extends(MbscCommercialComponent, _super);

    function MbscCommercialComponent(hostElement, optionsService, zone) {
      var _this = _super.call(this, hostElement, zone) || this;

      _this.optionsService = optionsService;
      _this.mbscOptions = {};
      _this.options = {};
      return _this;
    }

    MbscCommercialComponent.prototype.ngAfterViewInit = function () {
      if (!mobiscroll.alerted) {
        mobiscroll.confirm({
          title: 'Mobiscroll Lite doesn\'t support this functionality.',
          message: 'You can try the full toolset with a free trial. If you\'re having trouble, <a href="mailto:support@mobiscroll.com" target="_top">let us know</a>.',
          okText: 'Start Trial',
          cancelText: 'Ok',
          callback: function callback(startTrial) {
            if (startTrial) {
              window.open("//mobiscroll.com/", '_blank');
            }
          }
        });
        mobiscroll.alerted = true;
      }
    };

    MbscCommercialComponent.ctorParameters = function () {
      return [{
        type: core.ElementRef
      }, {
        type: MbscOptionsService,
        decorators: [{
          type: core.Optional
        }]
      }, {
        type: core.NgZone
      }];
    };

    MbscCommercialComponent.propDecorators = {
      'mbscOptions': [{
        type: core.Input,
        args: ['mbsc-options']
      }],
      'options': [{
        type: core.Input
      }],
      'data': [{
        type: core.Input
      }],
      'mbscData': [{
        type: core.Input,
        args: ['mbsc-data']
      }],
      'initElem': [{
        type: core.ViewChild,
        args: ['initElement', {
          static: false
        }]
      }]
    };
MbscCommercialComponent.ɵfac = function MbscCommercialComponent_Factory(t) { return new (t || MbscCommercialComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(MbscOptionsService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };
MbscCommercialComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MbscCommercialComponent, selectors: [["mbsc-calendar"], ["", "mbsc-calendar", ""], ["mbsc-date"], ["", "mbsc-date", ""], ["mbsc-time"], ["", "mbsc-time", ""], ["mbsc-datetime"], ["", "mbsc-datetime", ""], ["mbsc-eventcalendar"], ["", "mbsc-eventcalendar", ""], ["mbsc-card"], ["", "mbsc-card", ""], ["mbsc-card-header"], ["mbsc-card-content"], ["mbsc-card-footer"], ["mbsc-card-title"], ["mbsc-card-subtitle"], ["mbsc-color"], ["", "mbsc-color", ""], ["mbsc-image"], ["", "mbsc-image", ""], ["mbsc-listview"], ["mbsc-listview-item"], ["mbsc-listview-header"], ["mbsc-listview-sublist"], ["mbsc-measurement"], ["", "mbsc-measurement", ""], ["mbsc-temperature"], ["", "mbsc-temperature", ""], ["mbsc-distance"], ["", "mbsc-distance", ""], ["mbsc-speed"], ["", "mbsc-speed", ""], ["mbsc-force"], ["", "mbsc-force", ""], ["mbsc-mass"], ["", "mbsc-mass", ""], ["mbsc-nav-item"], ["mbsc-bottom-nav"], ["mbsc-hamburger-nav"], ["mbsc-tab-nav"], ["mbsc-number"], ["", "mbsc-number", ""], ["mbsc-numpad"], ["", "mbsc-numpad", ""], ["mbsc-numpad-decimal"], ["", "mbsc-numpad-decimal", ""], ["mbsc-numpad-date"], ["", "mbsc-numpad-date", ""], ["mbsc-numpad-time"], ["", "mbsc-numpad-time", ""], ["mbsc-numpad-timespan"], ["", "mbsc-numpad-timespan", ""], ["mbsc-optionlist"], ["mbsc-option-item"], ["mbsc-range"], ["", "mbsc-range", ""], ["mbsc-scroller"], ["", "mbsc-scroller", ""], ["mbsc-scrollview"], ["", "mbsc-scrollview", ""], ["mbsc-scrollview-item"], ["", "mbsc-scrollview-item", ""], ["mbsc-select"], ["", "mbsc-select", ""], ["mbsc-timer"], ["", "mbsc-timer", ""], ["mbsc-timespan"], ["", "mbsc-timespan", ""], ["mbsc-treelist"], ["", "mbsc-treelist", ""], ["mbsc-widget"]], viewQuery: function MbscCommercialComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.initElem = _t.first);
    } }, inputs: { mbscOptions: ["mbsc-options", "mbscOptions"], options: "options", data: "data", mbscData: ["mbsc-data", "mbscData"] }, exportAs: ["mobiscroll"], features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 1, vars: 0, template: function MbscCommercialComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: ["[_nghost-%COMP%] { display: block }"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscCommercialComponent, [{
        type: core.Component,
        args: [{
                selector: "\n    mbsc-calendar, [mbsc-calendar],\n    mbsc-date, [mbsc-date],\n    mbsc-time, [mbsc-time],\n    mbsc-datetime, [mbsc-datetime],\n    mbsc-eventcalendar, [mbsc-eventcalendar],\n    mbsc-card, [mbsc-card], mbsc-card-header, mbsc-card-content, mbsc-card-footer, mbsc-card-title, mbsc-card-subtitle,\n    mbsc-color, [mbsc-color],\n    mbsc-image, [mbsc-image],\n    mbsc-listview, mbsc-listview-item, mbsc-listview-header, mbsc-listview-sublist,\n    mbsc-measurement, [mbsc-measurement], mbsc-temperature, [mbsc-temperature], mbsc-distance, [mbsc-distance], mbsc-speed, [mbsc-speed], mbsc-force, [mbsc-force], mbsc-mass, [mbsc-mass],\n    mbsc-nav-item, mbsc-bottom-nav, mbsc-hamburger-nav, mbsc-tab-nav,\n    mbsc-number, [mbsc-number],\n    mbsc-numpad, [mbsc-numpad], mbsc-numpad-decimal, [mbsc-numpad-decimal], mbsc-numpad-date, [mbsc-numpad-date], mbsc-numpad-time, [mbsc-numpad-time], mbsc-numpad-timespan, [mbsc-numpad-timespan],\n    mbsc-optionlist, mbsc-option-item,\n    mbsc-range, [mbsc-range],\n    mbsc-scroller, [mbsc-scroller],\n    mbsc-scrollview, [mbsc-scrollview], mbsc-scrollview-item, [mbsc-scrollview-item],\n    mbsc-select, [mbsc-select],\n    mbsc-timer, [mbsc-timer],\n    mbsc-timespan, [mbsc-timespan],\n    mbsc-treelist, [mbsc-treelist],\n    mbsc-widget\n    ",
                template: '<ng-content></ng-content>',
                exportAs: 'mobiscroll',
                styles: [':host { display: block }']
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: MbscOptionsService, decorators: [{
                type: core.Optional
            }] }, { type: ɵngcc0.NgZone }]; }, { mbscOptions: [{
            type: core.Input,
            args: ['mbsc-options']
        }], options: [{
            type: core.Input
        }], data: [{
            type: core.Input
        }], mbscData: [{
            type: core.Input,
            args: ['mbsc-data']
        }], initElem: [{
            type: core.ViewChild,
            args: ['initElement', {
                    static: false
                }]
        }] }); })();
    return MbscCommercialComponent;
  }(MbscBase);

  var directives = [MbscForm, MbscRating, MbscPage, MbscNote, MbscAvatar, MbscInput, MbscDropdown, MbscTextarea, MbscButton, MbscCheckbox, MbscSwitch, MbscStepper, MbscProgress, MbscSlider, MbscRadio, MbscRadioGroup, MbscSegmentedGroup, MbscSegmented, MbscCommercialComponent, MbscFormGroup, MbscFormGroupTitle, MbscFormGroupContent];

  var MbscModule = function () {
    function MbscModule() {}

    MbscModule.ctorParameters = function () {
      return [];
    };
MbscModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: MbscModule });
MbscModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function MbscModule_Factory(t) { return new (t || MbscModule)(); }, imports: [[forms.FormsModule, common.CommonModule, MbscFormsModule, MbscPageModule], MbscFormsModule, MbscPageModule] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MbscModule, { declarations: [MbscCommercialComponent], imports: [ɵngcc1.FormsModule, ɵngcc2.CommonModule, MbscFormsModule, MbscPageModule], exports: [MbscForm, MbscRating, MbscPage, MbscNote, MbscAvatar, MbscInput, MbscDropdown, MbscTextarea, MbscButton, MbscCheckbox, MbscSwitch, MbscStepper, MbscProgress, MbscSlider, MbscRadio, MbscRadioGroup, MbscSegmentedGroup, MbscSegmented, MbscCommercialComponent, MbscFormGroup, MbscFormGroupTitle, MbscFormGroupContent, MbscCommercialComponent, MbscFormsModule, MbscPageModule] }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MbscModule, [{
        type: core.NgModule,
        args: [{
                imports: [forms.FormsModule, common.CommonModule, MbscFormsModule, MbscPageModule],
                declarations: [MbscCommercialComponent],
                exports: [directives, MbscCommercialComponent, MbscFormsModule, MbscPageModule]
            }]
    }], function () { return []; }, null); })();

    return MbscModule;
  }();

  // Arabic
  mobiscroll.i18n.ar = {
    // Core
    rtl: true,
    // Right to left mode
    setText: 'تعيين',
    cancelText: 'إلغاء',
    clearText: 'مسح',
    selectedText: '{count} المحدد',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['الأحد', 'الاثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'],
    dayNamesShort: ['أحد', 'اثنين', 'ثلاثاء', 'أربعاء', 'خميس', 'جمعة', 'سبت'],
    dayNamesMin: ['ح', 'ن', 'ث', 'ر', 'خ', 'ج', 'س'],
    dayText: 'يوم',
    hourText: 'ساعات',
    minuteText: 'الدقائق',
    monthNames: ['يناير', 'فبراير', 'مارس', 'ابريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
    monthNamesShort: ['يناير', 'فبراير', 'مارس', 'ابريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
    monthText: 'شهر',
    secText: 'ثواني',
    amText: 'ص',
    pmText: 'م',
    timeFormat: 'hh:ii A',
    yearText: 'عام',
    nowText: 'الآن',
    // Calendar component
    firstDay: 0,
    dateText: 'تاريخ',
    timeText: 'وقت',
    closeText: 'إغلاق',
    todayText: 'اليوم',
    prevMonthText: 'الشهر السابق',
    nextMonthText: 'الشهر القادم',
    prevYearText: 'السنه السابقة',
    nextYearText: 'العام القادم',
    allDayText: 'اليوم كله',
    noEventsText: 'لا توجد احداث',
    // Event calendar
    eventText: 'الحدث',
    eventsText: 'أحداث',
    moreEventsText: 'واحد آخر',
    moreEventsPluralText: 'اثنان آخران {count}',
    // Daterange component
    fromText: 'يبدا',
    toText: 'ينتهي',
    // Measurement components
    wholeText: 'كامل',
    fractionText: 'جزء',
    unitText: 'وحدة',
    // Numpad date
    delimiter: '/',
    // Numpad decimal
    decimalSeparator: '.',
    thousandsSeparator: ',',
    // Timer / Timespan component
    labels: ['سنوات', 'أشهر', 'أيام', 'ساعة', 'دقائق', 'ثواني', ''],
    labelsShort: ['سنوات', 'أشهر', 'أيام', 'ساعة', 'دقائق', 'ثواني', ''],
    // Timer component
    startText: 'بدء',
    stopText: 'إيقاف',
    resetText: 'إعادة ضبط',
    lapText: 'الدورة',
    hideText: 'إخفاء',
    // Forms
    offText: 'إيقاف',
    onText: 'تشغيل',
    // Listview
    backText: 'رجوع',
    undoText: 'تراجع'
  };

  // Bulgarian
  mobiscroll.i18n.bg = {
    // Core
    setText: 'Задаване',
    cancelText: 'Отмяна',
    clearText: 'Изчистване',
    selectedText: '{count} подбран',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Неделя', 'Понеделник', 'Вторник', 'Сряда', 'Четвъртък', 'Петък', 'Събота'],
    dayNamesShort: ['Нед', 'Пон', 'Вто', 'Сря', 'Чет', 'Пет', 'Съб'],
    dayNamesMin: ['Не', 'По', 'Вт', 'Ср', 'Че', 'Пе', 'Съ'],
    dayText: 'ден',
    delimiter: '.',
    hourText: 'час',
    minuteText: 'минута',
    monthNames: ['Януари', 'Февруари', 'Март', 'Април', 'Май', 'Юни', 'Юли', 'Август', 'Септември', 'Октомври', 'Ноември', 'Декември'],
    monthNamesShort: ['Яну', 'Фев', 'Мар', 'Апр', 'Май', 'Юни', 'Юли', 'Авг', 'Сеп', 'Окт', 'Нов', 'Дек'],
    monthText: 'месец',
    secText: 'секунди',
    timeFormat: 'H:ii',
    yearText: 'година',
    nowText: 'Сега',
    pmText: 'pm',
    amText: 'am',
    // Calendar component
    firstDay: 1,
    dateText: 'Дата',
    timeText: 'път',
    todayText: 'днес',
    prevMonthText: 'Предишния месец',
    nextMonthText: 'Следващият месец',
    prevYearText: 'Предходната година',
    nextYearText: 'Следващата година',
    closeText: 'затвори',
    eventText: 'Събитие',
    eventsText: 'Събития',
    allDayText: 'Цял ден',
    noEventsText: 'Няма събития',
    moreEventsText: 'Още {count}',
    // Daterange component
    fromText: 'ОТ',
    toText: 'ДО',
    // Measurement components
    wholeText: 'цяло',
    fractionText: 'фракция',
    unitText: 'единица',
    // Time / Timespan component
    labels: ['Години', 'месеца', 'дни', 'часа', 'минути', 'секунди', ''],
    labelsShort: ['Години', 'месеца', 'дни', 'часа', 'минути', 'секунди', ''],
    // Timer component
    startText: 'Старт',
    stopText: 'Стоп',
    resetText: 'Нулиране',
    lapText: 'Обиколка',
    hideText: 'крия',
    // Listview
    backText: 'връщане',
    undoText: 'ОТМЯНА',
    // Form
    offText: 'ИЗКЛ',
    onText: 'ВКЛ',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Català
  mobiscroll.i18n.ca = {
    // Core
    setText: 'Acceptar',
    cancelText: 'Cancel·lar',
    clearText: 'Esborrar',
    selectedText: '{count} seleccionat',
    selectedPluralText: '{count} seleccionats',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Diumenge', 'Dilluns', 'Dimarts', 'Dimecres', 'Dijous', 'Divendres', 'Dissabte'],
    dayNamesShort: ['Dg', 'Dl', 'Dt', 'Dc', 'Dj', 'Dv', 'Ds'],
    dayNamesMin: ['Dg', 'Dl', 'Dt', 'Dc', 'Dj', 'Dv', 'Ds'],
    dayText: 'Dia',
    hourText: 'Hores',
    minuteText: 'Minuts',
    monthNames: ['Gener', 'Febrer', 'Març', 'Abril', 'Maig', 'Juny', 'Juliol', 'Agost', 'Setembre', 'Octubre', 'Novembre', 'Desembre'],
    monthNamesShort: ['Gen', 'Feb', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Oct', 'Nov', 'Des'],
    monthText: 'Mes',
    secText: 'Segons',
    timeFormat: 'HH:ii',
    yearText: 'Any',
    nowText: 'Ara',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Avui',
    // Calendar component
    firstDay: 1,
    dateText: 'Data',
    timeText: 'Temps',
    closeText: 'Tancar',
    allDayText: 'Tot el dia',
    noEventsText: 'Cap esdeveniment',
    eventText: 'Esdeveniments',
    eventsText: 'Esdeveniments',
    moreEventsText: '{count} més',
    // Daterange component
    fromText: 'Iniciar',
    toText: 'Final',
    // Measurement components
    wholeText: 'Sencer',
    fractionText: 'Fracció',
    unitText: 'Unitat',
    // Time / Timespan component
    labels: ['Anys', 'Mesos', 'Dies', 'Hores', 'Minuts', 'Segons', ''],
    labelsShort: ['Anys', 'Mesos', 'Dies', 'Hrs', 'Mins', 'Secs', ''],
    // Timer component
    startText: 'Iniciar',
    stopText: 'Aturar',
    resetText: 'Reiniciar',
    lapText: 'Volta',
    hideText: 'Amagar',
    // Listview
    backText: 'Enrere',
    undoText: 'Desfés',
    // Form
    offText: 'No',
    onText: 'Si'
  };

  // Cestina
  mobiscroll.i18n.cs = {
    // Core
    setText: 'Zadej',
    cancelText: 'Storno',
    clearText: 'Vymazat',
    selectedText: 'Označený: {count}',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Neděle', 'Pondělí', 'Úterý', 'Středa', 'Čtvrtek', 'Pátek', 'Sobota'],
    dayNamesShort: ['Ne', 'Po', 'Út', 'St', 'Čt', 'Pá', 'So'],
    dayNamesMin: ['N', 'P', 'Ú', 'S', 'Č', 'P', 'S'],
    dayText: 'Den',
    hourText: 'Hodiny',
    minuteText: 'Minuty',
    monthNames: ['Leden', 'Únor', 'Březen', 'Duben', 'Květen', 'Červen', 'Červenec', 'Srpen', 'Září', 'Říjen', 'Listopad', 'Prosinec'],
    monthNamesShort: ['Led', 'Úno', 'Bře', 'Dub', 'Kvě', 'Čer', 'Čvc', 'Spr', 'Zář', 'Říj', 'Lis', 'Pro'],
    monthText: 'Měsíc',
    secText: 'Sekundy',
    timeFormat: 'HH:ii',
    yearText: 'Rok',
    nowText: 'Teď',
    amText: 'am',
    pmText: 'pm',
    todayText: 'Dnes',
    // Calendar component
    firstDay: 1,
    dateText: 'Datum',
    timeText: 'Čas',
    closeText: 'Zavřít',
    allDayText: 'Celý den',
    noEventsText: 'Žádné události',
    eventText: 'Událostí',
    eventsText: 'Události',
    moreEventsText: '{count} další',
    // Daterange component
    fromText: 'Začátek',
    toText: 'Konec',
    // Measurement components
    wholeText: 'Celý',
    fractionText: 'Část',
    unitText: 'Jednotka',
    // Time / Timespan component
    labels: ['Roky', 'Měsíce', 'Dny', 'Hodiny', 'Minuty', 'Sekundy', ''],
    labelsShort: ['Rok', 'Měs', 'Dny', 'Hod', 'Min', 'Sec', ''],
    // Timer component
    startText: 'Start',
    stopText: 'Stop',
    resetText: 'Resetovat',
    lapText: 'Etapa',
    hideText: 'Schovat',
    // Listview
    backText: 'Zpět',
    undoText: 'Zpět',
    // Form
    offText: 'O',
    onText: 'I',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Dansk
  mobiscroll.i18n.da = {
    // Core
    setText: 'Sæt',
    cancelText: 'Annuller',
    clearText: 'Ryd',
    selectedText: '{count} valgt',
    selectedPluralText: '{count} valgt',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Søndag', 'Mandag', 'Tirsdag', 'Onsdag', 'Torsdag', 'Fredag', 'Lørdag'],
    dayNamesShort: ['Søn', 'Man', 'Tir', 'Ons', 'Tor', 'Fre', 'Lør'],
    dayNamesMin: ['S', 'M', 'T', 'O', 'T', 'F', 'L'],
    dayText: 'Dag',
    hourText: 'Timer',
    minuteText: 'Minutter',
    monthNames: ['Januar', 'Februar', 'Marts', 'April', 'Maj', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'December'],
    monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'],
    monthText: 'Måned',
    secText: 'Sekunder',
    amText: 'am',
    pmText: 'pm',
    timeFormat: 'HH.ii',
    yearText: 'År',
    nowText: 'Nu',
    todayText: 'I dag',
    // Calendar component
    firstDay: 1,
    dateText: 'Dato',
    timeText: 'Tid',
    closeText: 'Luk',
    allDayText: 'Hele dagen',
    noEventsText: 'Ingen begivenheder',
    eventText: 'Begivenheder',
    eventsText: 'Begivenheder',
    moreEventsText: '{count} mere',
    // Daterange component
    fromText: 'Start',
    toText: 'Slut',
    // Measurement components
    wholeText: 'Hele',
    fractionText: 'Dele',
    unitText: 'Enhed',
    // Time / Timespan component
    labels: ['År', 'Måneder', 'Dage', 'Timer', 'Minutter', 'Sekunder', ''],
    labelsShort: ['År', 'Mdr', 'Dg', 'Timer', 'Min', 'Sek', ''],
    // Timer component
    startText: 'Start',
    stopText: 'Stop',
    resetText: 'Nulstil',
    lapText: 'Omgang',
    hideText: 'Skjul',
    // Forms
    offText: 'Fra',
    onText: 'Til',
    // Listview
    backText: 'Tilbage',
    undoText: 'Fortryd'
  };

  // Deutsch
  mobiscroll.i18n.de = {
    // Core
    setText: 'OK',
    cancelText: 'Abbrechen',
    clearText: 'Löschen',
    selectedText: '{count} ausgewählt',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
    dayNamesShort: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
    dayNamesMin: ['S', 'M', 'D', 'M', 'D', 'F', 'S'],
    dayText: 'Tag',
    delimiter: '.',
    hourText: 'Stunde',
    minuteText: 'Minuten',
    monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
    monthNamesShort: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
    monthText: 'Monat',
    secText: 'Sekunden',
    timeFormat: 'HH:ii',
    yearText: 'Jahr',
    nowText: 'Jetzt',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Heute',
    // Calendar component
    firstDay: 1,
    dateText: 'Datum',
    timeText: 'Zeit',
    closeText: 'Schließen',
    allDayText: 'Ganztägig',
    noEventsText: 'Keine Ereignisse',
    eventText: 'Ereignis',
    eventsText: 'Ereignisse',
    moreEventsText: '{count} weiteres Element',
    moreEventsPluralText: '{count} weitere Elemente',
    // Daterange component
    fromText: 'Von',
    toText: 'Bis',
    // Measurement components
    wholeText: 'Ganze Zahl',
    fractionText: 'Bruchzahl',
    unitText: 'Maßeinheit',
    // Time / Timespan component
    labels: ['Jahre', 'Monate', 'Tage', 'Stunden', 'Minuten', 'Sekunden', ''],
    labelsShort: ['Jahr.', 'Mon.', 'Tag.', 'Std.', 'Min.', 'Sek.', ''],
    // Timer component
    startText: 'Starten',
    stopText: 'Stoppen',
    resetText: 'Zurücksetzen',
    lapText: 'Lap',
    hideText: 'Ausblenden',
    // Listview
    backText: 'Zurück',
    undoText: 'Rückgängig machen',
    // Form
    offText: 'Aus',
    onText: 'Ein',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Greek
  mobiscroll.i18n.el = {
    // Core
    setText: 'Ορισμος',
    cancelText: 'Ακυρωση',
    clearText: 'Διαγραφη',
    selectedText: '{count} επιλεγμένα',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Κυριακή', 'Δευτέρα', 'Τρίτη', 'Τετάρτη', 'Πέμπτη', 'Παρασκευή', 'Σάββατο'],
    dayNamesShort: ['Κυρ', 'Δευ', 'Τρι', 'Τετ', 'Πεμ', 'Παρ', 'Σαβ'],
    dayNamesMin: ['Κυ', 'Δε', 'Τρ', 'Τε', 'Πε', 'Πα', 'Σα'],
    dayText: 'ημέρα',
    delimiter: '/',
    hourText: 'ώρα',
    minuteText: 'λεπτό',
    monthNames: ['Ιανουάριος', 'Φεβρουάριος', 'Μάρτιος', 'Απρίλιος', 'Μάιος', 'Ιούνιος', 'Ιούλιος', 'Αύγουστος', 'Σεπτέμβριος', 'Οκτώβριος', 'Νοέμβριος', 'Δεκέμβριος'],
    monthNamesShort: ['Ιαν', 'Φεβ', 'Μαρ', 'Απρ', 'Μαι', 'Ιουν', 'Ιουλ', 'Αυγ', 'Σεπ', 'Οκτ', 'Νοε', 'Δεκ'],
    monthText: 'Μήνας',
    secText: 'δευτερόλεπτα',
    timeFormat: 'H:ii',
    yearText: 'έτος',
    nowText: 'τώρα',
    pmText: 'μμ',
    amText: 'πμ',
    // Calendar component
    firstDay: 1,
    dateText: 'Ημερομηνία',
    timeText: 'φορά',
    todayText: 'Σήμερα',
    prevMonthText: 'Προηγούμενο μήνα',
    nextMonthText: 'Επόμενο μήνα',
    prevYearText: 'Προηγούμενο έτος',
    nextYearText: 'Επόμενο έτος',
    closeText: 'Κλείσιμο',
    eventText: 'Γεγονότα',
    eventsText: 'Γεγονότα',
    allDayText: 'Ολοήμερο',
    noEventsText: 'Δεν υπάρχουν γεγονότα',
    moreEventsText: '{count} ακόμη',
    // Daterange component
    fromText: 'Αρχή',
    toText: 'Τέλος',
    // Measurement components
    wholeText: 'Ολόκληρος',
    fractionText: 'κλάσμα',
    unitText: 'Μονάδα',
    // Time / Timespan component
    labels: ['Χρόνια', 'Μήνες', 'Ημέρες', 'Ωρες', 'Λεπτά', 'δευτερόλεπτα', ''],
    labelsShort: ['Χρόνια', 'Μήνες', 'Ημέρες', 'Ωρες', 'Λεπτά', 'δευτ', ''],
    // Timer component
    startText: '΄Εναρξη',
    stopText: 'Διακοπή',
    resetText: 'Επαναφορά',
    lapText: 'Γύρος',
    hideText: 'κρύβω',
    // Listview
    backText: 'Πίσω',
    undoText: 'Αναιρεση',
    // Form
    offText: 'Ανενεργό',
    onText: 'Ενεργό',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // English (UK)
  mobiscroll.i18n['en-GB'] = mobiscroll.i18n['en-UK'] = {
    dateFormat: 'dd/mm/yy',
    timeFormat: 'HH:ii'
  };

  // Español
  mobiscroll.i18n.es = {
    // Core
    setText: 'Aceptar',
    cancelText: 'Cancelar',
    clearText: 'Borrar',
    selectedText: '{count} seleccionado',
    selectedPluralText: '{count} seleccionados',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
    dayNamesShort: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sá'],
    dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],
    dayText: 'Día',
    hourText: 'Horas',
    minuteText: 'Minutos',
    monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
    monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
    monthText: 'Mes',
    secText: 'Segundos',
    timeFormat: 'HH:ii',
    yearText: 'A&ntilde;o',
    nowText: 'Ahora',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Hoy',
    // Calendar component
    firstDay: 1,
    dateText: 'Fecha',
    timeText: 'Tiempo',
    closeText: 'Cerrar',
    allDayText: 'Todo el día',
    noEventsText: 'No hay eventos',
    eventText: 'Evento',
    eventsText: 'Eventos',
    moreEventsText: '{count} más',
    // Daterange component
    fromText: 'Iniciar',
    toText: 'Final',
    // Measurement components
    wholeText: 'Entero',
    fractionText: 'Fracción',
    unitText: 'Unidad',
    // Time / Timespan component
    labels: ['Años', 'Meses', 'Días', 'Horas', 'Minutos', 'Segundos', ''],
    labelsShort: ['Año', 'Mes', 'Día', 'Hora', 'Min', 'Seg', ''],
    // Timer component
    startText: 'Iniciar',
    stopText: 'Deténgase',
    resetText: 'Reinicializar',
    lapText: 'Lap',
    hideText: 'Esconder',
    // Listview
    backText: 'Atrás',
    undoText: 'Deshacer',
    // Form
    offText: 'No',
    onText: 'Sí',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // فارسی
  mobiscroll.i18n.fa = {
    // Core
    setText: 'تاييد',
    cancelText: 'انصراف',
    clearText: 'واضح ',
    selectedText: '{count} منتخب',
    // Datetime component
    calendarSystem: 'jalali',
    dateFormat: 'yy/mm/dd',
    dayNames: ['يکشنبه', 'دوشنبه', 'سه‌شنبه', 'چهارشنبه', 'پنج‌شنبه', 'جمعه', 'شنبه'],
    dayNamesShort: ['ی', 'د', 'س', 'چ', 'پ', 'ج', 'ش'],
    dayNamesMin: ['ی', 'د', 'س', 'چ', 'پ', 'ج', 'ش'],
    dayText: 'روز',
    hourText: 'ساعت',
    minuteText: 'دقيقه',
    monthNames: ['فروردين', 'ارديبهشت', 'خرداد', 'تير', 'مرداد', 'شهريور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'],
    monthNamesShort: ['فروردين', 'ارديبهشت', 'خرداد', 'تير', 'مرداد', 'شهريور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'],
    monthText: 'ماه',
    secText: 'ثانيه',
    timeFormat: 'HH:ii',
    timeWheels: 'iiHH',
    // Need this for correct RTL display
    yearText: 'سال',
    nowText: 'اکنون',
    amText: 'ب',
    pmText: 'ص',
    todayText: 'امروز',
    //getNumber: function (n) {
    //    var i,
    //        nums = ["۰", "۱", "۲", "۳", "۴", "۵", "۶", "۷", "۸", "۹"],
    //        res = '';
    //    n = n + '';
    //    for (i = 0; i < n.length; i++) {
    //        res += nums[+n[i]];
    //    }
    //    return res;
    //},
    // Calendar component
    firstDay: 6,
    rtl: true,
    dateText: 'تاریخ ',
    timeText: 'زمان ',
    closeText: 'نزدیک',
    allDayText: 'تمام روز',
    noEventsText: 'هیچ رویداد',
    eventText: 'رویداد',
    eventsText: 'رویدادها',
    moreEventsText: '{count} مورد دیگر',
    // Daterange component
    fromText: 'شروع ',
    toText: 'پایان',
    // Measurement components
    wholeText: 'تمام',
    fractionText: 'کسر',
    unitText: 'واحد',
    // Time / Timespan component
    labels: ['سال', 'ماه', 'روز', 'ساعت', 'دقیقه', 'ثانیه', ''],
    labelsShort: ['سال', 'ماه', 'روز', 'ساعت', 'دقیقه', 'ثانیه', ''],
    // Timer component
    startText: 'شروع',
    stopText: 'پايان',
    resetText: 'تنظیم مجدد',
    lapText: 'Lap',
    hideText: 'پنهان کردن',
    // Listview
    backText: 'پشت',
    undoText: 'واچیدن'
  };

  // Suomi
  mobiscroll.i18n.fi = {
    // Core
    setText: 'Aseta',
    cancelText: 'Peruuta',
    clearText: 'Tyhjennä',
    selectedText: '{count} valita',
    // Datetime component
    dateFormat: 'd. MM yy',
    dayNames: ['Sunnuntai', 'Maanantai', 'Tiistai', 'Keskiviiko', 'Torstai', 'Perjantai', 'Lauantai'],
    dayNamesShort: ['Su', 'Ma', 'Ti', 'Ke', 'To', 'Pe', 'La'],
    dayNamesMin: ['S', 'M', 'T', 'K', 'T', 'P', 'L'],
    dayText: 'Päivä',
    delimiter: '.',
    hourText: 'Tuntia',
    minuteText: 'Minuutti',
    monthNames: ['Tammikuu', 'Helmikuu', 'Maaliskuu', 'Huhtikuu', 'Toukokuu', 'Kesäkuu', 'Heinäkuu', 'Elokuu', 'Syyskuu', 'Lokakuu', 'Marraskuu', 'Joulukuu'],
    monthNamesShort: ['Tam', 'Hel', 'Maa', 'Huh', 'Tou', 'Kes', 'Hei', 'Elo', 'Syy', 'Lok', 'Mar', 'Jou'],
    monthText: 'Kuukausi',
    secText: 'Sekunda',
    timeFormat: 'H:ii',
    yearText: 'Vuosi',
    nowText: 'Nyt',
    pmText: 'pm',
    amText: 'am',
    // Calendar component
    firstDay: 1,
    dateText: 'Päiväys',
    timeText: 'Aika',
    todayText: 'Tänään',
    prevMonthText: 'Edellinen kuukausi',
    nextMonthText: 'Ensi kuussa',
    prevYearText: 'Edellinen vuosi',
    nextYearText: 'Ensi vuosi',
    closeText: 'Sulje',
    eventText: 'Tapahtumia',
    eventsText: 'Tapahtumia',
    allDayText: 'Koko päivä',
    noEventsText: 'Ei tapahtumia',
    moreEventsText: '{count} muu',
    moreEventsPluralText: '{count} muuta',
    // Daterange component
    fromText: 'Alkaa',
    toText: 'Päättyy',
    // Measurement components
    wholeText: 'Kokonainen',
    fractionText: 'Murtoluku',
    unitText: 'Yksikkö',
    // Time / Timespan component
    labels: ['Vuosi', 'Kuukausi', 'Päivä', 'Tunnin', 'Minuutti', 'sekuntia', ''],
    labelsShort: ['Vuo', 'Kuu', 'Päi', 'Tun', 'Min', 'Sek', ''],
    // Timer component
    startText: 'Käynnistys',
    stopText: 'Seis',
    resetText: 'Aseta uudelleen',
    lapText: 'Kierros',
    hideText: 'Vuota',
    // Listview
    backText: 'Edellinen',
    undoText: 'Kumoa',
    // Form
    offText: 'Pois',
    onText: 'Päällä',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Français
  mobiscroll.i18n.fr = {
    // Core
    setText: 'Terminer',
    cancelText: 'Annuler',
    clearText: 'Effacer',
    selectedText: '{count} sélectionné',
    selectedPluralText: '{count} sélectionnés',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
    dayNamesShort: ['Dim.', 'Lun.', 'Mar.', 'Mer.', 'Jeu.', 'Ven.', 'Sam.'],
    dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],
    dayText: 'Jour',
    monthText: 'Mois',
    monthNames: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
    monthNamesShort: ['Janv.', 'Févr.', 'Mars', 'Avril', 'Mai', 'Juin', 'Juil.', 'Août', 'Sept.', 'Oct.', 'Nov.', 'Déc.'],
    hourText: 'Heures',
    minuteText: 'Minutes',
    secText: 'Secondes',
    timeFormat: 'HH:ii',
    yearText: 'Année',
    nowText: 'Maintenant',
    pmText: 'pm',
    amText: 'am',
    todayText: "Aujourd'hui",
    // Calendar component
    firstDay: 1,
    dateText: 'Date',
    timeText: 'Heure',
    closeText: 'Fermer',
    allDayText: 'Toute la journée',
    noEventsText: 'Aucun événement',
    eventText: 'Événement',
    eventsText: 'Événements',
    moreEventsText: '{count} autre',
    moreEventsPluralText: '{count} autres',
    // Daterange component
    fromText: 'Démarrer',
    toText: 'Fin',
    // Measurement components
    wholeText: 'Entier',
    fractionText: 'Fraction',
    unitText: 'Unité',
    // Time / Timespan component
    labels: ['Ans', 'Mois', 'Jours', 'Heures', 'Minutes', 'Secondes', ''],
    labelsShort: ['Ans', 'Mois', 'Jours', 'Hrs', 'Min', 'Sec', ''],
    // Timer component
    startText: 'Démarrer',
    stopText: 'Arrêter',
    resetText: 'Réinitialiser',
    lapText: 'Lap',
    hideText: 'Cachez',
    // Listview
    backText: 'Retour',
    undoText: 'Annuler',
    // Form
    offText: 'Non',
    onText: 'Oui',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Hebrew
  mobiscroll.i18n.he = {
    // Core
    rtl: true,
    // Right to left mode
    setText: 'שמירה',
    cancelText: 'ביטול',
    clearText: 'נקה',
    selectedText: '{count} נבחר',
    selectedPluralText: '{count} נבחרו',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['ראשון', 'שני', 'שלישי', 'רביעי', 'חמישי', 'שישי', 'שבת'],
    dayNamesShort: ["א'", "ב'", "ג'", "ד'", "ה'", "ו'", "ש'"],
    dayNamesMin: ['א', 'ב', 'ג', 'ד', 'ה', 'ו', 'ש'],
    dayText: 'יום',
    hourText: 'שעות',
    minuteText: 'דקות',
    monthNames: ['ינואר', 'פברואר', 'מרץ', 'אפריל', 'מאי', 'יוני', 'יולי', 'אוגוסט', 'ספטמבר', 'אוקטובר', 'נובמבר', 'דצמבר'],
    monthNamesShort: ["ינו", "פבר", "מרץ", "אפר", "מאי", "יונ", "יול", "אוג", "ספט", "אוק", "נוב", "דצמ"],
    monthText: 'חודש',
    secText: 'שניות',
    amText: 'am',
    pmText: 'pm',
    timeFormat: 'HH:ii',
    timeWheels: 'iiHH',
    // Need this for correct RTL display
    yearText: 'שנה',
    nowText: 'עכשיו',
    // Calendar component
    firstDay: 0,
    dateText: 'תאריך',
    timeText: 'זמן',
    closeText: 'סגירה',
    todayText: 'היום',
    allDayText: 'כל היום',
    noEventsText: 'אין אירועים',
    // Event calendar
    eventText: 'מִקרֶה',
    eventsText: 'מִקרֶה',
    moreEventsText: 'אירוע אחד נוסף',
    moreEventsPluralText: '{count} אירועים נוספים',
    // Daterange component
    fromText: 'התחלה',
    toText: 'סיום',
    // Measurement components
    wholeText: 'כֹּל',
    fractionText: 'שבריר',
    unitText: 'יחידה',
    // Time / Timespan component
    labels: ['שנים', 'חודשים', 'ימים', 'שעות', 'דקות', 'שניים', ''],
    labelsShort: ['שנים', 'חודשים', 'ימים', 'שעות', 'דקות', 'שניים', ''],
    // Timer component
    startText: 'התחל',
    stopText: 'עצור',
    resetText: 'אתחול',
    lapText: 'הקפה',
    hideText: 'הסתר',
    // Forms
    offText: 'כיבוי',
    onText: 'הפעלה',
    // Listview
    backText: 'חזור',
    undoText: 'ביטול פעולה'
  };

  // Hindi
  mobiscroll.i18n.hi = {
    // Core
    setText: 'सैट करें',
    cancelText: 'रद्द करें',
    clearText: 'साफ़ को',
    selectedText: '{count} चयनित',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['रविवार', 'सोमवार', 'मंगलवार', 'बुधवार', 'गुरुवार', 'शुक्रवार', 'शनिवार'],
    dayNamesShort: ['रवि', 'सोम', 'मंगल', 'बुध', 'गुरु', 'शुक्र', 'शनि'],
    dayNamesMin: ['रवि', 'सोम', 'मंगल', 'बुध', 'गुरु', 'शुक्र', 'शनि'],
    dayText: 'दिन',
    delimiter: '.',
    hourText: 'घंटा',
    minuteText: 'मिनट',
    monthNames: ['जनवरी ', 'फरवरी', 'मार्च', 'अप्रेल', 'मई', 'जून', 'जूलाई', 'अगस्त ', 'सितम्बर', 'अक्टूबर', 'नवम्बर', 'दिसम्बर'],
    monthNamesShort: ['जन', 'फर', 'मार्च', 'अप्रेल', 'मई', 'जून', 'जूलाई', 'अग', 'सित', 'अक्ट', 'नव', 'दि'],
    monthText: 'महीना',
    secText: 'सेकंड',
    timeFormat: 'H:ii',
    yearText: 'साल',
    nowText: 'अब',
    pmText: 'अपराह्न',
    amText: 'पूर्वाह्न',
    // Calendar component
    firstDay: 1,
    dateText: 'तिथि',
    timeText: 'समय',
    todayText: 'आज',
    prevMonthText: 'पिछ्ला महिना',
    nextMonthText: 'अगले महीने',
    prevYearText: 'पिछला साल',
    nextYearText: 'अगले वर्ष',
    closeText: 'बंद',
    eventText: 'इवेट३',
    eventsText: 'इवेट३',
    allDayText: 'पूरे दिन',
    noEventsText: 'Ei tapahtumia',
    moreEventsText: '{count} और',
    // Daterange component
    fromText: 'से',
    toText: 'तक',
    // Measurement components
    wholeText: 'समूचा',
    fractionText: 'अंश',
    unitText: 'इकाई',
    // Time / Timespan component
    labels: ['साल', 'महीने', 'दिन', 'घंटे', 'मिनट', 'सेकंड', ''],
    labelsShort: ['साल', 'महीने', 'दिन', 'घंटे', 'मिनट', 'सेकंड', ''],
    // Timer component
    startText: 'प्रारंभ',
    stopText: 'रोकें',
    resetText: 'रीसेट करें',
    lapText: 'लैप',
    hideText: 'छिपाना',
    // Listview
    backText: 'वापस',
    // check
    undoText: 'वापस लाएं',
    // Form
    offText: 'बंद',
    onText: 'चालू',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Croatian
  mobiscroll.i18n.hr = {
    // Core
    setText: 'Postavi',
    cancelText: 'Izlaz',
    clearText: 'Izbriši',
    selectedText: '{count} odabran',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Nedjelja', 'Ponedjeljak', 'Utorak', 'Srijeda', 'Četvrtak', 'Petak', 'Subota'],
    dayNamesShort: ['Ned', 'Pon', 'Uto', 'Sri', 'Čet', 'Pet', 'Sub'],
    dayNamesMin: ['Ne', 'Po', 'Ut', 'Sr', 'Če', 'Pe', 'Su'],
    dayText: 'Dan',
    delimiter: '.',
    hourText: 'Sat',
    minuteText: 'Minuta',
    monthNames: ['Siječanj', 'Veljača', 'Ožujak', 'Travanj', 'Svibanj', 'Lipanj', 'Srpanj', 'Kolovoz', 'Rujan', 'Listopad', 'Studeni', 'Prosinac'],
    monthNamesShort: ['Sij', 'Velj', 'Ožu', 'Tra', 'Svi', 'Lip', 'Srp', 'Kol', 'Ruj', 'Lis', 'Stu', 'Pro'],
    monthText: 'Mjesec',
    secText: 'Sekunda',
    timeFormat: 'H:ii',
    yearText: 'Godina',
    nowText: 'Sada',
    pmText: 'pm',
    amText: 'am',
    // Calendar component
    firstDay: 1,
    dateText: 'Datum',
    timeText: 'Vrijeme',
    todayText: 'Danas',
    prevMonthText: 'Prethodni mjesec',
    nextMonthText: 'Sljedeći mjesec',
    prevYearText: 'Prethodni godina',
    nextYearText: 'Slijedeće godine',
    closeText: 'Zatvori',
    eventText: 'Događaj',
    eventsText: 'događaja',
    allDayText: 'Cijeli dan',
    noEventsText: 'Bez događaja',
    moreEventsText: 'Još {count}',
    // Daterange component
    fromText: 'Počinje',
    toText: 'Završava',
    // Measurement components
    wholeText: 'Cjelina',
    fractionText: 'Frakcija',
    unitText: 'Jedinica',
    // Time / Timespan component
    labels: ['godina', 'mjesec', 'dan', 'sat', 'minuta', 'sekunda', ''],
    labelsShort: ['god', 'mje', 'dan', 'sat', 'min', 'sec', ''],
    // Timer component
    startText: 'Početak',
    stopText: 'Prekid',
    resetText: 'Resetiraj',
    lapText: 'Ciklus',
    hideText: 'Sakriti',
    // Listview
    backText: 'Natrag',
    undoText: 'Poništavanje',
    // Form
    offText: 'Uklj.',
    onText: 'Isklj.',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Magyar
  mobiscroll.i18n.hu = {
    // Core
    setText: 'OK',
    cancelText: 'Mégse',
    clearText: 'Törlés',
    selectedText: '{count} kiválasztva',
    // Datetime component
    dateFormat: 'yy.mm.dd.',
    dayNames: ['Vasárnap', 'Hétfő', 'Kedd', 'Szerda', 'Csütörtök', 'Péntek', 'Szombat'],
    dayNamesShort: ['Va', 'Hé', 'Ke', 'Sze', 'Csü', 'Pé', 'Szo'],
    dayNamesMin: ['V', 'H', 'K', 'Sz', 'Cs', 'P', 'Sz'],
    dayText: 'Nap',
    delimiter: '.',
    hourText: 'Óra',
    minuteText: 'Perc',
    monthNames: ['Január', 'Február', 'Március', 'Április', 'Május', 'Június', 'Július', 'Augusztus', 'Szeptember', 'Október', 'November', 'December'],
    monthNamesShort: ['Jan', 'Feb', 'Már', 'Ápr', 'Máj', 'Jún', 'Júl', 'Aug', 'Szep', 'Okt', 'Nov', 'Dec'],
    monthText: 'Hónap',
    secText: 'Másodperc',
    timeFormat: 'H:ii',
    yearText: 'Év',
    nowText: 'Most',
    pmText: 'pm',
    amText: 'am',
    // Calendar component
    firstDay: 1,
    dateText: 'Dátum',
    timeText: 'Idő',
    todayText: 'Ma',
    prevMonthText: 'Előző hónap',
    nextMonthText: 'Következő hónap',
    prevYearText: 'Előző év',
    nextYearText: 'Következő év',
    closeText: 'Bezár',
    eventText: 'esemény',
    eventsText: 'esemény',
    allDayText: 'Egész nap',
    noEventsText: 'Nincs esemény',
    moreEventsText: '{count} további',
    // Daterange component
    fromText: 'Eleje',
    toText: 'Vége',
    // Measurement components
    wholeText: 'Egész',
    fractionText: 'Tört',
    unitText: 'Egység',
    // Time / Timespan component
    labels: ['Év', 'Hónap', 'Nap', 'Óra', 'Perc', 'Másodperc', ''],
    labelsShort: ['Év', 'Hó.', 'Nap', 'Óra', 'Perc', 'Mp.', ''],
    // Timer component
    startText: 'Indít',
    stopText: 'Megállít',
    resetText: 'Visszaállít',
    lapText: 'Lap',
    hideText: 'Elrejt',
    // Listview
    backText: 'Vissza',
    undoText: 'Visszavon',
    // Form
    offText: 'Ki',
    onText: 'Be',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Italiano 
  mobiscroll.i18n.it = {
    // Core
    setText: 'OK',
    cancelText: 'Annulla',
    clearText: 'Chiarire',
    selectedText: '{count} selezionato',
    selectedPluralText: '{count} selezionati',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Domenica', 'Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'],
    dayNamesShort: ['Do', 'Lu', 'Ma', 'Me', 'Gi', 'Ve', 'Sa'],
    dayNamesMin: ['D', 'L', 'M', 'M', 'G', 'V', 'S'],
    dayText: 'Giorno',
    hourText: 'Ore',
    minuteText: 'Minuti',
    monthNames: ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'],
    monthNamesShort: ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic'],
    monthText: 'Mese',
    secText: 'Secondi',
    timeFormat: 'HH:ii',
    yearText: 'Anno',
    nowText: 'Ora',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Oggi',
    // Calendar component
    firstDay: 1,
    dateText: 'Data',
    timeText: 'Volta',
    closeText: 'Chiudere',
    allDayText: 'Tutto il giorno',
    noEventsText: 'Nessun evento',
    eventText: 'Evento',
    eventsText: 'Eventi',
    moreEventsText: '{count} altro',
    moreEventsPluralText: 'altri {count}',
    // Daterange component
    fromText: 'Inizio',
    toText: 'Fine',
    // Measurement components
    wholeText: 'Intero',
    fractionText: 'Frazione',
    unitText: 'Unità',
    // Time / Timespan component
    labels: ['Anni', 'Mesi', 'Giorni', 'Ore', 'Minuti', 'Secondi', ''],
    labelsShort: ['Anni', 'Mesi', 'Gio', 'Ore', 'Min', 'Sec', ''],
    // Timer component
    startText: 'Inizio',
    stopText: 'Arresto',
    resetText: 'Ripristina',
    lapText: 'Lap',
    hideText: 'Nascondi',
    // Listview
    backText: 'Indietro',
    undoText: 'Annulla',
    // Form
    offText: 'Via',
    onText: 'Su',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // 日本語 - Japanese
  mobiscroll.i18n.ja = {
    // Core
    setText: 'セット',
    cancelText: 'キャンセル',
    clearText: 'クリア',
    selectedText: '{count} 選択',
    // Datetime component
    dateFormat: 'yy年mm月dd日',
    dayNames: ['日', '月', '火', '水', '木', '金', '土'],
    dayNamesShort: ['日', '月', '火', '水', '木', '金', '土'],
    dayNamesMin: ['日', '月', '火', '水', '木', '金', '土'],
    dayText: '日',
    hourText: '時',
    minuteText: '分',
    monthNames: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
    monthNamesShort: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
    monthText: '月',
    secText: '秒',
    timeFormat: 'HH:ii',
    yearText: '年',
    nowText: '今',
    pmText: '午後',
    amText: '午前',
    yearSuffix: '年',
    monthSuffix: '月',
    daySuffix: '日',
    todayText: '今日',
    // Calendar component
    dateText: '日付',
    timeText: '時間',
    closeText: 'クローズ',
    allDayText: '終日',
    noEventsText: 'イベントはありません',
    eventText: 'イベント',
    eventsText: 'イベント',
    moreEventsText: '他 {count} 件',
    // Daterange component
    fromText: '開始',
    toText: '終わり',
    // Measurement components
    wholeText: '全数',
    fractionText: '分数',
    unitText: '単位',
    // Time / Timespan component
    labels: ['年間', '月間', '日間', '時間', '分', '秒', ''],
    labelsShort: ['年間', '月間', '日間', '時間', '分', '秒', ''],
    // Timer component
    startText: '開始',
    stopText: '停止',
    resetText: 'リセット',
    lapText: 'ラップ',
    hideText: '隠す',
    // Listview
    backText: 'バック',
    undoText: 'アンドゥ'
  };

  // Korean
  mobiscroll.i18n.ko = {
    // Core
    setText: '설정',
    cancelText: '취소',
    clearText: '삭제',
    selectedText: '{count} 선택된',
    // Datetime component
    dateFormat: 'yy년mm월dd일',
    dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'],
    dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
    dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
    dayText: '일',
    delimiter: '-',
    hourText: '시간',
    minuteText: '분',
    monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
    monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
    monthText: '달',
    secText: '초',
    timeFormat: 'H:ii',
    yearText: '년',
    nowText: '지금',
    pmText: '오후',
    amText: '오전',
    yearSuffix: '년',
    monthSuffix: '월',
    daySuffix: '일',
    // Calendar component
    firstDay: 0,
    dateText: '날짜',
    timeText: '시간',
    todayText: '오늘',
    prevMonthText: '이전 달',
    nextMonthText: '다음 달',
    prevYearText: '이전 년',
    nextYearText: '다음 년',
    closeText: '닫기',
    eventText: '이벤트',
    eventsText: '이벤트',
    allDayText: '종일',
    noEventsText: '이벤트 없음',
    moreEventsText: '{count}개 더보기',
    // Daterange component
    fromText: '시작',
    toText: '종료',
    // Measurement components
    wholeText: '정수',
    fractionText: '분수',
    unitText: '단위',
    // Time / Timespan component
    labels: ['년', '달', '일', '시간', '분', '초', ''],
    labelsShort: ['년', '달', '일', '시간', '분', '초', ''],
    // Timer component
    startText: '시작',
    stopText: '중지 ',
    resetText: '초기화',
    lapText: '기록',
    hideText: '숨는 장소',
    // Listview
    backText: '뒤로',
    undoText: '실행취소',
    // Form
    offText: '끔',
    onText: '켬',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Lietuvių
  mobiscroll.i18n.lt = {
    // Core
    setText: 'OK',
    cancelText: 'Atšaukti',
    clearText: 'Išvalyti',
    selectedText: 'Pasirinktas {count}',
    selectedPluralText: 'Pasirinkti {count}',
    // Datetime component
    dateFormat: 'yy-mm-dd',
    dayNames: ['Sekmadienis', 'Pirmadienis', 'Antradienis', 'Trečiadienis', 'Ketvirtadienis', 'Penktadienis', 'Šeštadienis'],
    dayNamesShort: ['S', 'Pr', 'A', 'T', 'K', 'Pn', 'Š'],
    dayNamesMin: ['S', 'Pr', 'A', 'T', 'K', 'Pn', 'Š'],
    dayText: 'Diena',
    hourText: 'Valanda',
    minuteText: 'Minutes',
    monthNames: ['Sausis', 'Vasaris', 'Kovas', 'Balandis', 'Gegužė', 'Birželis', 'Liepa', 'Rugpjūtis', 'Rugsėjis', 'Spalis', 'Lapkritis', 'Gruodis'],
    monthNamesShort: ['Sau', 'Vas', 'Kov', 'Bal', 'Geg', 'Bir', 'Lie', 'Rugp', 'Rugs', 'Spa', 'Lap', 'Gruo'],
    monthText: 'Mėnuo',
    secText: 'Sekundes',
    amText: 'am',
    pmText: 'pm',
    timeFormat: 'HH:ii',
    yearText: 'Metai',
    nowText: 'Dabar',
    todayText: 'Šiandien',
    // Calendar component
    firstDay: 1,
    dateText: 'Data',
    timeText: 'Laikas',
    closeText: 'Uždaryti',
    allDayText: 'Visą dieną',
    noEventsText: 'Nėra įvykių',
    eventText: 'Įvykių',
    eventsText: 'Įvykiai',
    moreEventsText: 'Dar {count}',
    // Daterange component
    fromText: 'Nuo',
    toText: 'Iki',
    // Measurement components
    wholeText: 'Visas',
    fractionText: 'Frakcija',
    unitText: 'Vienetas',
    // Time / Timespan component
    labels: ['Metai', 'Mėnesiai', 'Dienos', 'Valandos', 'Minutes', 'Sekundes', ''],
    labelsShort: ['m', 'mėn.', 'd', 'h', 'min', 's', ''],
    // Timer component
    startText: 'Pradėti',
    stopText: 'Sustabdyti',
    resetText: 'Išnaujo',
    lapText: 'Ratas',
    hideText: 'Slėpti',
    // Listview
    backText: 'Atgal',
    undoText: 'Anuliuoti',
    // Form
    offText: 'Išj.',
    onText: 'Įj.',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Nederlands
  mobiscroll.i18n.nl = {
    // Core
    setText: 'Instellen',
    cancelText: 'Annuleren',
    clearText: 'Leegmaken',
    selectedText: '{count} gekozen',
    // Datetime component
    dateFormat: 'dd-mm-yy',
    dayNames: ['Zondag', 'Maandag', 'Dinsdag', 'Woensdag', 'Donderdag', 'Vrijdag', 'Zaterdag'],
    dayNamesShort: ['zo', 'ma', 'di', 'wo', 'do', 'vr', 'za'],
    dayNamesMin: ['z', 'm', 'd', 'w', 'd', 'v', 'z'],
    dayText: 'Dag',
    hourText: 'Uur',
    minuteText: 'Minuten',
    monthNames: ['januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december'],
    monthNamesShort: ['jan', 'feb', 'mrt', 'apr', 'mei', 'jun', 'jul', 'aug', 'sep', 'okt', 'nov', 'dec'],
    monthText: 'Maand',
    secText: 'Seconden',
    timeFormat: 'HH:ii',
    yearText: 'Jaar',
    nowText: 'Nu',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Vandaag',
    // Calendar component
    firstDay: 1,
    dateText: 'Datum',
    timeText: 'Tijd',
    closeText: 'Sluiten',
    allDayText: 'Hele dag',
    noEventsText: 'Geen activiteiten',
    eventText: 'Activiteit',
    eventsText: 'Activiteiten',
    moreEventsText: 'nog {count}',
    // Daterange component
    fromText: 'Start',
    toText: 'Einde',
    // Measurement components
    wholeText: 'geheel',
    fractionText: 'fractie',
    unitText: 'eenheid',
    // Time / Timespan component
    labels: ['Jaren', 'Maanden', 'Dagen', 'Uren', 'Minuten', 'Seconden', ''],
    labelsShort: ['j', 'm', 'd', 'u', 'min', 'sec', ''],
    // Timer component
    startText: 'Start',
    stopText: 'Stop',
    resetText: 'Reset',
    lapText: 'Ronde',
    hideText: 'Verbergen',
    // Listview
    backText: 'Terug',
    undoText: 'Onged. maken',
    // Form
    offText: 'Uit',
    onText: 'Aan',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Norsk
  mobiscroll.i18n.no = {
    // Core
    setText: 'OK',
    cancelText: 'Avbryt',
    clearText: 'Tømme',
    selectedText: '{count} valgt',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Søndag', 'Mandag', 'Tirsdag', 'Onsdag', 'Torsdag', 'Fredag', 'Lørdag'],
    dayNamesShort: ['Sø', 'Ma', 'Ti', 'On', 'To', 'Fr', 'Lø'],
    dayNamesMin: ['S', 'M', 'T', 'O', 'T', 'F', 'L'],
    dayText: 'Dag',
    delimiter: '.',
    hourText: 'Time',
    minuteText: 'Minutt',
    monthNames: ['Januar', 'Februar', 'Mars', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Desember'],
    monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Des'],
    monthText: 'Måned',
    secText: 'Sekund',
    timeFormat: 'HH:ii',
    yearText: 'År',
    nowText: 'Nå',
    pmText: 'pm',
    amText: 'am',
    todayText: 'I dag',
    // Calendar component
    firstDay: 1,
    dateText: 'Dato',
    timeText: 'Tid',
    closeText: 'Lukk',
    allDayText: 'Hele dagen',
    noEventsText: 'Ingen hendelser',
    eventText: 'Hendelse',
    eventsText: 'Hendelser',
    moreEventsText: '{count} mere',
    // Daterange component
    fromText: 'Start',
    toText: 'End',
    // Measurement components
    wholeText: 'Hele',
    fractionText: 'Fraksjon',
    unitText: 'Enhet',
    // Time / Timespan component
    labels: ['År', 'Måneder', 'Dager', 'Timer', 'Minutter', 'Sekunder', ''],
    labelsShort: ['År', 'Mån', 'Dag', 'Time', 'Min', 'Sek', ''],
    // Timer component
    startText: 'Start',
    stopText: 'Stopp',
    resetText: 'Tilbakestille',
    lapText: 'Runde',
    hideText: 'Skjul',
    // Listview
    backText: 'Tilbake',
    undoText: 'Angre',
    // Form
    offText: 'Av',
    onText: 'På',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Polski
  mobiscroll.i18n.pl = {
    // Core
    setText: 'Zestaw',
    cancelText: 'Anuluj',
    clearText: 'Oczyścić',
    selectedText: 'Wybór: {count}',
    // Datetime component
    dateFormat: 'yy-mm-dd',
    dayNames: ['Niedziela', 'Poniedziałek', 'Wtorek', 'Środa', 'Czwartek', 'Piątek', 'Sobota'],
    dayNamesShort: ['Niedz.', 'Pon.', 'Wt.', 'Śr.', 'Czw.', 'Pt.', 'Sob.'],
    dayNamesMin: ['N', 'P', 'W', 'Ś', 'C', 'P', 'S'],
    dayText: 'Dzień',
    hourText: 'Godziny',
    minuteText: 'Minuty',
    monthNames: ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'],
    monthNamesShort: ['Sty', 'Lut', 'Mar', 'Kwi', 'Maj', 'Cze', 'Lip', 'Sie', 'Wrz', 'Paź', 'Lis', 'Gru'],
    monthText: 'Miesiąc',
    secText: 'Sekundy',
    timeFormat: 'HH:ii',
    yearText: 'Rok',
    nowText: 'Teraz',
    amText: 'am',
    pmText: 'pm',
    todayText: 'Dzisiaj',
    // Calendar component
    firstDay: 1,
    dateText: 'Data',
    timeText: 'Czas',
    closeText: 'Zakończenie',
    allDayText: 'Cały dzień',
    noEventsText: 'Brak wydarzeń',
    eventText: 'Wydarzeń',
    eventsText: 'Wydarzenia',
    moreEventsText: 'Jeszcze {count}',
    // Daterange component
    fromText: 'Rozpoczęcie',
    toText: 'Koniec',
    // Measurement components
    wholeText: 'Cały',
    fractionText: 'Ułamek',
    unitText: 'Jednostka',
    // Time / Timespan component
    labels: ['Lata', 'Miesiąc', 'Dni', 'Godziny', 'Minuty', 'Sekundy', ''],
    labelsShort: ['R', 'M', 'Dz', 'Godz', 'Min', 'Sek', ''],
    // Timer component
    startText: 'Rozpoczęcie',
    stopText: 'Zatrzymać',
    resetText: 'Zresetować',
    lapText: 'Zakładka',
    hideText: 'Ukryć',
    // Listview
    backText: 'Wróć',
    undoText: 'Cofnij',
    // Form
    offText: 'Wył',
    onText: 'Wł',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Português Brasileiro
  mobiscroll.i18n['pt-BR'] = {
    // Core
    setText: 'Selecionar',
    cancelText: 'Cancelar',
    clearText: 'Claro',
    selectedText: '{count} selecionado',
    selectedPluralText: '{count} selecionados',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'],
    dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
    dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'],
    dayText: 'Dia',
    hourText: 'Hora',
    minuteText: 'Minutos',
    monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
    monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
    monthText: 'Mês',
    secText: 'Segundo',
    timeFormat: 'HH:ii',
    yearText: 'Ano',
    nowText: 'Agora',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Hoje',
    // Calendar component
    dateText: 'Data',
    timeText: 'Tempo',
    closeText: 'Fechar',
    allDayText: 'Dia inteiro',
    noEventsText: 'Nenhum evento',
    eventText: 'Evento',
    eventsText: 'Eventos',
    moreEventsText: 'Mais {count}',
    // Daterange component
    fromText: 'In&iacute;cio',
    toText: 'Fim',
    // Measurement components
    wholeText: 'Inteiro',
    fractionText: 'Fração',
    unitText: 'Unidade',
    // Time / Timespan component
    labels: ['Anos', 'Meses', 'Dias', 'Horas', 'Minutos', 'Segundos', ''],
    labelsShort: ['Ano', 'M&ecirc;s', 'Dia', 'Hora', 'Min', 'Seg', ''],
    // Timer component
    startText: 'Começar',
    stopText: 'Pare',
    resetText: 'Reinicializar',
    lapText: 'Lap',
    hideText: 'Esconder',
    // Listview
    backText: 'Anterior',
    undoText: 'Desfazer',
    // Form
    offText: 'Desl',
    onText: 'Lig',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Português Europeu
  mobiscroll.i18n['pt-PT'] = {
    // Core
    setText: 'Seleccionar',
    cancelText: 'Cancelar',
    clearText: 'Claro',
    selectedText: '{count} selecionado',
    selectedPluralText: '{count} selecionados',
    // Datetime component
    dateFormat: 'dd-mm-yy',
    dayNames: ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'],
    dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
    dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'],
    dayText: 'Dia',
    hourText: 'Horas',
    minuteText: 'Minutos',
    monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
    monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
    monthText: 'Mês',
    secText: 'Segundo',
    timeFormat: 'HH:ii',
    yearText: 'Ano',
    nowText: 'Actualizar',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Hoy',
    // Calendar component
    firstDay: 1,
    dateText: 'Data',
    timeText: 'Tempo',
    closeText: 'Fechar',
    allDayText: 'Todo o dia',
    noEventsText: 'Nenhum evento',
    eventText: 'Evento',
    eventsText: 'Eventos',
    moreEventsText: 'mais {count}',
    // Daterange component
    fromText: 'Início',
    toText: 'Fim',
    // Measurement components
    wholeText: 'Inteiro',
    fractionText: 'Fracção',
    unitText: 'Unidade',
    // Time / Timespan component
    labels: ['Anos', 'Meses', 'Dias', 'Horas', 'Minutos', 'Segundos', ''],
    labelsShort: ['Ano', 'Mês', 'Dia', 'Hora', 'Min', 'Seg', ''],
    // Timer component
    startText: 'Começar',
    stopText: 'Parar',
    resetText: 'Reinicializar',
    lapText: 'Lap',
    hideText: 'Esconder',
    // Listview
    backText: 'Anterior',
    undoText: 'Anular',
    // Form
    offText: 'Desl',
    onText: 'Lig',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Română
  mobiscroll.i18n.ro = {
    // Core
    setText: 'Setare',
    cancelText: 'Anulare',
    clearText: 'Ştergere',
    selectedText: '{count} selectat',
    selectedPluralText: '{count} selectate',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Duminică', 'Luni', 'Marți', 'Miercuri', 'Joi', 'Vineri', 'Sâmbătă'],
    dayNamesShort: ['Du', 'Lu', 'Ma', 'Mi', 'Jo', 'Vi', 'Sâ'],
    dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],
    dayText: ' Ziua',
    delimiter: '.',
    hourText: ' Ore ',
    minuteText: 'Minute',
    monthNames: ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'],
    monthNamesShort: ['Ian.', 'Feb.', 'Mar.', 'Apr.', 'Mai', 'Iun.', 'Iul.', 'Aug.', 'Sept.', 'Oct.', 'Nov.', 'Dec.'],
    monthText: 'Luna',
    secText: 'Secunde',
    timeFormat: 'HH:ii',
    yearText: 'Anul',
    nowText: 'Acum',
    amText: 'am',
    pmText: 'pm',
    todayText: 'Astăzi',
    prevMonthText: 'Luna anterioară',
    nextMonthText: 'Luna următoare',
    prevYearText: 'Anul anterior',
    nextYearText: 'Anul următor',
    eventText: 'Eveniment',
    eventsText: 'Evenimente',
    allDayText: 'Toată ziua',
    noEventsText: 'Niciun eveniment',
    moreEventsText: 'Încă unul',
    moreEventsPluralText: 'Încă {count}',
    // Calendar component
    firstDay: 1,
    dateText: 'Data',
    timeText: 'Ora',
    closeText: 'Închidere',
    // Daterange component
    fromText: 'Start',
    toText: 'Final',
    // Measurement components
    wholeText: 'Complet',
    fractionText: 'Parţial',
    unitText: 'Unitate',
    // Time / Timespan component
    labels: ['Ani', 'Luni', 'Zile', 'Ore', 'Minute', 'Secunde', ''],
    labelsShort: ['Ani', 'Luni', 'Zile', 'Ore', 'Min.', 'Sec.', ''],
    // Timer component
    startText: 'Start',
    stopText: 'Stop',
    resetText: 'Resetare',
    lapText: 'Tură',
    hideText: 'Ascundere',
    // Listview
    backText: 'Înapoi',
    undoText: 'Anulează',
    // Form
    offText: 'Nu',
    onText: 'Da',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Русский (UA)
  mobiscroll.i18n['ru-UA'] = {
    // Core
    setText: 'Установить',
    cancelText: 'Отменить',
    clearText: 'Очиститьr',
    selectedText: '{count} Вібрать',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['воскресенье', 'понедельник', 'вторник', 'среда', 'четверг', 'пятница', 'суббота'],
    dayNamesShort: ['вс', 'пн', 'вт', 'ср', 'чт', 'пт', 'сб'],
    dayNamesMin: ['в', 'п', 'в', 'с', 'ч', 'п', 'с'],
    dayText: 'День',
    delimiter: '.',
    hourText: 'Часы',
    minuteText: 'Минуты',
    monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],
    monthNamesShort: ['Янв.', 'Февр.', 'Март', 'Апр.', 'Май', 'Июнь', 'Июль', 'Авг.', 'Сент.', 'Окт.', 'Нояб.', 'Дек.'],
    monthText: 'Месяцы',
    secText: 'Сикунды',
    timeFormat: 'HH:ii',
    yearText: 'Год',
    nowText: 'Сейчас',
    amText: 'am',
    pmText: 'pm',
    todayText: 'Cегодня',
    // Calendar component
    firstDay: 1,
    dateText: 'Дата',
    timeText: 'Время',
    closeText: 'Закрыть',
    allDayText: 'Весь день',
    noEventsText: 'Нет событий',
    eventText: 'Мероприятия',
    eventsText: 'Мероприятия',
    moreEventsText: 'Ещё {count}',
    // Daterange component
    fromText: 'Начало',
    toText: 'Конец',
    // Measurement components
    wholeText: 'Весь',
    fractionText: 'Часть',
    unitText: 'Единица',
    // Time / Timespan component
    labels: ['Годы', ' Месяцы ', ' Дни ', ' Часы ', ' Минуты ', ' Секунды', ''],
    labelsShort: ['Год', 'Мес.', 'Дн.', 'Ч.', 'Мин.', 'Сек.', ''],
    // Timer component
    startText: 'Старт',
    stopText: 'Стоп',
    resetText: ' Сброс ',
    lapText: ' Этап ',
    hideText: ' Скрыть ',
    // Listview
    backText: 'назад',
    undoText: 'ОтменитЬ',
    // Form
    offText: 'O',
    onText: 'I',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Русский
  mobiscroll.i18n['ru-RU'] = mobiscroll.i18n.ru = {
    // Core
    setText: 'Установить',
    cancelText: 'Отмена',
    clearText: 'Очистить',
    selectedText: '{count} Выбрать',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['воскресенье', 'понедельник', 'вторник', 'среда', 'четверг', 'пятница', 'суббота'],
    dayNamesShort: ['вс', 'пн', 'вт', 'ср', 'чт', 'пт', 'сб'],
    dayNamesMin: ['в', 'п', 'в', 'с', 'ч', 'п', 'с'],
    dayText: 'День',
    delimiter: '.',
    hourText: 'Час',
    minuteText: 'Минут',
    monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],
    monthNamesShort: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],
    monthText: 'Месяц',
    secText: 'Секунд',
    timeFormat: 'HH:ii',
    yearText: 'Год',
    nowText: 'Сейчас',
    amText: 'am',
    pmText: 'pm',
    todayText: 'Cегодня',
    // Calendar component
    firstDay: 1,
    dateText: 'Дата',
    timeText: 'Время',
    closeText: 'Закрыть',
    allDayText: 'Весь день',
    noEventsText: 'Нет событий',
    eventText: 'Мероприятия',
    eventsText: 'Мероприятия',
    moreEventsText: 'Ещё {count}',
    // Daterange component
    fromText: 'Начало',
    toText: 'Конец',
    // Measurement components
    wholeText: 'Целое',
    fractionText: 'Дробное',
    unitText: 'Единица',
    // Time / Timespan component
    labels: ['Лет', 'Месяцев', 'Дней', 'Часов', 'Минут', 'Секунд', ''],
    labelsShort: ['Лет', 'Мес', 'Дн', 'Час', 'Мин', 'Сек', ''],
    // Timer component
    startText: 'Старт',
    stopText: 'Стоп',
    resetText: 'Сбросить',
    lapText: 'Круг',
    hideText: 'Скрыть',
    // Listview
    backText: 'назад',
    undoText: 'ОтменитЬ',
    // Form
    offText: 'O',
    onText: 'I',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Slovencina
  mobiscroll.i18n.sk = {
    // Core
    setText: 'Zadaj',
    cancelText: 'Zrušiť',
    clearText: 'Vymazať',
    selectedText: 'Označený: {count}',
    // Datetime component
    dateFormat: 'd.m.yy',
    dayNames: ['Nedeľa', 'Pondelok', 'Utorok', 'Streda', 'Štvrtok', 'Piatok', 'Sobota'],
    dayNamesShort: ['Ne', 'Po', 'Ut', 'St', 'Št', 'Pi', 'So'],
    dayNamesMin: ['N', 'P', 'U', 'S', 'Š', 'P', 'S'],
    dayText: 'Ďeň',
    hourText: 'Hodiny',
    minuteText: 'Minúty',
    monthNames: ['Január', 'Február', 'Marec', 'Apríl', 'Máj', 'Jún', 'Júl', 'August', 'September', 'Október', 'November', 'December'],
    monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'Máj', 'Jún', 'Júl', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'],
    monthText: 'Mesiac',
    secText: 'Sekundy',
    timeFormat: 'H:ii',
    yearText: 'Rok',
    nowText: 'Teraz',
    amText: 'am',
    pmText: 'pm',
    todayText: 'Dnes',
    // Calendar component
    firstDay: 1,
    dateText: 'Datum',
    timeText: 'Čas',
    closeText: 'Zavrieť',
    allDayText: 'Celý deň',
    noEventsText: 'Žiadne udalosti',
    eventText: 'Udalostí',
    eventsText: 'Udalosti',
    moreEventsText: '{count} ďalšia',
    moreEventsPluralText: '{count} ďalšie',
    // Daterange component
    fromText: 'Začiatok',
    toText: 'Koniec',
    // Measurement components
    wholeText: 'Celý',
    fractionText: 'Časť',
    unitText: 'Jednotka',
    // Time / Timespan component
    labels: ['Roky', 'Mesiace', 'Dni', 'Hodiny', 'Minúty', 'Sekundy', ''],
    labelsShort: ['Rok', 'Mes', 'Dni', 'Hod', 'Min', 'Sec', ''],
    // Timer component
    startText: 'Start',
    stopText: 'Stop',
    resetText: 'Resetovať',
    lapText: 'Etapa',
    hideText: 'Schovať',
    // Listview
    backText: 'Späť',
    undoText: 'Späť',
    // Form
    offText: 'O',
    onText: 'I',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Serbian
  mobiscroll.i18n.sr = {
    // Core
    setText: 'Постави',
    cancelText: 'Откажи',
    clearText: 'Обриши',
    selectedText: '{count} изабрана',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Недеља', 'Понедељак', 'Уторак', 'Среда', 'Четвртак', 'Петак', 'Субота'],
    dayNamesShort: ['Нед', 'Пон', 'Уто', 'Сре', 'Чет', 'Пет', 'Суб'],
    dayNamesMin: ['Не', 'По', 'Ут', 'Ср', 'Че', 'Пе', 'Су'],
    dayText: 'Дан',
    delimiter: '.',
    hourText: 'Час',
    minuteText: 'Минут',
    monthNames: ['Јануар', 'Фебруар', 'Март', 'Април', 'Мај', 'Јун', 'Јул', 'Август', 'Септембар', 'Октобар', 'Новембар', 'Децембар'],
    monthNamesShort: ['Јан', 'Феб', 'Мар', 'Апр', 'Мај', 'Јун', 'Јул', 'Авг', 'Сеп', 'Окт', 'Нов', 'Дец'],
    monthText: 'месец',
    secText: 'Секунд',
    timeFormat: 'H:ii',
    yearText: 'година',
    nowText: 'сада',
    pmText: 'pm',
    amText: 'am',
    // Calendar component
    firstDay: 1,
    dateText: 'Датум',
    timeText: 'време',
    todayText: 'Данас',
    prevMonthText: 'Претходни мјесец',
    nextMonthText: 'Следећег месеца',
    prevYearText: 'Претходна године',
    nextYearText: 'Следеће године',
    closeText: 'Затвори',
    eventText: 'Догађај',
    eventsText: 'Догађаји',
    allDayText: 'Цео дан',
    noEventsText: 'Нема догађаја',
    moreEventsText: 'Још {count}',
    // Daterange component
    fromText: 'Од',
    toText: 'До',
    // Measurement components
    wholeText: 'цео',
    fractionText: 'Фракција',
    unitText: 'единица',
    // Time / Timespan component
    labels: ['Године', 'Месеци', 'Дана', 'Сати', 'Минута', 'Секунди', ''],
    labelsShort: ['Год', 'Мес', 'Дана', 'Сати', 'Мину', 'Секу', ''],
    // Timer component
    startText: 'Започни',
    stopText: 'Стоп',
    resetText: 'Ресетуј',
    lapText: 'Круг',
    hideText: 'Сакрити',
    // Listview
    backText: 'Повратак',
    undoText: 'Опозови',
    // Form
    offText: 'нe',
    onText: 'да',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Svenska
  mobiscroll.i18n.sv = {
    // Core
    setText: 'OK',
    cancelText: 'Avbryt',
    clearText: 'Klara',
    selectedText: '{count} vald',
    // Datetime component
    dateFormat: 'yy-mm-dd',
    dayNames: ['Söndag', 'Måndag', 'Tisdag', 'Onsdag', 'Torsdag', 'Fredag', 'Lördag'],
    dayNamesShort: ['Sö', 'Må', 'Ti', 'On', 'To', 'Fr', 'Lö'],
    dayNamesMin: ['S', 'M', 'T', 'O', 'T', 'F', 'L'],
    dayText: 'Dag',
    hourText: 'Timme',
    minuteText: 'Minut',
    monthNames: ['Januari', 'Februari', 'Mars', 'April', 'Maj', 'Juni', 'Juli', 'Augusti', 'September', 'Oktober', 'November', 'December'],
    monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'Maj', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'],
    monthText: 'Månad',
    secText: 'Sekund',
    timeFormat: 'HH:ii',
    yearText: 'År',
    nowText: 'Nu',
    pmText: 'pm',
    amText: 'am',
    todayText: 'I dag',
    // Calendar component
    firstDay: 1,
    dateText: 'Datum',
    timeText: 'Tid',
    closeText: 'Stäng',
    allDayText: 'Heldag',
    noEventsText: 'Inga aktiviteter',
    eventText: 'Händelse',
    eventsText: 'Händelser',
    moreEventsText: '{count} till',
    // Daterange component
    fromText: 'Start',
    toText: 'Slut',
    // Measurement components
    wholeText: 'Hela',
    fractionText: 'Bråk',
    unitText: 'Enhet',
    // Time / Timespan component
    labels: ['År', 'Månader', 'Dagar', 'Timmar', 'Minuter', 'Sekunder', ''],
    labelsShort: ['År', 'Mån', 'Dag', 'Tim', 'Min', 'Sek', ''],
    // Timer component
    startText: 'Start',
    stopText: 'Stopp',
    resetText: 'Återställ',
    lapText: 'Varv',
    hideText: 'Dölj',
    // Listview
    backText: 'Tillbaka',
    undoText: 'Ångra',
    // Form
    offText: 'Av',
    onText: 'På'
  };

  // Türkçe
  mobiscroll.i18n.tr = {
    // Core
    setText: 'Seç',
    cancelText: 'İptal',
    clearText: 'Temizleyin',
    selectedText: '{count} seçilmiş',
    // Datetime component
    dateFormat: 'dd.mm.yy',
    dayNames: ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'],
    dayNamesShort: ['Paz', 'Pzt', 'Sal', 'Çar', 'Per', 'Cum', 'Cmt'],
    dayNamesMin: ['P', 'P', 'S', 'Ç', 'P', 'C', 'C'],
    dayText: 'Gün',
    delimiter: '.',
    hourText: 'Saat',
    minuteText: 'Dakika',
    monthNames: ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'],
    monthNamesShort: ['Oca', 'Şub', 'Mar', 'Nis', 'May', 'Haz', 'Tem', 'Ağu', 'Eyl', 'Eki', 'Kas', 'Ara'],
    monthText: 'Ay',
    secText: 'Saniye',
    timeFormat: 'HH:ii',
    yearText: 'Yıl',
    nowText: 'Şimdi',
    pmText: 'pm',
    amText: 'am',
    todayText: 'Bugün',
    // Calendar component
    firstDay: 1,
    dateText: 'Tarih',
    timeText: 'Zaman',
    closeText: 'Kapatmak',
    allDayText: 'Tüm gün',
    noEventsText: 'Etkinlik Yok',
    eventText: 'Etkinlik',
    eventsText: 'Etkinlikler',
    moreEventsText: '{count} tane daha',
    // Daterange component
    fromText: 'Başla',
    toText: 'Son',
    // Measurement components
    wholeText: 'Tam',
    fractionText: 'Kesir',
    unitText: 'Birim',
    // Time / Timespan component
    labels: ['Yıl', 'Ay', 'Gün', 'Saat', 'Dakika', 'Saniye', ''],
    labelsShort: ['Yıl', 'Ay', 'Gün', 'Sa', 'Dak', 'Sn', ''],
    // Timer component
    startText: 'Başla',
    stopText: 'Durdur',
    resetText: 'Sıfırla',
    lapText: 'Tur',
    hideText: 'Gizle',
    // Listview
    backText: 'Geri',
    undoText: 'Geri Al',
    // Form
    offText: 'O',
    onText: 'I',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: '.'
  };

  // Vietnamese 
  mobiscroll.i18n.vi = {
    // Core
    setText: 'Đặt',
    cancelText: 'Hủy bò',
    clearText: 'Xóa',
    selectedText: '{count} chọn',
    // Datetime component
    dateFormat: 'dd/mm/yy',
    dayNames: ['Chủ Nhật', 'Thứ Hai', 'Thứ Ba', 'Thứ Tư', 'Thứ Năm', 'Thứ Sáu', 'Thứ Bảy'],
    dayNamesShort: ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'],
    dayNamesMin: ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'],
    dayText: '',
    delimiter: '/',
    hourText: 'Giờ',
    minuteText: 'Phút',
    monthNames: ['Tháng Một', 'Tháng Hai', 'Tháng Ba', 'Tháng Tư', 'Tháng Năm', 'Tháng Sáu', 'Tháng Bảy', 'Tháng Tám', 'Tháng Chín', 'Tháng Mười', 'Tháng Mười Một', 'Tháng Mười Hai'],
    monthNamesShort: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
    monthText: 'Tháng',
    secText: 'Giây',
    timeFormat: 'H:ii',
    yearText: 'Năm',
    nowText: 'Bây giờ',
    pmText: 'pm',
    amText: 'am',
    // Calendar component
    firstDay: 0,
    dateText: 'Ngày',
    timeText: 'Hồi',
    todayText: 'Hôm nay',
    prevMonthText: 'Tháng trước',
    nextMonthText: 'Tháng tới',
    prevYearText: 'Măm trước',
    nextYearText: 'Năm tới',
    closeText: 'Đóng',
    eventText: 'Sự kiện',
    eventsText: 'Sự kiện',
    allDayText: 'Cả ngày',
    noEventsText: 'Không có sự kiện',
    moreEventsText: '{count} thẻ khác',
    // Daterange component
    fromText: 'Từ',
    toText: 'Tới',
    // Measurement components
    wholeText: 'Toàn thể',
    fractionText: 'Phân số',
    unitText: 'đơn vị',
    // Time / Timespan component
    labels: ['Năm', 'Tháng', 'Ngày', 'Giờ', 'Phút', 'Giây', ''],
    labelsShort: ['Năm', 'Tháng', 'Ngày', 'Giờ', 'Phút', 'Giây', ''],
    // Timer component
    startText: 'Bắt đầu',
    stopText: 'Dừng',
    resetText: 'Đặt lại',
    lapText: 'Vòng',
    hideText: 'Giấu',
    // Listview
    backText: 'Quay lại',
    undoText: 'Hoàn tác',
    // Form
    offText: 'Tất',
    onText: 'Bật',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  // Chinese
  mobiscroll.i18n.zh = {
    // Core
    setText: '确定',
    cancelText: '取消',
    clearText: '明确',
    selectedText: '{count} 选',
    // Datetime component
    dateFormat: 'yy年mm月d日',
    dayNames: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
    dayNamesShort: ['日', '一', '二', '三', '四', '五', '六'],
    dayNamesMin: ['日', '一', '二', '三', '四', '五', '六'],
    dayText: '日',
    hourText: '时',
    minuteText: '分',
    monthNames: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
    monthNamesShort: ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十', '十一', '十二'],
    monthText: '月',
    secText: '秒',
    timeFormat: 'HH:ii',
    yearText: '年',
    nowText: '当前',
    pmText: '下午',
    amText: '上午',
    yearSuffix: '年',
    monthSuffix: '月',
    daySuffix: '日',
    todayText: '今天',
    // Calendar component
    dateText: '日',
    timeText: '时间',
    closeText: '关闭',
    allDayText: '全天',
    noEventsText: '无事件',
    eventText: '活动',
    eventsText: '活动',
    moreEventsText: '他 {count} 件',
    // Daterange component
    fromText: '开始时间',
    toText: '结束时间',
    // Measurement components
    wholeText: '合计',
    fractionText: '分数',
    unitText: '单位',
    // Time / Timespan component
    labels: ['年', '月', '日', '小时', '分钟', '秒', ''],
    labelsShort: ['年', '月', '日', '点', '分', '秒', ''],
    // Timer component
    startText: '开始',
    stopText: '停止',
    resetText: '重置',
    lapText: '圈',
    hideText: '隐藏',
    // Listview
    backText: '返回',
    undoText: '复原',
    // Form
    offText: '关闭',
    onText: '开启',
    // Numpad
    decimalSeparator: ',',
    thousandsSeparator: ' '
  };

  var themes$1 = mobiscroll.themes;
  themes$1.frame.ios = {
    display: 'bottom',
    // frame
    headerText: false,
    // frame
    btnWidth: false,
    // frame
    deleteIcon: 'ios-backspace',
    // numpad
    scroll3d: os != 'wp' && (os != 'android' || majorVersion > 7)
  };
  themes$1.scroller.ios = extend$1({}, themes$1.frame.ios, {
    rows: 5,
    // scroller
    height: 34,
    // scroller
    minWidth: 55,
    // scroller
    selectedLineHeight: true,
    // scroller
    selectedLineBorder: 1,
    // scroller
    showLabel: false,
    // scroller
    useShortLabels: true,
    // timespan/timer
    btnPlusClass: 'mbsc-ic mbsc-ic-arrow-down5',
    // scroller
    btnMinusClass: 'mbsc-ic mbsc-ic-arrow-up5',
    // scroller
    checkIcon: 'ion-ios7-checkmark-empty',
    // select
    filterClearIcon: 'ion-close-circled',
    // select
    dateDisplay: 'MMdyy',
    // date
    btnCalPrevClass: 'mbsc-ic mbsc-ic-arrow-left5',
    // calendar
    btnCalNextClass: 'mbsc-ic mbsc-ic-arrow-right5' // calendar

  });
  themes$1.listview.ios = {
    leftArrowClass: 'mbsc-ic-ion-ios7-arrow-back',
    rightArrowClass: 'mbsc-ic-ion-ios7-arrow-forward'
  };
  themes$1.form.ios = {};

  function _addRipple($control, ev) {
    var x = getCoord(ev, 'X', true),
        y = getCoord(ev, 'Y', true),
        control = $control[0],
        rect = $control.offset(),
        left = x - rect.left,
        top = y - rect.top,
        width = Math.max(left, control.offsetWidth - left),
        height = Math.max(top, control.offsetHeight - top),
        size = 2 * Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));

    _removeRipple($ripple);

    $ripple = $$1('<span class="mbsc-ripple"></span>').css({
      backgroundColor: getComputedStyle(control).color,
      width: size,
      height: size,
      top: y - rect.top - size / 2,
      left: x - rect.left - size / 2
    }).appendTo($control);
    setTimeout(function () {
      $ripple.addClass('mbsc-ripple-scaled mbsc-ripple-visible');
    }, 10);
  }

  function _removeRipple($r) {
    setTimeout(function () {
      if ($r) {
        $r.removeClass('mbsc-ripple-visible');
        setTimeout(function () {
          $r.remove();
        }, 2000);
      }
    }, 100);
  }

  function initRipple($markup, selector, disabled, nohl) {
    var startX,
        startY,
        markup = $markup[0];

    function onStart(ev) {
      var target = closest(markup, ev.target, selector);

      if (target && testTouch(ev, target)) {
        startX = getCoord(ev, 'X');
        startY = getCoord(ev, 'Y');
        $active$1 = $$1(target);

        if (!$active$1.hasClass(disabled) && !$active$1.hasClass(nohl)) {
          _addRipple($active$1, ev);
        } else {
          $active$1 = null;
        }
      }
    }

    function onMove(ev) {
      if ($active$1 && Math.abs(getCoord(ev, 'X') - startX) > 9 || Math.abs(getCoord(ev, 'Y') - startY) > 9) {
        _removeRipple($ripple);

        $active$1 = null;
      }
    }

    function onEnd() {
      if ($active$1) {
        setTimeout(function () {
          _removeRipple($ripple);
        }, 100);
        $active$1 = null;
      }
    }

    if (markup) {
      if (markup.__mbscRippleOff) {
        markup.__mbscRippleOff();
      }

      listen(markup, 'touchstart', onStart, {
        passive: true
      });
      listen(markup, 'mousedown', onStart);
      listen(markup, 'touchmove', onMove, {
        passive: true
      });
      listen(markup, 'mousemove', onMove);
      listen(markup, 'touchend', onEnd);
      listen(markup, 'touchcancel', onEnd);
      listen(markup, 'mouseleave', onEnd);
      listen(markup, 'mouseup', onEnd);

      markup.__mbscRippleOff = function () {
        unlisten(markup, 'touchstart', onStart, {
          passive: true
        });
        unlisten(markup, 'mousedown', onStart);
        unlisten(markup, 'touchmove', onMove, {
          passive: true
        });
        unlisten(markup, 'mousemove', onMove);
        unlisten(markup, 'touchend', onEnd);
        unlisten(markup, 'touchcancel', onEnd);
        unlisten(markup, 'mouseleave', onEnd);
        unlisten(markup, 'mouseup', onEnd);
        delete markup.__mbscRippleOff;
      };
    }
  }

  var $active$1,
      $ripple,
      themes$2 = mobiscroll.themes;
  themes$2.frame.material = {
    headerText: false,
    btnWidth: false,
    deleteIcon: 'material-backspace',
    onMarkupReady: function onMarkupReady(ev) {
      initRipple($$1(ev.target), '.mbsc-fr-btn-e', 'mbsc-disabled', 'mbsc-fr-btn-nhl');
    }
  };
  themes$2.scroller.material = extend$1({}, themes$2.frame.material, {
    showLabel: false,
    selectedLineBorder: 2,
    weekDays: 'min',
    icon: {
      filled: 'material-star',
      empty: 'material-star-outline'
    },
    checkIcon: 'material-check',
    btnPlusClass: 'mbsc-ic mbsc-ic-material-keyboard-arrow-down',
    btnMinusClass: 'mbsc-ic mbsc-ic-material-keyboard-arrow-up',
    btnCalPrevClass: 'mbsc-ic mbsc-ic-material-keyboard-arrow-left',
    btnCalNextClass: 'mbsc-ic mbsc-ic-material-keyboard-arrow-right'
  });
  themes$2.listview.material = {
    leftArrowClass: 'mbsc-ic-material-keyboard-arrow-left',
    rightArrowClass: 'mbsc-ic-material-keyboard-arrow-right',
    onItemActivate: function onItemActivate(ev) {
      _addRipple($$1(ev.target), ev.domEvent);
    },
    onItemDeactivate: function onItemDeactivate() {
      _removeRipple($ripple);
    },
    onSlideStart: function onSlideStart(ev) {
      $$1('.mbsc-ripple', ev.target).remove();
    },
    onSortStart: function onSortStart(ev) {
      $$1('.mbsc-ripple', ev.target).remove();
    }
  };
  themes$2.navigation.material = {
    onInit: function onInit() {
      initRipple($$1(this), '.mbsc-ms-item.mbsc-btn-e', 'mbsc-disabled', 'mbsc-btn-nhl');
    },
    onMarkupInit: function onMarkupInit() {
      $$1('.mbsc-ripple', this).remove();
    },
    onDestroy: function onDestroy() {
      if (this.__mbscRippleOff) {
        this.__mbscRippleOff();
      }
    }
  };
  themes$2.form.material = {
    addRipple: function addRipple(elm, ev) {
      _addRipple(elm, ev);
    },
    removeRipple: function removeRipple() {
      _removeRipple($ripple);
    }
  };

  var themes$3 = mobiscroll.themes;
  themes$3.frame.windows = {
    headerText: false,
    deleteIcon: 'backspace4',
    //setIcon: 'material-check',
    //cancelIcon: 'material-close',
    //closeIcon: 'material-close',
    //clearIcon: 'material-close',
    //okIcon: 'material-check',
    //nowIcon: 'loop2',
    //startIcon: 'play3',
    //stopIcon: 'pause2',
    //resetIcon: 'stop2',
    //lapIcon: 'loop2',
    //btnWidth: false,
    btnReverse: true
  };
  themes$3.scroller.windows = extend$1({}, themes$3.frame.windows, {
    rows: 6,
    // scroller
    minWidth: 88,
    height: 44,
    btnPlusClass: 'mbsc-ic mbsc-ic-arrow-down5',
    btnMinusClass: 'mbsc-ic mbsc-ic-arrow-up5',
    checkIcon: 'material-check',
    dateDisplay: 'MMdyy',
    // date
    showLabel: false,
    showScrollArrows: true,
    btnCalPrevClass: 'mbsc-ic mbsc-ic-arrow-left5',
    // calendar
    btnCalNextClass: 'mbsc-ic mbsc-ic-arrow-right5',
    // calendar
    dayNamesShort: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
    useShortLabels: true // timespan/timer

  });
  themes$3.form.windows = {};

  mobiscroll.customTheme('ios-dark', 'ios');

  mobiscroll.customTheme('material-dark', 'material');

  mobiscroll.customTheme('mobiscroll-dark', 'mobiscroll');

  mobiscroll.customTheme('windows-dark', 'windows');

  var themes$4 = mobiscroll.themes;
  var theme = 'mobiscroll';

  if (os == 'android') {
    theme = 'material';
  } else if (os == 'ios') {
    theme = 'ios';
  } else if (os == 'wp') {
    theme = 'windows';
  }

  $$1.each(themes$4.frame, function (key, settings) {
    // Stop at the first custom theme with the OS base theme
    if (theme && settings.baseTheme == theme && key != theme + '-dark') {
      mobiscroll.autoTheme = key;
      return false;
    } else if (key == theme) {
      mobiscroll.autoTheme = key;
    }
  });

  exports.MbscAvatar = MbscAvatar;
  exports.MbscButton = MbscButton;
  exports.MbscCheckbox = MbscCheckbox;
  exports.MbscCommercialComponent = MbscCommercialComponent;
  exports.MbscDropdown = MbscDropdown;
  exports.MbscForm = MbscForm;
  exports.MbscFormsModule = MbscFormsModule;
  exports.MbscInput = MbscInput;
  exports.MbscInputModule = MbscInputModule;
  exports.MbscModule = MbscModule;
  exports.MbscNote = MbscNote;
  exports.MbscPage = MbscPage;
  exports.MbscPageModule = MbscPageModule;
  exports.MbscProgress = MbscProgress;
  exports.MbscRadio = MbscRadio;
  exports.MbscRadioGroup = MbscRadioGroup;
  exports.MbscRating = MbscRating;
  exports.MbscSegmented = MbscSegmented;
  exports.MbscSegmentedGroup = MbscSegmentedGroup;
  exports.MbscSlider = MbscSlider;
  exports.MbscStepper = MbscStepper;
  exports.MbscSwitch = MbscSwitch;
  exports.MbscTextarea = MbscTextarea;
  exports.mobiscroll = mobiscroll;
  exports.ɵa = MbscOptionsService;
  exports.ɵb = MbscInputService;
  exports.ɵc = MbscBase;
  exports.ɵd = MbscValueBase;
  exports.ɵe = MbscCloneBase;
  exports.ɵf = MbscControlBase;
  exports.ɵg = MbscBaseModule;
  exports.ɵh = MbscFormBase;
  exports.ɵi = MbscFormValueBase;
  exports.ɵj = MbscInputBase;
  exports.ɵk = MbscRadioService;
  exports.ɵl = MbscRadioGroupBase;
  exports.ɵm = MbscFormGroup;
  exports.ɵn = MbscFormGroupTitle;
  exports.ɵo = MbscFormGroupContent;
  exports.ɵp = MbscAccordion;

  Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9iaXNjcm9sbC5hbmd1bGFyLm1pbi5qcyIsInNvdXJjZXMiOlsibW9iaXNjcm9sbC5hbmd1bGFyLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0EsdUpBQXlFO0FBQ3pFLDBHQUF1RDtBQUN2RCxvRkFBb0M7QUFDcEMsd0NBQW1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdDO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBR1E7QUFDUjs7Ozs7Z0RBQXFFO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUdRO0FBQ1I7Ozs7O2dEQUFtRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBR1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUdRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7Ozs7OztvR0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFHUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7b0dBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBR1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUdRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BR1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FNUTtBQUNSOzs7Ozs7Ozs7O2dEQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBR1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFHUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BR1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQVdRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQU9RO0FBQ1I7Ozs7Ozs7Ozs7O2dEQUFrRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFRUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQVFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFRUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFPUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQVFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQVNRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBU1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQVNRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FHUTtBQUNSOzs7OztnREFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBR1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FPUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MkRBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBT1E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQU9RO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQU9RO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFRUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFPUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFXUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BVVE7QUFDUjs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BVVE7QUFDUjs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BVVE7QUFDUjs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BT1E7QUFDUjs7Ozs7Ozs7Ozs7Z0RBQWtFO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFRUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQVVRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQU1RO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQU9RO0FBQ1I7Ozs7Ozs7Ozs7O2dEQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQVVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFTTztBQUNQO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztnREFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnQGFuZ3VsYXIvY29yZScpLCByZXF1aXJlKCdAYW5ndWxhci9jb21tb24nKSwgcmVxdWlyZSgnQGFuZ3VsYXIvZm9ybXMnKSkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ0Bhbmd1bGFyL2NvcmUnLCAnQGFuZ3VsYXIvY29tbW9uJywgJ0Bhbmd1bGFyL2Zvcm1zJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5tb2Jpc2Nyb2xsID0ge30sIGdsb2JhbC5uZy5jb3JlLCBnbG9iYWwubmcuY29tbW9uLCBnbG9iYWwubmcuZm9ybXMpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzLCBjb3JlLCBjb21tb24sIGZvcm1zKSB7ICd1c2Ugc3RyaWN0JztcblxuICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4gIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG4gIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbiAgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcbiAgVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4gIEtJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuICBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG4gIE1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG4gIFNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG4gIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG4gIC8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXG4gIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHtcbiAgICAgIF9fcHJvdG9fXzogW11cbiAgICB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgIGQuX19wcm90b19fID0gYjtcbiAgICB9IHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gIH07XG5cbiAgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuXG4gICAgZnVuY3Rpb24gX18oKSB7XG4gICAgICB0aGlzLmNvbnN0cnVjdG9yID0gZDtcbiAgICB9XG5cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gIH1cblxuICB2YXIgbW9iaXNjcm9sbCA9IG1vYmlzY3JvbGwgfHwge30sXG4gICAgICB1dGlsID0ge307XG5cbiAgdmFyIG9zLFxuICAgICAgdmVycyxcbiAgICAgIG1ham9yVmVyc2lvbixcbiAgICAgIG1pbm9yVmVyc2lvbixcbiAgICAgIHZlcnNpb24gPSBbXSxcbiAgICAgIGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnLFxuICAgICAgaXNEYXJrID0gaXNCcm93c2VyICYmIHdpbmRvdy5tYXRjaE1lZGlhICYmIHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6ZGFyayknKS5tYXRjaGVzLFxuICAgICAgdXNlckFnZW50ID0gaXNCcm93c2VyID8gbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnLFxuICAgICAgcGxhdGZvcm0gPSBpc0Jyb3dzZXIgPyBuYXZpZ2F0b3IucGxhdGZvcm0gOiAnJyxcbiAgICAgIG1heFRvdWNoUG9pbnRzID0gaXNCcm93c2VyID8gbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzIDogMCxcbiAgICAgIGlzU2FmYXJpID0gL1NhZmFyaS8udGVzdCh1c2VyQWdlbnQpLFxuICAgICAgZGV2aWNlID0gdXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkfGlQaG9uZXxpUGFkfGlQb2R8V2luZG93cyBQaG9uZXxXaW5kb3dzfE1TSUUvaSksXG4gICAgICByYWYgPSBpc0Jyb3dzZXIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbiAoZnVuYykge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmMsIDIwKTtcbiAgfTtcblxuICBpZiAoL0FuZHJvaWQvaS50ZXN0KGRldmljZSkpIHtcbiAgICBvcyA9ICdhbmRyb2lkJztcbiAgICB2ZXJzID0gdXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkXFxzKyhbXFxkLl0rKS9pKTtcblxuICAgIGlmICh2ZXJzKSB7XG4gICAgICB2ZXJzaW9uID0gdmVyc1swXS5yZXBsYWNlKCdBbmRyb2lkICcsICcnKS5zcGxpdCgnLicpO1xuICAgIH1cbiAgfSBlbHNlIGlmICgvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QoZGV2aWNlKSB8fCAvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QocGxhdGZvcm0pIHx8IHBsYXRmb3JtID09PSAnTWFjSW50ZWwnICYmIG1heFRvdWNoUG9pbnRzID4gMSkge1xuICAgIC8vIE9uIGlQYWQgd2l0aCBpT1MgMTMgZGVza3RvcCBzaXRlIHJlcXVlc3QgaXMgYXV0b21hdGljYWxseSBlbmFibGVkIGluIFNhZmFyaSxcbiAgICAvLyBzbyAnaVBhZCcgaXMgbm8gbG9uZ2VyIHByZXNlbnQgaW4gdGhlIHVzZXIgYWdlbnQgc3RyaW5nLlxuICAgIC8vIEluIHRoaXMgY2FzZSB3ZSBjaGVjayBgbmF2aWdhdG9yLnBsYXRmb3JtYCBhbmQgYG5hdmlnYXRvci5tYXhUb3VjaFBvaW50c2AuXG4gICAgLy8gbWF4VG91Y2hQb2ludHMgaXMgbmVlZGVkIHRvIGV4Y2x1ZGUgZGVza3RvcCBNYWMgT1MgWC5cbiAgICBvcyA9ICdpb3MnO1xuICAgIHZlcnMgPSB1c2VyQWdlbnQubWF0Y2goL09TXFxzKyhbXFxkX10rKS9pKTtcblxuICAgIGlmICh2ZXJzKSB7XG4gICAgICB2ZXJzaW9uID0gdmVyc1swXS5yZXBsYWNlKC9fL2csICcuJykucmVwbGFjZSgnT1MgJywgJycpLnNwbGl0KCcuJyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKC9XaW5kb3dzIFBob25lL2kudGVzdChkZXZpY2UpKSB7XG4gICAgb3MgPSAnd3AnO1xuICB9IGVsc2UgaWYgKC9XaW5kb3dzfE1TSUUvaS50ZXN0KGRldmljZSkpIHtcbiAgICBvcyA9ICd3aW5kb3dzJztcbiAgfVxuXG4gIG1ham9yVmVyc2lvbiA9IHZlcnNpb25bMF07XG4gIG1pbm9yVmVyc2lvbiA9IHZlcnNpb25bMV07XG5cbiAgZnVuY3Rpb24gdGVzdFByb3BzKHByb3BzKSB7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChtb2RbcHJvcHNbaV1dICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gdGVzdFByZWZpeCgpIHtcbiAgICB2YXIgcHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnTycsICdtcyddLFxuICAgICAgICBwO1xuXG4gICAgZm9yIChwIGluIHByZWZpeGVzKSB7XG4gICAgICBpZiAodGVzdFByb3BzKFtwcmVmaXhlc1twXSArICdUcmFuc2Zvcm0nXSkpIHtcbiAgICAgICAgcmV0dXJuICctJyArIHByZWZpeGVzW3BdLnRvTG93ZXJDYXNlKCkgKyAnLSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgZnVuY3Rpb24gdGVzdFRvdWNoKGUsIGVsbSkge1xuICAgIGlmIChlLnR5cGUgPT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICBlbG0uX19tYnNjVG91Y2hlZCA9IDE7XG4gICAgfSBlbHNlIGlmIChlbG0uX19tYnNjVG91Y2hlZCkge1xuICAgICAgZGVsZXRlIGVsbS5fX21ic2NUb3VjaGVkO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKGVsLCBldmVudCwgaGFuZGxlciwgb3B0KSB7XG4gICAgaWYgKGVsKSB7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVubGlzdGVuKGVsLCBldmVudCwgaGFuZGxlciwgb3B0KSB7XG4gICAgaWYgKGVsKSB7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1hdGNoZXMoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICBpZiAoIXNlbGVjdG9yIHx8ICFlbGVtZW50IHx8IGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbWF0Y2hlc1NlbGVjdG9yID0gZWxlbWVudC5tYXRjaGVzIHx8IGVsZW1lbnQubWF0Y2hlc1NlbGVjdG9yIHx8IGVsZW1lbnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGVsZW1lbnQubW96TWF0Y2hlc1NlbGVjdG9yIHx8IGVsZW1lbnQubXNNYXRjaGVzU2VsZWN0b3I7XG4gICAgcmV0dXJuIG1hdGNoZXNTZWxlY3Rvci5jYWxsKGVsZW1lbnQsIHNlbGVjdG9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3Nlc3QoZWwsIHRhcmdldCwgc2VsZWN0b3IpIHtcbiAgICB3aGlsZSAodGFyZ2V0KSB7XG4gICAgICBpZiAobWF0Y2hlcyh0YXJnZXQsIHNlbGVjdG9yKSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfVxuXG4gICAgICB0YXJnZXQgPSB0YXJnZXQgIT09IGVsID8gdGFyZ2V0LnBhcmVudE5vZGUgOiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJpZ2dlcihlbG0sIG5hbWUsIGRhdGEpIHtcbiAgICB2YXIgZXZ0O1xuXG4gICAgdHJ5IHtcbiAgICAgIGV2dCA9IG5ldyBDdXN0b21FdmVudChuYW1lLCB7XG4gICAgICAgIGRldGFpbDogZGF0YSxcbiAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBldnQuaW5pdEV2ZW50KG5hbWUsIHRydWUsIHRydWUpO1xuICAgICAgZXZ0LmRldGFpbCA9IGRhdGE7XG4gICAgfVxuXG4gICAgZWxtLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgfVxuXG4gIHZhciBhbmltRW5kLFxuICAgICAgY2FudmFzLFxuICAgICAgbW9kLFxuICAgICAgY3NzUHJlZml4LFxuICAgICAgaGFzR2hvc3RDbGljayxcbiAgICAgIGhhc1RyYW5zaXRpb24sXG4gICAgICBpc1dlYlZpZXcsXG4gICAgICBpc1drV2ViVmlldyxcbiAgICAgIGpzUHJlZml4LFxuICAgICAgd2luO1xuXG4gIGlmIChpc0Jyb3dzZXIpIHtcbiAgICB3aW4gPSB3aW5kb3c7XG4gICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgbW9kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbW9kZXJuaXpyJykuc3R5bGU7XG4gICAgY3NzUHJlZml4ID0gdGVzdFByZWZpeCgpO1xuICAgIGpzUHJlZml4ID0gY3NzUHJlZml4LnJlcGxhY2UoL14tLywgJycpLnJlcGxhY2UoLy0kLywgJycpLnJlcGxhY2UoJ21veicsICdNb3onKTtcbiAgICBhbmltRW5kID0gbW9kLmFuaW1hdGlvbiAhPT0gdW5kZWZpbmVkID8gJ2FuaW1hdGlvbmVuZCcgOiAnd2Via2l0QW5pbWF0aW9uRW5kJztcbiAgICBoYXNUcmFuc2l0aW9uID0gbW9kLnRyYW5zaXRpb24gIT09IHVuZGVmaW5lZDsgLy8gVUlXZWJWaWV3IG9uIGlPUyBzdGlsbCBoYXMgdGhlIGdob3N0IGNsaWNrLCBcbiAgICAvLyBXa1dlYlZpZXcgZG9lcyBub3QgaGF2ZSBhIGdob3N0IGNsaWNrLCBidXQgaXQncyBoYXJkIHRvIHRlbGwgaWYgaXQncyBVSVdlYlZpZXcgb3IgV2tXZWJWaWV3XG4gICAgLy8gSW4gYWRkaXRpb24gaW4gaU9TIDEyLjIgaWYgd2UgZW5hYmxlIHRhcCBoYW5kbGluZywgaXQgYnJha2VzIHRoZSBmb3JtIGlucHV0c1xuICAgIC8vIChrZXlib2FyZCBhcHBlYXJzLCBidXQgdGhlIGN1cnNvciBpcyBub3QgaW4gdGhlIGlucHV0KS5cblxuICAgIGlzV2ViVmlldyA9IG9zID09PSAnaW9zJyAmJiAhaXNTYWZhcmk7XG4gICAgaXNXa1dlYlZpZXcgPSBpc1dlYlZpZXcgJiYgd2luLndlYmtpdCAmJiB3aW4ud2Via2l0Lm1lc3NhZ2VIYW5kbGVycztcbiAgICBoYXNHaG9zdENsaWNrID0gbW9kLnRvdWNoQWN0aW9uID09PSB1bmRlZmluZWQgfHwgaXNXZWJWaWV3ICYmICFpc1drV2ViVmlldztcbiAgfVxuXG4gIHZhciBjc3NOdW1iZXIgPSB7XG4gICAgJ2NvbHVtbi1jb3VudCc6IDEsXG4gICAgJ2NvbHVtbnMnOiAxLFxuICAgICdmb250LXdlaWdodCc6IDEsXG4gICAgJ2xpbmUtaGVpZ2h0JzogMSxcbiAgICAnb3BhY2l0eSc6IDEsXG4gICAgJ3otaW5kZXgnOiAxLFxuICAgICd6b29tJzogMVxuICB9LFxuICAgICAgcHJvcE1hcCA9IHtcbiAgICAncmVhZG9ubHknOiAncmVhZE9ubHknXG4gIH0sXG4gICAgICBlbXB0eUFycmF5ID0gW10sXG4gICAgICBfc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiO1xuICB9XG5cbiAgZnVuY3Rpb24gbGlrZUFycmF5KG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqLmxlbmd0aCA9PSAnbnVtYmVyJztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvLSsoLik/L2csIGZ1bmN0aW9uIChtYXRjaCwgY2hyKSB7XG4gICAgICByZXR1cm4gY2hyID8gY2hyLnRvVXBwZXJDYXNlKCkgOiAnJztcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQsIHNvdXJjZSwgZGVlcCkge1xuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChkZWVwICYmICgkLmlzUGxhaW5PYmplY3Qoc291cmNlW2tleV0pIHx8ICQuaXNBcnJheShzb3VyY2Vba2V5XSkpKSB7XG4gICAgICAgIGlmICgkLmlzUGxhaW5PYmplY3Qoc291cmNlW2tleV0pICYmICEkLmlzUGxhaW5PYmplY3QodGFyZ2V0W2tleV0pIHx8ICQuaXNBcnJheShzb3VyY2Vba2V5XSkgJiYgISQuaXNBcnJheSh0YXJnZXRba2V5XSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgZXh0ZW5kKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgZGVlcCk7XG4gICAgICB9IGVsc2UgaWYgKHNvdXJjZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkYXNoZXJpemUoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC86Oi9nLCAnLycpLnJlcGxhY2UoLyhbQS1aXSspKFtBLVpdW2Etel0pL2csICckMV8kMicpLnJlcGxhY2UoLyhbYS16XFxkXSkoW0EtWl0pL2csICckMV8kMicpLnJlcGxhY2UoL18vZywgJy0nKS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWF5YmVBZGRQeChuYW1lLCB2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIiAmJiAhY3NzTnVtYmVyW2Rhc2hlcml6ZShuYW1lKV0gPyB2YWx1ZSArIFwicHhcIiA6IHZhbHVlO1xuICB9XG5cbiAgdmFyIERvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgRG9tID0gZnVuY3Rpb24gRG9tKGFycikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcyxcbiAgICAgICAgICBpID0gMDsgLy8gQ3JlYXRlIGFycmF5LWxpa2Ugb2JqZWN0XG5cblxuICAgICAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBfdGhpc1tpXSA9IGFycltpXTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMubGVuZ3RoID0gYXJyLmxlbmd0aDsgLy8gUmV0dXJuIGNvbGxlY3Rpb24gd2l0aCBtZXRob2RzXG5cbiAgICAgIHJldHVybiAkKHRoaXMpO1xuICAgIH07XG5cbiAgICB2YXIgJCA9IGZ1bmN0aW9uICQoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBhcnIgPSBbXSxcbiAgICAgICAgICBpID0gMDtcblxuICAgICAgaWYgKHNlbGVjdG9yICYmICFjb250ZXh0KSB7XG4gICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIERvbSkge1xuICAgICAgICAgIHJldHVybiBzZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHtcbiAgICAgICAgcmV0dXJuICQoZG9jdW1lbnQpLnJlYWR5KHNlbGVjdG9yKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIC8vIFN0cmluZ1xuICAgICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHZhciBlbHMsIHRlbXBQYXJlbnQsIGh0bWw7XG4gICAgICAgICAgc2VsZWN0b3IgPSBodG1sID0gc2VsZWN0b3IudHJpbSgpO1xuXG4gICAgICAgICAgaWYgKGh0bWwuaW5kZXhPZignPCcpID49IDAgJiYgaHRtbC5pbmRleE9mKCc+JykgPj0gMCkge1xuICAgICAgICAgICAgdmFyIHRvQ3JlYXRlID0gJ2Rpdic7XG5cbiAgICAgICAgICAgIGlmIChodG1sLmluZGV4T2YoJzxsaScpID09PSAwKSB7XG4gICAgICAgICAgICAgIHRvQ3JlYXRlID0gJ3VsJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGh0bWwuaW5kZXhPZignPHRyJykgPT09IDApIHtcbiAgICAgICAgICAgICAgdG9DcmVhdGUgPSAndGJvZHknO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaHRtbC5pbmRleE9mKCc8dGQnKSA9PT0gMCB8fCBodG1sLmluZGV4T2YoJzx0aCcpID09PSAwKSB7XG4gICAgICAgICAgICAgIHRvQ3JlYXRlID0gJ3RyJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGh0bWwuaW5kZXhPZignPHRib2R5JykgPT09IDApIHtcbiAgICAgICAgICAgICAgdG9DcmVhdGUgPSAndGFibGUnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaHRtbC5pbmRleE9mKCc8b3B0aW9uJykgPT09IDApIHtcbiAgICAgICAgICAgICAgdG9DcmVhdGUgPSAnc2VsZWN0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGVtcFBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodG9DcmVhdGUpO1xuICAgICAgICAgICAgdGVtcFBhcmVudC5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGVtcFBhcmVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGFyci5wdXNoKHRlbXBQYXJlbnQuY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghY29udGV4dCAmJiBzZWxlY3RvclswXSA9PT0gJyMnICYmICFzZWxlY3Rvci5tYXRjaCgvWyAuPD46fl0vKSkge1xuICAgICAgICAgICAgICAvLyBQdXJlIElEIHNlbGVjdG9yXG4gICAgICAgICAgICAgIGVscyA9IFtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvci5zcGxpdCgnIycpWzFdKV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoY29udGV4dCBpbnN0YW5jZW9mIERvbSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0WzBdO1xuICAgICAgICAgICAgICB9IC8vIE90aGVyIHNlbGVjdG9yc1xuXG5cbiAgICAgICAgICAgICAgZWxzID0gKGNvbnRleHQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChlbHNbaV0pIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChlbHNbaV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIE5vZGUvZWxlbWVudFxuICAgICAgICBlbHNlIGlmIChzZWxlY3Rvci5ub2RlVHlwZSB8fCBzZWxlY3RvciA9PT0gd2luZG93IHx8IHNlbGVjdG9yID09PSBkb2N1bWVudCkge1xuICAgICAgICAgICAgYXJyLnB1c2goc2VsZWN0b3IpO1xuICAgICAgICAgIH0gLy9BcnJheSBvZiBlbGVtZW50cyBvciBpbnN0YW5jZSBvZiBEb21cbiAgICAgICAgICBlbHNlIGlmIChzZWxlY3Rvci5sZW5ndGggPiAwICYmIHNlbGVjdG9yWzBdLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzZWxlY3Rvci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHNlbGVjdG9yW2ldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICgkLmlzQXJyYXkoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgIGFyciA9IHNlbGVjdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IERvbShhcnIpO1xuICAgIH07XG5cbiAgICBEb20ucHJvdG90eXBlID0ge1xuICAgICAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCA/IGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJyA6IGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gJ2xvYWRpbmcnKSB7XG4gICAgICAgICAgY2FsbGJhY2soJCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCQpO1xuICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGNvbmNhdDogZW1wdHlBcnJheS5jb25jYXQsXG4gICAgICBlbXB0eTogZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIG1hcDogZnVuY3Rpb24gbWFwKGZuKSB7XG4gICAgICAgIHJldHVybiAkKCQubWFwKHRoaXMsIGZ1bmN0aW9uIChlbCwgaSkge1xuICAgICAgICAgIHJldHVybiBmbi5jYWxsKGVsLCBpLCBlbCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgICBzbGljZTogZnVuY3Rpb24gc2xpY2UoKSB7XG4gICAgICAgIHJldHVybiAkKF9zbGljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgIH0sXG4gICAgICAvLyBDbGFzc2VzIGFuZCBhdHRyaXV0ZXNcbiAgICAgIC8vIE5PVEU6IGVsZW1lbnQuY2xhc3NMaXN0IGF0dHJpYnVyZSBpcyBub3Qgc3VwcG9ydGVkIG9uIGFuZHJvaWQgMi4zISEhXG4gICAgICBhZGRDbGFzczogZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tqXS5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnICYmIGNsYXNzZXNbaV0gIT09ICcnKSB7XG4gICAgICAgICAgICAgIHRoaXNbal0uY2xhc3NMaXN0LmFkZChjbGFzc2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tqXS5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnICYmIGNsYXNzZXNbaV0gIT09ICcnKSB7XG4gICAgICAgICAgICAgIHRoaXNbal0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBoYXNDbGFzczogZnVuY3Rpb24gaGFzQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdID8gdGhpc1swXS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSA6IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiB0b2dnbGVDbGFzcyhjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tqXS5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHRoaXNbal0uY2xhc3NMaXN0LnRvZ2dsZShjbGFzc2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBjbG9zZXN0OiBmdW5jdGlvbiBjbG9zZXN0KHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpc1swXSxcbiAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBmYWxzZTtcblxuICAgICAgICBpZiAoaXNPYmplY3Qoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgY29sbGVjdGlvbiA9ICQoc2VsZWN0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKG5vZGUgJiYgIShjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5pbmRleE9mKG5vZGUpID49IDAgOiBtYXRjaGVzKG5vZGUsIHNlbGVjdG9yKSkpIHtcbiAgICAgICAgICBub2RlID0gbm9kZSAhPT0gY29udGV4dCAmJiBub2RlLm5vZGVUeXBlICE9PSBub2RlLkRPQ1VNRU5UX05PREUgJiYgbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICQobm9kZSk7XG4gICAgICB9LFxuICAgICAgYXR0cjogZnVuY3Rpb24gYXR0cihhdHRycywgdmFsdWUpIHtcbiAgICAgICAgdmFyIGF0dHI7XG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGF0dHJzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIC8vIEdldCBhdHRyXG4gICAgICAgICAgaWYgKHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhdHRyID0gdGhpc1swXS5nZXRBdHRyaWJ1dGUoYXR0cnMpO1xuICAgICAgICAgICAgcmV0dXJuIGF0dHIgfHwgYXR0ciA9PT0gJycgPyBhdHRyIDogdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTZXQgYXR0cnNcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgIC8vIFN0cmluZ1xuICAgICAgICAgICAgICB0aGlzW2ldLnNldEF0dHJpYnV0ZShhdHRycywgdmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gT2JqZWN0XG4gICAgICAgICAgICAgIGZvciAodmFyIGF0dHJOYW1lIGluIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgdGhpc1tpXVthdHRyTmFtZV0gPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgICAgICAgICAgdGhpc1tpXS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJzW2F0dHJOYW1lXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlbW92ZUF0dHI6IGZ1bmN0aW9uIHJlbW92ZUF0dHIoYXR0cikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzW2ldLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIHByb3A6IGZ1bmN0aW9uIHByb3AocHJvcHMsIHZhbHVlKSB7XG4gICAgICAgIHByb3BzID0gcHJvcE1hcFtwcm9wc10gfHwgcHJvcHM7XG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIHByb3BzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIC8vIEdldCBwcm9wXG4gICAgICAgICAgcmV0dXJuIHRoaXNbMF0gPyB0aGlzWzBdW3Byb3BzXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTZXQgcHJvcHNcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXNbaV1bcHJvcHNdID0gdmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2YWw6IGZ1bmN0aW9uIHZhbCh2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCAmJiB0aGlzWzBdLm11bHRpcGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5tYXAodGhpcy5maW5kKCdvcHRpb246Y2hlY2tlZCcpLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICByZXR1cm4gdi52YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0aGlzWzBdID8gdGhpc1swXS52YWx1ZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCAmJiB0aGlzWzBdLm11bHRpcGxlKSB7XG4gICAgICAgICAgJC5lYWNoKHRoaXNbMF0ub3B0aW9ucywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHZhbHVlLmluZGV4T2YodGhpcy52YWx1ZSkgIT0gLTE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzW2ldLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy9FdmVudHNcbiAgICAgIG9uOiBmdW5jdGlvbiBvbihldmVudE5hbWUsIHRhcmdldFNlbGVjdG9yLCBsaXN0ZW5lciwgY2FwdHVyZSkge1xuICAgICAgICB2YXIgYm91bmRMaXN0ZW5lcixcbiAgICAgICAgICAgIGVsbSxcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgZXZlbnRzID0gZXZlbnROYW1lLnNwbGl0KCcgJyksXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgajtcblxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVMaXZlRXZlbnQoZSkge1xuICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcblxuICAgICAgICAgIHdoaWxlICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICgkKHRhcmdldCkuaXModGFyZ2V0U2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGwodGFyZ2V0LCBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0ICE9PSB0aGlzID8gdGFyZ2V0LnBhcmVudE5vZGUgOiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU5hbWVzcGFjZXMoZWwsIG5hbWUsIGxpc3RlbmVyLCBjYXB0dXJlKSB7XG4gICAgICAgICAgdmFyIG5hbWVzcGFjZSA9IG5hbWUuc3BsaXQoJy4nKTtcblxuICAgICAgICAgIGlmICghZWwuRG9tTmFtZVNwYWNlcykge1xuICAgICAgICAgICAgZWwuRG9tTmFtZVNwYWNlcyA9IFtdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsLkRvbU5hbWVTcGFjZXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZVsxXSxcbiAgICAgICAgICAgIGV2ZW50OiBuYW1lc3BhY2VbMF0sXG4gICAgICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgICAgICAgICBjYXB0dXJlOiBjYXB0dXJlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihuYW1lc3BhY2VbMF0sIGxpc3RlbmVyLCBjYXB0dXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZWxtID0gdGhpc1tpXTtcblxuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHRhcmdldFNlbGVjdG9yKSB8fCB0YXJnZXRTZWxlY3RvciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIFVzdWFsIGV2ZW50c1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24odGFyZ2V0U2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgIGNhcHR1cmUgPSBsaXN0ZW5lciB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgbGlzdGVuZXIgPSB0YXJnZXRTZWxlY3RvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGV2ZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBldmVudCA9IGV2ZW50c1tqXTsgLy8gY2hlY2sgZm9yIG5hbWVzcGFjZXNcblxuICAgICAgICAgICAgICBpZiAoZXZlbnQuaW5kZXhPZignLicpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlTmFtZXNwYWNlcyhlbG0sIGV2ZW50LCBsaXN0ZW5lciwgY2FwdHVyZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBjYXB0dXJlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBMaXZlIGV2ZW50c1xuICAgICAgICAgICAgYm91bmRMaXN0ZW5lciA9IGhhbmRsZUxpdmVFdmVudC5iaW5kKGVsbSk7XG5cbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBldmVudHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgZXZlbnQgPSBldmVudHNbal07XG5cbiAgICAgICAgICAgICAgaWYgKCFlbG0uRG9tTGl2ZUxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGVsbS5Eb21MaXZlTGlzdGVuZXJzID0gW107XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBlbG0uRG9tTGl2ZUxpc3RlbmVycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgICAgICAgICAgICAgbGl2ZUxpc3RlbmVyOiBib3VuZExpc3RlbmVyXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmIChldmVudC5pbmRleE9mKCcuJykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVOYW1lc3BhY2VzKGVsbSwgZXZlbnQsIGJvdW5kTGlzdGVuZXIsIGNhcHR1cmUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBib3VuZExpc3RlbmVyLCBjYXB0dXJlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIG9mZjogZnVuY3Rpb24gb2ZmKGV2ZW50TmFtZSwgdGFyZ2V0U2VsZWN0b3IsIGxpc3RlbmVyLCBjYXB0dXJlKSB7XG4gICAgICAgIHZhciBlbG0sXG4gICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgIGV2ZW50cyxcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBqLFxuICAgICAgICAgICAgayxcbiAgICAgICAgICAgIGxpdmVMaXN0ZW5lcnMsXG4gICAgICAgICAgICB0aGF0ID0gdGhpcztcblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVFdmVudHMoZXZlbnQpIHtcbiAgICAgICAgICB2YXIgZWwsXG4gICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgIGosXG4gICAgICAgICAgICAgIGl0ZW0sXG4gICAgICAgICAgICAgIG5hbWVTcGFjZXMsXG4gICAgICAgICAgICAgIHBhcnRzID0gZXZlbnQuc3BsaXQoJy4nKSxcbiAgICAgICAgICAgICAgbmFtZSA9IHBhcnRzWzBdLFxuICAgICAgICAgICAgICBucyA9IHBhcnRzWzFdO1xuXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoYXQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGVsID0gdGhhdFtpXTtcbiAgICAgICAgICAgIG5hbWVTcGFjZXMgPSBlbC5Eb21OYW1lU3BhY2VzO1xuXG4gICAgICAgICAgICBpZiAobmFtZVNwYWNlcykge1xuICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbmFtZVNwYWNlcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBuYW1lU3BhY2VzW2pdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZXNwYWNlID09IG5zICYmIChpdGVtLmV2ZW50ID09IG5hbWUgfHwgIW5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGl0ZW0uZXZlbnQsIGl0ZW0ubGlzdGVuZXIsIGl0ZW0uY2FwdHVyZSk7XG4gICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSAvLyByZW1vdmUgdGhlIGV2ZW50cyBmcm9tIHRoZSBEb21OYW1lU3BhY2VzIGFycmF5XG5cblxuICAgICAgICAgICAgICBmb3IgKGogPSBuYW1lU3BhY2VzLmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWVTcGFjZXNbal0ucmVtb3ZlZCkge1xuICAgICAgICAgICAgICAgICAgbmFtZVNwYWNlcy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnRzID0gZXZlbnROYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGV2ZW50ID0gZXZlbnRzW2ldO1xuXG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGVsbSA9IHRoaXNbal07XG4gICAgICAgICAgICBsaXZlTGlzdGVuZXJzID0gZWxtLkRvbUxpdmVMaXN0ZW5lcnM7XG5cbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHRhcmdldFNlbGVjdG9yKSB8fCB0YXJnZXRTZWxlY3RvciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgLy8gVXN1YWwgZXZlbnRzXG4gICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHRhcmdldFNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgIGNhcHR1cmUgPSBsaXN0ZW5lciB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IHRhcmdldFNlbGVjdG9yO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGV2ZW50LmluZGV4T2YoJy4nKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBuYW1lc3BhY2UgZXZlbnRzXG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRzKGV2ZW50LnN1YnN0cigxKSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBjYXB0dXJlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gTGl2ZSBldmVudFxuICAgICAgICAgICAgICBpZiAobGl2ZUxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBsaXZlTGlzdGVuZXJzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICBpZiAobGl2ZUxpc3RlbmVyc1trXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxtLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpdmVMaXN0ZW5lcnNba10ubGl2ZUxpc3RlbmVyLCBjYXB0dXJlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZWxtLkRvbU5hbWVTcGFjZXMgJiYgZWxtLkRvbU5hbWVTcGFjZXMubGVuZ3RoICYmIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uIHRyaWdnZXIkMShldmVudE5hbWUsIGV2ZW50RGF0YSkge1xuICAgICAgICB2YXIgZXZlbnRzID0gZXZlbnROYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHRyaWdnZXIodGhpc1tqXSwgZXZlbnRzW2ldLCBldmVudERhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIC8vIFNpemluZy9TdHlsZXNcbiAgICAgIHdpZHRoOiBmdW5jdGlvbiB3aWR0aChkaW0pIHtcbiAgICAgICAgaWYgKGRpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY3NzKCd3aWR0aCcsIGRpbSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpc1swXSA9PT0gd2luZG93KSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXNbMF0gPT09IGRvY3VtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPiAwID8gcGFyc2VGbG9hdCh0aGlzLmNzcygnd2lkdGgnKSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaGVpZ2h0OiBmdW5jdGlvbiBoZWlnaHQoZGltKSB7XG4gICAgICAgIGlmIChkaW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNzcygnaGVpZ2h0JywgZGltKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzWzBdID09PSB3aW5kb3cpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXNbMF0gPT09IGRvY3VtZW50KSB7XG4gICAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5LFxuICAgICAgICAgICAgICBodG1sID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgIHJldHVybiBNYXRoLm1heChib2R5LnNjcm9sbEhlaWdodCwgYm9keS5vZmZzZXRIZWlnaHQsIGh0bWwuY2xpZW50SGVpZ2h0LCBodG1sLnNjcm9sbEhlaWdodCwgaHRtbC5vZmZzZXRIZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDAgPyBwYXJzZUZsb2F0KHRoaXMuY3NzKCdoZWlnaHQnKSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5uZXJXaWR0aDogZnVuY3Rpb24gaW5uZXJXaWR0aCgpIHtcbiAgICAgICAgdmFyIGVsbSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmICh0aGlzWzBdLmlubmVyV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzWzBdLmlubmVyV2lkdGg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpc1swXS5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgICAgICBzaWRlcyA9IFsnbGVmdCcsICdyaWdodCddO1xuICAgICAgICAgICAgc2lkZXMuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgICBzaXplIC09IHBhcnNlSW50KGVsbS5jc3MoY2FtZWxpemUoJ2JvcmRlci0nICsgc2lkZSArICctd2lkdGgnKSkgfHwgMCwgMTApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbm5lckhlaWdodDogZnVuY3Rpb24gaW5uZXJIZWlnaHQoKSB7XG4gICAgICAgIHZhciBlbG0gPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpZiAodGhpc1swXS5pbm5lckhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbMF0uaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpc1swXS5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgICAgc2lkZXMgPSBbJ3RvcCcsICdib3R0b20nXTtcbiAgICAgICAgICAgIHNpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgICAgc2l6ZSAtPSBwYXJzZUludChlbG0uY3NzKGNhbWVsaXplKCdib3JkZXItJyArIHNpZGUgKyAnLXdpZHRoJykpIHx8IDAsIDEwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgZWwgPSB0aGlzWzBdLFxuICAgICAgICAgICAgICBib3ggPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3A6IGJveC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQgLSBkb2MuY2xpZW50VG9wLFxuICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQgLSBkb2MuY2xpZW50TGVmdFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodGhpc1tpXS5zdHlsZS5kaXNwbGF5ID09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICB0aGlzW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzW2ldLCAnJykuZ2V0UHJvcGVydHlWYWx1ZShcImRpc3BsYXlcIikgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHRoaXNbaV0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgY2xvbmU6IGZ1bmN0aW9uIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc3R5bGVzOiBmdW5jdGlvbiBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdID8gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpc1swXSwgbnVsbCkgOiB1bmRlZmluZWQ7XG4gICAgICB9LFxuICAgICAgY3NzOiBmdW5jdGlvbiBjc3MocHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgIHZhciBpLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXNbMF0sXG4gICAgICAgICAgICBjc3MgPSAnJztcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbcHJvcGVydHldIHx8IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgJycpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShkYXNoZXJpemUocHJvcGVydHkpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjc3MgPSBkYXNoZXJpemUocHJvcGVydHkpICsgXCI6XCIgKyBtYXliZUFkZFB4KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoa2V5IGluIHByb3BlcnR5KSB7XG4gICAgICAgICAgICBpZiAoIXByb3BlcnR5W2tleV0gJiYgcHJvcGVydHlba2V5XSAhPT0gMCkge1xuICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXNbaV0uc3R5bGUucmVtb3ZlUHJvcGVydHkoZGFzaGVyaXplKGtleSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjc3MgKz0gZGFzaGVyaXplKGtleSkgKyAnOicgKyBtYXliZUFkZFB4KGtleSwgcHJvcGVydHlba2V5XSkgKyAnOyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5zdHlsZS5jc3NUZXh0ICs9ICc7JyArIGNzcztcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZWFjaDogZnVuY3Rpb24gZWFjaChjYWxsYmFjaykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2suYXBwbHkodGhpc1tpXSwgW2ksIHRoaXNbaV1dKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGZpbHRlcjogZnVuY3Rpb24gZmlsdGVyKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBtYXRjaGVkSXRlbXMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNbaV0sIGksIHRoaXNbaV0pKSB7XG4gICAgICAgICAgICAgIG1hdGNoZWRJdGVtcy5wdXNoKHRoaXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlcyh0aGlzW2ldLCBjYWxsYmFjaykpIHtcbiAgICAgICAgICAgIG1hdGNoZWRJdGVtcy5wdXNoKHRoaXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgRG9tKG1hdGNoZWRJdGVtcyk7XG4gICAgICB9LFxuICAgICAgaHRtbDogZnVuY3Rpb24gaHRtbChfaHRtbCkge1xuICAgICAgICBpZiAodHlwZW9mIF9odG1sID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiB0aGlzWzBdID8gdGhpc1swXS5pbm5lckhUTUwgOiB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbXB0eSgpO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzW2ldLmlubmVySFRNTCA9IF9odG1sO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGV4dDogZnVuY3Rpb24gdGV4dChfdGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIF90ZXh0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiB0aGlzWzBdID8gdGhpc1swXS50ZXh0Q29udGVudC50cmltKCkgOiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpc1tpXS50ZXh0Q29udGVudCA9IF90ZXh0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaXM6IGZ1bmN0aW9uIGlzKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDAgJiYgbWF0Y2hlcyh0aGlzWzBdLCBzZWxlY3Rvcik7XG4gICAgICB9LFxuICAgICAgbm90OiBmdW5jdGlvbiBub3Qoc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIG5vZGVzID0gW107XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpICYmIHNlbGVjdG9yLmNhbGwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdG9yLmNhbGwodGhpcywgaWR4KSkge1xuICAgICAgICAgICAgICBub2Rlcy5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBleGNsdWRlcyA9IHR5cGVvZiBzZWxlY3RvciA9PSAnc3RyaW5nJyA/IHRoaXMuZmlsdGVyKHNlbGVjdG9yKSA6IGxpa2VBcnJheShzZWxlY3RvcikgJiYgaXNGdW5jdGlvbihzZWxlY3Rvci5pdGVtKSA/IF9zbGljZS5jYWxsKHNlbGVjdG9yKSA6ICQoc2VsZWN0b3IpO1xuXG4gICAgICAgICAgaWYgKGlzT2JqZWN0KGV4Y2x1ZGVzKSkge1xuICAgICAgICAgICAgZXhjbHVkZXMgPSAkLm1hcChleGNsdWRlcywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlcy5pbmRleE9mKGVsKSA8IDApIHtcbiAgICAgICAgICAgICAgbm9kZXMucHVzaChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJChub2Rlcyk7XG4gICAgICB9LFxuICAgICAgaW5kZXhPZjogZnVuY3Rpb24gaW5kZXhPZihlbCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodGhpc1tpXSA9PT0gZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluZGV4OiBmdW5jdGlvbiBpbmRleChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50ID8gdGhpcy5pbmRleE9mKCQoZWxlbWVudClbMF0pIDogdGhpcy5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4T2YodGhpc1swXSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWR4KSB7XG4gICAgICAgIHJldHVybiBpZHggPT09IHVuZGVmaW5lZCA/IF9zbGljZS5jYWxsKHRoaXMpIDogdGhpc1tpZHggPj0gMCA/IGlkeCA6IGlkeCArIHRoaXMubGVuZ3RoXTtcbiAgICAgIH0sXG4gICAgICBlcTogZnVuY3Rpb24gZXEoaW5kZXgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCxcbiAgICAgICAgICAgIHJldHVybkluZGV4O1xuXG4gICAgICAgIGlmIChpbmRleCA+IGxlbmd0aCAtIDEpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IERvbShbXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgcmV0dXJuSW5kZXggPSBsZW5ndGggKyBpbmRleDtcbiAgICAgICAgICByZXR1cm4gcmV0dXJuSW5kZXggPCAwID8gbmV3IERvbShbXSkgOiBuZXcgRG9tKFt0aGlzW3JldHVybkluZGV4XV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBEb20oW3RoaXNbaW5kZXhdXSk7XG4gICAgICB9LFxuICAgICAgYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQobmV3Q2hpbGQpIHtcbiAgICAgICAgdmFyIGksIGo7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG5ld0NoaWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFyIHRlbXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRlbXBEaXYuaW5uZXJIVE1MID0gbmV3Q2hpbGQ7XG5cbiAgICAgICAgICAgIHdoaWxlICh0ZW1wRGl2LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgdGhpc1tpXS5hcHBlbmRDaGlsZCh0ZW1wRGl2LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3Q2hpbGQgaW5zdGFuY2VvZiBEb20pIHtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBuZXdDaGlsZC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB0aGlzW2ldLmFwcGVuZENoaWxkKG5ld0NoaWxkW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpc1tpXS5hcHBlbmRDaGlsZChuZXdDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgYXBwZW5kVG86IGZ1bmN0aW9uIGFwcGVuZFRvKHBhcmVudCkge1xuICAgICAgICAkKHBhcmVudCkuYXBwZW5kKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBwcmVwZW5kOiBmdW5jdGlvbiBwcmVwZW5kKG5ld0NoaWxkKSB7XG4gICAgICAgIHZhciBpLCBqO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBuZXdDaGlsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0ZW1wRGl2LmlubmVySFRNTCA9IG5ld0NoaWxkO1xuXG4gICAgICAgICAgICBmb3IgKGogPSB0ZW1wRGl2LmNoaWxkTm9kZXMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgICAgdGhpc1tpXS5pbnNlcnRCZWZvcmUodGVtcERpdi5jaGlsZE5vZGVzW2pdLCB0aGlzW2ldLmNoaWxkTm9kZXNbMF0pO1xuICAgICAgICAgICAgfSAvLyB0aGlzW2ldLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIG5ld0NoaWxkKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3Q2hpbGQgaW5zdGFuY2VvZiBEb20pIHtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBuZXdDaGlsZC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB0aGlzW2ldLmluc2VydEJlZm9yZShuZXdDaGlsZFtqXSwgdGhpc1tpXS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpc1tpXS5pbnNlcnRCZWZvcmUobmV3Q2hpbGQsIHRoaXNbaV0uY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgcHJlcGVuZFRvOiBmdW5jdGlvbiBwcmVwZW5kVG8ocGFyZW50KSB7XG4gICAgICAgICQocGFyZW50KS5wcmVwZW5kKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIGluc2VydEJlZm9yZShzZWxlY3Rvcikge1xuICAgICAgICB2YXIgYmVmb3JlID0gJChzZWxlY3Rvcik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGJlZm9yZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGJlZm9yZVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzW2ldLCBiZWZvcmVbMF0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYmVmb3JlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYmVmb3JlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIGJlZm9yZVtqXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzW2ldLmNsb25lTm9kZSh0cnVlKSwgYmVmb3JlW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBpbnNlcnRBZnRlcjogZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGFmdGVyID0gJChzZWxlY3Rvcik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGFmdGVyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgYWZ0ZXJbMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpc1tpXSwgYWZ0ZXJbMF0ubmV4dFNpYmxpbmcpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYWZ0ZXIubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhZnRlci5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBhZnRlcltqXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzW2ldLmNsb25lTm9kZSh0cnVlKSwgYWZ0ZXJbal0ubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHRoaXNbMF0ubmV4dEVsZW1lbnRTaWJsaW5nICYmICQodGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcpLmlzKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IERvbShbdGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmddKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgRG9tKFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXNbMF0ubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgRG9tKFt0aGlzWzBdLm5leHRFbGVtZW50U2libGluZ10pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb20oW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbmV3IERvbShbXSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBuZXh0QWxsOiBmdW5jdGlvbiBuZXh0QWxsKHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBuZXh0RWxzID0gW10sXG4gICAgICAgICAgICBlbCA9IHRoaXNbMF07XG5cbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgIHJldHVybiBuZXcgRG9tKFtdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChlbC5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKCQobmV4dCkuaXMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgIG5leHRFbHMucHVzaChuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dEVscy5wdXNoKG5leHQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsID0gbmV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgRG9tKG5leHRFbHMpO1xuICAgICAgfSxcbiAgICAgIHByZXY6IGZ1bmN0aW9uIHByZXYoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHRoaXNbMF0ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiAkKHRoaXNbMF0ucHJldmlvdXNFbGVtZW50U2libGluZykuaXMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgRG9tKFt0aGlzWzBdLnByZXZpb3VzRWxlbWVudFNpYmxpbmddKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgRG9tKFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXNbMF0ucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IERvbShbdGhpc1swXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IERvbShbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBuZXcgRG9tKFtdKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByZXZBbGw6IGZ1bmN0aW9uIHByZXZBbGwoc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIHByZXZFbHMgPSBbXTtcbiAgICAgICAgdmFyIGVsID0gdGhpc1swXTtcblxuICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBEb20oW10pO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICB2YXIgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmICgkKHByZXYpLmlzKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICBwcmV2RWxzLnB1c2gocHJldik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXZFbHMucHVzaChwcmV2KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbCA9IHByZXY7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IERvbShwcmV2RWxzKTtcbiAgICAgIH0sXG4gICAgICBwYXJlbnQ6IGZ1bmN0aW9uIHBhcmVudChzZWxlY3Rvcikge1xuICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh0aGlzW2ldLnBhcmVudE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICBpZiAoJCh0aGlzW2ldLnBhcmVudE5vZGUpLmlzKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaCh0aGlzW2ldLnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXJlbnRzLnB1c2godGhpc1tpXS5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJCgkLnVuaXF1ZShwYXJlbnRzKSk7XG4gICAgICB9LFxuICAgICAgcGFyZW50czogZnVuY3Rpb24gcGFyZW50cyhzZWxlY3Rvcikge1xuICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzW2ldLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgaWYgKCQocGFyZW50KS5pcyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkKCQudW5pcXVlKHBhcmVudHMpKTtcbiAgICAgIH0sXG4gICAgICBmaW5kOiBmdW5jdGlvbiBmaW5kKHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBmb3VuZEVsZW1lbnRzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gdGhpc1tpXS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZm91bmQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGZvdW5kRWxlbWVudHMucHVzaChmb3VuZFtqXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBEb20oZm91bmRFbGVtZW50cyk7XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IGZ1bmN0aW9uIGNoaWxkcmVuKHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjaGlsZE5vZGVzID0gdGhpc1tpXS5jaGlsZE5vZGVzO1xuXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaGlsZE5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzW2pdLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZE5vZGVzW2pdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZXNbal0ubm9kZVR5cGUgPT09IDEgJiYgJChjaGlsZE5vZGVzW2pdKS5pcyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkTm9kZXNbal0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBEb20oJC51bmlxdWUoY2hpbGRyZW4pKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHRoaXNbaV0ucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgdGhpc1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGFkZDogZnVuY3Rpb24gYWRkKCkge1xuICAgICAgICB2YXIgZG9tID0gdGhpcztcbiAgICAgICAgdmFyIGksIGo7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB0b0FkZCA9ICQoYXJndW1lbnRzW2ldKTtcblxuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0b0FkZC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgZG9tW2RvbS5sZW5ndGhdID0gdG9BZGRbal07XG4gICAgICAgICAgICBkb20ubGVuZ3RoKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRvbTtcbiAgICAgIH0sXG4gICAgICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZShlbG0pIHtcbiAgICAgICAgJChlbG0pLmluc2VydEJlZm9yZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgYWZ0ZXI6IGZ1bmN0aW9uIGFmdGVyKGVsbSkge1xuICAgICAgICAkKGVsbSkuaW5zZXJ0QWZ0ZXIodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIHNjcm9sbFRvcDogZnVuY3Rpb24gc2Nyb2xsVG9wKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFzU2Nyb2xsVG9wID0gJ3Njcm9sbFRvcCcgaW4gdGhpc1swXTtcblxuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBoYXNTY3JvbGxUb3AgPyB0aGlzWzBdLnNjcm9sbFRvcCA6IHRoaXNbMF0ucGFnZVlPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGhhc1Njcm9sbFRvcCA/IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IHZhbHVlO1xuICAgICAgICB9IDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5zY3JvbGxYLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHNjcm9sbExlZnQ6IGZ1bmN0aW9uIHNjcm9sbExlZnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYXNTY3JvbGxMZWZ0ID0gJ3Njcm9sbExlZnQnIGluIHRoaXNbMF07XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gaGFzU2Nyb2xsTGVmdCA/IHRoaXNbMF0uc2Nyb2xsTGVmdCA6IHRoaXNbMF0ucGFnZVhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGhhc1Njcm9sbExlZnQgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0gdmFsdWU7XG4gICAgICAgIH0gOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxUbyh2YWx1ZSwgdGhpcy5zY3JvbGxZKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY29udGVudHM6IGZ1bmN0aW9uIGNvbnRlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGksIHYpIHtcbiAgICAgICAgICByZXR1cm4gX3NsaWNlLmNhbGwodi5jaGlsZE5vZGVzKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgbmV4dFVudGlsOiBmdW5jdGlvbiBuZXh0VW50aWwoc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLFxuICAgICAgICAgICAgYXJyYXkgPSBbXTtcblxuICAgICAgICB3aGlsZSAobi5sZW5ndGggJiYgIW4uZmlsdGVyKHNlbGVjdG9yKS5sZW5ndGgpIHtcbiAgICAgICAgICBhcnJheS5wdXNoKG5bMF0pO1xuICAgICAgICAgIG4gPSBuLm5leHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkKGFycmF5KTtcbiAgICAgIH0sXG4gICAgICBwcmV2VW50aWw6IGZ1bmN0aW9uIHByZXZVbnRpbChzZWxlY3Rvcikge1xuICAgICAgICB2YXIgbiA9IHRoaXMsXG4gICAgICAgICAgICBhcnJheSA9IFtdO1xuXG4gICAgICAgIHdoaWxlIChuLmxlbmd0aCAmJiAhJChuKS5maWx0ZXIoc2VsZWN0b3IpLmxlbmd0aCkge1xuICAgICAgICAgIGFycmF5LnB1c2goblswXSk7XG4gICAgICAgICAgbiA9IG4ucHJldigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICQoYXJyYXkpO1xuICAgICAgfSxcbiAgICAgIGRldGFjaDogZnVuY3Rpb24gZGV0YWNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9OyAvLyBMaW5rIHRvIHByb3RvdHlwZVxuXG4gICAgJC5mbiA9IERvbS5wcm90b3R5cGU7XG4gICAgcmV0dXJuICQ7XG4gIH0oKTsgLy8gRXhwb3J0IHRvIGxvY2FsIHNjb3BlXG5cblxuICB2YXIgJCA9IERvbTsgLy8gRXhwb3J0IHRvIG1vYmlzY3JvbGxcblxuICBtb2Jpc2Nyb2xsLiQgPSBEb207IC8vIERPTSBMaWJyYXJ5IFV0aWxpdGVzXG5cbiAgJC5pbkFycmF5ID0gZnVuY3Rpb24gKGVsZW0sIGFycmF5LCBpKSB7XG4gICAgcmV0dXJuIGVtcHR5QXJyYXkuaW5kZXhPZi5jYWxsKGFycmF5LCBlbGVtLCBpKTtcbiAgfTtcblxuICAkLmV4dGVuZCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICB2YXIgZGVlcCxcbiAgICAgICAgYXJncyA9IF9zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgICBpZiAodHlwZW9mIHRhcmdldCA9PSAnYm9vbGVhbicpIHtcbiAgICAgIGRlZXAgPSB0YXJnZXQ7XG4gICAgICB0YXJnZXQgPSBhcmdzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0ID0gdGFyZ2V0IHx8IHt9O1xuICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICBleHRlbmQodGFyZ2V0LCBhcmcsIGRlZXApO1xuICAgIH0pO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgJC5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuICAkLmlzQXJyYXkgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoYXJyKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcblxuICAkLmlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgb2JqICE9PSBudWxsICYmIG9iaiAhPT0gb2JqLndpbmRvdyAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PSBPYmplY3QucHJvdG90eXBlO1xuICB9O1xuXG4gICQuZWFjaCA9IGZ1bmN0aW9uIChvYmosIGNhbGxiYWNrKSB7XG4gICAgdmFyIGksIHByb3A7XG5cbiAgICBpZiAoIWlzT2JqZWN0KG9iaikgfHwgIWNhbGxiYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCQuaXNBcnJheShvYmopIHx8IG9iaiBpbnN0YW5jZW9mIERvbSkge1xuICAgICAgLy8gQXJyYXlcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwob2JqW2ldLCBpLCBvYmpbaV0pID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9iamVjdFxuICAgICAgZm9yIChwcm9wIGluIG9iaikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkgJiYgcHJvcCAhPT0gJ2xlbmd0aCcpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2suY2FsbChvYmpbcHJvcF0sIHByb3AsIG9ialtwcm9wXSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAkLnVuaXF1ZSA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgICB2YXIgdW5pcXVlID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHVuaXF1ZS5pbmRleE9mKGFycltpXSkgPT09IC0xKSB7XG4gICAgICAgIHVuaXF1ZS5wdXNoKGFycltpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuaXF1ZTtcbiAgfTtcblxuICAkLm1hcCA9IGZ1bmN0aW9uIChlbGVtZW50cywgY2FsbGJhY2spIHtcbiAgICB2YXIgdmFsdWUsXG4gICAgICAgIHZhbHVlcyA9IFtdLFxuICAgICAgICBpLFxuICAgICAgICBrZXk7XG5cbiAgICBpZiAobGlrZUFycmF5KGVsZW1lbnRzKSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gY2FsbGJhY2soZWxlbWVudHNbaV0sIGkpO1xuXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGtleSBpbiBlbGVtZW50cykge1xuICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrKGVsZW1lbnRzW2tleV0sIGtleSk7XG5cbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcy5sZW5ndGggPiAwID8gJC5mbi5jb25jYXQuYXBwbHkoW10sIHZhbHVlcykgOiB2YWx1ZXM7XG4gIH07XG5cbiAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cbiAgZnVuY3Rpb24gaXNTdHJpbmcocykge1xuICAgIHJldHVybiB0eXBlb2YgcyA9PT0gJ3N0cmluZyc7XG4gIH1cblxuICBmdW5jdGlvbiBjb25zdHJhaW4odmFsLCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKHZhbCwgbWF4KSk7XG4gIH1cblxuICBmdW5jdGlvbiB2aWJyYXRlKHRpbWUpIHtcbiAgICBpZiAoJ3ZpYnJhdGUnIGluIG5hdmlnYXRvcikge1xuICAgICAgbmF2aWdhdG9yLnZpYnJhdGUodGltZSB8fCA1MCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UGVyY2VudCh2LCBtaW4sIG1heCkge1xuICAgIHJldHVybiAodiAtIG1pbikgKiAxMDAgLyAobWF4IC0gbWluKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJvb2xBdHRyKGF0dHIsIGRlZiwgJGVsbSkge1xuICAgIHZhciB2ID0gJGVsbS5hdHRyKGF0dHIpO1xuICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gJycgPyBkZWYgOiB2ID09PSAndHJ1ZSc7XG4gIH1cblxuICB2YXIgdGFwcGVkID0gMDtcbiAgdmFyIGFsbG93UXVpY2s7XG5cbiAgZnVuY3Rpb24gcHJldmVudENsaWNrKCkge1xuICAgIC8vIFByZXZlbnQgZ2hvc3QgY2xpY2tcbiAgICB0YXBwZWQrKztcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRhcHBlZC0tO1xuICAgIH0sIDUwMCk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyQ2xpY2soZXYsIGNvbnRyb2wpIHtcbiAgICAvLyBQcmV2ZW50IGR1cGxpY2F0ZSB0cmlnZ2VycyBvbiB0aGUgc2FtZSBlbGVtZW50XG4gICAgLy8gZS5nLiBhIGZvcm0gY2hlY2tib3ggaW5zaWRlIGEgbGlzdHZpZXcgaXRlbVxuICAgIGlmIChjb250cm9sLm1ic2NDbGljaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB0b3VjaCA9IChldi5vcmlnaW5hbEV2ZW50IHx8IGV2KS5jaGFuZ2VkVG91Y2hlc1swXSxcbiAgICAgICAgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gICAgZXZ0LmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIHRydWUsIHdpbmRvdywgMSwgdG91Y2guc2NyZWVuWCwgdG91Y2guc2NyZWVuWSwgdG91Y2guY2xpZW50WCwgdG91Y2guY2xpZW50WSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xuICAgIGV2dC5pc01ic2NUYXAgPSB0cnVlOyAvLyBQcmV2ZW50IGlvbmljIHRvIGJ1c3Qgb3VyIGNsaWNrXG4gICAgLy8gVGhpcyB3b3JrcyBmb3IgSW9uaWMgMSAtIDMsIG5vdCBzdXJlIGFib3V0IDRcblxuICAgIGV2dC5pc0lvbmljVGFwID0gdHJ1ZTsgLy8gVGhpcyB3aWxsIGFsbG93IGEgY2xpY2sgZmlyZWQgdG9nZXRoZXIgd2l0aCB0aGlzIGNsaWNrXG4gICAgLy8gV2UgbmVlZCB0aGlzLCBiZWNhdXNlIGNsaWNraW5nIG9uIGEgbGFiZWwgd2lsbCB0cmlnZ2VyIGEgY2xpY2tcbiAgICAvLyBvbiB0aGUgYXNzb2NpYXRlZCBpbnB1dCBhcyB3ZWxsLCB3aGljaCBzaG91bGQgbm90IGJlIGJ1c3RlZFxuXG4gICAgYWxsb3dRdWljayA9IHRydWU7XG4gICAgY29udHJvbC5tYnNjQ2hhbmdlID0gdHJ1ZTtcbiAgICBjb250cm9sLm1ic2NDbGljayA9IHRydWU7XG4gICAgY29udHJvbC5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgYWxsb3dRdWljayA9IGZhbHNlOyAvLyBQcmV2ZW50IGdob3N0IGNsaWNrXG5cbiAgICBwcmV2ZW50Q2xpY2soKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlbGV0ZSBjb250cm9sLm1ic2NDbGljaztcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvb3JkKGUsIGMsIHBhZ2UpIHtcbiAgICB2YXIgZXYgPSBlLm9yaWdpbmFsRXZlbnQgfHwgZSxcbiAgICAgICAgcHJvcCA9IChwYWdlID8gJ3BhZ2UnIDogJ2NsaWVudCcpICsgYzsgLy8gTXVsdGkgdG91Y2ggc3VwcG9ydFxuXG4gICAgaWYgKGV2LnRhcmdldFRvdWNoZXMgJiYgZXYudGFyZ2V0VG91Y2hlc1swXSkge1xuICAgICAgcmV0dXJuIGV2LnRhcmdldFRvdWNoZXNbMF1bcHJvcF07XG4gICAgfVxuXG4gICAgaWYgKGV2LmNoYW5nZWRUb3VjaGVzICYmIGV2LmNoYW5nZWRUb3VjaGVzWzBdKSB7XG4gICAgICByZXR1cm4gZXYuY2hhbmdlZFRvdWNoZXNbMF1bcHJvcF07XG4gICAgfVxuXG4gICAgcmV0dXJuIGVbcHJvcF07XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb250cm9sVHlwZSgkZWxtKSB7XG4gICAgdmFyIGF0dHJzID0gWydzd2l0Y2gnLCAncmFuZ2UnLCAncmF0aW5nJywgJ3NlZ21lbnRlZCcsICdzdGVwcGVyJ107XG4gICAgdmFyIGVsbSA9ICRlbG1bMF07XG4gICAgdmFyIHJvbGUgPSAkZWxtLmF0dHIoJ2RhdGEtcm9sZScpO1xuICAgIHZhciB0eXBlID0gJGVsbS5hdHRyKCd0eXBlJykgfHwgZWxtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAoLyhzd2l0Y2h8cmFuZ2V8cmF0aW5nfHNlZ21lbnRlZHxzdGVwcGVyfHNlbGVjdCkvLnRlc3Qocm9sZSkpIHtcbiAgICAgIHR5cGUgPSByb2xlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICgkZWxtLmlzKCdbbWJzYy0nICsgYXR0cnNbaV0gKyAnXScpKSB7XG4gICAgICAgICAgdHlwZSA9IGF0dHJzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cblxuICBmdW5jdGlvbiBhY3RpdmF0ZUNvbnRyb2woY29udHJvbCwgdHlwZSwgZXYpIHtcbiAgICBjb250cm9sLmZvY3VzKCk7XG5cbiAgICBpZiAoLyhidXR0b258c3VibWl0fGNoZWNrYm94fHN3aXRjaHxyYWRpbykvLnRlc3QodHlwZSkpIHtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgaWYgKCEvc2VsZWN0Ly50ZXN0KHR5cGUpKSB7XG4gICAgICB0cmlnZ2VyQ2xpY2soZXYsIGNvbnRyb2wpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRhcCh0aGF0LCBlbCwgaGFuZGxlciwgcHJldmVudCwgdG9sZXJhbmNlLCB0aW1lKSB7XG4gICAgdmFyIHN0YXJ0WCxcbiAgICAgICAgc3RhcnRZLFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIG1vdmVkLFxuICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICQgPSBtb2Jpc2Nyb2xsLiQsXG4gICAgICAgICRlbG0gPSAkKGVsKTtcbiAgICB0b2xlcmFuY2UgPSB0b2xlcmFuY2UgfHwgOTtcblxuICAgIGZ1bmN0aW9uIG9uU3RhcnQoZXYpIHtcbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIC8vIENhbid0IGFsd2F5cyBjYWxsIHByZXZlbnREZWZhdWx0IGhlcmUsIGl0IGtpbGxzIHBhZ2Ugc2Nyb2xsXG4gICAgICAgIC8vIGlmIChwcmV2ZW50KSB7XG4gICAgICAgIC8vICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyB9XG4gICAgICAgIHRhcmdldCA9IHRoaXM7XG4gICAgICAgIHN0YXJ0WCA9IGdldENvb3JkKGV2LCAnWCcpO1xuICAgICAgICBzdGFydFkgPSBnZXRDb29yZChldiwgJ1knKTtcbiAgICAgICAgbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbk1vdmUoZXYpIHtcbiAgICAgIC8vIElmIG1vdmVtZW50IGlzIG1vcmUgdGhhbiAyMHB4LCBkb24ndCBmaXJlIHRoZSBjbGljayBldmVudCBoYW5kbGVyXG4gICAgICBpZiAodGFyZ2V0ICYmICFtb3ZlZCAmJiAoTWF0aC5hYnMoZ2V0Q29vcmQoZXYsICdYJykgLSBzdGFydFgpID4gdG9sZXJhbmNlIHx8IE1hdGguYWJzKGdldENvb3JkKGV2LCAnWScpIC0gc3RhcnRZKSA+IHRvbGVyYW5jZSkpIHtcbiAgICAgICAgbW92ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRW5kKGV2KSB7XG4gICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0aW1lICYmIG5ldyBEYXRlKCkgLSBzdGFydFRpbWUgPCAxMDAgfHwgIW1vdmVkKSB7XG4gICAgICAgICAgLy8gZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAvLyBoYW5kbGVyLmNhbGwodGFyZ2V0LCBldiwgdGhhdCk7XG4gICAgICAgICAgdHJpZ2dlckNsaWNrKGV2LCBldi50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByZXZlbnRDbGljaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25DbGljayhldikge1xuICAgICAgaWYgKHByZXZlbnQpIHtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0gLy8gSWYgaGFuZGxlciB3YXMgbm90IGNhbGxlZCBvbiB0b3VjaGVuZCwgY2FsbCBpdCBvbiBjbGljaztcblxuXG4gICAgICBoYW5kbGVyLmNhbGwodGhpcywgZXYsIHRoYXQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQ2FuY2VsKCkge1xuICAgICAgdGFyZ2V0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgJGVsbS5lYWNoKGZ1bmN0aW9uIChpLCBlbG0pIHtcbiAgICAgIGlmICh0aGF0LnNldHRpbmdzLnRhcCkge1xuICAgICAgICBsaXN0ZW4oZWxtLCAndG91Y2hzdGFydCcsIG9uU3RhcnQsIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBsaXN0ZW4oZWxtLCAndG91Y2hjYW5jZWwnLCBvbkNhbmNlbCk7XG4gICAgICAgIGxpc3RlbihlbG0sICd0b3VjaG1vdmUnLCBvbk1vdmUsIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBsaXN0ZW4oZWxtLCAndG91Y2hlbmQnLCBvbkVuZCk7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbihlbG0sICdjbGljaycsIG9uQ2xpY2spO1xuXG4gICAgICBlbG0uX19tYnNjT2ZmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB1bmxpc3RlbihlbG0sICd0b3VjaHN0YXJ0Jywgb25TdGFydCwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHVubGlzdGVuKGVsbSwgJ3RvdWNoY2FuY2VsJywgb25DYW5jZWwpO1xuICAgICAgICB1bmxpc3RlbihlbG0sICd0b3VjaG1vdmUnLCBvbk1vdmUsIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB1bmxpc3RlbihlbG0sICd0b3VjaGVuZCcsIG9uRW5kKTtcbiAgICAgICAgdW5saXN0ZW4oZWxtLCAnY2xpY2snLCBvbkNsaWNrKTtcbiAgICAgICAgZGVsZXRlIGVsbS5fX21ic2NPZmY7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdGFwT2ZmKCRlbG0pIHtcbiAgICBpZiAoJGVsbSAmJiAkZWxtWzBdICYmICRlbG1bMF0uX19tYnNjT2ZmKSB7XG4gICAgICAkZWxtWzBdLl9fbWJzY09mZigpO1xuICAgIH1cbiAgfSAvLyBQcmV2ZW50IHN0YW5kYXJkIGJlaGF2aW91ciBvbiBib2R5IGNsaWNrXG5cblxuICBmdW5jdGlvbiBidXN0Q2xpY2soZXYpIHtcbiAgICAvLyBUZXh0YXJlYSBuZWVkcyB0aGUgbW91c2Vkb3duIGV2ZW50XG4gICAgaWYgKHRhcHBlZCAmJiAhYWxsb3dRdWljayAmJiAhZXYuaXNNYnNjVGFwICYmICEoZXYudGFyZ2V0Lm5vZGVOYW1lID09ICdURVhUQVJFQScgJiYgZXYudHlwZSA9PSAnbW91c2Vkb3duJykpIHtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNCcm93c2VyKSB7XG4gICAgWydtb3VzZW92ZXInLCAnbW91c2Vkb3duJywgJ21vdXNldXAnLCAnY2xpY2snXS5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldiwgYnVzdENsaWNrLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIGlmIChvcyA9PSAnYW5kcm9pZCcgJiYgbWFqb3JWZXJzaW9uIDwgNSkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIGlmICh0YXBwZWQgJiYgZXYudGFyZ2V0LnR5cGUgPT0gJ2NoZWNrYm94JyAmJiAhZXYudGFyZ2V0Lm1ic2NDaGFuZ2UpIHtcbiAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIGV2LnRhcmdldC5tYnNjQ2hhbmdlO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyohXG4gICAqIE1vYmlzY3JvbGwgdjQuMTAuOVxuICAgKiBodHRwOi8vbW9iaXNjcm9sbC5jb21cbiAgICpcbiAgICpcbiAgICogQ29weXJpZ2h0IDIwMTAtMjAxOCwgQWNpZCBNZWRpYVxuICAgKlxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRXaWR0aChlbCkge1xuICAgIHJldHVybiBlbFswXS5pbm5lcldpZHRoIHx8IGVsLmlubmVyV2lkdGgoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRoZW1lTmFtZShzKSB7XG4gICAgdmFyIHRoZW1lTmFtZSA9IHMudGhlbWUsXG4gICAgICAgIHRoZW1lVmFyaWFudCA9IHMudGhlbWVWYXJpYW50O1xuXG4gICAgaWYgKHRoZW1lTmFtZSA9PSAnYXV0bycgfHwgIXRoZW1lTmFtZSkge1xuICAgICAgdGhlbWVOYW1lID0gbXMuYXV0b1RoZW1lO1xuICAgIH1cblxuICAgIGlmICh0aGVtZU5hbWUgPT0gJ2RlZmF1bHQnKSB7XG4gICAgICB0aGVtZU5hbWUgPSAnbW9iaXNjcm9sbCc7XG4gICAgfVxuXG4gICAgaWYgKCh0aGVtZVZhcmlhbnQgPT09ICdkYXJrJyB8fCBpc0RhcmsgJiYgdGhlbWVWYXJpYW50ID09PSAnYXV0bycpICYmIG1zLnRoZW1lcy5mb3JtW3RoZW1lTmFtZSArICctZGFyayddKSB7XG4gICAgICB0aGVtZU5hbWUgPSB0aGVtZU5hbWUgKyAnLWRhcmsnO1xuICAgIH0gZWxzZSBpZiAodGhlbWVWYXJpYW50ID09PSAnbGlnaHQnICYmIC8uKy1kYXJrJC8udGVzdCh0aGVtZU5hbWUpKSB7XG4gICAgICB0aGVtZU5hbWUgPSB0aGVtZU5hbWUucmVwbGFjZSgvLWRhcmskLywgJycpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGVtZU5hbWU7XG4gIH1cblxuICBmdW5jdGlvbiBhdXRvSW5pdChzZWxlY3RvciwgQ29tcG9uZW50LCBoYXNSZWZyZXNoKSB7XG4gICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgJCQxKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCQxKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBuZXcgQ29tcG9uZW50KHRoaXMsIHt9KTtcbiAgICAgICAgfSk7XG4gICAgICAgICQkMShkb2N1bWVudCkub24oJ21ic2MtZW5oYW5jZScsIGZ1bmN0aW9uIChldiwgc2V0dGluZ3MpIHtcbiAgICAgICAgICBpZiAoJCQxKGV2LnRhcmdldCkuaXMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICBuZXcgQ29tcG9uZW50KGV2LnRhcmdldCwgc2V0dGluZ3MgfHwge30pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkJDEoc2VsZWN0b3IsIGV2LnRhcmdldCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIG5ldyBDb21wb25lbnQodGhpcywgc2V0dGluZ3MgfHwge30pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaGFzUmVmcmVzaCkge1xuICAgICAgICAgICQkMShkb2N1bWVudCkub24oJ21ic2MtcmVmcmVzaCcsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgdmFyIGluc3Q7XG5cbiAgICAgICAgICAgIGlmICgkJDEoZXYudGFyZ2V0KS5pcyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgaW5zdCA9IGluc3RhbmNlc1tldi50YXJnZXQuaWRdO1xuXG4gICAgICAgICAgICAgIGlmIChpbnN0KSB7XG4gICAgICAgICAgICAgICAgaW5zdC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICQkMShzZWxlY3RvciwgZXYudGFyZ2V0KS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpbnN0ID0gaW5zdGFuY2VzW3RoaXMuaWRdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluc3QpIHtcbiAgICAgICAgICAgICAgICAgIGluc3QucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHZhciBtcyxcbiAgICAgICQkMSA9IG1vYmlzY3JvbGwuJCxcbiAgICAgIGlkID0gK25ldyBEYXRlKCksXG4gICAgICBpbnN0YW5jZXMgPSB7fSxcbiAgICAgIGNsYXNzZXMgPSB7fSxcbiAgICAgIGVtcHR5ID0ge30sXG4gICAgICBicmVha3BvaW50cyA9IHtcbiAgICB4c21hbGw6IDAsXG4gICAgc21hbGw6IDU3NixcbiAgICBtZWRpdW06IDc2OCxcbiAgICBsYXJnZTogOTkyLFxuICAgIHhsYXJnZTogMTIwMFxuICB9LFxuICAgICAgZXh0ZW5kJDEgPSAkJDEuZXh0ZW5kO1xuICBleHRlbmQkMSh1dGlsLCB7XG4gICAgZ2V0Q29vcmQ6IGdldENvb3JkLFxuICAgIHByZXZlbnRDbGljazogcHJldmVudENsaWNrLFxuICAgIHZpYnJhdGU6IHZpYnJhdGVcbiAgfSk7XG4gIG1zID0gZXh0ZW5kJDEobW9iaXNjcm9sbCwge1xuICAgICQ6ICQkMSxcbiAgICB2ZXJzaW9uOiAnNC4xMC45JyxcbiAgICBhdXRvVGhlbWU6ICdtb2Jpc2Nyb2xsJyxcbiAgICB0aGVtZXM6IHtcbiAgICAgIGZvcm06IHt9LFxuICAgICAgcGFnZToge30sXG4gICAgICBmcmFtZToge30sXG4gICAgICBzY3JvbGxlcjoge30sXG4gICAgICBsaXN0dmlldzoge30sXG4gICAgICBuYXZpZ2F0aW9uOiB7fSxcbiAgICAgIHByb2dyZXNzOiB7fSxcbiAgICAgIGNhcmQ6IHt9XG4gICAgfSxcbiAgICBwbGF0Zm9ybToge1xuICAgICAgbmFtZTogb3MsXG4gICAgICBtYWpvclZlcnNpb246IG1ham9yVmVyc2lvbixcbiAgICAgIG1pbm9yVmVyc2lvbjogbWlub3JWZXJzaW9uXG4gICAgfSxcbiAgICBpMThuOiB7fSxcbiAgICBpbnN0YW5jZXM6IGluc3RhbmNlcyxcbiAgICBjbGFzc2VzOiBjbGFzc2VzLFxuICAgIHV0aWw6IHV0aWwsXG4gICAgc2V0dGluZ3M6IHt9LFxuICAgIHNldERlZmF1bHRzOiBmdW5jdGlvbiBzZXREZWZhdWx0cyhvKSB7XG4gICAgICBleHRlbmQkMSh0aGlzLnNldHRpbmdzLCBvKTtcbiAgICB9LFxuICAgIGN1c3RvbVRoZW1lOiBmdW5jdGlvbiBjdXN0b21UaGVtZShuYW1lLCBiYXNlVGhlbWUpIHtcbiAgICAgIHZhciBpLFxuICAgICAgICAgIHRoZW1lcyA9IG1vYmlzY3JvbGwudGhlbWVzLFxuICAgICAgICAgIGNvbXBzID0gWydmcmFtZScsICdzY3JvbGxlcicsICdsaXN0dmlldycsICduYXZpZ2F0aW9uJywgJ2Zvcm0nLCAncGFnZScsICdwcm9ncmVzcycsICdjYXJkJ107XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjb21wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGVtZXNbY29tcHNbaV1dW25hbWVdID0gZXh0ZW5kJDEoe30sIHRoZW1lc1tjb21wc1tpXV1bYmFzZVRoZW1lXSwge1xuICAgICAgICAgIGJhc2VUaGVtZTogYmFzZVRoZW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIEJhc2UgPSBmdW5jdGlvbiBCYXNlKGVsLCBzZXR0aW5ncykge1xuICAgIHZhciBjdHgsXG4gICAgICAgIGxhbmcsXG4gICAgICAgIHByZXNldCxcbiAgICAgICAgcmVzcCxcbiAgICAgICAgcyxcbiAgICAgICAgdGhlbWUsXG4gICAgICAgIHRoZW1lTmFtZSxcbiAgICAgICAgdHJpZ2dlcixcbiAgICAgICAgZGVmYXVsdHMsXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuICAgIHRoYXQuc2V0dGluZ3MgPSB7fTtcbiAgICB0aGF0LmVsZW1lbnQgPSBlbDtcbiAgICB0aGF0Ll9pbml0ID0gbm9vcDtcbiAgICB0aGF0Ll9kZXN0cm95ID0gbm9vcDtcbiAgICB0aGF0Ll9wcm9jZXNzU2V0dGluZ3MgPSBub29wO1xuXG4gICAgdGhhdC5fY2hlY2tSZXNwID0gZnVuY3Rpb24gKHdpZHRoKSB7XG4gICAgICBpZiAodGhhdCAmJiB0aGF0Ll9yZXNwb25zaXZlKSB7XG4gICAgICAgIHZhciBuZXdSZXNwID0gZ2V0UmVzcG9uc2l2ZVNldHRpbmdzKHdpZHRoKTtcblxuICAgICAgICBpZiAocmVzcCAhPT0gbmV3UmVzcCkge1xuICAgICAgICAgIHJlc3AgPSBuZXdSZXNwO1xuICAgICAgICAgIHRoYXQuaW5pdCh7fSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhhdC5fZ2V0UmVzcENvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJCQxKHMuY29udGV4dCA9PSAnYm9keScgPyB3aW5kb3cgOiBzLmNvbnRleHQpO1xuICAgIH07XG5cbiAgICB0aGF0LmluaXQgPSBmdW5jdGlvbiAobmV3U2V0dGluZ3MsIG5ld1ZhbHVlKSB7XG4gICAgICB2YXIga2V5LCB2YWx1ZTsgLy8gSW4gY2FzZSBvZiBzZXR0aW5ncyB1cGRhdGUgc2F2ZSB0aGUgb2xkIHZhbHVlXG5cbiAgICAgIGlmIChuZXdTZXR0aW5ncyAmJiB0aGF0LmdldFZhbCkge1xuICAgICAgICB2YWx1ZSA9IHRoYXQuZ2V0VmFsKCk7XG4gICAgICB9IC8vIFJlc2V0IHNldHRpbmdzIG9iamVjdFxuXG5cbiAgICAgIGZvciAoa2V5IGluIHRoYXQuc2V0dGluZ3MpIHtcbiAgICAgICAgZGVsZXRlIHRoYXQuc2V0dGluZ3Nba2V5XTtcbiAgICAgIH1cblxuICAgICAgcyA9IHRoYXQuc2V0dGluZ3M7IC8vIFVwZGF0ZSBvcmlnaW5hbCB1c2VyIHNldHRpbmdzXG5cbiAgICAgIGV4dGVuZCQxKHNldHRpbmdzLCBuZXdTZXR0aW5ncyk7IC8vIExvYWQgdXNlciBkZWZhdWx0c1xuXG4gICAgICBpZiAodGhhdC5faGFzRGVmKSB7XG4gICAgICAgIGRlZmF1bHRzID0gbXMuc2V0dGluZ3M7XG4gICAgICB9IC8vIENyZWF0ZSBzZXR0aW5ncyBvYmplY3RcblxuXG4gICAgICBleHRlbmQkMShzLCB0aGF0Ll9kZWZhdWx0cywgZGVmYXVsdHMsIHNldHRpbmdzKTtcbiAgICAgIGN0eCA9IHRoYXQuX2dldFJlc3BDb250KCk7XG5cbiAgICAgIGlmICh0aGF0Ll9yZXNwb25zaXZlKSB7XG4gICAgICAgIGlmICghcmVzcCkge1xuICAgICAgICAgIHJlc3AgPSBnZXRSZXNwb25zaXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4dGVuZCQxKHMsIHJlc3ApO1xuICAgICAgfSAvLyBHZXQgdGhlbWUgZGVmYXVsdHNcblxuXG4gICAgICBpZiAodGhhdC5faGFzVGhlbWUpIHtcbiAgICAgICAgdGhlbWVOYW1lID0gZ2V0VGhlbWVOYW1lKHMpO1xuICAgICAgICBzZXR0aW5ncy50aGVtZSA9IHRoZW1lTmFtZTtcbiAgICAgICAgdGhlbWUgPSBtcy50aGVtZXNbdGhhdC5fY2xhc3NdID8gbXMudGhlbWVzW3RoYXQuX2NsYXNzXVt0aGVtZU5hbWVdIDoge307XG4gICAgICB9IC8vIEdldCBsYW5ndWFnZSBkZWZhdWx0c1xuXG5cbiAgICAgIGlmICh0aGF0Ll9oYXNMYW5nKSB7XG4gICAgICAgIGxhbmcgPSBtcy5pMThuW3MubGFuZ107XG4gICAgICB9IC8vIFVwZGF0ZSBzZXR0aW5ncyBvYmplY3RcblxuXG4gICAgICBleHRlbmQkMShzLCB0aGVtZSwgbGFuZywgZGVmYXVsdHMsIHNldHRpbmdzLCByZXNwKTtcblxuICAgICAgdGhhdC5fcHJvY2Vzc1NldHRpbmdzKHJlc3AgfHwge30pOyAvLyBMb2FkIHByZXNldCBzZXR0aW5nc1xuXG5cbiAgICAgIGlmICh0aGF0Ll9wcmVzZXRzKSB7XG4gICAgICAgIHByZXNldCA9IHRoYXQuX3ByZXNldHNbcy5wcmVzZXRdO1xuXG4gICAgICAgIGlmIChwcmVzZXQpIHtcbiAgICAgICAgICBwcmVzZXQgPSBwcmVzZXQuY2FsbChlbCwgdGhhdCwgc2V0dGluZ3MsIHJlc3ApO1xuICAgICAgICAgIGV4dGVuZCQxKHMsIHByZXNldCwgc2V0dGluZ3MsIHJlc3ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoYXQuX2luaXQobmV3U2V0dGluZ3MpOyAvLyBJbiBjYXNlIG9mIHNldHRpbmdzIHVwZGF0ZSByZXNldCB0aGUgdmFsdWUuXG4gICAgICAvLyBUaGlzIGlzIG5lZWRlZCB0byBhZGFwdCB0aGUgdmFsdWUgZm9yIHRoZSB1cGRhdGVkIHNldHRpbmdzXG4gICAgICAvLyBFLmcuIG1pbi9tYXgsIGRhdGUgZm9ybWF0LCBldGMuXG5cblxuICAgICAgaWYgKG5ld1NldHRpbmdzICYmIHRoYXQuc2V0VmFsKSB7XG4gICAgICAgIHRoYXQuc2V0VmFsKG5ld1ZhbHVlID09PSB1bmRlZmluZWQgPyB2YWx1ZSA6IG5ld1ZhbHVlLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdHJpZ2dlcignb25Jbml0Jyk7XG4gICAgfTtcblxuICAgIHRoYXQuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGF0KSB7XG4gICAgICAgIHRoYXQuX2Rlc3Ryb3koKTtcblxuICAgICAgICB0cmlnZ2VyKCdvbkRlc3Ryb3knKTsgLy8gRGVsZXRlIHNjcm9sbGVyIGluc3RhbmNlXG5cbiAgICAgICAgZGVsZXRlIGluc3RhbmNlc1tlbC5pZF07XG4gICAgICAgIHRoYXQgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQXR0YWNoIHRhcCBldmVudCB0byB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKi9cblxuXG4gICAgdGhhdC50YXAgPSBmdW5jdGlvbiAoZWwsIGhhbmRsZXIsIHByZXZlbnQsIHRvbGVyYW5jZSwgdGltZSkge1xuICAgICAgdGFwKHRoYXQsIGVsLCBoYW5kbGVyLCBwcmV2ZW50LCB0b2xlcmFuY2UsIHRpbWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgYW4gZXZlbnRcbiAgICAgKi9cblxuXG4gICAgdGhhdC50cmlnZ2VyID0gZnVuY3Rpb24gKG5hbWUsIGV2KSB7XG4gICAgICB2YXIgcmV0LFxuICAgICAgICAgIGksXG4gICAgICAgICAgdixcbiAgICAgICAgICBzID0gW2RlZmF1bHRzLCB0aGVtZSwgcHJlc2V0LCBzZXR0aW5nc107XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgdiA9IHNbaV07XG5cbiAgICAgICAgaWYgKHYgJiYgdltuYW1lXSkge1xuICAgICAgICAgIHJldCA9IHZbbmFtZV0uY2FsbChlbCwgZXYgfHwge30sIHRoYXQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIG9uZSBvcmUgbW9yZSBvcHRpb25zLlxuICAgICAqL1xuXG5cbiAgICB0aGF0Lm9wdGlvbiA9IGZ1bmN0aW9uIChvcHQsIHZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgdmFyIG9iaiA9IHt9LFxuICAgICAgICAgIC8vIHByZXNlcnZlIHNldHRpbmdzIHRoYXQgYXJlIHBvc3NpYmxlIHRvIGNoYW5nZSBydW50aW1lXG4gICAgICBkeW5hbWljID0gWydkYXRhJywgJ2ludmFsaWQnLCAndmFsaWQnLCAncmVhZG9ubHknXTtcblxuICAgICAgaWYgKC9jYWxlbmRhcnxldmVudGNhbGVuZGFyfHJhbmdlLy50ZXN0KHMucHJlc2V0KSkge1xuICAgICAgICBkeW5hbWljLnB1c2goJ21hcmtlZCcsICdsYWJlbHMnLCAnY29sb3JzJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygb3B0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvYmogPSBvcHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmpbb3B0XSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBkeW5hbWljLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgc2V0dGluZ3Nbdl0gPSBzW3ZdO1xuICAgICAgfSk7XG4gICAgICB0aGF0LmluaXQob2JqLCBuZXdWYWx1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtb2Jpc2Nyb2xsIGluc3RhbmNlLlxuICAgICAqL1xuXG5cbiAgICB0aGF0LmdldEluc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhhdDtcbiAgICB9O1xuXG4gICAgc2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcbiAgICB0cmlnZ2VyID0gdGhhdC50cmlnZ2VyO1xuXG4gICAgZnVuY3Rpb24gZ2V0UmVzcG9uc2l2ZVNldHRpbmdzKHcpIHtcbiAgICAgIHZhciByZXN1bHQgPSBlbXB0eSxcbiAgICAgICAgICB3aWR0aDtcblxuICAgICAgaWYgKHMucmVzcG9uc2l2ZSkge1xuICAgICAgICB3aWR0aCA9IHcgfHwgZ2V0V2lkdGgoY3R4KTtcbiAgICAgICAgJCQxLmVhY2gocy5yZXNwb25zaXZlLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgIGlmICh3aWR0aCA+PSAodmFsdWUuYnJlYWtwb2ludCB8fCBicmVha3BvaW50c1trZXldKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25zdHJ1Y3QoKSB7XG4gICAgICAkJDEoZWwpLmFkZENsYXNzKCdtYnNjLWNvbXAnKTsgLy8gQXV0b2dlbmVyYXRlIGlkXG5cbiAgICAgIGlmICghZWwuaWQpIHtcbiAgICAgICAgZWwuaWQgPSAnbW9iaXNjcm9sbCcgKyArK2lkO1xuICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZXNbZWwuaWRdKSB7XG4gICAgICAgIGluc3RhbmNlc1tlbC5pZF0uZGVzdHJveSgpO1xuICAgICAgfSAvLyBTYXZlIGluc3RhbmNlXG5cblxuICAgICAgaW5zdGFuY2VzW2VsLmlkXSA9IHRoYXQ7XG4gICAgICB0aGF0Ll9fcmVhZHkgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICghdGhhdC5fX3JlYWR5KSB7XG4gICAgICBjb25zdHJ1Y3QoKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIE9ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcbiAgICAgIHRoaXMua2V5Q291bnQgPSAwO1xuICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgdmFyIGtleSA9IHRoaXMua2V5Q291bnQrKztcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMuc2V0KGtleSwgaGFuZGxlcik7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH07XG5cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZGVsZXRlKGhhbmRsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZvdW5kS2V5XzEgPSBudWxsO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGZuLCBrZXkpIHtcbiAgICAgICAgICBpZiAoZm4gPT09IGhhbmRsZXIpIHtcbiAgICAgICAgICAgIGZvdW5kS2V5XzEgPSBrZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5kZWxldGUoZm91bmRLZXlfMSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICBoYW5kbGVyKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbiAgfSgpO1xuXG4gIHZhciBNYnNjT3B0aW9uc1NlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gTWJzY09wdGlvbnNTZXJ2aWNlKCkge1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NPcHRpb25zU2VydmljZS5wcm90b3R5cGUsIFwib3B0aW9uc1wiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zID0gbztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NPcHRpb25zU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5JbmplY3RhYmxlIH0sXG4gICAgICBdO1xuICAgICAgTWJzY09wdGlvbnNTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4gICAgICByZXR1cm4gTWJzY09wdGlvbnNTZXJ2aWNlO1xuICB9KCkpO1xuICB2YXIgTWJzY0lucHV0U2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYnNjSW5wdXRTZXJ2aWNlKCkge1xuICAgICAgICAgIHRoaXMuX2NvbnRyb2xTZXQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9jb21wb25lbnRSZWYgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY0lucHV0U2VydmljZS5wcm90b3R5cGUsIFwiaXNDb250cm9sU2V0XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRyb2xTZXQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xTZXQgPSB2O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NJbnB1dFNlcnZpY2UucHJvdG90eXBlLCBcImlucHV0XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudFJlZjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdGhpcy5fY29tcG9uZW50UmVmID0gdjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NJbnB1dFNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuSW5qZWN0YWJsZSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NJbnB1dFNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcbiAgICAgIHJldHVybiBNYnNjSW5wdXRTZXJ2aWNlO1xuICB9KCkpO1xuICB2YXIgTWJzY0Jhc2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gTWJzY0Jhc2UoaW5pdGlhbEVsZW0sIHpvbmUpIHtcbiAgICAgICAgICB0aGlzLmluaXRpYWxFbGVtID0gaW5pdGlhbEVsZW07XG4gICAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgICB0aGlzLm9uSW5pdCA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIHRoaXMub25EZXN0cm95ID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgICAgdGhpcy5pbmxpbmVPcHRpb25zT2JqID0ge307XG4gICAgICAgICAgdGhpcy5wZW5kaW5nVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy50aGVtZUNsYXNzZXNTZXQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgIHRoaXMuaW5saW5lT3B0aW9uc09iai56b25lID0gem9uZTtcbiAgICAgIH1cbiAgICAgIE1ic2NCYXNlLnByb3RvdHlwZS5nZXRJbmxpbmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzXzFbcHJvcF0gaW5zdGFuY2VvZiAoY29yZS5FdmVudEVtaXR0ZXIpICYmICghdGhpc18xLm9wdGlvbnMgfHwgISh0aGlzXzEub3B0aW9uc1twcm9wXSkpKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzXzEuaW5saW5lT3B0aW9uc09ialtwcm9wXSA9IGZ1bmN0aW9uIChldmVudCwgaW5zdCkge1xuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Lmluc3QgPSBpbnN0O1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzW3Byb3BdLmVtaXQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB0aGlzKSB7XG4gICAgICAgICAgICAgIF9sb29wXzEocHJvcCk7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NCYXNlLnByb3RvdHlwZS5zZXRUaGVtZUNsYXNzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCQxKHRoaXMuaW5pdGlhbEVsZW0ubmF0aXZlRWxlbWVudCkuYWRkQ2xhc3ModGhpcy5nZXRUaGVtZUNsYXNzZXMoKSk7XG4gICAgICAgICAgdGhpcy50aGVtZUNsYXNzZXNTZXQgPSB0cnVlO1xuICAgICAgfTtcbiAgICAgIE1ic2NCYXNlLnByb3RvdHlwZS5jbGVhclRoZW1lQ2xhc3NlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkJDEodGhpcy5pbml0aWFsRWxlbS5uYXRpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyh0aGlzLmdldFRoZW1lQ2xhc3NlcygpKTtcbiAgICAgIH07XG4gICAgICBNYnNjQmFzZS5wcm90b3R5cGUuZ2V0VGhlbWVDbGFzc2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzID0gdGhpcy5pbnN0YW5jZS5zZXR0aW5ncztcbiAgICAgICAgICByZXR1cm4gJ21ic2MtY29udHJvbC1uZyBtYnNjLScgKyBzLnRoZW1lICsgKHMuYmFzZVRoZW1lID8gJyBtYnNjLScgKyBzLmJhc2VUaGVtZSA6ICcnKTtcbiAgICAgIH07XG4gICAgICBNYnNjQmFzZS5wcm90b3R5cGUuc2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmluaXRpYWxFbGVtLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgdmFyIGNvbnRlbnRJbnB1dCA9ICQkMSgnaW5wdXQnLCB0aGlzLmluaXRpYWxFbGVtLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICAgIGlmIChjb250ZW50SW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGNvbnRlbnRJbnB1dFswXTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTWJzY0Jhc2UucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLnNldEVsZW1lbnQoKTtcbiAgICAgICAgICB0aGlzLnN0YXJ0SW5pdCgpO1xuICAgICAgfTtcbiAgICAgIE1ic2NCYXNlLnByb3RvdHlwZS5zdGFydEluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICB0aGlzLmdldElubGluZUV2ZW50cygpO1xuICAgICAgICAgIHZhciBpb25JbnB1dCA9IHRoaXMuZ2V0SW9uSW5wdXQoKTtcbiAgICAgICAgICBpZiAoaW9uSW5wdXQgJiYgKGlvbklucHV0LmdldElucHV0RWxlbWVudCB8fCBpb25JbnB1dC50aGVuKSAmJiB0aGlzLmVsZW1lbnQubm9kZU5hbWUgIT09IFwiSU5QVVRcIikge1xuICAgICAgICAgICAgICBpZiAoaW9uSW5wdXQuZ2V0SW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICBpb25JbnB1dC5nZXRJbnB1dEVsZW1lbnQoKS50aGVuKGZ1bmN0aW9uIChpbnApIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdENvbnRyb2woKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaW9uSW5wdXQudGhlbihmdW5jdGlvbiAoaW9uSW5wQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgaW9uSW5wQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRJbnB1dEVsZW1lbnQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaW5wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdENvbnRyb2woKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5pdENvbnRyb2woKTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTWJzY0Jhc2UucHJvdG90eXBlLmdldElvbklucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciB2ID0gdGhpcy5fdmlldztcbiAgICAgICAgICB2YXIgbmF0aXZlID0gdGhpcy5pbml0aWFsRWxlbS5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgIHZhciBpb25JbnB1dE5vZGUgPSBuYXRpdmUubm9kZU5hbWUgPT09IFwiSU9OLUlOUFVUXCI7XG4gICAgICAgICAgdmFyIGlucDEgPSBpb25JbnB1dE5vZGUgJiYgdiAmJiB2Ll9kYXRhICYmIHYuX2RhdGEuY29tcG9uZW50VmlldyAmJiB2Ll9kYXRhLmNvbXBvbmVudFZpZXcuY29tcG9uZW50O1xuICAgICAgICAgIHZhciBpbnAyID0gaW9uSW5wdXROb2RlICYmIG5hdGl2ZS5jb21wb25lbnRPblJlYWR5ICYmIG5hdGl2ZS5jb21wb25lbnRPblJlYWR5KCk7XG4gICAgICAgICAgcmV0dXJuIGlucDEgfHwgaW5wMjtcbiAgICAgIH07XG4gICAgICBNYnNjQmFzZS5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICBNYnNjQmFzZS5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NCYXNlLnByb3RvdHlwZS51cGRhdGVPcHRpb25zID0gZnVuY3Rpb24gKG5ld09wdGlvbnMsIG9wdGlvbkNoYW5nZWQsIGludmFsaWRDaGFuZ2VkLCBkYXRhQ2hhbmdlZCkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgaWYgKG9wdGlvbkNoYW5nZWQgfHwgaW52YWxpZENoYW5nZWQpIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICBpZiAobmV3T3B0aW9ucy50aGVtZSAmJiBfdGhpcy50aGVtZUNsYXNzZXNTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbGVhclRoZW1lQ2xhc3NlcygpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgX3RoaXMuaW5zdGFuY2Uub3B0aW9uKG5ld09wdGlvbnMsIHVuZGVmaW5lZCwgX3RoaXMucGVuZGluZ1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIGlmIChuZXdPcHRpb25zLnRoZW1lICYmIF90aGlzLnRoZW1lQ2xhc3Nlc1NldCkge1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFRoZW1lQ2xhc3NlcygpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlLnJlZHJhdykge1xuICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnJlZHJhdygpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjQmFzZS5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xuICAgICAgICAgIHZhciBvcHRpb25DaGFuZ2UgPSBmYWxzZSwgY2xvbmVDaGFuZ2UgPSBmYWxzZSwgaW52YWxpZENoYW5nZSA9IGZhbHNlLCBkYXRhQ2hhbmdlID0gZmFsc2UsIG5ld09wdGlvbnMgPSB7fTtcbiAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGNoYW5nZXMpIHtcbiAgICAgICAgICAgICAgaWYgKCFjaGFuZ2VzW3Byb3BdLmZpcnN0Q2hhbmdlICYmIHByb3AgIT09ICdvcHRpb25zJyAmJiBwcm9wICE9PSAndmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5jbG9uZURpY3Rpb25hcnkgJiYgdGhpcy5jbG9uZURpY3Rpb25hcnlbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VDbG9uZShwcm9wLCBjaGFuZ2VzW3Byb3BdLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXR0aW5nc1twcm9wXSA9IGNoYW5nZXNbcHJvcF0uY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PSAnaW52YWxpZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZENoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09ICdkYXRhJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgY2xvbmVDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgbmV3T3B0aW9uc1twcm9wXSA9IGNoYW5nZXNbcHJvcF0uY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAoIWNoYW5nZXNbcHJvcF0uZmlyc3RDaGFuZ2UgJiYgcHJvcCAhPT0gJ3ZhbHVlJykge1xuICAgICAgICAgICAgICAgICAgbmV3T3B0aW9ucyA9IGV4dGVuZCQxKGNoYW5nZXNbcHJvcF0uY3VycmVudFZhbHVlLCBuZXdPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbkNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhbmdlc1twcm9wXS5maXJzdENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHByb3AgIT09ICdvcHRpb25zJyAmJiBwcm9wICE9PSAndmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmxpbmVPcHRpb25zT2JqW3Byb3BdID0gY2hhbmdlc1twcm9wXS5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNsb25lQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIGV4dGVuZCQxKG5ld09wdGlvbnMsIHRoaXMuY2xvbmVEaWN0aW9uYXJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9wdGlvbkNoYW5nZSB8fCBjbG9uZUNoYW5nZSkge1xuICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMobmV3T3B0aW9ucywgb3B0aW9uQ2hhbmdlLCBpbnZhbGlkQ2hhbmdlLCBkYXRhQ2hhbmdlKTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTWJzY0Jhc2UuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1ttYnNjLWJdJyB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjQmFzZS5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdab25lLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NCYXNlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdvcHRpb25zJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydtYnNjLW9wdGlvbnMnLF0gfSxdLFxuICAgICAgICAgICdjc3NDbGFzcyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICd0aGVtZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICd0aGVtZVZhcmlhbnQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnbGFuZyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdydGwnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAncmVzcG9uc2l2ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdvbkluaXQnOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9LF0sXG4gICAgICAgICAgJ29uRGVzdHJveSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY0Jhc2U7XG4gIH0oKSk7XG4gIHZhciBNYnNjVmFsdWVCYXNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNYnNjVmFsdWVCYXNlLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1ZhbHVlQmFzZShpbml0aWFsRWxlbSwgem9uZSkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGluaXRpYWxFbGVtLCB6b25lKSB8fCB0aGlzO1xuICAgICAgICAgIF90aGlzLmluaXRpYWxWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBNYnNjVmFsdWVCYXNlLnByb3RvdHlwZS5zZXROZXdWYWx1ZSA9IGZ1bmN0aW9uICh2KSB7IH07XG4gICAgICBNYnNjVmFsdWVCYXNlLnByb3RvdHlwZS5zZXROZXdWYWx1ZVByb3h5ID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSB2O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldE5ld1ZhbHVlKHYpO1xuICAgICAgfTtcbiAgICAgIE1ic2NWYWx1ZUJhc2UuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1ttYnNjLXYtYl0nIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NWYWx1ZUJhc2UuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgIF07IH07XG4gICAgICByZXR1cm4gTWJzY1ZhbHVlQmFzZTtcbiAgfShNYnNjQmFzZSkpO1xuICB2YXIgTWJzY0Nsb25lQmFzZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY0Nsb25lQmFzZSwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIE1ic2NDbG9uZUJhc2UoaW5pdEVsZW0sIHpvbmUpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBpbml0RWxlbSwgem9uZSkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5jbG9uZURpY3Rpb25hcnkgPSB7fTtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBNYnNjQ2xvbmVCYXNlLnByb3RvdHlwZS5tYWtlQ2xvbmUgPSBmdW5jdGlvbiAoc2V0dGluZywgdmFsdWUpIHtcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5jbG9uZURpY3Rpb25hcnlbc2V0dGluZ10gPSBbXTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5jbG9uZURpY3Rpb25hcnlbc2V0dGluZ10ucHVzaCh2YWx1ZVtpXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuY2xvbmVEaWN0aW9uYXJ5W3NldHRpbmddID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NDbG9uZUJhc2UucHJvdG90eXBlLm5nRG9DaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlLCBkYXRhID0gZmFsc2UsIGludmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jbG9uZURpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXNba2V5XSAhPT0gdW5kZWZpbmVkICYmICFkZWVwRXF1YWxzQXJyYXkodGhpc1trZXldLCB0aGlzLmNsb25lRGljdGlvbmFyeVtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlQ2xvbmUoa2V5LCB0aGlzW2tleV0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXR0aW5nc1trZXldID0gdGhpc1trZXldO1xuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBpZiAoa2V5ID09ICdpbnZhbGlkJykge1xuICAgICAgICAgICAgICAgICAgICAgIGludmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSAnZGF0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hhbmdlZCAmJiB0aGlzLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgIHRoaXMudXBkYXRlT3B0aW9ucyh0aGlzLmNsb25lRGljdGlvbmFyeSwgZmFsc2UsIGludmFsaWQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjQ2xvbmVCYXNlLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jbG9uZURpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYWtlQ2xvbmUoa2V5LCB0aGlzW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjQ2xvbmVCYXNlLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkRpcmVjdGl2ZSwgYXJnczogW3sgc2VsZWN0b3I6ICdbbWJzYy1jLWJdJyB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjQ2xvbmVCYXNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICBdOyB9O1xuICAgICAgcmV0dXJuIE1ic2NDbG9uZUJhc2U7XG4gIH0oTWJzY1ZhbHVlQmFzZSkpO1xuICB2YXIgTWJzY0NvbnRyb2xCYXNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNYnNjQ29udHJvbEJhc2UsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBNYnNjQ29udHJvbEJhc2UoaW5pdGlhbEVsZW1lbnQsIHpvbmUsIGNvbnRyb2wsIF9pbnB1dFNlcnZpY2UsIF92aWV3KSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaW5pdGlhbEVsZW1lbnQsIHpvbmUpIHx8IHRoaXM7XG4gICAgICAgICAgX3RoaXMuY29udHJvbCA9IGNvbnRyb2w7XG4gICAgICAgICAgX3RoaXMuX2lucHV0U2VydmljZSA9IF9pbnB1dFNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMuX3ZpZXcgPSBfdmlldztcbiAgICAgICAgICBfdGhpcy5fbmVlZHNUaW1lb3V0ID0gdHJ1ZTtcbiAgICAgICAgICBfdGhpcy5vbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgICBfdGhpcy5vblRvdWNoID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICAgIF90aGlzLm9uQ2hhbmdlRW1pdHRlciA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIF90aGlzLm9sZEFjY2Vzc29yID0gbnVsbDtcbiAgICAgICAgICBfdGhpcy5vdmVyd3JpdGVBY2Nlc3NvcigpO1xuICAgICAgICAgIGlmIChfaW5wdXRTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgIF9pbnB1dFNlcnZpY2UuaXNDb250cm9sU2V0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NDb250cm9sQmFzZS5wcm90b3R5cGUsIFwib3B0aW9uRXh0ZW5zaW9uc1wiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgIHZhciBleHRlcm5hbE9uQ2xvc2UgPSB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLm9uQ2xvc2U7XG4gICAgICAgICAgICAgIHZhciBleHRlcm5hbE9uRmlsbCA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMub25GaWxsO1xuICAgICAgICAgICAgICB2YXIgb25DbG9zZUVtaXR0ZXIgPSB0aGlzLm9uQ2xvc2U7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICBvbkZpbGw6IGZ1bmN0aW9uIChldmVudCwgaW5zdCkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vbGRBY2Nlc3Nvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbGRBY2Nlc3Nvci53cml0ZVZhbHVlKGV2ZW50LnZhbHVlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW9uSW5wdXQgPSBfdGhpcy5nZXRJb25JbnB1dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW9uSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlvbklucHV0LnZhbHVlID0gZXZlbnQudmFsdWVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlcm5hbE9uRmlsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlcm5hbE9uRmlsbChldmVudCwgaW5zdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIChldmVudCwgaW5zdCkge1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uVG91Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZXJuYWxPbkNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVybmFsT25DbG9zZShldmVudCwgaW5zdCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkNsb3NlRW1pdHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5pbnN0ID0gaW5zdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZUVtaXR0ZXIuZW1pdChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NDb250cm9sQmFzZS5wcm90b3R5cGUsIFwiZW5hYmxlTWFudWFsRWRpdFwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBuc2YgPSB0aGlzLnNob3dPbkZvY3VzID09PSBmYWxzZSB8fCB0aGlzLm9wdGlvbnMuc2hvd09uRm9jdXMgPT09IGZhbHNlLCBuc3QgPSB0aGlzLnNob3dPblRhcCA9PT0gZmFsc2UgfHwgdGhpcy5vcHRpb25zLnNob3dPblRhcCA9PT0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuc2YgJiYgbnN0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY0NvbnRyb2xCYXNlLnByb3RvdHlwZS5oYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAkJDEoZWxlbWVudCB8fCB0aGlzLmVsZW1lbnQpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHRoYXQuem9uZS5ydW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgdmFyIGVsbVZhbHVlID0gdGhhdC5lbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgdmFyIGluc3RWYWx1ZSA9IHRoYXQuaW5zdGFuY2UuX3ZhbHVlO1xuICAgICAgICAgICAgICAgICAgaWYgKGVsbVZhbHVlICE9PSBpbnN0VmFsdWUgJiYgKGluc3RWYWx1ZSAhPT0gbnVsbCB8fCBlbG1WYWx1ZSAhPT0gJycpICYmIHRoYXQuZW5hYmxlTWFudWFsRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaW5zdGFuY2Uuc2V0VmFsKGVsbVZhbHVlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoYXQuaW5zdGFuY2UuZ2V0VmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuY29udHJvbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlRXF1YWxzKHZhbHVlLCB0aGF0LmNvbnRyb2wubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm9uQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY29udHJvbC5jb250cm9sLnBhdGNoVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm9uQ2hhbmdlRW1pdHRlci5lbWl0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZ1bmN0aW9uIHZhbHVlRXF1YWxzKHYxLCB2Mikge1xuICAgICAgICAgICAgICBpZiAodjEgPT09IHYyKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodjEgaW5zdGFuY2VvZiBEYXRlICYmIHYyIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuICgrdjEpID09PSAoK3YyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NDb250cm9sQmFzZS5wcm90b3R5cGUub3ZlcndyaXRlQWNjZXNzb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY29udHJvbCkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5jb250cm9sLnZhbHVlQWNjZXNzb3IgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMub2xkQWNjZXNzb3IgPSB0aGlzLmNvbnRyb2wudmFsdWVBY2Nlc3NvcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wudmFsdWVBY2Nlc3NvciA9IHRoaXM7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NDb250cm9sQmFzZS5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0LmNhbGwodGhpcyk7XG4gICAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKTtcbiAgICAgICAgICB0aGlzLm92ZXJ3cml0ZUFjY2Vzc29yKCk7XG4gICAgICAgICAgaWYgKHRoaXMuY29udHJvbCAmJiB0aGlzLmNvbnRyb2wuX3NldFVwQ29udHJvbCkge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuX3NldFVwQ29udHJvbCgpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjQ29udHJvbEJhc2UucHJvdG90eXBlLnJlZ2lzdGVyT25DaGFuZ2UgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgICB9O1xuICAgICAgTWJzY0NvbnRyb2xCYXNlLnByb3RvdHlwZS5yZWdpc3Rlck9uVG91Y2hlZCA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgIHRoaXMub25Ub3VjaCA9IGZuO1xuICAgICAgfTtcbiAgICAgIE1ic2NDb250cm9sQmFzZS5wcm90b3R5cGUuc2V0RGlzYWJsZWRTdGF0ZSA9IGZ1bmN0aW9uIChpc0Rpc2FibGVkKSB7XG4gICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgICAgICAgaWYgKHRoaXMub2xkQWNjZXNzb3IgJiYgdGhpcy5vbGRBY2Nlc3Nvci5zZXREaXNhYmxlZFN0YXRlKSB7XG4gICAgICAgICAgICAgIHRoaXMub2xkQWNjZXNzb3Iuc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UgJiYgdGhpcy5pbnN0YW5jZS5kaXNhYmxlICYmIHRoaXMuaW5zdGFuY2UuZW5hYmxlKSB7XG4gICAgICAgICAgICAgIGlmIChpc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UuZW5hYmxlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTWJzY0NvbnRyb2xCYXNlLnByb3RvdHlwZS53cml0ZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgIGlmICh0aGlzLl9uZWVkc1RpbWVvdXQpIHtcbiAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nVmFsdWUgPSB2O1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzLnBlbmRpbmdWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgIF90aGlzLnNldE5ld1ZhbHVlUHJveHkodik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXROZXdWYWx1ZVByb3h5KHYpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjQ29udHJvbEJhc2UuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1ttYnNjLWNjLWJdJyB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjQ29udHJvbEJhc2UuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgICAgICB7IHR5cGU6IGZvcm1zLk5nQ29udHJvbCwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NJbnB1dFNlcnZpY2UsIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLlZpZXdDb250YWluZXJSZWYsIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY0NvbnRyb2xCYXNlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdsYWJlbFN0eWxlJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydsYWJlbC1zdHlsZScsXSB9LF0sXG4gICAgICAgICAgJ2lucHV0U3R5bGUnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ2lucHV0LXN0eWxlJyxdIH0sXSxcbiAgICAgICAgICAnc2hvd09uRm9jdXMnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc2hvd09uVGFwJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2Rpc2FibGVkJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1ic2NDb250cm9sQmFzZTtcbiAgfShNYnNjQ2xvbmVCYXNlKSk7XG4gIHZhciBNYnNjRnJhbWVCYXNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNYnNjRnJhbWVCYXNlLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY0ZyYW1lQmFzZShpbml0aWFsRWxlbSwgem9uZSwgY29udHJvbCwgX2lucHV0U2VydmljZSwgdmlldykge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGluaXRpYWxFbGVtLCB6b25lLCBjb250cm9sLCBfaW5wdXRTZXJ2aWNlLCB2aWV3KSB8fCB0aGlzO1xuICAgICAgICAgIF90aGlzLm9uQmVmb3JlQ2xvc2UgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICBfdGhpcy5vbkJlZm9yZVNob3cgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICBfdGhpcy5vbkNhbmNlbCA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIF90aGlzLm9uQ2xvc2UgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICBfdGhpcy5vbkZpbGwgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICBfdGhpcy5vbk1hcmt1cFJlYWR5ID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgICAgX3RoaXMub25Qb3NpdGlvbiA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIF90aGlzLm9uU2hvdyA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjRnJhbWVCYXNlLnByb3RvdHlwZSwgXCJpbmxpbmVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuZGlzcGxheSB8fCAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5kaXNwbGF5KSkgPT09ICdpbmxpbmUnO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY0ZyYW1lQmFzZS5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5jbG9uZURpY3Rpb25hcnkuaW52YWxpZCA9IFtdO1xuICAgICAgICAgIHRoaXMuY2xvbmVEaWN0aW9uYXJ5LnZhbGlkID0gW107XG4gICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZ09uSW5pdC5jYWxsKHRoaXMpO1xuICAgICAgfTtcbiAgICAgIE1ic2NGcmFtZUJhc2UuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1ttYnNjLWZyLWJdJyB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjRnJhbWVCYXNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICAgICAgeyB0eXBlOiBmb3Jtcy5OZ0NvbnRyb2wsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjSW5wdXRTZXJ2aWNlLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5WaWV3Q29udGFpbmVyUmVmLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NGcmFtZUJhc2UucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ29wdGlvbnMnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZHJvcGRvd24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnYW5jaG9yJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2FuaW1hdGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnYnV0dG9ucyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdjbG9zZU9uT3ZlcmxheVRhcCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdjb250ZXh0JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2Rpc3BsYXknOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc2hvd0lucHV0JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2ZvY3VzT25DbG9zZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdmb2N1c1RyYXAnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaGVhZGVyVGV4dCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdzY3JvbGxMb2NrJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3RvdWNoVWknOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnb25CZWZvcmVDbG9zZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcbiAgICAgICAgICAnb25CZWZvcmVTaG93JzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxuICAgICAgICAgICdvbkNhbmNlbCc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcbiAgICAgICAgICAnb25DbG9zZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcbiAgICAgICAgICAnb25GaWxsJzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxuICAgICAgICAgICdvbk1hcmt1cFJlYWR5JzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxuICAgICAgICAgICdvblBvc2l0aW9uJzogW3sgdHlwZTogY29yZS5PdXRwdXQgfSxdLFxuICAgICAgICAgICdvblNob3cnOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9LF0sXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1ic2NGcmFtZUJhc2U7XG4gIH0oTWJzY0NvbnRyb2xCYXNlKSk7XG4gIHZhciBNYnNjU2Nyb2xsZXJCYXNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNYnNjU2Nyb2xsZXJCYXNlLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1Njcm9sbGVyQmFzZShpbml0aWFsRWxlbWVudCwgem9uZSwgY29udHJvbCwgX2lucHV0U2VydmljZSwgdmlldykge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGluaXRpYWxFbGVtZW50LCB6b25lLCBjb250cm9sLCBfaW5wdXRTZXJ2aWNlLCB2aWV3KSB8fCB0aGlzO1xuICAgICAgICAgIF90aGlzLm9uV2hlZWxDaGFuZ2UgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICBfdGhpcy5vblNldCA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIF90aGlzLm9uSXRlbVRhcCA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIF90aGlzLm9uQ2xlYXIgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBNYnNjU2Nyb2xsZXJCYXNlLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkRpcmVjdGl2ZSwgYXJnczogW3sgc2VsZWN0b3I6ICdbbWJzYy1zLWJdJyB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjU2Nyb2xsZXJCYXNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICAgICAgeyB0eXBlOiBmb3Jtcy5OZ0NvbnRyb2wsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjSW5wdXRTZXJ2aWNlLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5WaWV3Q29udGFpbmVyUmVmLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NTY3JvbGxlckJhc2UucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ2NpcmN1bGFyJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2hlaWdodCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdsYXlvdXQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnbWF4V2lkdGgnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnbWluV2lkdGgnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnbXVsdGlsaW5lJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3JlYWRvbmx5JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3Jvd3MnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc2hvd0xhYmVsJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3Nob3dTY3JvbGxBcnJvd3MnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnd2hlZWxzJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3dpZHRoJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3ZhbGlkYXRlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2NhbmNlbFRleHQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnY2xlYXJUZXh0JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3NlbGVjdGVkVGV4dCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdzZXRUZXh0JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2Zvcm1hdFZhbHVlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3BhcnNlVmFsdWUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnb25XaGVlbENoYW5nZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0LCBhcmdzOiBbJ29uQ2hhbmdlJyxdIH0sXSxcbiAgICAgICAgICAnb25TZXQnOiBbeyB0eXBlOiBjb3JlLk91dHB1dCB9LF0sXG4gICAgICAgICAgJ29uSXRlbVRhcCc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcbiAgICAgICAgICAnb25DbGVhcic6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY1Njcm9sbGVyQmFzZTtcbiAgfShNYnNjRnJhbWVCYXNlKSk7XG4gIHZhciBNYnNjQmFzZU1vZHVsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYnNjQmFzZU1vZHVsZSgpIHtcbiAgICAgIH1cbiAgICAgIE1ic2NCYXNlTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIGltcG9ydHM6IFtjb21tb24uQ29tbW9uTW9kdWxlXSxcbiAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtNYnNjQmFzZSwgTWJzY1ZhbHVlQmFzZSwgTWJzY0Nsb25lQmFzZSwgTWJzY0NvbnRyb2xCYXNlXSxcbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NCYXNlTW9kdWxlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4gICAgICByZXR1cm4gTWJzY0Jhc2VNb2R1bGU7XG4gIH0oKSk7XG4gIGZ1bmN0aW9uIGRlZXBFcXVhbHNBcnJheShhMSwgYTIpIHtcbiAgICAgIGlmIChhMSA9PT0gYTIpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCFhMSB8fCAhYTIgfHwgYTEubGVuZ3RoICE9PSBhMi5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGExLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChhMVtpXSAhPT0gYTJbaV0pIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgfVxuICBmdW5jdGlvbiBlbXB0eU9yVHJ1ZSh2YWwpIHtcbiAgICAgIHJldHVybiAodHlwZW9mICh2YWwpID09PSAnc3RyaW5nJyAmJiAodmFsID09PSAndHJ1ZScgfHwgdmFsID09PSAnJykpIHx8ICEhdmFsO1xuICB9XG5cbiAgZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTtcbiAgICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgICBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuICB9XG5cbiAgZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gICAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9XG5cbiAgdmFyIHdyYXBDbGFzcyA9ICdtYnNjLWlucHV0LXdyYXAnO1xuICB2YXIgZXZlbnRzID0gWyd0b3VjaGVuZCcsICd0b3VjaGNhbmNlbCcsICdtb3VzZWRvd24nLCAnbW91c2Vtb3ZlJywgJ21vdXNldXAnLCAnbW91c2VsZWF2ZSddO1xuICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgdGFwOiBoYXNHaG9zdENsaWNrXG4gIH07XG4gIHZhciAkYWN0aXZlO1xuXG4gIGZ1bmN0aW9uIGFkZEljb24oJGNvbnRyb2wsIGljKSB7XG4gICAgdmFyIGljb25zID0ge30sXG4gICAgICAgIGNvbnRyb2wgPSAkY29udHJvbFswXSxcbiAgICAgICAgJHBhcmVudCA9ICRjb250cm9sLnBhcmVudCgpLFxuICAgICAgICBlcnJvck1zZyA9ICRwYXJlbnQuZmluZCgnLm1ic2MtZXJyLW1zZycpLFxuICAgICAgICBhbGlnbiA9ICRjb250cm9sLmF0dHIoJ2RhdGEtaWNvbi1hbGlnbicpIHx8ICdsZWZ0JyxcbiAgICAgICAgaWNvbiA9ICRjb250cm9sLmF0dHIoJ2RhdGEtaWNvbicpO1xuXG4gICAgaWYgKCRwYXJlbnQuaGFzQ2xhc3Mod3JhcENsYXNzKSkge1xuICAgICAgJHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdyYXAgaW5wdXRcbiAgICAgICQkMSgnPHNwYW4gY2xhc3M9XCInICsgd3JhcENsYXNzICsgJ1wiPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcigkY29udHJvbCkuYXBwZW5kKCRjb250cm9sKTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3JNc2cpIHtcbiAgICAgICRwYXJlbnQuZmluZCgnLicgKyB3cmFwQ2xhc3MpLmFwcGVuZChlcnJvck1zZyk7XG4gICAgfVxuXG4gICAgaWYgKGljb24pIHtcbiAgICAgIGlmIChpY29uLmluZGV4T2YoJ3snKSAhPT0gLTEpIHtcbiAgICAgICAgaWNvbnMgPSBKU09OLnBhcnNlKGljb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWNvbnNbYWxpZ25dID0gaWNvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29udHJvbC50eXBlID09ICdmaWxlJykge1xuICAgICAgLy8gU2V0IGljb25cbiAgICAgIGljb25zLnJpZ2h0ID0gJGNvbnRyb2wuYXR0cignZGF0YS1pY29uLXVwbG9hZCcpIHx8ICd1cGxvYWQnO1xuICAgIH1cblxuICAgIGlmIChpY29uIHx8IGljKSB7XG4gICAgICBleHRlbmQkMShpY29ucywgaWMpO1xuICAgICAgJHBhcmVudC5hZGRDbGFzcygoaWNvbnMucmlnaHQgPyAnbWJzYy1pYy1yaWdodCAnIDogJycpICsgKGljb25zLmxlZnQgPyAnIG1ic2MtaWMtbGVmdCcgOiAnJykpLmZpbmQoJy4nICsgd3JhcENsYXNzKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwibWJzYy1pbnB1dC1maWxsXCI+PC9zcGFuPicpLmFwcGVuZChpY29ucy5sZWZ0ID8gJzxzcGFuIGNsYXNzPVwibWJzYy1pbnB1dC1pYyBtYnNjLWxlZnQtaWMgbWJzYy1pYyBtYnNjLWljLScgKyBpY29ucy5sZWZ0ICsgJ1wiPjwvc3Bhbj4nIDogJycpLmFwcGVuZChpY29ucy5yaWdodCA/ICc8c3BhbiBjbGFzcz1cIm1ic2MtaW5wdXQtaWMgbWJzYy1yaWdodC1pYyBtYnNjLWljIG1ic2MtaWMtJyArIGljb25zLnJpZ2h0ICsgJ1wiPjwvc3Bhbj4nIDogJycpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEljb25Ub2dnbGUodGhhdCwgJHBhcmVudCwgJGNvbnRyb2wpIHtcbiAgICB2YXIgaWNvbnMgPSB7fSxcbiAgICAgICAgY29udHJvbCA9ICRjb250cm9sWzBdLFxuICAgICAgICB0b2dnbGUgPSAkY29udHJvbC5hdHRyKCdkYXRhLXBhc3N3b3JkLXRvZ2dsZScpLFxuICAgICAgICBpY29uU2hvdyA9ICRjb250cm9sLmF0dHIoJ2RhdGEtaWNvbi1zaG93JykgfHwgJ2V5ZScsXG4gICAgICAgIGljb25IaWRlID0gJGNvbnRyb2wuYXR0cignZGF0YS1pY29uLWhpZGUnKSB8fCAnZXllLWJsb2NrZWQnO1xuXG4gICAgaWYgKHRvZ2dsZSkge1xuICAgICAgaWNvbnMucmlnaHQgPSBjb250cm9sLnR5cGUgPT0gJ3Bhc3N3b3JkJyA/IGljb25TaG93IDogaWNvbkhpZGU7XG4gICAgfVxuXG4gICAgYWRkSWNvbigkY29udHJvbCwgaWNvbnMpO1xuXG4gICAgaWYgKHRvZ2dsZSkge1xuICAgICAgdGFwKHRoYXQsICRwYXJlbnQuZmluZCgnLm1ic2MtcmlnaHQtaWMnKS5hZGRDbGFzcygnbWJzYy1pbnB1dC10b2dnbGUnKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY29udHJvbC50eXBlID09IFwidGV4dFwiKSB7XG4gICAgICAgICAgY29udHJvbC50eXBlID0gXCJwYXNzd29yZFwiO1xuICAgICAgICAgICQkMSh0aGlzKS5hZGRDbGFzcygnbWJzYy1pYy0nICsgaWNvblNob3cpLnJlbW92ZUNsYXNzKCdtYnNjLWljLScgKyBpY29uSGlkZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udHJvbC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgJCQxKHRoaXMpLnJlbW92ZUNsYXNzKCdtYnNjLWljLScgKyBpY29uU2hvdykuYWRkQ2xhc3MoJ21ic2MtaWMtJyArIGljb25IaWRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JhcExhYmVsKCRwYXJlbnQsIHR5cGUsIGlucHV0U3R5bGUsIGxhYmVsU3R5bGUsIGVsbSkge1xuICAgIC8vIFdyYXAgbm9uLWVtcHR5IHRleHQgbm9kZXMgaW4gc3BhbiB3aXRoIG1ic2MtbGFiZWwgY2xhc3NcbiAgICBpZiAodHlwZSA9PSAnc2VnbWVudGVkJykge1xuICAgICAgJHBhcmVudC5jbG9zZXN0KCcubWJzYy1zZWdtZW50ZWQnKS5hZGRDbGFzcyhpbnB1dFN0eWxlID09ICdib3gnID8gJ21ic2MtaW5wdXQtYm94JyA6ICcnKS5hZGRDbGFzcyhpbnB1dFN0eWxlID09ICdvdXRsaW5lJyA/ICdtYnNjLWlucHV0LW91dGxpbmUnIDogJycpO1xuICAgIH0gZWxzZSBpZiAodHlwZSAhPSAnYnV0dG9uJyAmJiB0eXBlICE9ICdzdWJtaXQnKSB7XG4gICAgICAkcGFyZW50LmFkZENsYXNzKCdtYnNjLWNvbnRyb2wtdycpLmFkZENsYXNzKGlucHV0U3R5bGUgPT0gJ2JveCcgPyAnbWJzYy1pbnB1dC1ib3gnIDogJycpLmFkZENsYXNzKGlucHV0U3R5bGUgPT0gJ291dGxpbmUnID8gJ21ic2MtaW5wdXQtb3V0bGluZScgOiAnJykuYWRkQ2xhc3MobGFiZWxTdHlsZSA9PSAnaW5saW5lJyA/ICdtYnNjLWxhYmVsLWlubGluZScgOiAnJykuYWRkQ2xhc3MobGFiZWxTdHlsZSA9PSAnc3RhY2tlZCcgPyAnbWJzYy1sYWJlbC1zdGFja2VkJyA6ICcnKS5hZGRDbGFzcyhsYWJlbFN0eWxlID09ICdmbG9hdGluZycgPyAnbWJzYy1sYWJlbC1mbG9hdGluZycgOiAnJykuYWRkQ2xhc3MobGFiZWxTdHlsZSA9PSAnZmxvYXRpbmcnICYmIGVsbS52YWx1ZSA/ICdtYnNjLWxhYmVsLWZsb2F0aW5nLWFjdGl2ZScgOiAnJykuZmluZCgnbGFiZWwnKS5hZGRDbGFzcygnbWJzYy1sYWJlbCcpLmVhY2goZnVuY3Rpb24gKGksIHYpIHtcbiAgICAgICAgJCQxKHYpLmF0dHIoJ3RpdGxlJywgJCQxKHYpLnRleHQoKSk7XG4gICAgICB9KTtcbiAgICAgICRwYXJlbnQuY29udGVudHMoKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlVHlwZSA9PSAzICYmIHRoaXMubm9kZVZhbHVlICYmIC9cXFMvLnRlc3QodGhpcy5ub2RlVmFsdWUpO1xuICAgICAgfSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQkMSgnPHNwYW4gY2xhc3M9XCJtYnNjLWxhYmVsXCIgdGl0bGU9XCInICsgdGhpcy50ZXh0Q29udGVudC50cmltKCkgKyAnXCI+PC9zcGFuPicpLmluc2VydEFmdGVyKHRoaXMpLmFwcGVuZCh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJpcHBsZSh0aGVtZSkge1xuICAgIHZhciByaXBwbGUgPSBtb2Jpc2Nyb2xsLnRoZW1lcy5mb3JtW3RoZW1lXTtcbiAgICByZXR1cm4gcmlwcGxlICYmIHJpcHBsZS5hZGRSaXBwbGUgPyByaXBwbGUgOiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QXR0cigkZWxtLCBhdHRyLCBkZWYpIHtcbiAgICB2YXIgdiA9ICRlbG0uYXR0cihhdHRyKTtcbiAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09ICcnID8gZGVmIDogdjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENzc0NsYXNzKHMpIHtcbiAgICB2YXIgdGhlbWUgPSBnZXRUaGVtZU5hbWUocyk7XG4gICAgdmFyIGJhc2VUaGVtZSA9IG1vYmlzY3JvbGwudGhlbWVzLmZvcm1bdGhlbWVdLmJhc2VUaGVtZTtcbiAgICByZXR1cm4gJ21ic2MtJyArIHRoZW1lICsgKGJhc2VUaGVtZSA/ICcgbWJzYy0nICsgYmFzZVRoZW1lIDogJycpICsgKHMucnRsID8gJyBtYnNjLXJ0bCcgOiAnIG1ic2MtbHRyJyk7XG4gIH1cblxuICB2YXIgRm9ybUNvbnRyb2wgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGb3JtQ29udHJvbChlbG0sIHNldHRpbmdzKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgcyA9IGV4dGVuZCQxKHt9LCBkZWZhdWx0cywgbW9iaXNjcm9sbC5zZXR0aW5ncywgc2V0dGluZ3MpO1xuICAgICAgdmFyICRlbG0gPSAkJDEoZWxtKTtcbiAgICAgIHZhciAkcCA9ICRlbG0ucGFyZW50KCk7XG4gICAgICB2YXIgJHBhcmVudCA9ICRwLmhhc0NsYXNzKCdtYnNjLWlucHV0LXdyYXAnKSA/ICRwLnBhcmVudCgpIDogJHA7IC8vIENoZWNrIGZvciBpbmxpbmUgbW9iaXNjcm9sbCBjb21wb25lbnRzXG5cbiAgICAgIHZhciAkZnJhbWUgPSAkZWxtLm5leHQoKS5oYXNDbGFzcygnbWJzYy1mcicpID8gJGVsbS5uZXh0KCkgOiBudWxsO1xuICAgICAgdmFyIHR5cGUgPSBnZXRDb250cm9sVHlwZSgkZWxtKTtcbiAgICAgIHZhciBpbnB1dFN0eWxlID0gZ2V0QXR0cigkZWxtLCAnZGF0YS1pbnB1dC1zdHlsZScsIHMuaW5wdXRTdHlsZSk7XG4gICAgICB2YXIgbGFiZWxTdHlsZSA9IGdldEF0dHIoJGVsbSwgJ2RhdGEtbGFiZWwtc3R5bGUnLCBzLmxhYmVsU3R5bGUpO1xuXG4gICAgICBpZiAoZWxtLm1ic2NJbnN0KSB7XG4gICAgICAgIGVsbS5tYnNjSW5zdC5kZXN0cm95KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICgkZnJhbWUpIHtcbiAgICAgICAgJGZyYW1lLmluc2VydEFmdGVyKCRwYXJlbnQpO1xuICAgICAgfVxuXG4gICAgICBzLnRoZW1lID0gZ2V0VGhlbWVOYW1lKHMpO1xuXG4gICAgICBpZiAocy5ydGwgPT09IHVuZGVmaW5lZCAmJiBzLmxhbmcgJiYgbW9iaXNjcm9sbC5pMThuW3MubGFuZ10pIHtcbiAgICAgICAgcy5ydGwgPSBtb2Jpc2Nyb2xsLmkxOG5bcy5sYW5nXS5ydGw7XG4gICAgICB9XG5cbiAgICAgIHdyYXBMYWJlbCgkcGFyZW50LCB0eXBlLCBpbnB1dFN0eWxlLCBsYWJlbFN0eWxlLCBlbG0pO1xuICAgICAgJGVsbS5hZGRDbGFzcygnbWJzYy1jb250cm9sJyk7IC8vIEF0dGFjaCBldmVudHNcblxuICAgICAgdGhpcy5faGFuZGxlID0gdGhpcy5faGFuZGxlLmJpbmQodGhpcyk7IC8vIFByZXZlbnQgMzAwbXMgY2xpY2sgbGF0ZW5jeVxuXG4gICAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgJGVsbS5vbihldiwgX3RoaXMuX2hhbmRsZSk7XG4gICAgICB9KTsgLy8gVG91Y2ggZXZlbnRzIGFyZSBhZGRlZCBzZXBhcmF0ZWx5LCBuZWVkcyB0byBiZSBwYXNzaXZlIGxpc3RlbmVyXG5cbiAgICAgIGxpc3RlbihlbG0sICd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlLCB7XG4gICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgbGlzdGVuKGVsbSwgJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZSwge1xuICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2V0dGluZ3MgPSBzO1xuICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XG4gICAgICB0aGlzLl9lbG0gPSBlbG07XG4gICAgICB0aGlzLl8kZWxtID0gJGVsbTtcbiAgICAgIHRoaXMuXyRwYXJlbnQgPSAkcGFyZW50O1xuICAgICAgdGhpcy5fJGZyYW1lID0gJGZyYW1lO1xuICAgICAgdGhpcy5fcmlwcGxlID0gZ2V0UmlwcGxlKHMudGhlbWUpO1xuICAgICAgdGhpcy5faXNGbG9hdGluZyA9IGxhYmVsU3R5bGUgPT0gJ2Zsb2F0aW5nJyB8fCAkcGFyZW50Lmhhc0NsYXNzKCdtYnNjLWxhYmVsLWZsb2F0aW5nJyk7XG4gICAgICB0aGlzLmNzc0NsYXNzID0gZ2V0Q3NzQ2xhc3Mocyk7XG4gICAgICB0aGlzLmdldENsYXNzRWxtKCkuYWRkQ2xhc3ModGhpcy5jc3NDbGFzcyk7XG4gICAgICBlbG0ubWJzY0luc3QgPSB0aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBGb3JtQ29udHJvbC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZ2V0Q2xhc3NFbG0gPSBmdW5jdGlvbiBnZXRDbGFzc0VsbSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl8kcGFyZW50O1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyICRlbG0gPSB0aGlzLl8kZWxtO1xuICAgICAgdmFyIGVsbSA9IHRoaXMuX2VsbTtcbiAgICAgICRlbG0ucmVtb3ZlQ2xhc3MoJ21ic2MtY29udHJvbCcpO1xuICAgICAgdGhpcy5nZXRDbGFzc0VsbSgpLnJlbW92ZUNsYXNzKHRoaXMuY3NzQ2xhc3MpO1xuICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICRlbG0ub2ZmKGV2LCBfdGhpczIuX2hhbmRsZSk7XG4gICAgICB9KTtcbiAgICAgIHVubGlzdGVuKGVsbSwgJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGUsIHtcbiAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICB1bmxpc3RlbihlbG0sICd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGUsIHtcbiAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBkZWxldGUgZWxtLm1ic2NJbnN0O1xuICAgIH07XG5cbiAgICBfcHJvdG8ub3B0aW9uID0gZnVuY3Rpb24gb3B0aW9uKHMpIHtcbiAgICAgIGV4dGVuZCQxKHRoaXMuc2V0dGluZ3MsIHMpO1xuICAgICAgdmFyIGNsYXNzRWxtID0gdGhpcy5nZXRDbGFzc0VsbSgpO1xuXG4gICAgICBpZiAodGhpcy5jc3NDbGFzcykge1xuICAgICAgICBjbGFzc0VsbS5yZW1vdmVDbGFzcyh0aGlzLmNzc0NsYXNzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jc3NDbGFzcyA9IGdldENzc0NsYXNzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgY2xhc3NFbG0uYWRkQ2xhc3ModGhpcy5jc3NDbGFzcyk7XG4gICAgICB0aGlzLl9yaXBwbGUgPSBnZXRSaXBwbGUodGhpcy5zZXR0aW5ncy50aGVtZSk7XG4gICAgfTtcblxuICAgIF9wcm90by5faGFuZGxlID0gZnVuY3Rpb24gX2hhbmRsZShldikge1xuICAgICAgc3dpdGNoIChldi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3RvdWNoc3RhcnQnOlxuICAgICAgICBjYXNlICdtb3VzZWRvd24nOlxuICAgICAgICAgIHRoaXMuX29uU3RhcnQoZXYpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAndG91Y2htb3ZlJzpcbiAgICAgICAgY2FzZSAnbW91c2Vtb3ZlJzpcbiAgICAgICAgICB0aGlzLl9vbk1vdmUoZXYpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAndG91Y2hlbmQnOlxuICAgICAgICBjYXNlICd0b3VjaGNhbmNlbCc6XG4gICAgICAgIGNhc2UgJ21vdXNldXAnOlxuICAgICAgICBjYXNlICdtb3VzZWxlYXZlJzpcbiAgICAgICAgICB0aGlzLl9vbkVuZChldik7XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9hZGRSaXBwbGUgPSBmdW5jdGlvbiBfYWRkUmlwcGxlKGV2KSB7XG4gICAgICBpZiAodGhpcy5fcmlwcGxlICYmIHRoaXMuXyRyaXBwbGVFbG0pIHtcbiAgICAgICAgdGhpcy5fcmlwcGxlLmFkZFJpcHBsZSh0aGlzLl8kcmlwcGxlRWxtLCBldik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fcmVtb3ZlUmlwcGxlID0gZnVuY3Rpb24gX3JlbW92ZVJpcHBsZSgpIHtcbiAgICAgIGlmICh0aGlzLl9yaXBwbGUgJiYgdGhpcy5fJHJpcHBsZUVsbSkge1xuICAgICAgICB0aGlzLl9yaXBwbGUucmVtb3ZlUmlwcGxlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fb25TdGFydCA9IGZ1bmN0aW9uIF9vblN0YXJ0KGV2KSB7XG4gICAgICB2YXIgZWxtID0gdGhpcy5fZWxtO1xuXG4gICAgICBpZiAodGVzdFRvdWNoKGV2LCBlbG0pKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0WCA9IGdldENvb3JkKGV2LCAnWCcpO1xuICAgICAgICB0aGlzLl9zdGFydFkgPSBnZXRDb29yZChldiwgJ1knKTtcblxuICAgICAgICBpZiAoJGFjdGl2ZSkge1xuICAgICAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ21ic2MtYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWVsbS5kaXNhYmxlZCkge1xuICAgICAgICAgIHRoaXMuX2lzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAkYWN0aXZlID0gdGhpcy5fJGVsbTtcbiAgICAgICAgICAkYWN0aXZlLmFkZENsYXNzKCdtYnNjLWFjdGl2ZScpO1xuXG4gICAgICAgICAgdGhpcy5fYWRkUmlwcGxlKGV2KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZXYudHlwZSA9PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgdGhpcy5fJGVsbS5jbG9zZXN0KCcubWJzYy1uby10b3VjaCcpLnJlbW92ZUNsYXNzKCdtYnNjLW5vLXRvdWNoJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fb25Nb3ZlID0gZnVuY3Rpb24gX29uTW92ZShldikge1xuICAgICAgLy8gSWYgbW92ZW1lbnQgaXMgbW9yZSB0aGFuIDlweCwgZG9uJ3QgZmlyZSB0aGUgY2xpY2sgZXZlbnQgaGFuZGxlclxuICAgICAgaWYgKHRoaXMuX2lzQWN0aXZlICYmIE1hdGguYWJzKGdldENvb3JkKGV2LCAnWCcpIC0gdGhpcy5fc3RhcnRYKSA+IDkgfHwgTWF0aC5hYnMoZ2V0Q29vcmQoZXYsICdZJykgLSB0aGlzLl9zdGFydFkpID4gOSkge1xuICAgICAgICB0aGlzLl8kZWxtLnJlbW92ZUNsYXNzKCdtYnNjLWFjdGl2ZScpO1xuXG4gICAgICAgIHRoaXMuX3JlbW92ZVJpcHBsZSgpO1xuXG4gICAgICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fb25FbmQgPSBmdW5jdGlvbiBfb25FbmQoZXYpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgY29udHJvbCA9IHRoaXMuX2VsbTtcbiAgICAgIHZhciB0eXBlID0gdGhpcy5fdHlwZTtcblxuICAgICAgaWYgKHRoaXMuX2lzQWN0aXZlICYmIHRoaXMuc2V0dGluZ3MudGFwICYmIGV2LnR5cGUgPT0gJ3RvdWNoZW5kJyAmJiAhY29udHJvbC5yZWFkT25seSkge1xuICAgICAgICBhY3RpdmF0ZUNvbnRyb2woY29udHJvbCwgdHlwZSwgZXYpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5faXNBY3RpdmUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMzLl8kZWxtLnJlbW92ZUNsYXNzKCdtYnNjLWFjdGl2ZScpO1xuXG4gICAgICAgICAgX3RoaXMzLl9yZW1vdmVSaXBwbGUoKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICRhY3RpdmUgPSBudWxsO1xuICAgIH07XG5cbiAgICByZXR1cm4gRm9ybUNvbnRyb2w7XG4gIH0oKTtcbiAgbW9iaXNjcm9sbC50aGVtZXMuZm9ybS5tb2Jpc2Nyb2xsID0ge307XG5cbiAgdmFyIGV2ZW50cyQxID0gWydmb2N1cycsICdjaGFuZ2UnLCAnYmx1cicsICdhbmltYXRpb25zdGFydCddO1xuICB2YXIgSW5wdXQgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfRm9ybUNvbnRyb2wpIHtcbiAgICBfaW5oZXJpdHNMb29zZShJbnB1dCwgX0Zvcm1Db250cm9sKTtcblxuICAgIGZ1bmN0aW9uIElucHV0KGVsbSwgc2V0dGluZ3MpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfRm9ybUNvbnRyb2wuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzKSB8fCB0aGlzO1xuICAgICAgdmFyICRlbG0gPSBfdGhpcy5fJGVsbTtcbiAgICAgIHZhciAkcGFyZW50ID0gX3RoaXMuXyRwYXJlbnQ7XG4gICAgICB2YXIgJGR1bW15ID0gJHBhcmVudC5maW5kKCcubWJzYy1zZWxlY3QtaW5wdXQsIC5tYnNjLWNvbG9yLWlucHV0Jyk7XG4gICAgICBhZGRJY29uVG9nZ2xlKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAkcGFyZW50LCAkZWxtKTtcbiAgICAgIF90aGlzLl9jaGVja0xhYmVsID0gX3RoaXMuX2NoZWNrTGFiZWwuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgICBfdGhpcy5fbW91c2VEb3duID0gX3RoaXMuX21vdXNlRG93bi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICAgIF90aGlzLl9zZXRUZXh0ID0gX3RoaXMuX3NldFRleHQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG5cbiAgICAgIGlmIChlbG0udHlwZSA9PSAnZmlsZScpIHtcbiAgICAgICAgLy8gQ29weSBhdHRyaWJ1dGVzIGFuZCBjcmVhdGUgZHVtbXkgaW5wdXRcbiAgICAgICAgdmFyICRleGlzdGluZyA9ICRwYXJlbnQuZmluZCgnLm1ic2MtZmlsZS1pbnB1dCcpO1xuICAgICAgICBfdGhpcy5fJGlucHV0ID0gJGV4aXN0aW5nLmxlbmd0aCA/ICRleGlzdGluZyA6ICQkMSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCInICsgKCRlbG0uYXR0cignY2xhc3MnKSB8fCAnJykgKyAnIG1ic2MtZmlsZS1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJyArICgkZWxtLmF0dHIoJ3BsYWNlaG9sZGVyJykgfHwgJycpICsgJ1wiLz4nKS5pbnNlcnRBZnRlcigkZWxtKTsgLy8gQ29weSB2YWx1ZSBvbiBmaWxlIHVwbG9hZFxuXG4gICAgICAgICRlbG0ub24oJ2NoYW5nZScsIF90aGlzLl9zZXRUZXh0KTtcbiAgICAgIH1cblxuICAgICAgJHBhcmVudC5hZGRDbGFzcygnbWJzYy1pbnB1dCcpLm9uKCdtb3VzZWRvd24nLCBfdGhpcy5fbW91c2VEb3duKTsgLy8gQXR0YWNoIGV2ZW50c1xuXG4gICAgICBldmVudHMkMS5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgICAkZWxtLm9uKGV2LCBfdGhpcy5fY2hlY2tMYWJlbCk7XG4gICAgICB9KTsgLy8gTW92ZSB0aGUgZHVtbXkgaW5wdXQgYWZ0ZXIgdGhlIGVsZW1lbnQgZm9yIGNvcnJlY3Qgc3R5bGluZ1xuXG4gICAgICBpZiAoJGR1bW15Lmxlbmd0aCkge1xuICAgICAgICAkZWxtLmFmdGVyKCRkdW1teSk7XG5cbiAgICAgICAgaWYgKCRkdW1teS5oYXNDbGFzcygnbWJzYy1zZWxlY3QtaW5wdXQnKSkge1xuICAgICAgICAgIF90aGlzLl9kZWxtID0gJGR1bW15WzBdO1xuXG4gICAgICAgICAgX3RoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gSW5wdXQucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLl9zZXRUZXh0ID0gZnVuY3Rpb24gX3NldFRleHQoZXYpIHtcbiAgICAgIHZhciBmaWxlcyA9IGV2LnRhcmdldC5maWxlcztcbiAgICAgIHZhciBuYW1lcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIG5hbWVzLnB1c2goZmlsZXNbaV0ubmFtZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuXyRpbnB1dC52YWwobmFtZXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2NoZWNrTGFiZWwgPSBmdW5jdGlvbiBfY2hlY2tMYWJlbChldikge1xuICAgICAgaWYgKHRoaXMuX2lzRmxvYXRpbmcpIHtcbiAgICAgICAgLy8gSW4gY2FzZSBvZiBzZWxlY3Qgd2UgbmVlZCB0byBjaGVjayB0aGUgZHVtbXkgZWxlbWVudFxuICAgICAgICB2YXIgZWxtID0gdGhpcy5fZGVsbSB8fCB0aGlzLl9lbG07IC8vIEluIGNhc2Ugb2YgYXV0b2ZpbGwgaW4gd2Via2l0IGJyb3dzZXJzIHRoZSBhbmltYXRpb25zdGFydCBldmVudCB3aWxsIGZpcmUgXG4gICAgICAgIC8vIGR1ZSB0byB0aGUgZW1wdHkgYW5pbWF0aW9uIGFkZGVkIGluIHRoZSBjc3MsXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlcmUncyBubyBvdGhlciBldmVudCBpbiBjYXNlIG9mIHRoZSBpbml0aWFsIGF1dG9maWxsXG5cbiAgICAgICAgaWYgKGVsbS52YWx1ZSB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlbG0gfHwgZXYgJiYgKGV2LnR5cGUgPT0gJ2ZvY3VzJyB8fCBldi50eXBlID09ICdhbmltYXRpb25zdGFydCcgJiYgdGhpcy5fJGVsbS5pcygnKjotd2Via2l0LWF1dG9maWxsJykpKSB7XG4gICAgICAgICAgdGhpcy5fJHBhcmVudC5hZGRDbGFzcygnbWJzYy1sYWJlbC1mbG9hdGluZy1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl8kcGFyZW50LnJlbW92ZUNsYXNzKCdtYnNjLWxhYmVsLWZsb2F0aW5nLWFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fbW91c2VEb3duID0gZnVuY3Rpb24gX21vdXNlRG93bihldikge1xuICAgICAgLy8gV2lsbCBwcmV2ZW50IGZsb2F0aW5nIGxhYmVsIGFuaW1hdGlvbiB3aGVuIGxvb3NpbmcgZm9jdXMgb25seSBmb3IgYSBicmllZiBtb21lbnRcbiAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLl9lbG0gJiYgZXYudGFyZ2V0ICE9PSB0aGlzLl9lbG0pIHtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLnJlZnJlc2ggPSBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgdGhpcy5fY2hlY2tMYWJlbCgpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgX0Zvcm1Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG5cbiAgICAgIHRoaXMuXyRwYXJlbnQub2ZmKCdtb3VzZWRvd24nLCB0aGlzLl9tb3VzZURvd24pLnJlbW92ZUNsYXNzKCdtYnNjLWljLWxlZnQgbWJzYy1pYy1yaWdodCcpLmZpbmQoJy5tYnNjLWlucHV0LWljJykucmVtb3ZlKCk7XG5cbiAgICAgIHRoaXMuXyRwYXJlbnQuZmluZCgnLm1ic2MtaW5wdXQtZmlsbCcpLnJlbW92ZSgpO1xuXG4gICAgICBldmVudHMkMS5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgICBfdGhpczIuXyRlbG0ub2ZmKGV2LCBfdGhpczIuX2NoZWNrTGFiZWwpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuXyRlbG0ub2ZmKCdjaGFuZ2UnLCB0aGlzLl9zZXRUZXh0KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIElucHV0O1xuICB9KEZvcm1Db250cm9sKTsgLy8gSW5pdCBtYnNjLWlucHV0IGVsZW1lbnRzIG9uIHBhZ2UgbG9hZFxuXG4gIGF1dG9Jbml0KCdbbWJzYy1pbnB1dF0nLCBJbnB1dCk7XG5cbiAgdmFyIE1ic2NGb3JtQmFzZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY0Zvcm1CYXNlLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY0Zvcm1CYXNlKGhvc3RFbGVtLCBfZm9ybVNlcnZpY2UsIHpvbmUpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBob3N0RWxlbSwgem9uZSkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5fZm9ybVNlcnZpY2UgPSBfZm9ybVNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBNYnNjRm9ybUJhc2UucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuX2luaGVyaXRlZE9wdGlvbnMgPSB0aGlzLl9mb3JtU2VydmljZSA/IHRoaXMuX2Zvcm1TZXJ2aWNlLm9wdGlvbnMgOiB7fTtcbiAgICAgIH07XG4gICAgICBNYnNjRm9ybUJhc2UuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1ttYnNjLWYtYl0nIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NGb3JtQmFzZS5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdab25lLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NGb3JtQmFzZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICAgICAnY29sb3InOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnb3B0aW9ucyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdkaXNhYmxlZCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICduYW1lJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ19pbml0RWxlbSc6IFt7IHR5cGU6IGNvcmUuVmlld0NoaWxkLCBhcmdzOiBbJ2luaXRFbGVtZW50JywgeyBzdGF0aWM6IGZhbHNlIH0sXSB9LF0sXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1ic2NGb3JtQmFzZTtcbiAgfShNYnNjQmFzZSkpO1xuICB2YXIgTWJzY0Zvcm1WYWx1ZUJhc2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1ic2NGb3JtVmFsdWVCYXNlLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY0Zvcm1WYWx1ZUJhc2UoaG9zdEVsZW0sIF9mb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgX2NvbnRyb2wsIHpvbmUpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBob3N0RWxlbSwgX2Zvcm1TZXJ2aWNlLCB6b25lKSB8fCB0aGlzO1xuICAgICAgICAgIF90aGlzLl9jb250cm9sID0gX2NvbnRyb2w7XG4gICAgICAgICAgX3RoaXMub25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgICAgX3RoaXMub25Ub3VjaCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgICBfdGhpcy5lcnJvck1lc3NhZ2UgPSAnJztcbiAgICAgICAgICBfdGhpcy52YWx1ZUNoYW5nZUVtaXR0ZXIgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICBpZiAoX2NvbnRyb2wgJiYgKCFfaW5wdXRTZXJ2aWNlIHx8ICFfaW5wdXRTZXJ2aWNlLmlzQ29udHJvbFNldCkpIHtcbiAgICAgICAgICAgICAgaWYgKF9jb250cm9sLnZhbHVlQWNjZXNzb3IgJiYgX2NvbnRyb2wudmFsdWVBY2Nlc3Nvci5vbGRBY2Nlc3NvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICBfY29udHJvbC52YWx1ZUFjY2Vzc29yLm9sZEFjY2Vzc29yID0gX3RoaXM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBfY29udHJvbC52YWx1ZUFjY2Vzc29yID0gX3RoaXM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NGb3JtVmFsdWVCYXNlLnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB7XG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3JlYWRvbmx5ID0gZW1wdHlPclRydWUodmFsKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjRm9ybVZhbHVlQmFzZS5wcm90b3R5cGUsIFwiaW5uZXJWYWx1ZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2O1xuICAgICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKHYpO1xuICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlRW1pdHRlci5lbWl0KHYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NGb3JtVmFsdWVCYXNlLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICB0aGlzLl92YWx1ZSA9IHY7XG4gICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY0Zvcm1WYWx1ZUJhc2UucHJvdG90eXBlLnJlZ2lzdGVyT25DaGFuZ2UgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgICB9O1xuICAgICAgTWJzY0Zvcm1WYWx1ZUJhc2UucHJvdG90eXBlLnJlZ2lzdGVyT25Ub3VjaGVkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgdGhpcy5vblRvdWNoID0gZm47XG4gICAgICB9O1xuICAgICAgTWJzY0Zvcm1WYWx1ZUJhc2UucHJvdG90eXBlLnNldERpc2FibGVkU3RhdGUgPSBmdW5jdGlvbiAoaXNEaXNhYmxlZCkge1xuICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICAgICAgfTtcbiAgICAgIE1ic2NGb3JtVmFsdWVCYXNlLnByb3RvdHlwZS53cml0ZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB0aGlzLl92YWx1ZSA9IHY7XG4gICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9O1xuICAgICAgTWJzY0Zvcm1WYWx1ZUJhc2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZSAmJiB0aGlzLmluc3RhbmNlLnJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICBfdGhpcy5pbnN0YW5jZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fbmVlZFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjRm9ybVZhbHVlQmFzZS5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUubmdBZnRlclZpZXdJbml0LmNhbGwodGhpcyk7XG4gICAgICAgICAgaWYgKHRoaXMuX25lZWRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjRm9ybVZhbHVlQmFzZS5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5EaXJlY3RpdmUsIGFyZ3M6IFt7IHNlbGVjdG9yOiAnW21ic2MtZnYtYl0nIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NGb3JtVmFsdWVCYXNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY09wdGlvbnNTZXJ2aWNlLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY0lucHV0U2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IGZvcm1zLk5nQ29udHJvbCwgfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdab25lLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NGb3JtVmFsdWVCYXNlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdyZWFkb25seSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICd2YWx1ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdlcnJvcic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdlcnJvck1lc3NhZ2UnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAndmFsdWVDaGFuZ2VFbWl0dGVyJzogW3sgdHlwZTogY29yZS5PdXRwdXQsIGFyZ3M6IFsndmFsdWVDaGFuZ2UnLF0gfSxdLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBNYnNjRm9ybVZhbHVlQmFzZTtcbiAgfShNYnNjRm9ybUJhc2UpKTtcbiAgdmFyIE1ic2NJbnB1dEJhc2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1ic2NJbnB1dEJhc2UsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBNYnNjSW5wdXRCYXNlKGluaXRpYWxFbGVtLCBfZm9ybVNlcnZpY2UsIF9pbnB1dFNlcnZpY2UsIF9jb250cm9sLCB6b25lKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaW5pdGlhbEVsZW0sIF9mb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgX2NvbnRyb2wsIHpvbmUpIHx8IHRoaXM7XG4gICAgICAgICAgX3RoaXMudHlwZSA9ICd0ZXh0JztcbiAgICAgICAgICBfdGhpcy5wbGFjZWhvbGRlciA9ICcnO1xuICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIE1ic2NJbnB1dEJhc2UuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1ttYnNjLWktYl0nIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NJbnB1dEJhc2UuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjT3B0aW9uc1NlcnZpY2UsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjSW5wdXRTZXJ2aWNlLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogZm9ybXMuTmdDb250cm9sLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY0lucHV0QmFzZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICAgICAnYXV0b2NvbXBsZXRlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2F1dG9jYXBpdGFsaXplJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2F1dG9jb3JyZWN0JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3NwZWxsY2hlY2snOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnYXV0b2ZvY3VzJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ21pbmxlbmd0aCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdtYXhsZW5ndGgnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAncmVxdWlyZWQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdpY29uQWxpZ24nOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ2ljb24tYWxpZ24nLF0gfSxdLFxuICAgICAgICAgICd0eXBlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3Bhc3N3b3JkVG9nZ2xlJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydwYXNzd29yZC10b2dnbGUnLF0gfSxdLFxuICAgICAgICAgICdpY29uU2hvdyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnaWNvbi1zaG93JyxdIH0sXSxcbiAgICAgICAgICAnaWNvbkhpZGUnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ2ljb24taGlkZScsXSB9LF0sXG4gICAgICAgICAgJ2ljb25VcGxvYWQnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ2ljb24tdXBsb2FkJyxdIH0sXSxcbiAgICAgICAgICAnaW5wdXRTdHlsZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnaW5wdXQtc3R5bGUnLF0gfSxdLFxuICAgICAgICAgICdsYWJlbFN0eWxlJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydsYWJlbC1zdHlsZScsXSB9LF0sXG4gICAgICAgICAgJ3BsYWNlaG9sZGVyJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1ic2NJbnB1dEJhc2U7XG4gIH0oTWJzY0Zvcm1WYWx1ZUJhc2UpKTtcbiAgdmFyIE1ic2NJbnB1dCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY0lucHV0LCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY0lucHV0KGluaXRpYWxFbGVtLCBfZm9ybVNlcnZpY2UsIF9pbnB1dFNlcnZpY2UsIF9jb250cm9sLCB6b25lKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaW5pdGlhbEVsZW0sIF9mb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgX2NvbnRyb2wsIHpvbmUpIHx8IHRoaXM7XG4gICAgICAgICAgX3RoaXMuX2lucHV0U2VydmljZSA9IF9pbnB1dFNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMuY29udHJvbE5nID0gdHJ1ZTtcbiAgICAgICAgICBfdGhpcy5kcm9wZG93biA9IGZhbHNlO1xuICAgICAgICAgIF9pbnB1dFNlcnZpY2UuaW5wdXQgPSBfdGhpcztcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBNYnNjSW5wdXQucHJvdG90eXBlLmluaXRDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgSW5wdXQodGhpcy5faW5pdEVsZW0ubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzLmluc3RhbmNlLnJlZnJlc2goKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBNYnNjSW5wdXQuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnW2NsYXNzLm1ic2MtY29udHJvbC1uZ10nOiAnY29udHJvbE5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tjbGFzcy5tYnNjLWVycl0nOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgICAgIDxsYWJlbFxcbiAgICAgICAgICAgIFtjbGFzcy5tYnNjLWVycl09XFxcImVycm9yXFxcIiBbY2xhc3MubWJzYy1zZWxlY3RdPVxcXCJkcm9wZG93blxcXCJcXG4gICAgICAgICAgICBbY2xhc3MubWJzYy1pbnB1dC1ib3hdPVxcXCJpbnB1dFN0eWxlID09ICdib3gnXFxcIlxcbiAgICAgICAgICAgIFtjbGFzcy5tYnNjLWlucHV0LW91dGxpbmVdPVxcXCJpbnB1dFN0eWxlID09ICdvdXRsaW5lJ1xcXCJcXG4gICAgICAgICAgICBbY2xhc3MubWJzYy1sYWJlbC1zdGFja2VkXT1cXFwibGFiZWxTdHlsZSA9PSAnc3RhY2tlZCdcXFwiXFxuICAgICAgICAgICAgW2NsYXNzLm1ic2MtbGFiZWwtaW5saW5lXT1cXFwibGFiZWxTdHlsZSA9PSAnaW5saW5lJ1xcXCJcXG4gICAgICAgICAgICBbY2xhc3MubWJzYy1sYWJlbC1mbG9hdGluZ109XFxcImxhYmVsU3R5bGUgPT0gJ2Zsb2F0aW5nJ1xcXCJcXG4gICAgICAgID5cXG4gICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm1ic2MtaW5wdXQtd3JhcFxcXCI+XFxuICAgICAgICAgICAgICAgIDxpbnB1dCAjaW5pdEVsZW1lbnQgW3R5cGVdPVxcXCJ0eXBlXFxcIiBbcGxhY2Vob2xkZXJdPVxcXCJwbGFjZWhvbGRlclxcXCIgWyhuZ01vZGVsKV09XFxcImlubmVyVmFsdWVcXFwiIChibHVyKT1cXFwib25Ub3VjaCgkZXZlbnQpXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIubmFtZV09XFxcIm5hbWVcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWljb25dPVxcXCJpY29uID8gaWNvbiA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWljb24tYWxpZ25dPVxcXCJpY29uQWxpZ24gPyBpY29uQWxpZ24gOiBudWxsXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1wYXNzd29yZC10b2dnbGVdPVxcXCJwYXNzd29yZFRvZ2dsZSA/ICd0cnVlJzogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtaWNvbi1zaG93XT1cXFwiaWNvblNob3cgPyBpY29uU2hvdyA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWljb24taGlkZV09XFxcImljb25IaWRlID8gaWNvbkhpZGUgOiBudWxsXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1pY29uLXVwbG9hZF09XFxcImljb25VcGxvYWQgPyBpY29uVXBsb2FkIDogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLm1pbl09XFxcIm1pblxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLm1heF09XFxcIm1heFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLm1pbmxlbmd0aF09XFxcIm1pbmxlbmd0aFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLm1heGxlbmd0aF09XFxcIm1heGxlbmd0aFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmF1dG9jb21wbGV0ZV09XFxcImF1dG9jb21wbGV0ZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmF1dG9jYXBpdGFsaXplXT1cXFwiYXV0b2NhcGl0YWxpemVcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hdXRvY29ycmVjdF09XFxcImF1dG9jb3JyZWN0XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuc3BlbGxjaGVja109XFxcInNwZWxsY2hlY2tcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hdXRvZm9jdXNdPVxcXCJhdXRvZm9jdXNcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5zdGVwXT1cXFwic3RlcFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLnBhdHRlcm5dPVxcXCJwYXR0ZXJuXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIucmVxdWlyZWRdPVxcXCJyZXF1aXJlZFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFjY2VwdF09XFxcImFjY2VwdFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLm11bHRpcGxlXT1cXFwibXVsdGlwbGVcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFtyZWFkb25seV09XFxcIl9yZWFkb25seVxcXCIgLz5cXG4gICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XFxcImRyb3Bkb3duXFxcIiBjbGFzcz1cXFwibWJzYy1zZWxlY3QtaWMgbWJzYy1pYyBtYnNjLWljLWFycm93LWRvd241XFxcIj48L3NwYW4+XFxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVxcXCJlcnJvciAmJiBlcnJvck1lc3NhZ2VcXFwiIGNsYXNzPVxcXCJtYnNjLWVyci1tc2dcXFwiPnt7ZXJyb3JNZXNzYWdlfX08L3NwYW4+XFxuICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgPC9sYWJlbD5cXG4gICAgXCIsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbTWJzY0lucHV0U2VydmljZV1cbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NJbnB1dC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NJbnB1dFNlcnZpY2UsIH0sXG4gICAgICAgICAgeyB0eXBlOiBmb3Jtcy5OZ0NvbnRyb2wsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgIF07IH07XG4gICAgICBNYnNjSW5wdXQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ21pbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdtYXgnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc3RlcCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdwYXR0ZXJuJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2FjY2VwdCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdtdWx0aXBsZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdjb250cm9sTmcnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZHJvcGRvd24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY0lucHV0O1xuICB9KE1ic2NJbnB1dEJhc2UpKTtcbiAgdmFyIE1ic2NJbnB1dE1vZHVsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYnNjSW5wdXRNb2R1bGUoKSB7XG4gICAgICB9XG4gICAgICBNYnNjSW5wdXRNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgaW1wb3J0czogW2Zvcm1zLkZvcm1zTW9kdWxlLCBjb21tb24uQ29tbW9uTW9kdWxlLCBNYnNjQmFzZU1vZHVsZV0sXG4gICAgICAgICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTWJzY0lucHV0LCBNYnNjSW5wdXRCYXNlLCBNYnNjRm9ybUJhc2UsIE1ic2NGb3JtVmFsdWVCYXNlXSxcbiAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzOiBbTWJzY0lucHV0XVxuICAgICAgICAgICAgICAgICAgfSxdIH0sXG4gICAgICBdO1xuICAgICAgTWJzY0lucHV0TW9kdWxlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4gICAgICByZXR1cm4gTWJzY0lucHV0TW9kdWxlO1xuICB9KCkpO1xuXG4gIHZhciBCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfRm9ybUNvbnRyb2wpIHtcbiAgICBfaW5oZXJpdHNMb29zZShCdXR0b24sIF9Gb3JtQ29udHJvbCk7XG5cbiAgICBmdW5jdGlvbiBCdXR0b24oZWxtLCBzZXR0aW5ncykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9Gb3JtQ29udHJvbC5jYWxsKHRoaXMsIGVsbSwgc2V0dGluZ3MpIHx8IHRoaXM7XG4gICAgICB2YXIgJGVsbSA9IF90aGlzLl8kZWxtO1xuICAgICAgdmFyIGhhc0ljb24gPSAkZWxtLmF0dHIoJ2RhdGEtaWNvbicpO1xuICAgICAgJGVsbS5hZGRDbGFzcygnbWJzYy1idG4gbWJzYy1uby10b3VjaCcpLmZpbmQoJy5tYnNjLWJ0bi1pYycpLnJlbW92ZSgpO1xuXG4gICAgICBpZiAoaGFzSWNvbikge1xuICAgICAgICAkZWxtLnByZXBlbmQoJzxzcGFuIGNsYXNzPVwibWJzYy1idG4taWMgbWJzYy1pYyBtYnNjLWljLScgKyBoYXNJY29uICsgJ1wiPjwvc3Bhbj4nKTtcblxuICAgICAgICBpZiAoJGVsbS50ZXh0KCkgPT09IFwiXCIpIHtcbiAgICAgICAgICAkZWxtLmFkZENsYXNzKCdtYnNjLWJ0bi1pY29uLW9ubHknKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBfdGhpcy5fJHJpcHBsZUVsbSA9ICRlbG07XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IEJ1dHRvbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZ2V0Q2xhc3NFbG0gPSBmdW5jdGlvbiBnZXRDbGFzc0VsbSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl8kZWxtO1xuICAgIH07XG5cbiAgICByZXR1cm4gQnV0dG9uO1xuICB9KEZvcm1Db250cm9sKTsgLy8gSW5pdCBtYnNjLWJ1dHRvbiBlbGVtZW50cyBvbiBwYWdlIGxvYWRcblxuICBhdXRvSW5pdCgnW21ic2MtYnV0dG9uXScsIEJ1dHRvbik7XG5cbiAgdmFyIENoZWNrQm94ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0Zvcm1Db250cm9sKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoQ2hlY2tCb3gsIF9Gb3JtQ29udHJvbCk7XG5cbiAgICBmdW5jdGlvbiBDaGVja0JveChlbG0sIHNldHRpbmdzKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0Zvcm1Db250cm9sLmNhbGwodGhpcywgZWxtLCBzZXR0aW5ncykgfHwgdGhpcztcblxuICAgICAgX3RoaXMuXyRwYXJlbnQucHJlcGVuZChfdGhpcy5fJGVsbSkuYWRkQ2xhc3MoJ21ic2MtY2hlY2tib3ggbWJzYy1jb250cm9sLXcnKS5maW5kKCcubWJzYy1jaGVja2JveC1ib3gnKS5yZW1vdmUoKTtcblxuICAgICAgX3RoaXMuXyRlbG0uYWZ0ZXIoJzxzcGFuIGNsYXNzPVwibWJzYy1jaGVja2JveC1ib3hcIj48L3NwYW4+Jyk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gQ2hlY2tCb3g7XG4gIH0oRm9ybUNvbnRyb2wpOyAvLyBJbml0IG1ic2MtY2hlY2tib3ggZWxlbWVudHMgb24gcGFnZSBsb2FkXG5cbiAgYXV0b0luaXQoJ1ttYnNjLWNoZWNrYm94XScsIENoZWNrQm94KTtcblxuICB2YXIgUmFkaW8gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfRm9ybUNvbnRyb2wpIHtcbiAgICBfaW5oZXJpdHNMb29zZShSYWRpbywgX0Zvcm1Db250cm9sKTtcblxuICAgIGZ1bmN0aW9uIFJhZGlvKGVsbSwgc2V0dGluZ3MpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfRm9ybUNvbnRyb2wuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5fJHBhcmVudC5hZGRDbGFzcygnbWJzYy1yYWRpbyBtYnNjLWNvbnRyb2wtdycpLmZpbmQoJy5tYnNjLXJhZGlvLWJveCcpLnJlbW92ZSgpO1xuXG4gICAgICBfdGhpcy5fJGVsbS5hZnRlcignPHNwYW4gY2xhc3M9XCJtYnNjLXJhZGlvLWJveFwiPjxzcGFuPjwvc3Bhbj48L3NwYW4+Jyk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gUmFkaW87XG4gIH0oRm9ybUNvbnRyb2wpOyAvLyBJbml0IG1ic2MtcmFkaW8gZWxlbWVudHMgb24gcGFnZSBsb2FkXG5cbiAgYXV0b0luaXQoJ1ttYnNjLXJhZGlvXScsIFJhZGlvKTtcblxuICB2YXIgU2VsZWN0ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0lucHV0KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoU2VsZWN0LCBfSW5wdXQpO1xuXG4gICAgZnVuY3Rpb24gU2VsZWN0KGVsbSwgc2V0dGluZ3MpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfSW5wdXQuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzKSB8fCB0aGlzO1xuICAgICAgdmFyICRlbG0gPSBfdGhpcy5fJGVsbTtcbiAgICAgIHZhciAkcGFyZW50ID0gX3RoaXMuXyRwYXJlbnQ7XG4gICAgICB2YXIgJGV4aXN0aW5nID0gJHBhcmVudC5maW5kKCcubWJzYy1zZWxlY3QtaW5wdXQnKTtcbiAgICAgIHZhciAkaW5wdXQgPSAkZXhpc3RpbmcubGVuZ3RoID8gJGV4aXN0aW5nIDogJCQxKCc8aW5wdXQgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwibWJzYy1zZWxlY3QtaW5wdXQgbWJzYy1jb250cm9sXCIgcmVhZG9ubHk+Jyk7XG4gICAgICBfdGhpcy5fJGlucHV0ID0gJGlucHV0O1xuICAgICAgX3RoaXMuX2RlbG0gPSAkaW5wdXRbMF07XG4gICAgICBfdGhpcy5fc2V0VGV4dCA9IF90aGlzLl9zZXRUZXh0LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgICAgJHBhcmVudC5hZGRDbGFzcygnbWJzYy1zZWxlY3QnICsgKF90aGlzLl8kZnJhbWUgPyAnIG1ic2Mtc2VsZWN0LWlubGluZScgOiAnJykpO1xuICAgICAgJGVsbS5hZnRlcigkaW5wdXQpO1xuICAgICAgJGlucHV0LmFmdGVyKCc8c3BhbiBjbGFzcz1cIm1ic2Mtc2VsZWN0LWljIG1ic2MtaWMgbWJzYy1pYy1hcnJvdy1kb3duNVwiPjwvc3Bhbj4nKTsgLy8gVXBkYXRlIGR1bW15IGlucHV0IHRleHQgb24gY2hhbmdlXG5cbiAgICAgICRlbG0ub24oJ2NoYW5nZScsIF90aGlzLl9zZXRUZXh0KTtcblxuICAgICAgX3RoaXMuX3NldFRleHQoKTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBTZWxlY3QucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgX0lucHV0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG5cbiAgICAgIHRoaXMuXyRwYXJlbnQuZmluZCgnLm1ic2Mtc2VsZWN0LWljJykucmVtb3ZlKCk7XG5cbiAgICAgIHRoaXMuXyRlbG0ub2ZmKCdjaGFuZ2UnLCB0aGlzLl9zZXRUZXh0KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zZXRUZXh0ID0gZnVuY3Rpb24gX3NldFRleHQoKSB7XG4gICAgICB2YXIgZWxtID0gdGhpcy5fZWxtO1xuICAgICAgdmFyICRlbG0gPSAkJDEoZWxtKTsgLy8gQ2hlY2sgaWYgc2VsZWN0IGFuZCBtb2Jpc2Nyb2xsIHNlbGVjdCB3YXMgbm90IGluaXRpYWxpemVkXG5cbiAgICAgIGlmICgkZWxtLmlzKCdzZWxlY3QnKSAmJiAhJGVsbS5oYXNDbGFzcygnbWJzYy1jb21wJykpIHtcbiAgICAgICAgdGhpcy5fJGlucHV0LnZhbChlbG0uc2VsZWN0ZWRJbmRleCAhPSAtMSA/IGVsbS5vcHRpb25zW2VsbS5zZWxlY3RlZEluZGV4XS50ZXh0IDogJycpO1xuICAgICAgfSAvLyBDaGVjayBmbG9hdGluZyBsYWJlbFxuXG5cbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2VsZWN0O1xuICB9KElucHV0KTsgLy8gSW5pdCBtYnNjLXNlbGVjdCBlbGVtZW50cyBvbiBwYWdlIGxvYWRcblxuICBhdXRvSW5pdCgnW21ic2MtZHJvcGRvd25dJywgU2VsZWN0KTtcblxuICB2YXIgZXZlbnRzJDIgPSBbJ2NoYW5nZScsICdrZXlkb3duJywgJ2lucHV0JywgJ3Njcm9sbCddO1xuICB2YXIgc2l6ZURlYm91bmNlO1xuXG4gIGZ1bmN0aW9uIHNpemVUZXh0QXJlYXMoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHNpemVEZWJvdW5jZSk7XG4gICAgc2l6ZURlYm91bmNlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAkJDEoJ3RleHRhcmVhLm1ic2MtY29udHJvbCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBzaXplVGV4dEFyZWEodGhpcyk7XG4gICAgICB9KTtcbiAgICB9LCAxMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gc2l6ZVRleHRBcmVhKGNvbnRyb2wpIHtcbiAgICB2YXIgaGVpZ2h0LFxuICAgICAgICBsaW5lTnIsXG4gICAgICAgIGxpbmUsXG4gICAgICAgIHJvd05yID0gJCQxKGNvbnRyb2wpLmF0dHIoJ3Jvd3MnKSB8fCA2O1xuXG4gICAgaWYgKGNvbnRyb2wub2Zmc2V0SGVpZ2h0KSB7XG4gICAgICBjb250cm9sLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgbGluZSA9IGNvbnRyb2wuc2Nyb2xsSGVpZ2h0IC0gY29udHJvbC5vZmZzZXRIZWlnaHQ7XG4gICAgICBoZWlnaHQgPSBjb250cm9sLm9mZnNldEhlaWdodCArIChsaW5lID4gMCA/IGxpbmUgOiAwKTtcbiAgICAgIGxpbmVOciA9IE1hdGgucm91bmQoaGVpZ2h0IC8gMjQpO1xuXG4gICAgICBpZiAobGluZU5yID4gcm93TnIpIHtcbiAgICAgICAgLy9jb250cm9sLnNjcm9sbFRvcCA9IGhlaWdodDtcbiAgICAgICAgaGVpZ2h0ID0gMjQgKiByb3dOciArIChoZWlnaHQgLSBsaW5lTnIgKiAyNCk7XG4gICAgICAgICQkMShjb250cm9sKS5hZGRDbGFzcygnbWJzYy10ZXh0YXJlYS1zY3JvbGwnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQkMShjb250cm9sKS5yZW1vdmVDbGFzcygnbWJzYy10ZXh0YXJlYS1zY3JvbGwnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhlaWdodCkge1xuICAgICAgICBjb250cm9sLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsVGV4dEFyZWEoZWxtKSB7XG4gICAgdmFyICRlbG0gPSAkJDEoZWxtKTtcblxuICAgIGlmICghJGVsbS5oYXNDbGFzcygnbWJzYy10ZXh0YXJlYS1zY3JvbGwnKSkge1xuICAgICAgdmFyIGxpbmUgPSBlbG0uc2Nyb2xsSGVpZ2h0IC0gZWxtLm9mZnNldEhlaWdodCxcbiAgICAgICAgICBoZWlnaHQgPSBlbG0ub2Zmc2V0SGVpZ2h0ICsgbGluZSxcbiAgICAgICAgICBsaW5lTnIgPSBNYXRoLnJvdW5kKGhlaWdodCAvIDI0KSxcbiAgICAgICAgICByb3dOciA9ICRlbG0uYXR0cigncm93cycpIHx8IDY7XG5cbiAgICAgIGlmIChsaW5lTnIgPD0gcm93TnIpIHtcbiAgICAgICAgZWxtLnNjcm9sbFRvcCA9IDA7XG4gICAgICAgIGVsbS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpc0Jyb3dzZXIpIHtcbiAgICAvLyBTZXQgaGVpZ2h0IG9mIHRleHRhcmVhcyBvbiB2aWV3cG9ydCBzaXplIGNoYW5nZXNcbiAgICAkJDEod2luZG93KS5vbigncmVzaXplIG9yaWVudGF0aW9uY2hhbmdlJywgc2l6ZVRleHRBcmVhcyk7XG4gIH1cblxuICB2YXIgVGV4dEFyZWEgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfSW5wdXQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShUZXh0QXJlYSwgX0lucHV0KTtcblxuICAgIGZ1bmN0aW9uIFRleHRBcmVhKGVsbSwgc2V0dGluZ3MpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfSW5wdXQuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5fJHBhcmVudC5hZGRDbGFzcygnbWJzYy10ZXh0YXJlYScpO1xuXG4gICAgICBldmVudHMkMi5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgICBfdGhpcy5fJGVsbS5vbihldiwgX3RoaXMuX2hhbmRsZSk7XG4gICAgICB9KTtcbiAgICAgIHNpemVUZXh0QXJlYShlbG0pO1xuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBUZXh0QXJlYS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgX0lucHV0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG5cbiAgICAgIGV2ZW50cyQyLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIF90aGlzMi5fJGVsbS5vZmYoZXYsIF90aGlzMi5faGFuZGxlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfcHJvdG8ucmVmcmVzaCA9IGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICBfSW5wdXQucHJvdG90eXBlLnJlZnJlc2guY2FsbCh0aGlzKTtcblxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2RlYm91bmNlKTtcbiAgICAgIHNpemVUZXh0QXJlYSh0aGlzLl9lbG0pO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2hhbmRsZSA9IGZ1bmN0aW9uIF9oYW5kbGUoZXYpIHtcbiAgICAgIF9JbnB1dC5wcm90b3R5cGUuX2hhbmRsZS5jYWxsKHRoaXMsIGV2KTtcblxuICAgICAgc3dpdGNoIChldi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NoYW5nZSc6XG4gICAgICAgICAgc2l6ZVRleHRBcmVhKHRoaXMuX2VsbSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAna2V5ZG93bic6XG4gICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICB0aGlzLl9vbklucHV0KGV2KTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3Njcm9sbCc6XG4gICAgICAgICAgc2Nyb2xsVGV4dEFyZWEodGhpcy5fZWxtKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9vbklucHV0ID0gZnVuY3Rpb24gX29uSW5wdXQoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2RlYm91bmNlKTtcbiAgICAgIHRoaXMuX2RlYm91bmNlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNpemVUZXh0QXJlYShfdGhpczMuX2VsbSk7XG4gICAgICB9LCAxMDApO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGV4dEFyZWE7XG4gIH0oSW5wdXQpO1xuXG4gIGF1dG9Jbml0KCdbbWJzYy10ZXh0YXJlYV0nLCBUZXh0QXJlYSk7XG5cbiAgdmFyIFNlZ21lbnRlZEl0ZW0gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfRm9ybUNvbnRyb2wpIHtcbiAgICBfaW5oZXJpdHNMb29zZShTZWdtZW50ZWRJdGVtLCBfRm9ybUNvbnRyb2wpO1xuXG4gICAgZnVuY3Rpb24gU2VnbWVudGVkSXRlbShlbG0sIHNldHRpbmdzKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0Zvcm1Db250cm9sLmNhbGwodGhpcywgZWxtLCBzZXR0aW5ncykgfHwgdGhpcztcbiAgICAgIHZhciAkc2VnbWVudENvbnQ7XG4gICAgICB2YXIgJHNlZ21lbnQ7XG4gICAgICB2YXIgJGVsbSA9IF90aGlzLl8kZWxtO1xuICAgICAgdmFyICRwYXJlbnQgPSBfdGhpcy5fJHBhcmVudDtcblxuICAgICAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdtYnNjLXNlZ21lbnRlZC1pdGVtLXJlYWR5JykpIHtcbiAgICAgICAgJHNlZ21lbnRDb250ID0gJCQxKCc8ZGl2IGNsYXNzPVwibWJzYy1zZWdtZW50ZWQgbWJzYy1zZWdtZW50ZWQtZ3JvdXAgbWJzYy1uby10b3VjaFwiPjwvZGl2PicpO1xuICAgICAgICAkcGFyZW50LmFmdGVyKCRzZWdtZW50Q29udCk7XG4gICAgICAgICRwYXJlbnQucGFyZW50KCkuZmluZCgnaW5wdXRbbmFtZT1cIicgKyAkZWxtLmF0dHIoJ25hbWUnKSArICdcIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgJGlucHV0ID0gJCQxKHRoaXMpO1xuICAgICAgICAgICRzZWdtZW50ID0gJGlucHV0LnBhcmVudCgpLmFkZENsYXNzKCdtYnNjLXNlZ21lbnRlZC1pdGVtIG1ic2Mtc2VnbWVudGVkLWl0ZW0tcmVhZHknKTtcbiAgICAgICAgICAkJDEoJzxzcGFuIGNsYXNzPVwibWJzYy1zZWdtZW50ZWQtY29udGVudFwiPicgKyAoJGlucHV0LmF0dHIoJ2RhdGEtaWNvbicpID8gJzxzcGFuIGNsYXNzPVwibWJzYy1pYyBtYnNjLWljLScgKyAkaW5wdXQuYXR0cignZGF0YS1pY29uJykgKyAnXCI+PC9zcGFuPicgOiAnJykgKyAnPC9zcGFuPicpLmFwcGVuZCgkc2VnbWVudC5jb250ZW50cygpKS5hcHBlbmRUbygkc2VnbWVudCk7XG4gICAgICAgICAgJHNlZ21lbnQucHJlcGVuZCgkaW5wdXQpO1xuICAgICAgICAgICRzZWdtZW50Q29udC5hcHBlbmQoJHNlZ21lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuXyRyaXBwbGVFbG0gPSAkZWxtLm5leHQoKTtcbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gU2VnbWVudGVkSXRlbS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZ2V0Q2xhc3NFbG0gPSBmdW5jdGlvbiBnZXRDbGFzc0VsbSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl8kZWxtLmNsb3Nlc3QoJy5tYnNjLXNlZ21lbnRlZCcpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2VnbWVudGVkSXRlbTtcbiAgfShGb3JtQ29udHJvbCk7IC8vIEluaXQgbWJzYy1zZWdtZW50ZWQgZWxlbWVudHMgb24gcGFnZSBsb2FkXG5cbiAgYXV0b0luaXQoJ1ttYnNjLXNlZ21lbnRlZF0nLCBTZWdtZW50ZWRJdGVtKTtcblxuICBmdW5jdGlvbiBjcmVhdGVTdGVwcGVyKCRlbG0sIGFjdGlvbiwgZGVsYXksIGlzUmVhZE9ubHksIHN0b3BQcm9wLCByaXBwbGUpIHtcbiAgICB2YXIgJGJ0bixcbiAgICAgICAgY2hhbmdlZCxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHJ1bm5pbmcsXG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgc3RhcnRYLFxuICAgICAgICBzdGFydFksXG4gICAgICAgIHN0ZXAsXG4gICAgICAgIHRpbWVyLFxuICAgICAgICBjaGVjayA9IGlzUmVhZE9ubHkgfHwgbm9vcDtcblxuICAgIGZ1bmN0aW9uIG9uQnRuU3RhcnQoZXYpIHtcbiAgICAgIHZhciBwcm9jZWVkO1xuICAgICAgJGJ0biA9ICQkMShldi5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIHN0ZXAgPSArJGJ0bi5hdHRyKCdkYXRhLXN0ZXAnKTtcbiAgICAgIGluZGV4ID0gKyRidG4uYXR0cignZGF0YS1pbmRleCcpO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG5cbiAgICAgIGlmIChzdG9wUHJvcCkge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2LnR5cGUgPT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgICRidG4uY2xvc2VzdCgnLm1ic2Mtbm8tdG91Y2gnKS5yZW1vdmVDbGFzcygnbWJzYy1uby10b3VjaCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXYudHlwZSA9PSAnbW91c2Vkb3duJykge1xuICAgICAgICAvLyBQcmV2ZW50IGZvY3VzXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldi50eXBlICE9ICdrZXlkb3duJykge1xuICAgICAgICAvL2UucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc3RhcnRYID0gZ2V0Q29vcmQoZXYsICdYJyk7XG4gICAgICAgIHN0YXJ0WSA9IGdldENvb3JkKGV2LCAnWScpO1xuICAgICAgICBwcm9jZWVkID0gdGVzdFRvdWNoKGV2LCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2NlZWQgPSBldi5rZXlDb2RlID09PSAzMjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFydW5uaW5nICYmIHByb2NlZWQgJiYgISRidG4uaGFzQ2xhc3MoJ21ic2MtZGlzYWJsZWQnKSkge1xuICAgICAgICBpZiAoc3RhcnQoaW5kZXgsIHN0ZXAsIGV2KSkge1xuICAgICAgICAgICRidG4uYWRkQ2xhc3MoJ21ic2MtYWN0aXZlJyk7XG5cbiAgICAgICAgICBpZiAocmlwcGxlKSB7XG4gICAgICAgICAgICByaXBwbGUuYWRkUmlwcGxlKCRidG4uZmluZCgnLm1ic2Mtc2VnbWVudGVkLWNvbnRlbnQnKSwgZXYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldi50eXBlID09ICdtb3VzZWRvd24nKSB7XG4gICAgICAgICAgJCQxKGRvY3VtZW50KS5vbignbW91c2Vtb3ZlJywgb25CdG5Nb3ZlKS5vbignbW91c2V1cCcsIG9uQnRuRW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQnRuTW92ZShldikge1xuICAgICAgaWYgKE1hdGguYWJzKHN0YXJ0WCAtIGdldENvb3JkKGV2LCAnWCcpKSA+IDcgfHwgTWF0aC5hYnMoc3RhcnRZIC0gZ2V0Q29vcmQoZXYsICdZJykpID4gNykge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQnRuRW5kKGV2KSB7XG4gICAgICBpZiAoZXYudHlwZSA9PSAndG91Y2hlbmQnKSB7XG4gICAgICAgIC8vIFByZXZlbnRzIGlPUyBzY3JvbGwgb24gZG91YmxlIHRhcFxuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICBzdG9wKCk7XG5cbiAgICAgIGlmIChldi50eXBlID09ICdtb3VzZXVwJykge1xuICAgICAgICAkJDEoZG9jdW1lbnQpLm9mZignbW91c2Vtb3ZlJywgb25CdG5Nb3ZlKS5vZmYoJ21vdXNldXAnLCBvbkJ0bkVuZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXG4gICAgICBpZiAoJGJ0bikge1xuICAgICAgICAkYnRuLnJlbW92ZUNsYXNzKCdtYnNjLWFjdGl2ZScpO1xuXG4gICAgICAgIGlmIChyaXBwbGUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJpcHBsZS5yZW1vdmVSaXBwbGUoKTtcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RhcnQoaSwgc3QsIGV2KSB7XG4gICAgICBpZiAoIXJ1bm5pbmcgJiYgIWNoZWNrKGkpKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgc3RlcCA9IHN0O1xuICAgICAgICBzb3VyY2UgPSBldjtcbiAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgc2V0VGltZW91dCh0aWNrLCAxMDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcnVubmluZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0aWNrKCkge1xuICAgICAgaWYgKCRidG4gJiYgJGJ0bi5oYXNDbGFzcygnbWJzYy1kaXNhYmxlZCcpKSB7XG4gICAgICAgIHN0b3AoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocnVubmluZyB8fCAhY2hhbmdlZCkge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgYWN0aW9uKGluZGV4LCBzdGVwLCBzb3VyY2UsIHRpY2spO1xuICAgICAgfVxuXG4gICAgICBpZiAocnVubmluZyAmJiBkZWxheSkge1xuICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgYWN0aW9uKGluZGV4LCBzdGVwLCBzb3VyY2UpO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICRlbG0uZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgdW5saXN0ZW4oZWwsICd0b3VjaHN0YXJ0Jywgb25CdG5TdGFydCwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHVubGlzdGVuKGVsLCAnbW91c2Vkb3duJywgb25CdG5TdGFydCk7XG4gICAgICAgIHVubGlzdGVuKGVsLCAna2V5ZG93bicsIG9uQnRuU3RhcnQpO1xuICAgICAgICB1bmxpc3RlbihlbCwgJ3RvdWNobW92ZScsIG9uQnRuTW92ZSwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHVubGlzdGVuKGVsLCAndG91Y2hlbmQnLCBvbkJ0bkVuZCk7XG4gICAgICAgIHVubGlzdGVuKGVsLCAndG91Y2hjYW5jZWwnLCBvbkJ0bkVuZCk7XG4gICAgICAgIHVubGlzdGVuKGVsLCAna2V5dXAnLCBvbkJ0bkVuZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAkZWxtLmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICBsaXN0ZW4oZWwsICd0b3VjaHN0YXJ0Jywgb25CdG5TdGFydCwge1xuICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGxpc3RlbihlbCwgJ21vdXNlZG93bicsIG9uQnRuU3RhcnQpO1xuICAgICAgbGlzdGVuKGVsLCAna2V5ZG93bicsIG9uQnRuU3RhcnQpO1xuICAgICAgbGlzdGVuKGVsLCAndG91Y2htb3ZlJywgb25CdG5Nb3ZlLCB7XG4gICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgbGlzdGVuKGVsLCAndG91Y2hlbmQnLCBvbkJ0bkVuZCk7XG4gICAgICBsaXN0ZW4oZWwsICd0b3VjaGNhbmNlbCcsIG9uQnRuRW5kKTtcbiAgICAgIGxpc3RlbihlbCwgJ2tleXVwJywgb25CdG5FbmQpO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogc3RhcnQsXG4gICAgICBzdG9wOiBzdG9wLFxuICAgICAgZGVzdHJveTogZGVzdHJveVxuICAgIH07XG4gIH1cblxuICB2YXIgU3RlcHBlciA9IGZ1bmN0aW9uIFN0ZXBwZXIoY29udHJvbCwgc2V0dGluZ3MpIHtcbiAgICB2YXIgJGJ0blBsdXMsXG4gICAgICAgICRidG5NaW51cyxcbiAgICAgICAgJGNvbnRyb2xzLFxuICAgICAgICBjc3NDbGFzcyA9ICcnLFxuICAgICAgICBkaXNwbGF5VmFsdWUsXG4gICAgICAgIG1heCxcbiAgICAgICAgbWluLFxuICAgICAgICBpbnB1dFN0eWxlLFxuICAgICAgICByaXBwbGUsXG4gICAgICAgIHNjYWxlLFxuICAgICAgICBzdGVwLFxuICAgICAgICBzdGVwcGVyLFxuICAgICAgICBzLFxuICAgICAgICB0aGVtZSxcbiAgICAgICAgdmFsLFxuICAgICAgICB0aGF0ID0gdGhpcyxcbiAgICAgICAgJGNvbnRyb2wgPSAkJDEoY29udHJvbCksXG4gICAgICAgIHJlYWR5LFxuICAgICAgICAkcGFyZW50LFxuICAgICAgICBvbGQgPSB2YWw7XG5cbiAgICBmdW5jdGlvbiBvbkNoYW5nZSgpIHtcbiAgICAgIHZhciB2O1xuXG4gICAgICBpZiAoIWNvbnRyb2wuZGlzYWJsZWQpIHtcbiAgICAgICAgdiA9IHBhcnNlRmxvYXQoJCQxKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgc2V0VmFsdWUoaXNOYU4odikgPyB2YWwgOiB2KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja0Rpc2FibGVkKCkge1xuICAgICAgcmV0dXJuIGNvbnRyb2wuZGlzYWJsZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RlcFZhbHVlKGluZGV4LCBkaXIpIHtcbiAgICAgIHNldFZhbHVlKHZhbCArIGRpciAqIHN0ZXApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFZhbHVlKHYsIGZpbGwsIGNoYW5nZSkge1xuICAgICAgb2xkID0gdmFsO1xuXG4gICAgICBpZiAoZmlsbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbGwgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2hhbmdlID0gZmlsbDtcbiAgICAgIH1cblxuICAgICAgdmFsID0gcm91bmQodik7XG4gICAgICAkY29udHJvbHMucmVtb3ZlQ2xhc3MoJ21ic2MtZGlzYWJsZWQnKTtcblxuICAgICAgaWYgKGZpbGwpIHtcbiAgICAgICAgJGNvbnRyb2wudmFsKHZhbCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWwgPT0gbWluKSB7XG4gICAgICAgICRidG5NaW51cy5hZGRDbGFzcygnbWJzYy1kaXNhYmxlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsID09IG1heCkge1xuICAgICAgICAkYnRuUGx1cy5hZGRDbGFzcygnbWJzYy1kaXNhYmxlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsICE9PSBvbGQgJiYgY2hhbmdlKSB7XG4gICAgICAgICRjb250cm9sLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEF0dHIoYXR0ciwgZGVmLCBzdHIpIHtcbiAgICAgIHZhciB2ID0gJGNvbnRyb2wuYXR0cihhdHRyKTtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gJycgPyBkZWYgOiBzdHIgPyB2IDogK3Y7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcm91bmQodikge1xuICAgICAgcmV0dXJuICtNYXRoLm1pbihtYXgsIE1hdGgubWF4KE1hdGgucm91bmQodiAvIHN0ZXApICogc3RlcCwgbWluKSkudG9GaXhlZChzY2FsZSk7XG4gICAgfSAvLyBDYWxsIHRoZSBwYXJlbnQgY29uc3RydWN0b3JcblxuXG4gICAgQmFzZS5jYWxsKHRoaXMsIGNvbnRyb2wsIHNldHRpbmdzLCB0cnVlKTtcbiAgICAvKiBUUklBTEZVTkMgKi9cblxuICAgIHRoYXQuZ2V0VmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHYgPSBwYXJzZUZsb2F0KCRjb250cm9sLnZhbCgpKTtcbiAgICAgIHYgPSBpc05hTih2KSA/IHZhbCA6IHY7XG4gICAgICByZXR1cm4gcm91bmQodik7XG4gICAgfTtcblxuICAgIHRoYXQuc2V0VmFsID0gZnVuY3Rpb24gKHYsIGZpbGwsIGNoYW5nZSkge1xuICAgICAgdiA9IHBhcnNlRmxvYXQodik7XG4gICAgICBzZXRWYWx1ZShpc05hTih2KSA/IHZhbCA6IHYsIGZpbGwsIGNoYW5nZSk7XG4gICAgfTtcblxuICAgIHRoYXQuX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZWFkeSA9ICRjb250cm9sLnBhcmVudCgpLmhhc0NsYXNzKCdtYnNjLXN0ZXBwZXInKTtcbiAgICAgICRwYXJlbnQgPSByZWFkeSA/ICRjb250cm9sLmNsb3Nlc3QoJy5tYnNjLXN0ZXBwZXItY29udCcpIDogJGNvbnRyb2wucGFyZW50KCk7XG4gICAgICBzID0gdGhhdC5zZXR0aW5ncztcbiAgICAgIG1pbiA9IHNldHRpbmdzLm1pbiA9PT0gdW5kZWZpbmVkID8gZ2V0QXR0cignbWluJywgcy5taW4pIDogc2V0dGluZ3MubWluO1xuICAgICAgbWF4ID0gc2V0dGluZ3MubWF4ID09PSB1bmRlZmluZWQgPyBnZXRBdHRyKCdtYXgnLCBzLm1heCkgOiBzZXR0aW5ncy5tYXg7XG4gICAgICBzdGVwID0gc2V0dGluZ3Muc3RlcCA9PT0gdW5kZWZpbmVkID8gZ2V0QXR0cignc3RlcCcsIHMuc3RlcCkgOiBzZXR0aW5ncy5zdGVwO1xuICAgICAgc2NhbGUgPSBNYXRoLmFicyhzdGVwKSA8IDEgPyAoc3RlcCArICcnKS5zcGxpdCgnLicpWzFdLmxlbmd0aCA6IDA7XG4gICAgICBpbnB1dFN0eWxlID0gc2V0dGluZ3MuaW5wdXRTdHlsZSA9PT0gdW5kZWZpbmVkID8gZ2V0QXR0cignZGF0YS1pbnB1dC1zdHlsZScsIHMuaW5wdXRTdHlsZSwgdHJ1ZSkgOiBzZXR0aW5ncy5pbnB1dFN0eWxlO1xuICAgICAgZGlzcGxheVZhbHVlID0gJGNvbnRyb2wuYXR0cignZGF0YS12YWwnKSB8fCBzLnZhbDtcbiAgICAgIHZhbCA9IHJvdW5kKCtjb250cm9sLnZhbHVlIHx8IDApO1xuICAgICAgdGhlbWUgPSBtb2Jpc2Nyb2xsLnRoZW1lcy5mb3JtW3MudGhlbWVdO1xuICAgICAgcmlwcGxlID0gdGhlbWUgJiYgdGhlbWUuYWRkUmlwcGxlID8gdGhlbWUgOiBudWxsO1xuXG4gICAgICBpZiAoIXJlYWR5KSB7XG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ21ic2Mtc3RlcHBlci1jb250IG1ic2Mtbm8tdG91Y2ggbWJzYy1jb250cm9sLXcnKS5hZGRDbGFzcyhpbnB1dFN0eWxlID09ICdib3gnID8gJ21ic2MtaW5wdXQtYm94JyA6ICcnKS5hZGRDbGFzcyhpbnB1dFN0eWxlID09ICdvdXRsaW5lJyA/ICdtYnNjLWlucHV0LW91dGxpbmUnIDogJycpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJtYnNjLXNlZ21lbnRlZCBtYnNjLXN0ZXBwZXInICsgJ1wiPjwvc3Bhbj4nKS5maW5kKCcubWJzYy1zdGVwcGVyJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cIm1ic2Mtc2VnbWVudGVkLWl0ZW0gbWJzYy1zdGVwcGVyLWNvbnRyb2wgbWJzYy1zdGVwcGVyLW1pbnVzICcgKyAodmFsID09IG1pbiA/ICdtYnNjLWRpc2FibGVkJyA6ICcnKSArICdcIiBkYXRhLXN0ZXA9XCItMVwiIHRhYmluZGV4PVwiMFwiPjxzcGFuIGNsYXNzPVwibWJzYy1zZWdtZW50ZWQtY29udGVudFwiPjxzcGFuIGNsYXNzPVwibWJzYy1pYyBtYnNjLWljLW1pbnVzXCI+PC9zcGFuPjwvc3Bhbj48L3NwYW4+JykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cIm1ic2Mtc2VnbWVudGVkLWl0ZW0gbWJzYy1zdGVwcGVyLWNvbnRyb2wgbWJzYy1zdGVwcGVyLXBsdXMgJyArICh2YWwgPT0gbWF4ID8gJ21ic2MtZGlzYWJsZWQnIDogJycpICsgJ1wiICBkYXRhLXN0ZXA9XCIxXCIgdGFiaW5kZXg9XCIwXCI+PHNwYW4gY2xhc3M9XCJtYnNjLXNlZ21lbnRlZC1jb250ZW50XCI+IDxzcGFuIGNsYXNzPVwibWJzYy1pYyBtYnNjLWljLXBsdXNcIj48L3NwYW4+PC9zcGFuPjwvc3Bhbj4nKS5wcmVwZW5kKCRjb250cm9sKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNzc0NsYXNzKSB7XG4gICAgICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpLmZpbmQoJy5tYnNjLXNlZ21lbnRlZCcpLnJlbW92ZUNsYXNzKGNzc0NsYXNzKTtcbiAgICAgIH1cblxuICAgICAgY3NzQ2xhc3MgPSAnbWJzYy0nICsgcy50aGVtZSArICh0aGVtZS5iYXNlVGhlbWUgPyAnIG1ic2MtJyArIHRoZW1lLmJhc2VUaGVtZSA6ICcnKSArIChzLnJ0bCA/ICcgbWJzYy1ydGwnIDogJyBtYnNjLWx0cicpO1xuICAgICAgJHBhcmVudC5hZGRDbGFzcyhjc3NDbGFzcykuZmluZCgnLm1ic2Mtc2VnbWVudGVkJykuYWRkQ2xhc3MoY3NzQ2xhc3MpO1xuICAgICAgJGJ0bk1pbnVzID0gJCQxKCcubWJzYy1zdGVwcGVyLW1pbnVzJywgJHBhcmVudCk7XG4gICAgICAkYnRuUGx1cyA9ICQkMSgnLm1ic2Mtc3RlcHBlci1wbHVzJywgJHBhcmVudCk7XG4gICAgICAkY29udHJvbHMgPSAkJDEoJy5tYnNjLXN0ZXBwZXItY29udHJvbCcsICRwYXJlbnQpO1xuXG4gICAgICBpZiAoIXJlYWR5KSB7XG4gICAgICAgIGlmIChkaXNwbGF5VmFsdWUgPT0gJ2xlZnQnKSB7XG4gICAgICAgICAgJHBhcmVudC5hZGRDbGFzcygnbWJzYy1zdGVwcGVyLXZhbC1sZWZ0Jyk7XG4gICAgICAgICAgJGNvbnRyb2wuYWZ0ZXIoJzxzcGFuIGNsYXNzPVwibWJzYy1zZWdtZW50ZWQtaXRlbVwiPjxzcGFuIGNsYXNzPVwibWJzYy1zZWdtZW50ZWQtY29udGVudFwiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlzcGxheVZhbHVlID09ICdyaWdodCcpIHtcbiAgICAgICAgICAkcGFyZW50LmFkZENsYXNzKCdtYnNjLXN0ZXBwZXItdmFsLXJpZ2h0Jyk7XG4gICAgICAgICAgJGJ0blBsdXMuYWZ0ZXIoJzxzcGFuIGNsYXNzPVwibWJzYy1zZWdtZW50ZWQtaXRlbVwiPjxzcGFuIGNsYXNzPVwibWJzYy1zZWdtZW50ZWQtY29udGVudFwiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGJ0bk1pbnVzLmFmdGVyKCc8c3BhbiBjbGFzcz1cIm1ic2Mtc2VnbWVudGVkLWl0ZW1cIj48c3BhbiBjbGFzcz1cIm1ic2Mtc2VnbWVudGVkLWNvbnRlbnQgbWJzYy1zdGVwcGVyLXZhbFwiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzdGVwcGVyKSB7XG4gICAgICAgICRjb250cm9sLm9uKCdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICAgIHN0ZXBwZXIgPSBjcmVhdGVTdGVwcGVyKCRjb250cm9scywgc3RlcFZhbHVlLCAxNTAsIGNoZWNrRGlzYWJsZWQsIGZhbHNlLCByaXBwbGUpO1xuICAgICAgfVxuXG4gICAgICAkY29udHJvbC52YWwodmFsKS5hdHRyKCdkYXRhLXJvbGUnLCAnc3RlcHBlcicpLmF0dHIoJ21pbicsIG1pbikuYXR0cignbWF4JywgbWF4KS5hdHRyKCdzdGVwJywgc3RlcCkuYWRkQ2xhc3MoJ21ic2MtY29udHJvbCcpO1xuICAgICAgY29udHJvbC5tYnNjSW5zdCA9IHRoYXQ7XG4gICAgfTtcblxuICAgIHRoYXQuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkY29udHJvbC5yZW1vdmVDbGFzcygnbWJzYy1jb250cm9sJykub2ZmKCdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICBzdGVwcGVyLmRlc3Ryb3koKTtcbiAgICAgIGRlbGV0ZSBjb250cm9sLm1ic2NJbnN0O1xuICAgIH07XG5cbiAgICB0aGF0LmluaXQoKTtcbiAgfTtcbiAgU3RlcHBlci5wcm90b3R5cGUgPSB7XG4gICAgX2NsYXNzOiAnc3RlcHBlcicsXG4gICAgX2hhc0RlZjogdHJ1ZSxcbiAgICBfaGFzVGhlbWU6IHRydWUsXG4gICAgX2hhc0xhbmc6IHRydWUsXG4gICAgX2RlZmF1bHRzOiB7XG4gICAgICBtaW46IDAsXG4gICAgICBtYXg6IDEwMCxcbiAgICAgIHN0ZXA6IDFcbiAgICB9XG4gIH07XG4gIGNsYXNzZXMuU3RlcHBlciA9IFN0ZXBwZXI7IC8vIEluaXQgbWJzYy1zdGVwcGVyIGVsZW1lbnRzIG9uIHBhZ2UgbG9hZFxuXG4gIGF1dG9Jbml0KCdbbWJzYy1zdGVwcGVyXScsIFN0ZXBwZXIpO1xuXG4gIHZhciBQcm9ncmVzc0Jhc2UgPSBmdW5jdGlvbiBQcm9ncmVzc0Jhc2UoZWxtLCBzZXR0aW5ncywgaW5oZXJpdCkge1xuICAgIHZhciAkZWxtLFxuICAgICAgICAkcGFyZW50LFxuICAgICAgICBjc3NDbGFzcyxcbiAgICAgICAgcyxcbiAgICAgICAgdGhhdCA9IHRoaXM7IC8vIENhbGwgdGhlIHBhcmVudCBjb25zdHJ1Y3RvclxuXG4gICAgQmFzZS5jYWxsKHRoaXMsIGVsbSwgc2V0dGluZ3MsIHRydWUpO1xuICAgIHRoYXQuX19pbml0ID0gbm9vcDtcbiAgICB0aGF0Ll9fZGVzdHJveSA9IG5vb3A7XG5cbiAgICB0aGF0Ll9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHdhc0luaXQ7XG4gICAgICBzID0gdGhhdC5zZXR0aW5ncztcbiAgICAgICRlbG0gPSAkJDEoZWxtKTsgLy8gQ2hlY2sgaWYgdGhlIGVsZW1lbnQgd2FzIGFscmVhZHkgaW5pdGlhbGl6ZWRcblxuICAgICAgd2FzSW5pdCA9ICEhJHBhcmVudDtcbiAgICAgICRwYXJlbnQgPSAkZWxtLnBhcmVudCgpO1xuICAgICAgJHBhcmVudCA9ICRwYXJlbnQuaGFzQ2xhc3MoJ21ic2MtaW5wdXQtd3JhcCcpID8gJHBhcmVudC5wYXJlbnQoKSA6ICRwYXJlbnQ7XG4gICAgICB0aGF0Ll8kcGFyZW50ID0gJHBhcmVudDtcblxuICAgICAgaWYgKGNzc0NsYXNzKSB7XG4gICAgICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpO1xuICAgICAgfVxuXG4gICAgICBjc3NDbGFzcyA9IHRoYXQuX2NzcyArICcgbWJzYy1wcm9ncmVzcy13IG1ic2MtY29udHJvbC13ICcgKyBnZXRDc3NDbGFzcyhzKTtcbiAgICAgICRwYXJlbnQuYWRkQ2xhc3MoY3NzQ2xhc3MpO1xuICAgICAgJGVsbS5hZGRDbGFzcygnbWJzYy1jb250cm9sJyk7XG5cbiAgICAgIHRoYXQuX19pbml0KCk7XG5cbiAgICAgIGlmICghd2FzSW5pdCkge1xuICAgICAgICB0aGF0Ll9hdHRhY2hDaGFuZ2UoKTtcbiAgICAgIH0gLy8gU2hvdyBpbml0aWFsIHZhbHVlXG5cblxuICAgICAgdGhhdC5yZWZyZXNoKCk7XG4gICAgICBlbG0ubWJzY0luc3QgPSB0aGF0O1xuICAgIH07XG5cbiAgICB0aGF0Ll9kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC5fX2Rlc3Ryb3koKTtcblxuICAgICAgJHBhcmVudC5yZW1vdmVDbGFzcyhjc3NDbGFzcyk7XG4gICAgICAkZWxtLnJlbW92ZUNsYXNzKCdtYnNjLWNvbnRyb2wnKTtcbiAgICAgIGRlbGV0ZSBlbG0ubWJzY0luc3Q7XG4gICAgfTtcblxuICAgIGlmICghaW5oZXJpdCkge1xuICAgICAgdGhhdC5pbml0KCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBTbGlkZXJCYXNlID0gZnVuY3Rpb24gU2xpZGVyQmFzZShlbG0sIHNldHRpbmdzLCBpbmhlcml0KSB7XG4gICAgdmFyICRlbG0sXG4gICAgICAgICRoYW5kbGUsXG4gICAgICAgICRoYW5kbGVDb250LFxuICAgICAgICAkaGFuZGxlcyxcbiAgICAgICAgJGxpc3RlbmVycyxcbiAgICAgICAgJHBhcmVudCxcbiAgICAgICAgJHRyYWNrLFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIGJhc2UsXG4gICAgICAgIGNoYW5nZWQsXG4gICAgICAgIGRpZmZYLFxuICAgICAgICBkaWZmWSxcbiAgICAgICAgZGlmZixcbiAgICAgICAgZW5kWCxcbiAgICAgICAgZW5kWSxcbiAgICAgICAgaGFuZGxlSW5kZXgsXG4gICAgICAgIGlzSG92ZXIsXG4gICAgICAgIGlzUHJlc3NlZCxcbiAgICAgICAgaXNSdGwsXG4gICAgICAgIGxpdmUsXG4gICAgICAgIG1heCxcbiAgICAgICAgbWluLFxuICAgICAgICBtb3ZlZCxcbiAgICAgICAgbXVsdGlwbGUsXG4gICAgICAgIG9sZFZhbHVlLFxuICAgICAgICBzdGVwLFxuICAgICAgICBzLFxuICAgICAgICBzY2FsZSxcbiAgICAgICAgc3RhcnRYLFxuICAgICAgICBzdGFydFksXG4gICAgICAgIHN0ZXBEZWNpbWFsLFxuICAgICAgICB0aW1lcixcbiAgICAgICAgdG90YWxXaWR0aCxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuICAgICAgICBsYXN0VXBkYXRlID0gbmV3IERhdGUoKTtcblxuICAgIGZ1bmN0aW9uIG9uU3RhcnQoZXYpIHtcbiAgICAgIGlmIChldi50eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGVzdFRvdWNoKGV2LCB0aGlzKSAmJiAoIWFjdGlvbiB8fCBpc0hvdmVyKSAmJiAhZWxtLmRpc2FibGVkICYmICFlbG0ucmVhZE9ubHlcbiAgICAgIC8qIFRSSUFMQ09ORCAqL1xuICAgICAgKSB7XG4gICAgICAgICAgaWYgKHMuc3RvcFByb3ApIHtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFjdGlvbiA9IHRydWU7XG4gICAgICAgICAgbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgc3RhcnRYID0gZ2V0Q29vcmQoZXYsICdYJyk7XG4gICAgICAgICAgc3RhcnRZID0gZ2V0Q29vcmQoZXYsICdZJyk7XG4gICAgICAgICAgZW5kWCA9IHN0YXJ0WDtcbiAgICAgICAgICAkdHJhY2sucmVtb3ZlQ2xhc3MoJ21ic2MtcHJvZ3Jlc3MtYW5pbScpO1xuICAgICAgICAgICRoYW5kbGUgPSBtdWx0aXBsZSA/ICQkMSgnLm1ic2Mtc2xpZGVyLWhhbmRsZScsIHRoaXMpIDogJGhhbmRsZXM7XG5cbiAgICAgICAgICBpZiAoJGhhbmRsZUNvbnQpIHtcbiAgICAgICAgICAgICRoYW5kbGVDb250LnJlbW92ZUNsYXNzKCdtYnNjLWhhbmRsZS1jdXJyJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgJGhhbmRsZUNvbnQgPSAkaGFuZGxlLnBhcmVudCgpLmFkZENsYXNzKCdtYnNjLWFjdGl2ZSBtYnNjLWhhbmRsZS1jdXJyJyk7XG4gICAgICAgICAgJGVsbS5hZGRDbGFzcygnbWJzYy1hY3RpdmUnKTtcbiAgICAgICAgICBoYW5kbGVJbmRleCA9ICskaGFuZGxlLmF0dHIoJ2RhdGEtaW5kZXgnKTtcbiAgICAgICAgICB0b3RhbFdpZHRoID0gJHRyYWNrWzBdLm9mZnNldFdpZHRoO1xuICAgICAgICAgIGRpZmYgPSAkdHJhY2tbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblxuICAgICAgICAgIGlmIChldi50eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgICAgICAgICAgaXNQcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICQkMShkb2N1bWVudCkub24oJ21vdXNlbW92ZScsIG9uTW92ZSkub24oJ21vdXNldXAnLCBvbkVuZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV2LnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuICAgICAgICAgICAgaXNIb3ZlciA9IHRydWU7XG4gICAgICAgICAgICAkJDEoZG9jdW1lbnQpLm9uKCdtb3VzZW1vdmUnLCBvbk1vdmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTW92ZShldikge1xuICAgICAgaWYgKGFjdGlvbikge1xuICAgICAgICBlbmRYID0gZ2V0Q29vcmQoZXYsICdYJyk7XG4gICAgICAgIGVuZFkgPSBnZXRDb29yZChldiwgJ1knKTtcbiAgICAgICAgZGlmZlggPSBlbmRYIC0gc3RhcnRYO1xuICAgICAgICBkaWZmWSA9IGVuZFkgLSBzdGFydFk7XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKGRpZmZYKSA+IDUpIHtcbiAgICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW92ZWQgfHwgaXNQcmVzc2VkIHx8IGlzSG92ZXIpIHtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMobGFzdFVwZGF0ZSAtIG5ldyBEYXRlKCkpID4gNTApIHtcbiAgICAgICAgICAgIGxhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgdXBkYXRlU2xpZGVyKGVuZFgsIHMucm91bmQsIGxpdmUgJiYgKCFpc0hvdmVyIHx8IGlzUHJlc3NlZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb3ZlZCkge1xuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoZGlmZlkpID4gNyAmJiBldi50eXBlID09ICd0b3VjaG1vdmUnKSB7XG4gICAgICAgICAgY2xlYW5VcCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25FbmQoZXYpIHtcbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoIW11bHRpcGxlKSB7XG4gICAgICAgICAgJHRyYWNrLmFkZENsYXNzKCdtYnNjLXByb2dyZXNzLWFuaW0nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0hvdmVyICYmICFpc1ByZXNzZWQpIHtcbiAgICAgICAgICB1cGRhdGVWYWx1ZSh2YWx1ZVtoYW5kbGVJbmRleF0sIGhhbmRsZUluZGV4LCBmYWxzZSwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVwZGF0ZVNsaWRlcihlbmRYLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbW92ZWQgJiYgIWNoYW5nZWQpIHtcbiAgICAgICAgICBpZiAoZXYudHlwZSA9PSAndG91Y2hlbmQnKSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGdob3N0IGNsaWNrXG4gICAgICAgICAgICBwcmV2ZW50Q2xpY2soKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGF0Ll9vblRhcCh2YWx1ZVtoYW5kbGVJbmRleF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2LnR5cGUgPT0gJ21vdXNldXAnKSB7XG4gICAgICAgICAgaXNQcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXYudHlwZSA9PSAnbW91c2VsZWF2ZScpIHtcbiAgICAgICAgICBpc0hvdmVyID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzSG92ZXIpIHtcbiAgICAgICAgICBjbGVhblVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkNhbmNlbCgpIHtcbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgY2xlYW5VcCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQ2hhbmdlKCkge1xuICAgICAgdmFyIHYgPSB0aGF0Ll9yZWFkVmFsdWUoJCQxKHRoaXMpKSxcbiAgICAgICAgICBpID0gKyQkMSh0aGlzKS5hdHRyKCdkYXRhLWluZGV4Jyk7XG5cbiAgICAgIGlmICh2ICE9PSB2YWx1ZVtpXSkge1xuICAgICAgICB2YWx1ZVtpXSA9IHY7XG4gICAgICAgIG9sZFZhbHVlW2ldID0gdjtcbiAgICAgICAgdXBkYXRlVmFsdWUodiwgaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25DbGljayhldikge1xuICAgICAgLy8gUHJldmVudCBwcm9wYWdhdGluZyBjbGljayB0byBsYWJlbFxuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25MYWJlbENsaWNrKGV2KSB7XG4gICAgICAvLyBQcmV2ZW50IGNoYW5nZSBvbiBsYWJlbCBjbGljayBmb3Igc3dpdGhlc1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbktleURvd24oZXYpIHtcbiAgICAgIHZhciBkaXI7XG5cbiAgICAgIGlmICghZWxtLmRpc2FibGVkKSB7XG4gICAgICAgIHN3aXRjaCAoZXYua2V5Q29kZSkge1xuICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgIGRpciA9IDE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgIGRpciA9IC0xO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyKSB7XG4gICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIGlmICghdGltZXIpIHtcbiAgICAgICAgICAgIGhhbmRsZUluZGV4ID0gKyQkMSh0aGlzKS5hdHRyKCdkYXRhLWluZGV4Jyk7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSh2YWx1ZVtoYW5kbGVJbmRleF0gKyBzdGVwICogZGlyLCBoYW5kbGVJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdXBkYXRlVmFsdWUodmFsdWVbaGFuZGxlSW5kZXhdICsgc3RlcCAqIGRpciwgaGFuZGxlSW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbktleVVwKGV2KSB7XG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICB0aW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW5VcCgpIHtcbiAgICAgIGFjdGlvbiA9IGZhbHNlO1xuICAgICAgJGhhbmRsZUNvbnQucmVtb3ZlQ2xhc3MoJ21ic2MtYWN0aXZlJyk7XG4gICAgICAkZWxtLnJlbW92ZUNsYXNzKCdtYnNjLWFjdGl2ZScpOyAvLyBEZXRhY2ggZG9jdW1lbnQgZXZlbnRzXG5cbiAgICAgICQkMShkb2N1bWVudCkub2ZmKCdtb3VzZW1vdmUnLCBvbk1vdmUpLm9mZignbW91c2V1cCcsIG9uRW5kKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVTbGlkZXIocG9zLCByb3VuZCwgZmlsbCkge1xuICAgICAgdmFyIHBlcmNlbnQgPSByb3VuZCA/IE1hdGgubWluKE1hdGhbdGhhdC5fcm91bmRpbmcgfHwgJ3JvdW5kJ10oTWF0aC5tYXgoKHBvcyAtIGRpZmYpICogMTAwIC8gdG90YWxXaWR0aCwgMCkgLyBzY2FsZSAvIHN0ZXApICogc3RlcCAqIDEwMCAvIChtYXggLSBtaW4gKyBiYXNlKSwgMTAwKSA6IE1hdGgubWF4KDAsIE1hdGgubWluKChwb3MgLSBkaWZmKSAqIDEwMCAvIHRvdGFsV2lkdGgsIDEwMCkpO1xuXG4gICAgICBpZiAoaXNSdGwpIHtcbiAgICAgICAgcGVyY2VudCA9IDEwMCAtIHBlcmNlbnQ7XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZVZhbHVlKE1hdGgucm91bmQoKG1pbiAtIGJhc2UgKyBwZXJjZW50IC8gc2NhbGUpICogc3RlcERlY2ltYWwpIC8gc3RlcERlY2ltYWwsIGhhbmRsZUluZGV4LCBmaWxsLCBwZXJjZW50KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZSh2LCBpbmRleCwgZmlsbCwgcGVyY2VudCwgcmVmcmVzaCwgY2hhbmdlKSB7XG4gICAgICB2YXIgJGhhbmRsZSA9ICRoYW5kbGVzLmVxKGluZGV4KSxcbiAgICAgICAgICAkaGFuZGxlQ29udCA9ICRoYW5kbGUucGFyZW50KCk7XG4gICAgICB2ID0gTWF0aC5taW4obWF4LCBNYXRoLm1heCh2LCBtaW4pKTtcblxuICAgICAgaWYgKGNoYW5nZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNoYW5nZSA9IGZpbGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGF0Ll91cGRhdGUpIHtcbiAgICAgICAgdiA9IHRoYXQuX3VwZGF0ZSh2LCB2YWx1ZSwgaW5kZXgsIHBlcmNlbnQsIG11bHRpcGxlLCByZWZyZXNoLCAkaGFuZGxlQ29udCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkaGFuZGxlQ29udC5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGlzUnRsID8gJ2F1dG8nIDogKHBlcmNlbnQgfHwgZ2V0UGVyY2VudCh2LCBtaW4sIG1heCkpICsgJyUnLFxuICAgICAgICAgIHJpZ2h0OiBpc1J0bCA/IChwZXJjZW50IHx8IGdldFBlcmNlbnQodiwgbWluLCBtYXgpKSArICclJyA6ICdhdXRvJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYgPiBtaW4pIHtcbiAgICAgICAgJGhhbmRsZUNvbnQucmVtb3ZlQ2xhc3MoJ21ic2Mtc2xpZGVyLXN0YXJ0Jyk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlW2luZGV4XSA+IG1pbiB8fCByZWZyZXNoKSB7XG4gICAgICAgICRoYW5kbGVDb250LmFkZENsYXNzKCdtYnNjLXNsaWRlci1zdGFydCcpO1xuICAgICAgfSAvLyBTdG9yZSBuZXcgdmFsdWVcblxuXG4gICAgICBpZiAoZmlsbCkge1xuICAgICAgICB2YWx1ZVtpbmRleF0gPSB2O1xuICAgICAgfSAvLyBDaGVjayBpZiB2YWx1ZSBjaGFuZ2VkXG5cblxuICAgICAgaWYgKGZpbGwgJiYgb2xkVmFsdWVbaW5kZXhdICE9IHYpIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgIG9sZFZhbHVlW2luZGV4XSA9IHY7IC8vIFNldCBuZXcgdmFsdWUgdG8gdGhlIGlucHV0XG5cbiAgICAgICAgdGhhdC5fZmlsbFZhbHVlKHYsIGluZGV4LCBjaGFuZ2UpO1xuICAgICAgfVxuXG4gICAgICAkaGFuZGxlLmF0dHIoJ2FyaWEtdmFsdWVub3cnLCB2KTtcbiAgICB9IC8vIENhbGwgdGhlIHBhcmVudCBjb25zdHJ1Y3RvclxuXG5cbiAgICBQcm9ncmVzc0Jhc2UuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzLCB0cnVlKTtcbiAgICB0aGF0Ll9vblRhcCA9IG5vb3A7XG4gICAgdGhhdC5fX19pbml0ID0gbm9vcDtcbiAgICB0aGF0Ll9fX2Rlc3Ryb3kgPSBub29wO1xuXG4gICAgdGhhdC5fYXR0YWNoQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgJGVsbS5vbihzLmNoYW5nZUV2ZW50LCBvbkNoYW5nZSk7XG4gICAgfTtcblxuICAgIHRoYXQuX19pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHdhc0luaXQ7XG5cbiAgICAgIGlmICgkaGFuZGxlcykge1xuICAgICAgICB3YXNJbml0ID0gdHJ1ZTtcbiAgICAgICAgJGhhbmRsZXMucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICB9XG5cbiAgICAgIHRoYXQuX19faW5pdCgpO1xuXG4gICAgICAkcGFyZW50ID0gdGhhdC5fJHBhcmVudDtcbiAgICAgICR0cmFjayA9IHRoYXQuXyR0cmFjaztcbiAgICAgICRlbG0gPSAkcGFyZW50LmZpbmQoJ2lucHV0Jyk7XG4gICAgICBzID0gdGhhdC5zZXR0aW5ncztcbiAgICAgIG1pbiA9IHRoYXQuX21pbjtcbiAgICAgIG1heCA9IHRoYXQuX21heDtcbiAgICAgIGJhc2UgPSB0aGF0Ll9iYXNlIHx8IDA7XG4gICAgICBzdGVwID0gdGhhdC5fc3RlcDtcbiAgICAgIGxpdmUgPSB0aGF0Ll9saXZlO1xuICAgICAgc3RlcERlY2ltYWwgPSBzdGVwICUgMSAhPT0gMCA/IDEwMCAvICgrKHN0ZXAgJSAxKS50b0ZpeGVkKDIpICogMTAwKSA6IDE7XG4gICAgICBzY2FsZSA9IDEwMCAvIChtYXggLSBtaW4gKyBiYXNlKSB8fCAxMDA7XG4gICAgICBtdWx0aXBsZSA9ICRlbG0ubGVuZ3RoID4gMTtcbiAgICAgIGlzUnRsID0gcy5ydGw7XG4gICAgICB2YWx1ZSA9IFtdO1xuICAgICAgb2xkVmFsdWUgPSBbXTsgLy8gUmVhZCB2YWx1ZXNcblxuICAgICAgJGVsbS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHZhbHVlW2ldID0gdGhhdC5fcmVhZFZhbHVlKCQkMSh0aGlzKSk7XG4gICAgICAgICQkMSh0aGlzKS5hdHRyKCdkYXRhLWluZGV4JywgaSk7XG4gICAgICB9KTtcbiAgICAgICRoYW5kbGVzID0gJHBhcmVudC5maW5kKCcubWJzYy1zbGlkZXItaGFuZGxlJyk7XG4gICAgICAkbGlzdGVuZXJzID0gJHBhcmVudC5maW5kKG11bHRpcGxlID8gJy5tYnNjLXNsaWRlci1oYW5kbGUtY29udCcgOiAnLm1ic2MtcHJvZ3Jlc3MtY29udCcpOyAvLyBBdHRhY2ggZXZlbnRzXG5cbiAgICAgICRoYW5kbGVzLm9uKCdrZXlkb3duJywgb25LZXlEb3duKS5vbigna2V5dXAnLCBvbktleVVwKS5vbignYmx1cicsIG9uS2V5VXApO1xuICAgICAgJGxpc3RlbmVycy5lYWNoKGZ1bmN0aW9uIChpLCBsaXN0ZW5lcikge1xuICAgICAgICBsaXN0ZW4obGlzdGVuZXIsICd0b3VjaHN0YXJ0Jywgb25TdGFydCwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGxpc3RlbihsaXN0ZW5lciwgJ21vdXNlZG93bicsIG9uU3RhcnQpO1xuICAgICAgICBsaXN0ZW4obGlzdGVuZXIsICd0b3VjaGVuZCcsIG9uRW5kKTtcbiAgICAgICAgbGlzdGVuKGxpc3RlbmVyLCAndG91Y2hjYW5jZWwnLCBvbkVuZCk7XG4gICAgICAgIGxpc3RlbihsaXN0ZW5lciwgJ3BvaW50ZXJjYW5jZWwnLCBvbkNhbmNlbCk7XG5cbiAgICAgICAgaWYgKHMuaG92ZXIpIHtcbiAgICAgICAgICBsaXN0ZW4obGlzdGVuZXIsICdtb3VzZWVudGVyJywgb25TdGFydCk7XG4gICAgICAgICAgbGlzdGVuKGxpc3RlbmVyLCAnbW91c2VsZWF2ZScsIG9uRW5kKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghd2FzSW5pdCkge1xuICAgICAgICAkZWxtLm9uKCdjbGljaycsIG9uQ2xpY2spO1xuICAgICAgICAkcGFyZW50Lm9uKCdjbGljaycsIG9uTGFiZWxDbGljayk7IC8vIEF0dGFjaCB0byBkb2N1bWVudCB0byBhdm9pZCBub24tcGFzc2l2ZSBsaXN0ZW5lciB3YXJuaW5nc1xuXG4gICAgICAgIGxpc3Rlbihkb2N1bWVudCwgJ3RvdWNobW92ZScsIG9uTW92ZSwge1xuICAgICAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGF0Ll9fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICRwYXJlbnQub2ZmKCdjbGljaycsIG9uTGFiZWxDbGljayk7XG4gICAgICAkZWxtLm9mZihzLmNoYW5nZUV2ZW50LCBvbkNoYW5nZSkub2ZmKCdjbGljaycsIG9uQ2xpY2spO1xuICAgICAgJGhhbmRsZXMub2ZmKCdrZXlkb3duJywgb25LZXlEb3duKS5vZmYoJ2tleXVwJywgb25LZXlVcCkub2ZmKCdibHVyJywgb25LZXlVcCk7XG4gICAgICAkbGlzdGVuZXJzLmVhY2goZnVuY3Rpb24gKGksIGxpc3RlbmVyKSB7XG4gICAgICAgIHVubGlzdGVuKGxpc3RlbmVyLCAndG91Y2hzdGFydCcsIG9uU3RhcnQsIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB1bmxpc3RlbihsaXN0ZW5lciwgJ21vdXNlZG93bicsIG9uU3RhcnQpO1xuICAgICAgICB1bmxpc3RlbihsaXN0ZW5lciwgJ3RvdWNoZW5kJywgb25FbmQpO1xuICAgICAgICB1bmxpc3RlbihsaXN0ZW5lciwgJ3RvdWNoY2FuY2VsJywgb25FbmQpO1xuICAgICAgICB1bmxpc3RlbihsaXN0ZW5lciwgJ3BvaW50ZXJjYW5jZWwnLCBvbkNhbmNlbCk7XG4gICAgICAgIHVubGlzdGVuKGxpc3RlbmVyLCAnbW91c2VlbnRlcicsIG9uU3RhcnQpO1xuICAgICAgICB1bmxpc3RlbihsaXN0ZW5lciwgJ21vdXNlbGVhdmUnLCBvbkVuZCk7XG4gICAgICAgIHVubGlzdGVuKGRvY3VtZW50LCAndG91Y2htb3ZlJywgb25Nb3ZlLCB7XG4gICAgICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdGhhdC5fX19kZXN0cm95KCk7XG4gICAgfTtcblxuICAgIHRoYXQucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICRlbG0uZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICB1cGRhdGVWYWx1ZSh0aGF0Ll9yZWFkVmFsdWUoJCQxKHRoaXMpKSwgaSwgdHJ1ZSwgZmFsc2UsIHRydWUsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGF0LmdldFZhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBtdWx0aXBsZSA/IHZhbHVlLnNsaWNlKDApIDogdmFsdWVbMF07XG4gICAgfTtcblxuICAgIHRoYXQuc2V0VmFsID0gdGhhdC5fc2V0VmFsID0gZnVuY3Rpb24gKHZhbCwgZmlsbCwgY2hhbmdlKSB7XG4gICAgICBpZiAoISQkMS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgICQkMS5lYWNoKHZhbCwgZnVuY3Rpb24gKGksIHYpIHtcbiAgICAgICAgdmFsdWVbaV0gPSB2O1xuICAgICAgfSk7XG4gICAgICAkJDEuZWFjaCh2YWwsIGZ1bmN0aW9uIChpLCB2KSB7XG4gICAgICAgIHVwZGF0ZVZhbHVlKHYsIGksIHRydWUsIGZhbHNlLCB0cnVlLCBjaGFuZ2UpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmICghaW5oZXJpdCkge1xuICAgICAgdGhhdC5pbml0KCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBTd2l0Y2ggPSBmdW5jdGlvbiBTd2l0Y2goZWxtLCBzZXR0aW5ncykge1xuICAgIHZhciAkZWxtLFxuICAgICAgICAkcGFyZW50LFxuICAgICAgICBzLFxuICAgICAgICBmb3JtQ29udHJvbCxcbiAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgc2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcbiAgICBleHRlbmQkMShzZXR0aW5ncywge1xuICAgICAgY2hhbmdlRXZlbnQ6ICdjbGljaycsXG4gICAgICByb3VuZDogZmFsc2VcbiAgICB9KTsgLy8gQ2FsbCB0aGUgcGFyZW50IGNvbnN0cnVjdG9yXG5cbiAgICBTbGlkZXJCYXNlLmNhbGwodGhpcywgZWxtLCBzZXR0aW5ncywgdHJ1ZSk7XG5cbiAgICB0aGF0Ll9yZWFkVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZWxtLmNoZWNrZWQgPyAxIDogMDtcbiAgICB9O1xuXG4gICAgdGhhdC5fZmlsbFZhbHVlID0gZnVuY3Rpb24gKHYsIGluZGV4LCBjaGFuZ2UpIHtcbiAgICAgICRlbG0ucHJvcCgnY2hlY2tlZCcsICEhdik7XG5cbiAgICAgIGlmIChjaGFuZ2UpIHtcbiAgICAgICAgJGVsbS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhhdC5fb25UYXAgPSBmdW5jdGlvbiAodikge1xuICAgICAgdGhhdC5fc2V0VmFsKHYgPyAwIDogMSk7XG4gICAgfTtcblxuICAgIHRoYXQuX19faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHMgPSB0aGF0LnNldHRpbmdzO1xuICAgICAgJGVsbSA9ICQkMShlbG0pO1xuICAgICAgJHBhcmVudCA9ICRlbG0ucGFyZW50KCk7XG4gICAgICAkcGFyZW50LmZpbmQoJy5tYnNjLXN3aXRjaC10cmFjaycpLnJlbW92ZSgpO1xuICAgICAgJHBhcmVudC5wcmVwZW5kKCRlbG0pO1xuICAgICAgJGVsbS5hdHRyKCdkYXRhLXJvbGUnLCAnc3dpdGNoJykuYWZ0ZXIoJzxzcGFuIGNsYXNzPVwibWJzYy1wcm9ncmVzcy1jb250IG1ic2Mtc3dpdGNoLXRyYWNrXCI+JyArICc8c3BhbiBjbGFzcz1cIm1ic2MtcHJvZ3Jlc3MtdHJhY2sgbWJzYy1wcm9ncmVzcy1hbmltXCI+JyArICc8c3BhbiBjbGFzcz1cIm1ic2Mtc2xpZGVyLWhhbmRsZS1jb250XCI+JyArICc8c3BhbiBjbGFzcz1cIm1ic2Mtc2xpZGVyLWhhbmRsZSBtYnNjLXN3aXRjaC1oYW5kbGVcIiBkYXRhLWluZGV4PVwiMFwiPicgKyAnPHNwYW4gY2xhc3M9XCJtYnNjLXN3aXRjaC10eHQtb2ZmXCI+JyArIHMub2ZmVGV4dCArICc8L3NwYW4+JyArICc8c3BhbiBjbGFzcz1cIm1ic2Mtc3dpdGNoLXR4dC1vblwiPicgKyBzLm9uVGV4dCArICc8L3NwYW4+JyArICc8L3NwYW4+PC9zcGFuPjwvc3Bhbj48L3NwYW4+Jyk7XG5cbiAgICAgIGlmIChmb3JtQ29udHJvbCkge1xuICAgICAgICBmb3JtQ29udHJvbC5kZXN0cm95KCk7XG4gICAgICB9XG5cbiAgICAgIGZvcm1Db250cm9sID0gbmV3IEZvcm1Db250cm9sKGVsbSwgcyk7XG4gICAgICB0aGF0Ll8kdHJhY2sgPSAkcGFyZW50LmZpbmQoJy5tYnNjLXByb2dyZXNzLXRyYWNrJyk7XG4gICAgICB0aGF0Ll9taW4gPSAwO1xuICAgICAgdGhhdC5fbWF4ID0gMTtcbiAgICAgIHRoYXQuX3N0ZXAgPSAxO1xuICAgIH07XG5cbiAgICB0aGF0Ll9fX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3JtQ29udHJvbC5kZXN0cm95KCk7XG4gICAgfTtcblxuICAgIHRoYXQuZ2V0VmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVsbS5jaGVja2VkO1xuICAgIH07XG5cbiAgICB0aGF0LnNldFZhbCA9IGZ1bmN0aW9uICh2YWwsIGZpbGwsIGNoYW5nZSkge1xuICAgICAgdGhhdC5fc2V0VmFsKHZhbCA/IDEgOiAwLCBmaWxsLCBjaGFuZ2UpO1xuICAgIH07XG5cbiAgICB0aGF0LmluaXQoKTtcbiAgfTtcbiAgU3dpdGNoLnByb3RvdHlwZSA9IHtcbiAgICBfY2xhc3M6ICdzd2l0Y2gnLFxuICAgIF9jc3M6ICdtYnNjLXN3aXRjaCcsXG4gICAgX2hhc1RoZW1lOiB0cnVlLFxuICAgIF9oYXNMYW5nOiB0cnVlLFxuICAgIF9oYXNEZWY6IHRydWUsXG4gICAgX2RlZmF1bHRzOiB7XG4gICAgICBzdG9wUHJvcDogdHJ1ZSxcbiAgICAgIG9mZlRleHQ6ICdPZmYnLFxuICAgICAgb25UZXh0OiAnT24nXG4gICAgfVxuICB9O1xuICBjbGFzc2VzLlN3aXRjaCA9IFN3aXRjaDsgLy8gSW5pdCBtYnNjLXN3aXRjaCBlbGVtZW50cyBvbiBwYWdlIGxvYWRcblxuICBhdXRvSW5pdCgnW21ic2Mtc3dpdGNoXScsIFN3aXRjaCk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIHZhciBQcm9ncmVzcyA9IGZ1bmN0aW9uIFByb2dyZXNzKGVsbSwgc2V0dGluZ3MsIGluaGVyaXQpIHtcbiAgICB2YXIgJGRpc3BsYXksXG4gICAgICAgICRlbG0sXG4gICAgICAgICRwYXJlbnQsXG4gICAgICAgICRwcm9ncmVzcyxcbiAgICAgICAgJHRhcmdldCxcbiAgICAgICAgJHRyYWNrLFxuICAgICAgICBtaW4sXG4gICAgICAgIG1heCxcbiAgICAgICAgaW5wdXRTdHlsZSxcbiAgICAgICAgbGFiZWxTdHlsZSxcbiAgICAgICAgcyxcbiAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICB2YWx1ZVRleHQsXG4gICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gb25DaGFuZ2UoKSB7XG4gICAgICB2YXIgdiA9IGdldEF0dHIoJ3ZhbHVlJywgbWluKTtcblxuICAgICAgaWYgKHYgIT09IHZhbHVlKSB7XG4gICAgICAgIHVwZGF0ZVZhbHVlKHYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEF0dHIoYXR0ciwgZGVmLCBzdHIpIHtcbiAgICAgIHZhciB2ID0gJGVsbS5hdHRyKGF0dHIpO1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSAnJyA/IGRlZiA6IHN0ciA/IHYgOiArdjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZSh2LCByZWZyZXNoLCBmaWxsLCBjaGFuZ2UpIHtcbiAgICAgIHYgPVxuICAgICAgLyogVFJJQUxDT05EUkVWICovXG4gICAgICBNYXRoLm1pbihtYXgsIE1hdGgubWF4KHYsIG1pbikpO1xuICAgICAgJHByb2dyZXNzLmNzcygnd2lkdGgnLCAodiAtIG1pbikgKiAxMDAgLyAobWF4IC0gbWluKSArICclJyk7XG5cbiAgICAgIGlmIChmaWxsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmlsbCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjaGFuZ2UgPSBmaWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodiAhPT0gdmFsdWUgfHwgcmVmcmVzaCkge1xuICAgICAgICAvLyBEaXNwbGF5IHZhbHVlXG4gICAgICAgIHRoYXQuX2Rpc3BsYXkodik7XG4gICAgICB9XG5cbiAgICAgIGlmICh2ICE9PSB2YWx1ZSkge1xuICAgICAgICAvLyBTZXQgbmV3IHZhbHVlXG4gICAgICAgIHZhbHVlID0gdjsgLy8gUHV0IG5ldyB2YWx1ZSBpbiB0aGUgcHJvZ3Jlc3MgZWxlbWVudFxuXG4gICAgICAgIGlmIChmaWxsKSB7XG4gICAgICAgICAgJGVsbS5hdHRyKCd2YWx1ZScsIHZhbHVlKTtcbiAgICAgICAgfSAvLyBUcmlnZ2VyIGNoYW5nZSBvbiB0aGUgZWxlbWVudFxuXG5cbiAgICAgICAgaWYgKGNoYW5nZSkge1xuICAgICAgICAgICRlbG0udHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIENhbGwgdGhlIHBhcmVudCBjb25zdHJ1Y3RvclxuXG5cbiAgICBQcm9ncmVzc0Jhc2UuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzLCB0cnVlKTtcblxuICAgIHRoYXQuX2Rpc3BsYXkgPSBmdW5jdGlvbiAodikge1xuICAgICAgdmFsdWVUZXh0ID0gdGVtcGxhdGUgJiYgcy5yZXR1cm5BZmZpeCA/IHRlbXBsYXRlLnJlcGxhY2UoL1xce3ZhbHVlXFx9LywgdikucmVwbGFjZSgvXFx7bWF4XFx9LywgbWF4KSA6IHY7XG5cbiAgICAgIGlmICgkdGFyZ2V0KSB7XG4gICAgICAgICR0YXJnZXQuaHRtbCh2YWx1ZVRleHQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJGRpc3BsYXkpIHtcbiAgICAgICAgJGRpc3BsYXkuaHRtbCh2YWx1ZVRleHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGF0Ll9hdHRhY2hDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkZWxtLm9uKCdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgfTtcblxuICAgIHRoYXQuX19pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRpc3BsYXlWYWx1ZSwgaSwgc3RlcExhYmVscywgd2FzSW5pdDtcbiAgICAgIHMgPSB0aGF0LnNldHRpbmdzO1xuICAgICAgJGVsbSA9ICQkMShlbG0pOyAvLyBDaGVjayBpZiB0aGUgZWxlbWVudCB3YXMgYWxyZWFkeSBpbml0aWFsaXplZFxuXG4gICAgICB3YXNJbml0ID0gISEkcGFyZW50O1xuICAgICAgJHBhcmVudCA9IHRoYXQuXyRwYXJlbnQ7IC8vIFJlYWQgc2V0dGluZ3MgZnJvbSBkYXRhIGF0dHJpYnV0ZXMgb3Igc2V0dGluZ3Mgb2JqZWN0XG5cbiAgICAgIG1pbiA9IHRoYXQuX21pbiA9IHNldHRpbmdzLm1pbiA9PT0gdW5kZWZpbmVkID8gZ2V0QXR0cignbWluJywgcy5taW4pIDogc2V0dGluZ3MubWluO1xuICAgICAgbWF4ID0gdGhhdC5fbWF4ID0gc2V0dGluZ3MubWF4ID09PSB1bmRlZmluZWQgPyBnZXRBdHRyKCdtYXgnLCBzLm1heCkgOiBzZXR0aW5ncy5tYXg7XG4gICAgICBpbnB1dFN0eWxlID0gc2V0dGluZ3MuaW5wdXRTdHlsZSA9PT0gdW5kZWZpbmVkID8gZ2V0QXR0cignZGF0YS1pbnB1dC1zdHlsZScsIHMuaW5wdXRTdHlsZSwgdHJ1ZSkgOiBzZXR0aW5ncy5pbnB1dFN0eWxlO1xuICAgICAgbGFiZWxTdHlsZSA9IHNldHRpbmdzLmxhYmVsU3R5bGUgPT09IHVuZGVmaW5lZCA/IGdldEF0dHIoJ2RhdGEtbGFiZWwtc3R5bGUnLCBzLmxhYmVsU3R5bGUsIHRydWUpIDogc2V0dGluZ3MubGFiZWxTdHlsZTtcbiAgICAgIHZhbHVlID0gZ2V0QXR0cigndmFsdWUnLCBtaW4pO1xuICAgICAgZGlzcGxheVZhbHVlID0gJGVsbS5hdHRyKCdkYXRhLXZhbCcpIHx8IHMudmFsO1xuICAgICAgc3RlcExhYmVscyA9ICRlbG0uYXR0cignZGF0YS1zdGVwLWxhYmVscycpO1xuICAgICAgc3RlcExhYmVscyA9IHN0ZXBMYWJlbHMgPyBKU09OLnBhcnNlKHN0ZXBMYWJlbHMpIDogcy5zdGVwTGFiZWxzO1xuICAgICAgdGVtcGxhdGUgPSAkZWxtLmF0dHIoJ2RhdGEtdGVtcGxhdGUnKSB8fCAobWF4ID09IDEwMCAmJiAhcy50ZW1wbGF0ZSA/ICd7dmFsdWV9JScgOiBzLnRlbXBsYXRlKTtcblxuICAgICAgaWYgKCF3YXNJbml0KSB7XG4gICAgICAgIHdyYXBMYWJlbCgkcGFyZW50LCBudWxsLCBpbnB1dFN0eWxlLCBsYWJlbFN0eWxlLCBlbG0pO1xuICAgICAgICBhZGRJY29uKCRlbG0pOyAvLyBHZW5lcmF0ZSB0cmFjayBhbmQgcHJvZ3Jlc3NcblxuICAgICAgICAkcGFyZW50LmZpbmQoJy5tYnNjLWlucHV0LXdyYXAnKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwibWJzYy1wcm9ncmVzcy1jb250XCI+PHNwYW4gY2xhc3M9XCJtYnNjLXByb2dyZXNzLXRyYWNrIG1ic2MtcHJvZ3Jlc3MtYW5pbVwiPjxzcGFuIGNsYXNzPVwibWJzYy1wcm9ncmVzcy1iYXJcIj48L3NwYW4+PC9zcGFuPjwvc3Bhbj4nKTtcbiAgICAgICAgJHByb2dyZXNzID0gdGhhdC5fJHByb2dyZXNzID0gJHBhcmVudC5maW5kKCcubWJzYy1wcm9ncmVzcy1iYXInKTtcbiAgICAgICAgJHRyYWNrID0gdGhhdC5fJHRyYWNrID0gJHBhcmVudC5maW5kKCcubWJzYy1wcm9ncmVzcy10cmFjaycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpc3BsYXlWYWx1ZSkge1xuICAgICAgICAgICRkaXNwbGF5LnJlbW92ZSgpO1xuICAgICAgICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoJ21ic2MtcHJvZ3Jlc3MtdmFsdWUtJyArIChkaXNwbGF5VmFsdWUgPT0gJ3JpZ2h0JyA/ICdyaWdodCcgOiAnbGVmdCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGVwTGFiZWxzKSB7XG4gICAgICAgICAgJCQxKCcubWJzYy1wcm9ncmVzcy1zdGVwLWxhYmVsJywgJHRyYWNrKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBTZXQgYXR0cmlidXRlc1xuXG5cbiAgICAgICRlbG0uYXR0cignbWluJywgbWluKS5hdHRyKCdtYXgnLCBtYXgpOyAvLyBHZW5lcmF0ZSB2YWx1ZSBjb250YWluZXIgb24gbGVmdCBvciByaWdodCBzaWRlXG5cbiAgICAgIGlmIChkaXNwbGF5VmFsdWUpIHtcbiAgICAgICAgJGRpc3BsYXkgPSAkJDEoJzxzcGFuIGNsYXNzPVwibWJzYy1wcm9ncmVzcy12YWx1ZVwiPjwvc3Bhbj4nKTtcbiAgICAgICAgJHBhcmVudC5hZGRDbGFzcygnbWJzYy1wcm9ncmVzcy12YWx1ZS0nICsgKGRpc3BsYXlWYWx1ZSA9PSAncmlnaHQnID8gJ3JpZ2h0JyA6ICdsZWZ0JykpLmZpbmQoJy5tYnNjLWlucHV0LXdyYXAnKS5hcHBlbmQoJGRpc3BsYXkpO1xuICAgICAgfSAvLyBHZW5lcmF0ZSBzdGVwIGxhYmVsc1xuXG5cbiAgICAgIGlmIChzdGVwTGFiZWxzKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdGVwTGFiZWxzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgJHRyYWNrLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJtYnNjLXByb2dyZXNzLXN0ZXAtbGFiZWxcIiBzdHlsZT1cIicgKyAocy5ydGwgPyAncmlnaHQnIDogJ2xlZnQnKSArICc6ICcgKyAoc3RlcExhYmVsc1tpXSAtIG1pbikgKiAxMDAgLyAobWF4IC0gbWluKSArICclXCIgPicgKyBzdGVwTGFiZWxzW2ldICsgJzwvc3Bhbj4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkdGFyZ2V0ID0gJCQxKCRlbG0uYXR0cignZGF0YS10YXJnZXQnKSB8fCBzLnRhcmdldCk7XG4gICAgfTtcblxuICAgIHRoYXQuX19kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgJHBhcmVudC5yZW1vdmVDbGFzcygnbWJzYy1pYy1sZWZ0IG1ic2MtaWMtcmlnaHQnKS5maW5kKCcubWJzYy1wcm9ncmVzcy1jb250JykucmVtb3ZlKCk7XG4gICAgICAkcGFyZW50LmZpbmQoJy5tYnNjLWlucHV0LWljJykucmVtb3ZlKCk7XG4gICAgICAkZWxtLm9mZignY2hhbmdlJywgb25DaGFuZ2UpO1xuICAgIH07XG5cbiAgICB0aGF0LnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICB1cGRhdGVWYWx1ZShnZXRBdHRyKCd2YWx1ZScsIG1pbiksIHRydWUsIGZhbHNlKTtcbiAgICB9O1xuXG4gICAgdGhhdC5nZXRWYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcblxuICAgIHRoYXQuc2V0VmFsID0gZnVuY3Rpb24gKHYsIGZpbGwsIGNoYW5nZSkge1xuICAgICAgdXBkYXRlVmFsdWUodiwgdHJ1ZSwgZmlsbCwgY2hhbmdlKTtcbiAgICB9O1xuXG4gICAgaWYgKCFpbmhlcml0KSB7XG4gICAgICB0aGF0LmluaXQoKTtcbiAgICB9XG4gIH07XG4gIFByb2dyZXNzLnByb3RvdHlwZSA9IHtcbiAgICBfY2xhc3M6ICdwcm9ncmVzcycsXG4gICAgX2NzczogJ21ic2MtcHJvZ3Jlc3MnLFxuICAgIF9oYXNUaGVtZTogdHJ1ZSxcbiAgICBfaGFzTGFuZzogdHJ1ZSxcbiAgICBfaGFzRGVmOiB0cnVlLFxuICAgIF9kZWZhdWx0czoge1xuICAgICAgbWluOiAwLFxuICAgICAgbWF4OiAxMDAsXG4gICAgICByZXR1cm5BZmZpeDogdHJ1ZVxuICAgIH1cbiAgfTtcbiAgY2xhc3Nlcy5Qcm9ncmVzcyA9IFByb2dyZXNzOyAvLyBJbml0IG1ic2MtcHJvZ3Jlc3MgZWxlbWVudHMgb24gcGFnZSBsb2FkXG5cbiAgYXV0b0luaXQoJ1ttYnNjLXByb2dyZXNzXScsIFByb2dyZXNzKTtcblxuICB2YXIgU2xpZGVyID0gZnVuY3Rpb24gU2xpZGVyKGVsbSwgc2V0dGluZ3MsIGluaGVyaXQpIHtcbiAgICB2YXIgJGVsbSxcbiAgICAgICAgJHBhcmVudCxcbiAgICAgICAgJHByb2dyZXNzLFxuICAgICAgICAkdG9vbHRpcHMsXG4gICAgICAgICR0cmFjayxcbiAgICAgICAgaGFzUHJvZ3Jlc3MsXG4gICAgICAgIGhhc1Rvb2x0aXAsXG4gICAgICAgIGlzUmFuZ2UsXG4gICAgICAgIGlzUnRsLFxuICAgICAgICBtYXgsXG4gICAgICAgIG1pbixcbiAgICAgICAgc3RlcCxcbiAgICAgICAgcyxcbiAgICAgICAgdGhhdCA9IHRoaXM7IC8vIENhbGwgdGhlIHBhcmVudCBjb25zdHJ1Y3RvclxuXG4gICAgUHJvZ3Jlc3MuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzLCB0cnVlKTtcbiAgICB2YXIgcHJvZ3Jlc3NJbml0ID0gdGhhdC5fX2luaXQsXG4gICAgICAgIHByb2dyZXNzRGVzdHJveSA9IHRoYXQuX19kZXN0cm95O1xuICAgIFNsaWRlckJhc2UuY2FsbCh0aGlzLCBlbG0sIHNldHRpbmdzLCB0cnVlKTtcbiAgICB2YXIgc2xpZGVySW5pdCA9IHRoYXQuX19pbml0LFxuICAgICAgICBzbGlkZXJEZXN0cm95ID0gdGhhdC5fX2Rlc3Ryb3k7IC8vIC0tLVxuXG4gICAgdGhhdC5fX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBwcm9ncmVzc0luaXQoKTtcbiAgICAgIHNsaWRlckluaXQoKTtcbiAgICB9O1xuXG4gICAgdGhhdC5fX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBwcm9ncmVzc0Rlc3Ryb3koKTtcbiAgICAgIHNsaWRlckRlc3Ryb3koKTtcbiAgICB9O1xuXG4gICAgdGhhdC5fdXBkYXRlID0gZnVuY3Rpb24gKHYsIHZhbHVlLCBpbmRleCwgcGVyY2VudCwgbXVsdGlwbGUsIHJlZnJlc2gsICRoYW5kbGVDb250KSB7XG4gICAgICBpZiAoaXNSYW5nZSkge1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICB2ID0gTWF0aC5taW4odiwgdmFsdWVbMV0pO1xuICAgICAgICAgICRwcm9ncmVzcy5jc3Moe1xuICAgICAgICAgICAgd2lkdGg6IGdldFBlcmNlbnQodmFsdWVbMV0sIG1pbiwgbWF4KSAtIGdldFBlcmNlbnQodiwgbWluLCBtYXgpICsgJyUnLFxuICAgICAgICAgICAgbGVmdDogaXNSdGwgPyAnYXV0bycgOiBnZXRQZXJjZW50KHYsIG1pbiwgbWF4KSArICclJyxcbiAgICAgICAgICAgIHJpZ2h0OiBpc1J0bCA/IGdldFBlcmNlbnQodiwgbWluLCBtYXgpICsgJyUnIDogJ2F1dG8nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdiA9IE1hdGgubWF4KHYsIHZhbHVlWzBdKTtcbiAgICAgICAgICAkcHJvZ3Jlc3MuY3NzKHtcbiAgICAgICAgICAgIHdpZHRoOiBnZXRQZXJjZW50KHYsIG1pbiwgbWF4KSAtIGdldFBlcmNlbnQodmFsdWVbMF0sIG1pbiwgbWF4KSArICclJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG11bHRpcGxlIHx8ICFoYXNQcm9ncmVzcykge1xuICAgICAgICAkaGFuZGxlQ29udC5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGlzUnRsID8gJ2F1dG8nIDogKHBlcmNlbnQgfHwgZ2V0UGVyY2VudCh2LCBtaW4sIG1heCkpICsgJyUnLFxuICAgICAgICAgIHJpZ2h0OiBpc1J0bCA/IChwZXJjZW50IHx8IGdldFBlcmNlbnQodiwgbWluLCBtYXgpKSArICclJyA6ICdhdXRvJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRwcm9ncmVzcy5jc3MoJ3dpZHRoJywgKHBlcmNlbnQgfHwgZ2V0UGVyY2VudCh2LCBtaW4sIG1heCkpICsgJyUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc1Rvb2x0aXApIHtcbiAgICAgICAgJHRvb2x0aXBzLmVxKGluZGV4KS5odG1sKHYpO1xuICAgICAgfSAvLyBEaXNwbGF5IHZhbHVlIGluIHRoZSBzcGVjaWZpZWQgY29udGFpbmVyKHMpXG5cblxuICAgICAgaWYgKCFtdWx0aXBsZSAmJiAodmFsdWVbaW5kZXhdICE9IHYgfHwgcmVmcmVzaCkpIHtcbiAgICAgICAgdGhhdC5fZGlzcGxheSh2KTtcbiAgICAgIH0gLy8gUmV0dXJuIHZhbGlkYXRlZCB2YWx1ZVxuXG5cbiAgICAgIHJldHVybiB2O1xuICAgIH07XG5cbiAgICB0aGF0Ll9yZWFkVmFsdWUgPSBmdW5jdGlvbiAoJGVsbSkge1xuICAgICAgcmV0dXJuICskZWxtLnZhbCgpO1xuICAgIH07XG5cbiAgICB0aGF0Ll9maWxsVmFsdWUgPSBmdW5jdGlvbiAodiwgaW5kZXgsIGNoYW5nZSkge1xuICAgICAgJGVsbS5lcShpbmRleCkudmFsKHYpO1xuXG4gICAgICBpZiAoY2hhbmdlKSB7XG4gICAgICAgICRlbG0uZXEoaW5kZXgpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGF0Ll9tYXJrdXBSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpLCBzdGVwTnI7XG5cbiAgICAgIGlmIChoYXNUb29sdGlwKSB7XG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ21ic2Mtc2xpZGVyLWhhcy10b29sdGlwJyk7XG4gICAgICB9IC8vIEdlbmVyYXRlIHN0ZXAgbWFya3NcblxuXG4gICAgICBpZiAoc3RlcCAhPSAxKSB7XG4gICAgICAgIHN0ZXBOciA9IChtYXggLSBtaW4pIC8gc3RlcDtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDw9IHN0ZXBOcjsgKytpKSB7XG4gICAgICAgICAgJHRyYWNrLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJtYnNjLXNsaWRlci1zdGVwXCIgc3R5bGU9XCInICsgKGlzUnRsID8gJ3JpZ2h0JyA6ICdsZWZ0JykgKyAnOicgKyAxMDAgLyBzdGVwTnIgKiBpICsgJyVcIj48L3NwYW4+Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gR2VuZXJhdGUgc2xpZGVyIGhhbmRsZXNcblxuXG4gICAgICAkZWxtLmVhY2goZnVuY3Rpb24gKGksIGVsbSkge1xuICAgICAgICB2YXIgdmFsdWUgPSArZWxtLnZhbHVlO1xuXG4gICAgICAgIGlmIChlbG0udHlwZSA9PSAncmFuZ2UnKSB7XG4gICAgICAgICAgLy8gU2V0IG1pbiAvIG1heCAvIHN0ZXAgcHJvcGVydGllcyBmb3IgYWxsIGlucHV0c1xuICAgICAgICAgICQkMShlbG0pLmF0dHIoJ21pbicsIG1pbikuYXR0cignbWF4JywgbWF4KS5hdHRyKCdzdGVwJywgc3RlcCk7XG4gICAgICAgIH1cblxuICAgICAgICAoaGFzUHJvZ3Jlc3MgPyAkcHJvZ3Jlc3MgOiAkdHJhY2spLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJtYnNjLXNsaWRlci1oYW5kbGUtY29udCcgKyAoaXNSYW5nZSAmJiAhaSA/ICcgbWJzYy1zbGlkZXItaGFuZGxlLWxlZnQnIDogJycpICsgKGlzUmFuZ2UgJiYgIWkgJiYgdmFsdWUgPiAobWF4IC0gbWluKSAvIDIgPyAnIG1ic2MtaGFuZGxlLWN1cnInIDogJycpICsgJ1wiPicgKyAnPHNwYW4gdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJtYnNjLXNsaWRlci1oYW5kbGVcIiBhcmlhLXZhbHVlbWluPVwiJyArIG1pbiArICdcIiBhcmlhLXZhbHVlbWF4PVwiJyArIG1heCArICdcIiBkYXRhLWluZGV4PVwiJyArIGkgKyAnXCI+PC9zcGFuPicgKyAoaGFzVG9vbHRpcCA/ICc8c3BhbiBjbGFzcz1cIm1ic2Mtc2xpZGVyLXRvb2x0aXBcIj48L3NwYW4+JyA6ICcnKSArICc8L3NwYW4+Jyk7XG4gICAgICB9KTtcbiAgICAgICR0b29sdGlwcyA9ICRwYXJlbnQuZmluZCgnLm1ic2Mtc2xpZGVyLXRvb2x0aXAnKTtcbiAgICB9O1xuXG4gICAgdGhhdC5fX19pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCRwYXJlbnQpIHtcbiAgICAgICAgJHBhcmVudC5yZW1vdmVDbGFzcygnbWJzYy1zbGlkZXItaGFzLXRvb2x0aXAnKTtcblxuICAgICAgICBpZiAoc3RlcCAhPSAxKSB7XG4gICAgICAgICAgJCQxKCcubWJzYy1zbGlkZXItc3RlcCcsICR0cmFjaykucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJHBhcmVudCA9IHRoYXQuXyRwYXJlbnQ7XG4gICAgICAkdHJhY2sgPSB0aGF0Ll8kdHJhY2s7XG4gICAgICAkcHJvZ3Jlc3MgPSB0aGF0Ll8kcHJvZ3Jlc3M7XG4gICAgICAkZWxtID0gJHBhcmVudC5maW5kKCdpbnB1dCcpO1xuICAgICAgcyA9IHRoYXQuc2V0dGluZ3M7XG4gICAgICBtaW4gPSB0aGF0Ll9taW47XG4gICAgICBtYXggPSB0aGF0Ll9tYXg7XG4gICAgICB0aGF0Ll9zdGVwID0gc3RlcCA9IHNldHRpbmdzLnN0ZXAgPT09IHVuZGVmaW5lZCA/ICskZWxtLmF0dHIoJ3N0ZXAnKSB8fCBzLnN0ZXAgOiBzZXR0aW5ncy5zdGVwO1xuICAgICAgdGhhdC5fbGl2ZSA9IGdldEJvb2xBdHRyKCdkYXRhLWxpdmUnLCBzLmxpdmUsICRlbG0pO1xuICAgICAgaGFzVG9vbHRpcCA9IGdldEJvb2xBdHRyKCdkYXRhLXRvb2x0aXAnLCBzLnRvb2x0aXAsICRlbG0pO1xuICAgICAgaGFzUHJvZ3Jlc3MgPSBnZXRCb29sQXR0cignZGF0YS1oaWdobGlnaHQnLCBzLmhpZ2hsaWdodCwgJGVsbSkgJiYgJGVsbS5sZW5ndGggPCAzO1xuICAgICAgaXNSYW5nZSA9IGhhc1Byb2dyZXNzICYmICRlbG0ubGVuZ3RoID09IDI7XG4gICAgICBpc1J0bCA9IHMucnRsO1xuXG4gICAgICB0aGF0Ll9tYXJrdXBSZWFkeSgpO1xuICAgIH07XG5cbiAgICBpZiAoIWluaGVyaXQpIHtcbiAgICAgIHRoYXQuaW5pdCgpO1xuICAgIH1cbiAgfTtcbiAgU2xpZGVyLnByb3RvdHlwZSA9IHtcbiAgICBfY2xhc3M6ICdwcm9ncmVzcycsXG4gICAgX2NzczogJ21ic2MtcHJvZ3Jlc3MgbWJzYy1zbGlkZXInLFxuICAgIF9oYXNUaGVtZTogdHJ1ZSxcbiAgICBfaGFzTGFuZzogdHJ1ZSxcbiAgICBfaGFzRGVmOiB0cnVlLFxuICAgIF9kZWZhdWx0czoge1xuICAgICAgY2hhbmdlRXZlbnQ6ICdjaGFuZ2UnLFxuICAgICAgc3RvcFByb3A6IHRydWUsXG4gICAgICBtaW46IDAsXG4gICAgICBtYXg6IDEwMCxcbiAgICAgIHN0ZXA6IDEsXG4gICAgICBsaXZlOiB0cnVlLFxuICAgICAgaGlnaGxpZ2h0OiB0cnVlLFxuICAgICAgcm91bmQ6IHRydWUsXG4gICAgICByZXR1cm5BZmZpeDogdHJ1ZVxuICAgIH1cbiAgfTtcbiAgY2xhc3Nlcy5TbGlkZXIgPSBTbGlkZXI7IC8vIEluaXQgbWJzYy1zbGlkZXIgZWxlbWVudHMgb24gcGFnZSBsb2FkXG5cbiAgYXV0b0luaXQoJ1ttYnNjLXNsaWRlcl0nLCBTbGlkZXIpO1xuXG4gIHZhciBSYXRpbmcgPSBmdW5jdGlvbiBSYXRpbmcoZWxtLCBzZXR0aW5ncywgaW5oZXJpdCkge1xuICAgIHZhciAkcHJvZ3Jlc3MsXG4gICAgICAgICR0cmFjayxcbiAgICAgICAgbWF4LFxuICAgICAgICBtaW4sXG4gICAgICAgIGVtcHR5LFxuICAgICAgICBmaWxsZWQsXG4gICAgICAgIHMsXG4gICAgICAgIHRoYXQgPSB0aGlzLFxuICAgICAgICAkZWxtID0gJCQxKGVsbSk7IC8vIENhbGwgdGhlIHBhcmVudCBjb25zdHJ1Y3RvclxuXG4gICAgU2xpZGVyLmNhbGwodGhpcywgZWxtLCBzZXR0aW5ncywgdHJ1ZSk7XG5cbiAgICB0aGF0Ll91cGRhdGUgPSBmdW5jdGlvbiAodiwgdmFsdWUsIGluZGV4LCBwZXJjZW50LCBtdWx0aXBsZSwgcmVmcmVzaCkge1xuICAgICAgJHByb2dyZXNzLmNzcygnd2lkdGgnLCBnZXRQZXJjZW50KHYsIDAsIG1heCkgKyAnJScpOyAvLyBEaXNwbGF5IHZhbHVlIGluIHRoZSBzcGVjaWZpZWQgY29udGFpbmVyKHMpXG5cbiAgICAgIGlmICghbXVsdGlwbGUgJiYgKHZhbHVlW2luZGV4XSAhPSB2IHx8IHJlZnJlc2gpKSB7XG4gICAgICAgIHRoYXQuX2Rpc3BsYXkodik7XG4gICAgICB9IC8vIFJldHVybiB2YWxpZGF0ZWQgdmFsdWVcblxuXG4gICAgICByZXR1cm4gdjtcbiAgICB9O1xuXG4gICAgdGhhdC5fbWFya3VwUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaSxcbiAgICAgICAgICBlbXB0eVN0cmluZyA9ICcnLFxuICAgICAgICAgIGZpbGxlZFN0cmluZyA9ICcnO1xuICAgICAgJHRyYWNrID0gdGhhdC5fJHRyYWNrO1xuICAgICAgJHByb2dyZXNzID0gdGhhdC5fJHByb2dyZXNzO1xuICAgICAgcyA9IHRoYXQuc2V0dGluZ3M7XG4gICAgICBtaW4gPSB0aGF0Ll9taW47XG4gICAgICBtYXggPSB0aGF0Ll9tYXg7XG4gICAgICB0aGF0Ll9iYXNlID0gbWluO1xuICAgICAgdGhhdC5fcm91bmRpbmcgPSBzLnJ0bCA/ICdmbG9vcicgOiAnY2VpbCc7XG4gICAgICBlbXB0eSA9ICRlbG0uYXR0cignZGF0YS1lbXB0eScpIHx8IHMuZW1wdHk7XG4gICAgICBmaWxsZWQgPSAkZWxtLmF0dHIoJ2RhdGEtZmlsbGVkJykgfHwgcy5maWxsZWQ7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtYXg7ICsraSkge1xuICAgICAgICBlbXB0eVN0cmluZyArPSAnPHNwYW4gY2xhc3M9XCJtYnNjLWljIG1ic2MtaWMtJyArIGVtcHR5ICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICBmaWxsZWRTdHJpbmcgKz0gJzxzcGFuIGNsYXNzPVwibWJzYy1pYyBtYnNjLWljLScgKyBmaWxsZWQgKyAnXCI+PC9zcGFuPic7XG4gICAgICB9XG5cbiAgICAgICR0cmFjay5odG1sKGVtcHR5U3RyaW5nKTtcbiAgICAgICR0cmFjay5hcHBlbmQoJHByb2dyZXNzKTtcbiAgICAgICRwcm9ncmVzcy5odG1sKGZpbGxlZFN0cmluZyk7XG4gICAgICAkdHJhY2suYXBwZW5kKCc8c3BhbiBjbGFzcz1cIm1ic2MtcmF0aW5nLWhhbmRsZS1jb250JyArICdcIj4nICsgJzxzcGFuIHRhYmluZGV4PVwiMFwiIGNsYXNzPVwibWJzYy1zbGlkZXItaGFuZGxlXCIgYXJpYS12YWx1ZW1pbj1cIicgKyBtaW4gKyAnXCIgYXJpYS12YWx1ZW1heD1cIicgKyBtYXggKyAnXCIgZGF0YS1pbmRleD1cIjBcIj48L3NwYW4+JyArICc8L3NwYW4+Jyk7XG4gICAgfTtcblxuICAgIGlmICghaW5oZXJpdCkge1xuICAgICAgdGhhdC5pbml0KCk7XG4gICAgfVxuICB9O1xuICBSYXRpbmcucHJvdG90eXBlID0ge1xuICAgIF9jbGFzczogJ3Byb2dyZXNzJyxcbiAgICBfY3NzOiAnbWJzYy1wcm9ncmVzcyBtYnNjLXJhdGluZycsXG4gICAgX2hhc1RoZW1lOiB0cnVlLFxuICAgIF9oYXNMYW5nOiB0cnVlLFxuICAgIF9oYXNEZWY6IHRydWUsXG4gICAgX2RlZmF1bHRzOiB7XG4gICAgICBjaGFuZ2VFdmVudDogJ2NoYW5nZScsXG4gICAgICBzdG9wUHJvcDogdHJ1ZSxcbiAgICAgIG1pbjogMSxcbiAgICAgIG1heDogNSxcbiAgICAgIHN0ZXA6IDEsXG4gICAgICBsaXZlOiB0cnVlLFxuICAgICAgcm91bmQ6IHRydWUsXG4gICAgICBob3ZlcjogdHJ1ZSxcbiAgICAgIGhpZ2hsaWdodDogdHJ1ZSxcbiAgICAgIHJldHVybkFmZml4OiB0cnVlLFxuICAgICAgZW1wdHk6ICdzdGFyJyxcbiAgICAgIGZpbGxlZDogJ3N0YXIzJ1xuICAgIH1cbiAgfTtcbiAgY2xhc3Nlcy5SYXRpbmcgPSBSYXRpbmc7IC8vIEluaXQgbWJzYy1yYXRpbmcgZWxlbWVudHMgb24gcGFnZSBsb2FkXG5cbiAgYXV0b0luaXQoJ1ttYnNjLXJhdGluZ10nLCBSYXRpbmcpO1xuXG4gIHZhciBuciA9IDE7XG4gIHZhciBDb2xsYXBzaWJsZUJhc2UgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb2xsYXBzaWJsZUJhc2UoZWxtLCBzZXR0aW5ncykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIGNvbnRlbnQ7XG4gICAgICB2YXIgJGhlYWRlcjtcbiAgICAgIHZhciAkY29udGVudDtcbiAgICAgIHZhciAkZWxtID0gJCQxKGVsbSk7XG4gICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICB0aGlzLl9pc09wZW4gPSBzZXR0aW5ncy5pc09wZW4gfHwgZmFsc2U7XG4gICAgICAkZWxtLmFkZENsYXNzKCdtYnNjLWNvbGxhcHNpYmxlICcgKyAodGhpcy5faXNPcGVuID8gJ21ic2MtY29sbGFwc2libGUtb3BlbicgOiAnJykpO1xuXG4gICAgICBpZiAoJGVsbS5oYXNDbGFzcygnbWJzYy1jYXJkJykpIHtcbiAgICAgICAgLy8gY2FyZCBlbmhhbmNlXG4gICAgICAgICRoZWFkZXIgPSAkZWxtLmZpbmQoJy5tYnNjLWNhcmQtaGVhZGVyJykuZXEoMCkuYWRkQ2xhc3MoJ21ic2MtY29sbGFwc2libGUtaGVhZGVyJyk7XG4gICAgICAgICRjb250ZW50ID0gJGVsbS5maW5kKCcubWJzYy1jYXJkLWNvbnRlbnQnKS5lcSgwKS5hZGRDbGFzcygnbWJzYy1jb2xsYXBzaWJsZS1jb250ZW50Jyk7XG4gICAgICB9IGVsc2UgaWYgKCRlbG0uaGFzQ2xhc3MoJ21ic2MtZm9ybS1ncm91cCcpIHx8ICRlbG0uaGFzQ2xhc3MoJ21ic2MtZm9ybS1ncm91cC1pbnNldCcpKSB7XG4gICAgICAgIC8vIGZvcm0gZ3JvdXAgZW5oYW5jZVxuICAgICAgICAkaGVhZGVyID0gJGVsbS5maW5kKCcubWJzYy1mb3JtLWdyb3VwLXRpdGxlJykuZXEoMCkuYWRkQ2xhc3MoJ21ic2MtY29sbGFwc2libGUtaGVhZGVyJyk7XG4gICAgICAgICRjb250ZW50ID0gJGVsbS5maW5kKCcubWJzYy1mb3JtLWdyb3VwLWNvbnRlbnQnKS5lcSgwKS5hZGRDbGFzcygnbWJzYy1jb2xsYXBzaWJsZS1jb250ZW50Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBpdCBpcyB1c2VkIGluZGVwZW5kZW50bHlcbiAgICAgICAgJGhlYWRlciA9ICRlbG0uZmluZCgnLm1ic2MtY29sbGFwc2libGUtaGVhZGVyJykuZXEoMCk7XG4gICAgICAgICRjb250ZW50ID0gJGVsbS5maW5kKCcubWJzYy1jb2xsYXBzaWJsZS1jb250ZW50JykuZXEoMCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRlbnQgPSAkY29udGVudFswXTtcblxuICAgICAgaWYgKGNvbnRlbnQgJiYgIWNvbnRlbnQuaWQpIHtcbiAgICAgICAgY29udGVudC5pZCA9ICdtYnNjLWNvbGxhcHNpYmxlLScgKyBucisrO1xuICAgICAgfVxuXG4gICAgICBpZiAoJGhlYWRlci5sZW5ndGggJiYgY29udGVudCkge1xuICAgICAgICB2YXIgJGNvbGxhcHNpYmxlSWNvbiA9ICQkMSgnPHNwYW4gY2xhc3M9XCJtYnNjLWNvbGxhcHNpYmxlLWljb24gbWJzYy1pYyBtYnNjLWljLWFycm93LWRvd241XCI+PC9zcGFuPicpO1xuICAgICAgICB0YXAodGhpcywgJGhlYWRlciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLmNvbGxhcHNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkaGVhZGVyLmF0dHIoJ3JvbGUnLCAnYnV0dG9uJykuYXR0cignYXJpYS1leHBhbmRlZCcsIHRoaXMuX2lzT3BlbikuYXR0cignYXJpYS1jb250cm9scycsIGNvbnRlbnQuaWQpLmF0dHIoJ3RhYmluZGV4JywgJzAnKS5vbignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bikub24oJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bikuYXBwZW5kKCRjb2xsYXBzaWJsZUljb24pO1xuICAgICAgfVxuXG4gICAgICBlbG0ubWJzY0luc3QgPSB0aGlzO1xuICAgICAgdGhpcy5fJGhlYWRlciA9ICRoZWFkZXI7XG4gICAgICB0aGlzLl8kY29udGVudCA9ICRjb250ZW50O1xuICAgICAgdGhpcy5fJGVsbSA9ICRlbG07XG4gICAgICB0aGlzLl8kYWNjb3JkaW9uUGFyZW50ID0gJGVsbS5wYXJlbnQoJ1ttYnNjLWFjY29yZGlvbl0sIG1ic2MtYWNjb3JkaW9uLCAubWJzYy1hY2NvcmRpb24nKTtcbiAgICAgIHRoaXMuc2hvdyA9IHRoaXMuc2hvdy5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5oaWRlID0gdGhpcy5oaWRlLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLnRvZ2dsZSA9IHRoaXMudG9nZ2xlLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLm9uS2V5RG93biA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBDb2xsYXBzaWJsZUJhc2UucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmNvbGxhcHNlID0gZnVuY3Rpb24gY29sbGFwc2Uoc2hvdykge1xuICAgICAgdmFyICRlbG0gPSB0aGlzLl8kZWxtO1xuICAgICAgdmFyICRjb250ZW50ID0gdGhpcy5fJGNvbnRlbnQ7XG5cbiAgICAgIHZhciByZW1vdmVIZWlnaHQgPSBmdW5jdGlvbiByZW1vdmVIZWlnaHQoKSB7XG4gICAgICAgICRjb250ZW50Lm9mZigndHJhbnNpdGlvbmVuZCcsIHJlbW92ZUhlaWdodCkuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoc2hvdyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNob3cgPSAhdGhpcy5faXNPcGVuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2hvdyAmJiB0aGlzLl9pc09wZW4gfHwgIXNob3cgJiYgIXRoaXMuX2lzT3BlbiB8fCAhJGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNob3cpIHtcbiAgICAgICAgaWYgKGhhc1RyYW5zaXRpb24pIHtcbiAgICAgICAgICAkY29udGVudC5vbigndHJhbnNpdGlvbmVuZCcsIHJlbW92ZUhlaWdodCkuY3NzKCdoZWlnaHQnLCAkY29udGVudFswXS5zY3JvbGxIZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgJGVsbS5hZGRDbGFzcygnbWJzYy1jb2xsYXBzaWJsZS1vcGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaGFzVHJhbnNpdGlvbikge1xuICAgICAgICAgICRjb250ZW50LmNzcygnaGVpZ2h0JywgZ2V0Q29tcHV0ZWRTdHlsZSgkY29udGVudFswXSkuaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRjb250ZW50LmNzcygnaGVpZ2h0JywgMCk7XG4gICAgICAgICAgJGVsbS5yZW1vdmVDbGFzcygnbWJzYy1jb2xsYXBzaWJsZS1vcGVuJyk7XG4gICAgICAgIH0sIDUwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNob3cgJiYgdGhpcy5fJGFjY29yZGlvblBhcmVudCkge1xuICAgICAgICB0aGlzLl8kYWNjb3JkaW9uUGFyZW50LmZpbmQoJy5tYnNjLWNvbGxhcHNpYmxlLW9wZW4nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodGhpcyAhPT0gJGVsbVswXSkge1xuICAgICAgICAgICAgdGhpcy5tYnNjSW5zdC5oaWRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNPcGVuID0gc2hvdztcblxuICAgICAgdGhpcy5fJGhlYWRlci5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdGhpcy5faXNPcGVuKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuICAgICAgdGhpcy5jb2xsYXBzZSh0cnVlKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmhpZGUgPSBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgdGhpcy5jb2xsYXBzZShmYWxzZSk7XG4gICAgfTtcblxuICAgIF9wcm90by50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIHRoaXMuXyRlbG0ucmVtb3ZlQ2xhc3MoJ21ic2MtY29sbGFwc2libGUgbWJzYy1jb2xsYXBzaWJsZS1vcGVuJyk7XG5cbiAgICAgIHRoaXMuXyRjb250ZW50LnJlbW92ZUNsYXNzKCdtYnNjLWNvbGxhcHNpYmxlLWNvbnRlbnQnKTtcblxuICAgICAgdGhpcy5fJGhlYWRlci5yZW1vdmVDbGFzcygnbWJzYy1jb2xsYXBzaWJsZS1oZWFkZXInKS5vZmYoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pLm9mZigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKS5maW5kKCcubWJzYy1jb2xsYXBzaWJsZS1pY29uJykucmVtb3ZlKCk7XG5cbiAgICAgIHRhcE9mZih0aGlzLl8kaGVhZGVyKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLm9uS2V5RG93biA9IGZ1bmN0aW9uIG9uS2V5RG93bihldikge1xuICAgICAgaWYgKGV2LndoaWNoID09PSAzMiB8fCBldi5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgIC8vc3BhY2Ugb3IgZW50ZXIgXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuY29sbGFwc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLm9uTW91c2VEb3duID0gZnVuY3Rpb24gb25Nb3VzZURvd24oZXYpIHtcbiAgICAgIC8vIHByZXZlbnQgZm9jdXMgb24gbW91c2UgZG93blxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbGxhcHNpYmxlQmFzZTtcbiAgfSgpO1xuICBjbGFzc2VzLkNvbGxhcHNpYmxlQmFzZSA9IENvbGxhcHNpYmxlQmFzZTtcblxuICB2YXIgaWQkMSA9IDA7XG5cbiAgZnVuY3Rpb24gaW5pdENvbnRyb2xzKCRjdHgsIGNvbnRyb2xzLCBzLCBzaGFsbG93KSB7XG4gICAgJCQxKCdpbnB1dCxzZWxlY3QsdGV4dGFyZWEscHJvZ3Jlc3MsYnV0dG9uJywgJGN0eCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29udHJvbCA9IHRoaXMsXG4gICAgICAgICAgJGNvbnRyb2wgPSAkJDEoY29udHJvbCksXG4gICAgICAgICAgLy8kcGFyZW50ID0gJGNvbnRyb2wucGFyZW50KCksXG4gICAgICB0eXBlID0gZ2V0Q29udHJvbFR5cGUoJGNvbnRyb2wpOyAvLyBTa2lwIGVsZW1lbnRzIHdpdGggZGF0YS1lbmhhbmNlPVwiZmFsc2VcIlxuXG4gICAgICBpZiAoJGNvbnRyb2wuYXR0cignZGF0YS1lbmhhbmNlJykgIT0gJ2ZhbHNlJ1xuICAgICAgLyogVFJJQUxDT05EICovXG4gICAgICApIHtcbiAgICAgICAgICBpZiAoJGNvbnRyb2wuaGFzQ2xhc3MoJ21ic2MtY29udHJvbCcpKSB7XG4gICAgICAgICAgICBpZiAoY29udHJvbC5tYnNjSW5zdCkge1xuICAgICAgICAgICAgICBjb250cm9sLm1ic2NJbnN0Lm9wdGlvbih7XG4gICAgICAgICAgICAgICAgdGhlbWU6IHMudGhlbWUsXG4gICAgICAgICAgICAgICAgbGFuZzogcy5sYW5nLFxuICAgICAgICAgICAgICAgIHJ0bDogcy5ydGwsXG4gICAgICAgICAgICAgICAgb25UZXh0OiBzLm9uVGV4dCxcbiAgICAgICAgICAgICAgICBvZmZUZXh0OiBzLm9mZlRleHQsXG4gICAgICAgICAgICAgICAgc3RvcFByb3A6IHMuc3RvcFByb3BcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghY29udHJvbC5pZCkge1xuICAgICAgICAgICAgICBjb250cm9sLmlkID0gJ21ic2MtZm9ybS1jb250cm9sLScgKyArK2lkJDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICAgICAgICBjYXNlICdzdWJtaXQnOlxuICAgICAgICAgICAgICAgIGNvbnRyb2xzW2NvbnRyb2wuaWRdID0gbmV3IEJ1dHRvbihjb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICB0aGVtZTogcy50aGVtZSxcbiAgICAgICAgICAgICAgICAgIHJ0bDogcy5ydGwsXG4gICAgICAgICAgICAgICAgICB0YXA6IHMudGFwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAnc3dpdGNoJzpcbiAgICAgICAgICAgICAgICBjb250cm9sc1tjb250cm9sLmlkXSA9IG5ldyBTd2l0Y2goY29udHJvbCwge1xuICAgICAgICAgICAgICAgICAgdGhlbWU6IHMudGhlbWUsXG4gICAgICAgICAgICAgICAgICBsYW5nOiBzLmxhbmcsXG4gICAgICAgICAgICAgICAgICBydGw6IHMucnRsLFxuICAgICAgICAgICAgICAgICAgdGFwOiBzLnRhcCxcbiAgICAgICAgICAgICAgICAgIG9uVGV4dDogcy5vblRleHQsXG4gICAgICAgICAgICAgICAgICBvZmZUZXh0OiBzLm9mZlRleHQsXG4gICAgICAgICAgICAgICAgICBzdG9wUHJvcDogcy5zdG9wUHJvcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICBjb250cm9sc1tjb250cm9sLmlkXSA9IG5ldyBDaGVja0JveChjb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICB0YXA6IHMudGFwLFxuICAgICAgICAgICAgICAgICAgdGhlbWU6IHMudGhlbWUsXG4gICAgICAgICAgICAgICAgICBydGw6IHMucnRsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAncmFuZ2UnOlxuICAgICAgICAgICAgICAgIGlmICghJCQxKGNvbnRyb2wpLnBhcmVudCgpLmhhc0NsYXNzKCdtYnNjLXNsaWRlcicpKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sc1tjb250cm9sLmlkXSA9IG5ldyBTbGlkZXIoY29udHJvbCwge1xuICAgICAgICAgICAgICAgICAgICB0aGVtZTogcy50aGVtZSxcbiAgICAgICAgICAgICAgICAgICAgbGFuZzogcy5sYW5nLFxuICAgICAgICAgICAgICAgICAgICBydGw6IHMucnRsLFxuICAgICAgICAgICAgICAgICAgICBzdG9wUHJvcDogcy5zdG9wUHJvcCxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxTdHlsZTogcy5sYWJlbFN0eWxlXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdyYXRpbmcnOlxuICAgICAgICAgICAgICAgIGNvbnRyb2xzW2NvbnRyb2wuaWRdID0gbmV3IFJhdGluZyhjb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICB0aGVtZTogcy50aGVtZSxcbiAgICAgICAgICAgICAgICAgIGxhbmc6IHMubGFuZyxcbiAgICAgICAgICAgICAgICAgIHJ0bDogcy5ydGwsXG4gICAgICAgICAgICAgICAgICBzdG9wUHJvcDogcy5zdG9wUHJvcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3Byb2dyZXNzJzpcbiAgICAgICAgICAgICAgICBjb250cm9sc1tjb250cm9sLmlkXSA9IG5ldyBQcm9ncmVzcyhjb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICB0aGVtZTogcy50aGVtZSxcbiAgICAgICAgICAgICAgICAgIGxhbmc6IHMubGFuZyxcbiAgICAgICAgICAgICAgICAgIHJ0bDogcy5ydGwsXG4gICAgICAgICAgICAgICAgICBsYWJlbFN0eWxlOiBzLmxhYmVsU3R5bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdyYWRpbyc6XG4gICAgICAgICAgICAgICAgY29udHJvbHNbY29udHJvbC5pZF0gPSBuZXcgUmFkaW8oY29udHJvbCwge1xuICAgICAgICAgICAgICAgICAgdGFwOiBzLnRhcCxcbiAgICAgICAgICAgICAgICAgIHRoZW1lOiBzLnRoZW1lLFxuICAgICAgICAgICAgICAgICAgcnRsOiBzLnJ0bFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdC1vbmUnOlxuICAgICAgICAgICAgICBjYXNlICdzZWxlY3QtbXVsdGlwbGUnOlxuICAgICAgICAgICAgICAgIGNvbnRyb2xzW2NvbnRyb2wuaWRdID0gbmV3IFNlbGVjdChjb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICB0YXA6IHMudGFwLFxuICAgICAgICAgICAgICAgICAgaW5wdXRTdHlsZTogcy5pbnB1dFN0eWxlLFxuICAgICAgICAgICAgICAgICAgbGFiZWxTdHlsZTogcy5sYWJlbFN0eWxlLFxuICAgICAgICAgICAgICAgICAgdGhlbWU6IHMudGhlbWUsXG4gICAgICAgICAgICAgICAgICBydGw6IHMucnRsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICAgICAgICAgIGNvbnRyb2xzW2NvbnRyb2wuaWRdID0gbmV3IFRleHRBcmVhKGNvbnRyb2wsIHtcbiAgICAgICAgICAgICAgICAgIHRhcDogcy50YXAsXG4gICAgICAgICAgICAgICAgICBpbnB1dFN0eWxlOiBzLmlucHV0U3R5bGUsXG4gICAgICAgICAgICAgICAgICBsYWJlbFN0eWxlOiBzLmxhYmVsU3R5bGUsXG4gICAgICAgICAgICAgICAgICB0aGVtZTogcy50aGVtZSxcbiAgICAgICAgICAgICAgICAgIHJ0bDogcy5ydGxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdzZWdtZW50ZWQnOlxuICAgICAgICAgICAgICAgIGNvbnRyb2xzW2NvbnRyb2wuaWRdID0gbmV3IFNlZ21lbnRlZEl0ZW0oY29udHJvbCwge1xuICAgICAgICAgICAgICAgICAgdGhlbWU6IHMudGhlbWUsXG4gICAgICAgICAgICAgICAgICBydGw6IHMucnRsLFxuICAgICAgICAgICAgICAgICAgdGFwOiBzLnRhcCxcbiAgICAgICAgICAgICAgICAgIGlucHV0U3R5bGU6IHMuaW5wdXRTdHlsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3N0ZXBwZXInOlxuICAgICAgICAgICAgICAgIGNvbnRyb2xzW2NvbnRyb2wuaWRdID0gbmV3IFN0ZXBwZXIoY29udHJvbCwge1xuICAgICAgICAgICAgICAgICAgdGhlbWU6IHMudGhlbWUsXG4gICAgICAgICAgICAgICAgICBydGw6IHMucnRsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAnaGlkZGVuJzpcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb250cm9sc1tjb250cm9sLmlkXSA9IG5ldyBJbnB1dChjb250cm9sLCB7XG4gICAgICAgICAgICAgICAgICB0YXA6IHMudGFwLFxuICAgICAgICAgICAgICAgICAgaW5wdXRTdHlsZTogcy5pbnB1dFN0eWxlLFxuICAgICAgICAgICAgICAgICAgbGFiZWxTdHlsZTogcy5sYWJlbFN0eWxlLFxuICAgICAgICAgICAgICAgICAgdGhlbWU6IHMudGhlbWUsXG4gICAgICAgICAgICAgICAgICBydGw6IHMucnRsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCQxKCdbZGF0YS1jb2xsYXBzaWJsZV06bm90KC5tYnNjLWNvbGxhcHNpYmxlKScsICRjdHgpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbnRyb2wgPSB0aGlzLFxuICAgICAgICAgICRjb250cm9sID0gJCQxKGNvbnRyb2wpLFxuICAgICAgICAgIGlzT3BlbiA9ICRjb250cm9sLmF0dHIoJ2RhdGEtb3BlbicpO1xuXG4gICAgICBpZiAoIWNvbnRyb2wuaWQpIHtcbiAgICAgICAgY29udHJvbC5pZCA9ICdtYnNjLWZvcm0tY29udHJvbC0nICsgKytpZCQxO1xuICAgICAgfVxuXG4gICAgICBjb250cm9sc1tjb250cm9sLmlkXSA9IG5ldyBDb2xsYXBzaWJsZUJhc2UoY29udHJvbCwge1xuICAgICAgICBpc09wZW46IGlzT3BlbiAhPT0gdW5kZWZpbmVkICYmIGlzT3BlbiAhPSAnZmFsc2UnXG4gICAgICB9KTtcbiAgICAgIGluc3RhbmNlc1tjb250cm9sLmlkXSA9IGNvbnRyb2xzW2NvbnRyb2wuaWRdO1xuICAgIH0pOyAvLyBTZXQgaW5pdGlhbCBoZWlnaHQgZm9yIHRleHRhcmVhc1xuXG4gICAgaWYgKCFzaGFsbG93KSB7XG4gICAgICBzaXplVGV4dEFyZWFzKCk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGlubmVyU3R5bGUgPSAncG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowOyc7XG4gIHZhciBzdHlsZSA9IGlubmVyU3R5bGUgKyAncmlnaHQ6MDtib3R0b206MDtvdmVyZmxvdzpoaWRkZW47ei1pbmRleDotMTsnO1xuICB2YXIgbWFya3VwID0gJzxkaXYgc3R5bGU9XCInICsgc3R5bGUgKyAnXCI+PGRpdiBzdHlsZT1cIicgKyBpbm5lclN0eWxlICsgJ1wiPjwvZGl2PjwvZGl2PicgKyAnPGRpdiBzdHlsZT1cIicgKyBzdHlsZSArICdcIj48ZGl2IHN0eWxlPVwiJyArIGlubmVyU3R5bGUgKyAnd2lkdGg6MjAwJTtoZWlnaHQ6MjAwJTtcIj48L2Rpdj48L2Rpdj4nO1xuICB2YXIgb2JzZXJ2ZXI7XG4gIHZhciBjb3VudCA9IDA7XG4gIGZ1bmN0aW9uIHJlc2l6ZU9ic2VydmVyKGVsLCBjYWxsYmFjaywgem9uZSkge1xuICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgZXhwYW5kQ2hpbGQuc3R5bGUud2lkdGggPSAnMTAwMDAwcHgnO1xuICAgICAgZXhwYW5kQ2hpbGQuc3R5bGUuaGVpZ2h0ID0gJzEwMDAwMHB4JztcbiAgICAgIGV4cGFuZC5zY3JvbGxMZWZ0ID0gMTAwMDAwO1xuICAgICAgZXhwYW5kLnNjcm9sbFRvcCA9IDEwMDAwMDtcbiAgICAgIHNocmluay5zY3JvbGxMZWZ0ID0gMTAwMDAwO1xuICAgICAgc2hyaW5rLnNjcm9sbFRvcCA9IDEwMDAwMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja0hpZGRlbigpIHtcbiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgaGlkZGVuUmFmSWQgPSAwO1xuXG4gICAgICBpZiAoIXN0b3BDaGVjaykge1xuICAgICAgICBpZiAobm93IC0gbGFzdENoZWNrID4gMjAwICYmICFleHBhbmQuc2Nyb2xsVG9wICYmICFleHBhbmQuc2Nyb2xsTGVmdCkge1xuICAgICAgICAgIGxhc3RDaGVjayA9IG5vdztcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFoaWRkZW5SYWZJZCkge1xuICAgICAgICAgIGhpZGRlblJhZklkID0gcmFmKGNoZWNrSGlkZGVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuICAgICAgaWYgKCFyYWZJZCkge1xuICAgICAgICByYWZJZCA9IHJhZihvblJlc2l6ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgICByYWZJZCA9IDA7XG4gICAgICByZXNldCgpO1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICB2YXIgZXhwYW5kO1xuICAgIHZhciBleHBhbmRDaGlsZDtcbiAgICB2YXIgaGVscGVyO1xuICAgIHZhciBoaWRkZW5SYWZJZDtcbiAgICB2YXIgcmFmSWQ7XG4gICAgdmFyIHNocmluaztcbiAgICB2YXIgc3RvcENoZWNrO1xuICAgIHZhciBsYXN0Q2hlY2sgPSAwOyAvL2xldCBpc0hpZGRlbiA9IHRydWU7XG5cbiAgICBpZiAod2luZG93LlJlc2l6ZU9ic2VydmVyKSB7XG4gICAgICBpZiAoIW9ic2VydmVyKSB7XG4gICAgICAgIG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZW50cmllcywgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgICAgICAgIHZhciBfcmVmO1xuXG4gICAgICAgICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgICAgICAgaWYgKF9pID49IF9pdGVyYXRvci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX2kgPSBfaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICAgICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gX3JlZjtcblxuICAgICAgICAgICAgZW50cnkudGFyZ2V0Ll9fbWJzY1Jlc2l6ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvdW50Kys7XG4gICAgICBlbC5fX21ic2NSZXNpemUgPSBjYWxsYmFjaztcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWxwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGhlbHBlci5pbm5lckhUTUwgPSBtYXJrdXA7XG4gICAgICBoZWxwZXIuZGlyID0gJ2x0cic7IC8vIE5lZWQgdGhpcyB0byB3b3JrIGluIHJ0bCBhcyB3ZWxsO1xuXG4gICAgICBzaHJpbmsgPSBoZWxwZXIuY2hpbGROb2Rlc1sxXTtcbiAgICAgIGV4cGFuZCA9IGhlbHBlci5jaGlsZE5vZGVzWzBdO1xuICAgICAgZXhwYW5kQ2hpbGQgPSBleHBhbmQuY2hpbGROb2Rlc1swXTtcbiAgICAgIGVsLmFwcGVuZENoaWxkKGhlbHBlcik7XG4gICAgICBleHBhbmQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xuICAgICAgc2hyaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcblxuICAgICAgaWYgKHpvbmUpIHtcbiAgICAgICAgem9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmFmKGNoZWNrSGlkZGVuKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYWYoY2hlY2tIaWRkZW4pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkZXRhY2g6IGZ1bmN0aW9uIGRldGFjaCgpIHtcbiAgICAgICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICAgICAgY291bnQtLTtcbiAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZWwpO1xuXG4gICAgICAgICAgaWYgKCFjb3VudCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5yZW1vdmVDaGlsZChoZWxwZXIpO1xuICAgICAgICAgIHN0b3BDaGVjayA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdmFyICRhY3RpdmVFbG0sXG4gICAgICBwcmV2ZW50U2hvdyxcbiAgICAgIHRoZW1lcyA9IG1vYmlzY3JvbGwudGhlbWVzLFxuICAgICAgbmVlZHNGaXhlZCA9IC8oaXBob25lfGlwb2QpL2kudGVzdCh1c2VyQWdlbnQpICYmIG1ham9yVmVyc2lvbiA+PSA3LFxuICAgICAgaXNBbmRyb2lkID0gb3MgPT0gJ2FuZHJvaWQnLFxuICAgICAgaXNJT1MgPSBvcyA9PSAnaW9zJyxcbiAgICAgIGlzSU9TOCA9IGlzSU9TICYmIG1ham9yVmVyc2lvbiA9PSA4LFxuICAgICAgaGFsZkJvcmRlciA9IGlzSU9TICYmIG1ham9yVmVyc2lvbiA+IDcsXG4gICAgICBwcmV2ZGVmID0gZnVuY3Rpb24gcHJldmRlZihldikge1xuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gIH07XG5cbiAgdmFyIEVESVRBQkxFID0gJ2lucHV0LHNlbGVjdCx0ZXh0YXJlYSxidXR0b24nO1xuICB2YXIgQUxMT1dfRU5URVIgPSAndGV4dGFyZWEsYnV0dG9uLGlucHV0W3R5cGU9XCJidXR0b25cIl0saW5wdXRbdHlwZT1cInN1Ym1pdFwiXSc7XG4gIHZhciBGT0NVU0FCTEUgPSBFRElUQUJMRSArICcsW3RhYmluZGV4PVwiMFwiXSc7XG4gIHZhciBGcmFtZSA9IGZ1bmN0aW9uIEZyYW1lKGVsLCBzZXR0aW5ncywgaW5oZXJpdCkge1xuICAgIHZhciAvLyRhcmlhRGl2LFxuICAgICRjdHgsXG4gICAgICAgICRoZWFkZXIsXG4gICAgICAgICRsb2NrLFxuICAgICAgICAkbWFya3VwLFxuICAgICAgICAkb3ZlcmxheSxcbiAgICAgICAgJHBlcnNwLFxuICAgICAgICAkcG9wdXAsXG4gICAgICAgICR3bmQsXG4gICAgICAgICR3cmFwcGVyLFxuICAgICAgICBidXR0b25zLFxuICAgICAgICBidG4sXG4gICAgICAgIGN0eCxcbiAgICAgICAgZG9BbmltLFxuICAgICAgICBoYXNDb250ZXh0LFxuICAgICAgICBpc01vZGFsLFxuICAgICAgICBpc0luc2VydGVkLFxuICAgICAgICBpc1BvaW50ZXIsXG4gICAgICAgIG1hcmt1cCxcbiAgICAgICAgbW9kYWxXaWR0aCxcbiAgICAgICAgbW9kYWxIZWlnaHQsXG4gICAgICAgIG5lZWRzRGltZW5zaW9ucyxcbiAgICAgICAgbmVlZHNMb2NrLFxuICAgICAgICBvYnNlcnZlcixcbiAgICAgICAgb3ZlcmxheSxcbiAgICAgICAgcG9wdXAsXG4gICAgICAgIHBvc0RlYm91bmNlLFxuICAgICAgICBwcmV2SW5zdCxcbiAgICAgICAgcyxcbiAgICAgICAgc2Nyb2xsTG9jayxcbiAgICAgICAgdG91Y2hlZCxcbiAgICAgICAgdHJpZ2dlcixcbiAgICAgICAgd25kV2lkdGgsXG4gICAgICAgIHduZEhlaWdodCxcbiAgICAgICAgdGhhdCA9IHRoaXMsXG4gICAgICAgICRlbG0gPSAkJDEoZWwpLFxuICAgICAgICBlbG1MaXN0ID0gW10sXG4gICAgICAgIGxhc3RGb2N1cyA9IG5ldyBEYXRlKCk7XG5cbiAgICBmdW5jdGlvbiBvbkJ0blN0YXJ0KGV2KSB7XG4gICAgICAvLyBOZWVkIHRoaXMgdG8gcHJldmVudCBvcGVuaW5nIG9mIHNpZGVtZW51cyBvciBzaW1pbGFyXG4gICAgICBpZiAocy5zdG9wUHJvcCkge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGIgPSBjbG9zZXN0KHRoaXMsIGV2LnRhcmdldCwgJy5tYnNjLWZyLWJ0bi1lJyk7XG5cbiAgICAgIGlmICghYikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIENhbid0IGNhbGwgcHJldmVudERlZmF1bHQgaGVyZSwgaXQga2lsbHMgcGFnZSBzY3JvbGxcblxuXG4gICAgICBpZiAoYnRuKSB7XG4gICAgICAgIGJ0bi5yZW1vdmVDbGFzcygnbWJzYy1hY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgYnRuID0gJCQxKGIpOyAvLyBBY3RpdmUgYnV0dG9uXG5cbiAgICAgIGlmICghYnRuLmhhc0NsYXNzKCdtYnNjLWRpc2FibGVkJykgJiYgIWJ0bi5oYXNDbGFzcygnbWJzYy1mci1idG4tbmhsJykpIHtcbiAgICAgICAgYnRuLmFkZENsYXNzKCdtYnNjLWFjdGl2ZScpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXYudHlwZSA9PT0gJ21vdXNlZG93bicpIHtcbiAgICAgICAgJCQxKGRvY3VtZW50KS5vbignbW91c2V1cCcsIG9uQnRuRW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkJ0bkVuZChldikge1xuICAgICAgaWYgKGJ0bikge1xuICAgICAgICBidG4ucmVtb3ZlQ2xhc3MoJ21ic2MtYWN0aXZlJyk7XG4gICAgICAgIGJ0biA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChldi50eXBlID09PSAnbW91c2V1cCcpIHtcbiAgICAgICAgJCQxKGRvY3VtZW50KS5vZmYoJ21vdXNldXAnLCBvbkJ0bkVuZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25TY3JvbGwoZXYpIHtcbiAgICAgIGlmIChzY3JvbGxMb2NrICYmIG1hcmt1cC5jb250YWlucyhldi50YXJnZXQpKSB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25XbmRLZXlEb3duKGV2KSB7XG4gICAgICBpZiAobW9iaXNjcm9sbC5hY3RpdmVJbnN0YW5jZSA9PSB0aGF0KSB7XG4gICAgICAgIGlmIChldi5rZXlDb2RlID09IDEzICYmICghJCQxKGV2LnRhcmdldCkuaXMoQUxMT1dfRU5URVIpIHx8IGV2LnNoaWZ0S2V5KSkge1xuICAgICAgICAgIHRoYXQuc2VsZWN0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSAyNykge1xuICAgICAgICAgIHRoYXQuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblNob3cocHJldkZvY3VzKSB7XG4gICAgICBpZiAoIXByZXZGb2N1cyAmJiAhaXNBbmRyb2lkICYmIHRoYXQuX2FjdGl2ZUVsbSkge1xuICAgICAgICAvL292ZXJsYXkuZm9jdXMoKTtcbiAgICAgICAgbGFzdEZvY3VzID0gbmV3IERhdGUoKTtcblxuICAgICAgICB0aGF0Ll9hY3RpdmVFbG0uZm9jdXMoKTtcbiAgICAgIH0gLy90aGF0LmFyaWFNZXNzYWdlKHMuYXJpYU1lc3NhZ2UpO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25IaWRlKHByZXZBbmltKSB7XG4gICAgICB2YXIgJGFjdGl2ZUVsID0gJGFjdGl2ZUVsbSxcbiAgICAgICAgICBmb2N1cyA9IHMuZm9jdXNPbkNsb3NlO1xuXG4gICAgICB0aGF0Ll9tYXJrdXBSZW1vdmUoKTtcblxuICAgICAgJG1hcmt1cC5yZW1vdmUoKTtcblxuICAgICAgaWYgKGlzTW9kYWwpIHtcbiAgICAgICAgY3R4Lm1ic2NNb2RhbHMtLTtcblxuICAgICAgICBpZiAocy5zY3JvbGxMb2NrKSB7XG4gICAgICAgICAgY3R4Lm1ic2NMb2NrLS07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWN0eC5tYnNjTG9jaykge1xuICAgICAgICAgICRsb2NrLnJlbW92ZUNsYXNzKCdtYnNjLWZyLWxvY2snKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZWVkc0xvY2spIHtcbiAgICAgICAgICBjdHgubWJzY0lPU0xvY2stLTtcblxuICAgICAgICAgIGlmICghY3R4Lm1ic2NJT1NMb2NrKSB7XG4gICAgICAgICAgICAkbG9jay5yZW1vdmVDbGFzcygnbWJzYy1mci1sb2NrLWlvcycpO1xuICAgICAgICAgICAgJGN0eC5jc3Moe1xuICAgICAgICAgICAgICB0b3A6ICcnLFxuICAgICAgICAgICAgICBsZWZ0OiAnJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkd25kLnNjcm9sbExlZnQoY3R4Lm1ic2NTY3JvbGxMZWZ0KTtcbiAgICAgICAgICAgICR3bmQuc2Nyb2xsVG9wKGN0eC5tYnNjU2Nyb2xsVG9wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gVGhlIGZvbGx3aW5nIHNob3VsZCBiZSBkb25lIG9ubHkgaWYgbm8gb3RoZXJcbiAgICAgICAgLy8gaW5zdGFuY2Ugd2FzIG9wZW5lZCBkdXJpbmcgdGhlIGhpZGUgYW5pbWF0aW9uXG5cblxuICAgICAgICBpZiAoIWN0eC5tYnNjTW9kYWxzKSB7XG4gICAgICAgICAgJGxvY2sucmVtb3ZlQ2xhc3MoJ21ic2MtZnItbG9jay1jdHgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY3R4Lm1ic2NNb2RhbHMgfHwgcHJldkluc3QpIHtcbiAgICAgICAgICAvLyBQdXQgZm9jdXMgYmFjayB0byB0aGUgbGFzdCBhY3RpdmUgZWxlbWVudFxuICAgICAgICAgIGlmICghcHJldkFuaW0pIHtcbiAgICAgICAgICAgIGlmICghJGFjdGl2ZUVsKSB7XG4gICAgICAgICAgICAgICRhY3RpdmVFbCA9ICRlbG07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAoZm9jdXMgPT09IHVuZGVmaW5lZCB8fCBmb2N1cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHByZXZlbnRTaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkYWN0aXZlRWxbMF0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChmb2N1cykge1xuICAgICAgICAgICAgICAgICQkMShmb2N1cylbMF0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcHJldkluc3QgPSB1bmRlZmluZWQ7XG4gICAgICBpc0luc2VydGVkID0gZmFsc2U7XG4gICAgICB0cmlnZ2VyKCdvbkhpZGUnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblBvc2l0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHBvc0RlYm91bmNlKTtcbiAgICAgIHBvc0RlYm91bmNlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGF0LnBvc2l0aW9uKHRydWUpKSB7XG4gICAgICAgICAgLy8gVHJpZ2dlciByZWZsb3csIG5lZWRlZCBvbiBpT1Mgc2FmYXJpLCB3aGVuIG9yaWVudGF0aW9uIGlzIGNoYW5nZWRcbiAgICAgICAgICBwb3B1cC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgcG9wdXAub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgIHBvcHVwLnN0eWxlLnZpc2liaWxpdHkgPSAnJztcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkZvY3VzKGV2KSB7XG4gICAgICBpZiAobW9iaXNjcm9sbC5hY3RpdmVJbnN0YW5jZSA9PSB0aGF0ICYmIGV2LnRhcmdldC5ub2RlVHlwZSAmJiAhb3ZlcmxheS5jb250YWlucyhldi50YXJnZXQpICYmIG5ldyBEYXRlKCkgLSBsYXN0Rm9jdXMgPiAxMDApIHtcbiAgICAgICAgbGFzdEZvY3VzID0gbmV3IERhdGUoKTtcblxuICAgICAgICB0aGF0Ll9hY3RpdmVFbG0uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnNlcnRNYXJrdXAocHJldkFuaW0sIHByZXZGb2N1cykge1xuICAgICAgZnVuY3Rpb24gb25BbmltRW5kKCkge1xuICAgICAgICAkbWFya3VwLm9mZihhbmltRW5kLCBvbkFuaW1FbmQpLnJlbW92ZUNsYXNzKCdtYnNjLWFuaW0taW4gbWJzYy1hbmltLXRyYW5zIG1ic2MtYW5pbS10cmFucy0nICsgZG9BbmltKS5maW5kKCcubWJzYy1mci1wb3B1cCcpLnJlbW92ZUNsYXNzKCdtYnNjLWFuaW0tJyArIGRvQW5pbSk7XG4gICAgICAgIG9uU2hvdyhwcmV2Rm9jdXMpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbk92ZXJsYXlTdGFydChldikge1xuICAgICAgICBpZiAoIXRhcmdldCAmJiBldi50YXJnZXQgPT0gb3ZlcmxheSkge1xuICAgICAgICAgIHRhcmdldCA9IHRydWU7XG4gICAgICAgICAgbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICBzdGFydFggPSBnZXRDb29yZChldiwgJ1gnKTtcbiAgICAgICAgICBzdGFydFkgPSBnZXRDb29yZChldiwgJ1knKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbk92ZXJsYXlNb3ZlKGV2KSB7XG4gICAgICAgIGlmICh0YXJnZXQgJiYgIW1vdmVkICYmIChNYXRoLmFicyhnZXRDb29yZChldiwgJ1gnKSAtIHN0YXJ0WCkgPiA5IHx8IE1hdGguYWJzKGdldENvb3JkKGV2LCAnWScpIC0gc3RhcnRZKSA+IDkpKSB7XG4gICAgICAgICAgbW92ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IC8vIE1pZ2h0IGJlIG5vdCB2aXNpYmxlIGlmIGltbWVkaWF0ZWx5IGhpZGRlblxuXG5cbiAgICAgIGlmICghdGhhdC5faXNWaXNpYmxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gU2hvd1xuXG5cbiAgICAgIGlmIChpc01vZGFsKSB7XG4gICAgICAgICRtYXJrdXAuYXBwZW5kVG8oJGN0eCk7XG4gICAgICB9IGVsc2UgaWYgKCRlbG0uaXMoJ2RpdicpICYmICF0aGF0Ll9oYXNDb250ZW50KSB7XG4gICAgICAgIC8vIEluc2VydCBpbnNpZGUgdGhlIGVsZW1lbnQgb24gd2hpY2ggd2FzIGluaXRpYWxpemVkXG4gICAgICAgICRlbG0uZW1wdHkoKS5hcHBlbmQoJG1hcmt1cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJbnNlcnQgYWZ0ZXIgdGhlIGVsZW1lbnRcbiAgICAgICAgaWYgKCRlbG0uaGFzQ2xhc3MoJ21ic2MtY29udHJvbCcpKSB7XG4gICAgICAgICAgdmFyICR3cmFwID0gJGVsbS5jbG9zZXN0KCcubWJzYy1jb250cm9sLXcnKTtcbiAgICAgICAgICAkbWFya3VwLmluc2VydEFmdGVyKCR3cmFwKTtcblxuICAgICAgICAgIGlmICgkd3JhcC5oYXNDbGFzcygnbWJzYy1zZWxlY3QnKSkge1xuICAgICAgICAgICAgJHdyYXAuYWRkQ2xhc3MoJ21ic2Mtc2VsZWN0LWlubGluZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbWFya3VwLmluc2VydEFmdGVyKCRlbG0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlzSW5zZXJ0ZWQgPSB0cnVlO1xuXG4gICAgICB0aGF0Ll9tYXJrdXBJbnNlcnRlZCgkbWFya3VwKTtcblxuICAgICAgdHJpZ2dlcignb25NYXJrdXBJbnNlcnRlZCcsIHtcbiAgICAgICAgdGFyZ2V0OiBtYXJrdXBcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaXNNb2RhbCAmJiBzLmNsb3NlT25PdmVybGF5VGFwKSB7XG4gICAgICAgIHZhciBtb3ZlZCwgdGFyZ2V0LCBzdGFydFgsIHN0YXJ0WTtcbiAgICAgICAgbGlzdGVuKG92ZXJsYXksICd0b3VjaHN0YXJ0Jywgb25PdmVybGF5U3RhcnQsIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBsaXN0ZW4ob3ZlcmxheSwgJ3RvdWNobW92ZScsIG9uT3ZlcmxheU1vdmUsIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAkb3ZlcmxheS5vbignbW91c2Vkb3duJywgb25PdmVybGF5U3RhcnQpLm9uKCdtb3VzZW1vdmUnLCBvbk92ZXJsYXlNb3ZlKS5vbigndG91Y2hjYW5jZWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgIH0pLm9uKCd0b3VjaGVuZCBjbGljaycsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgIGlmICh0YXJnZXQgJiYgIW1vdmVkKSB7XG4gICAgICAgICAgICB0aGF0LmNhbmNlbCgpO1xuXG4gICAgICAgICAgICBpZiAoZXYudHlwZSA9PSAndG91Y2hlbmQnKSB7XG4gICAgICAgICAgICAgIHByZXZlbnRDbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRhcmdldCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgJG1hcmt1cC5vbignbW91c2Vkb3duJywgJy5tYnNjLWJ0bi1lLC5tYnNjLWZyLWJ0bi1lJywgcHJldmRlZikub24oJ2tleWRvd24nLCAnLm1ic2MtZnItYnRuLWUnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPT0gMzIpIHtcbiAgICAgICAgICAvLyBTcGFjZVxuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgdGhpcy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICB9KS5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAvLyBUcmFwIGZvY3VzIGluc2lkZSBtb2RhbFxuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSAzMiAmJiAhJCQxKGV2LnRhcmdldCkuaXMoRURJVEFCTEUpKSB7XG4gICAgICAgICAgLy8gUHJldmVudCBwYWdlIHNjcm9sbCBvbiBzcGFjZSBwcmVzc1xuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA5ICYmIGlzTW9kYWwgJiYgcy5mb2N1c1RyYXApIHtcbiAgICAgICAgICAvLyBUYWJcbiAgICAgICAgICB2YXIgJGZvY3VzYWJsZSA9ICRtYXJrdXAuZmluZChGT0NVU0FCTEUpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXRXaWR0aCA+IDAgfHwgdGhpcy5vZmZzZXRIZWlnaHQgPiAwO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBpbmRleCA9ICRmb2N1c2FibGUuaW5kZXgoJCQxKCc6Zm9jdXMnLCAkbWFya3VwKSksXG4gICAgICAgICAgICAgIGkgPSAkZm9jdXNhYmxlLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICAgIHRhcmdldCA9IDA7XG5cbiAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgdGFyZ2V0ID0gLTE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGluZGV4ID09PSBpKSB7XG4gICAgICAgICAgICAkZm9jdXNhYmxlLmVxKHRhcmdldClbMF0uZm9jdXMoKTtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5vbigndG91Y2hlbmQnLCAnLm1ic2MtZnItYnRuLWUnLCBvbkJ0bkVuZCk7XG4gICAgICBsaXN0ZW4obWFya3VwLCAndG91Y2hzdGFydCcsIG9uQnRuU3RhcnQsIHtcbiAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBsaXN0ZW4obWFya3VwLCAnbW91c2Vkb3duJywgb25CdG5TdGFydCk7IC8vIE5lZWQgZXZlbnQgY2FwdHVyZSBmb3IgdGhpc1xuXG4gICAgICBsaXN0ZW4obWFya3VwLCAndG91Y2hzdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0b3VjaGVkKSB7XG4gICAgICAgICAgdG91Y2hlZCA9IHRydWU7XG4gICAgICAgICAgJGN0eC5maW5kKCcubWJzYy1uby10b3VjaCcpLnJlbW92ZUNsYXNzKCdtYnNjLW5vLXRvdWNoJyk7XG4gICAgICAgIH1cbiAgICAgIH0sIHtcbiAgICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgICAgfSk7IC8vIEluaXQgYnV0dG9uc1xuXG4gICAgICAkJDEuZWFjaChidXR0b25zLCBmdW5jdGlvbiAoaSwgYikge1xuICAgICAgICB0aGF0LnRhcCgkJDEoJy5tYnNjLWZyLWJ0bicgKyBpLCAkbWFya3VwKSwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgYiA9IGlzU3RyaW5nKGIpID8gdGhhdC5idXR0b25zW2JdIDogYjtcbiAgICAgICAgICAoaXNTdHJpbmcoYi5oYW5kbGVyKSA/IHRoYXQuaGFuZGxlcnNbYi5oYW5kbGVyXSA6IGIuaGFuZGxlcikuY2FsbCh0aGlzLCBldiwgdGhhdCk7XG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoYXQuX2F0dGFjaEV2ZW50cygkbWFya3VwKTsgLy8gU2V0IHBvc2l0aW9uXG5cblxuICAgICAgaWYgKHRoYXQucG9zaXRpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNNb2RhbCB8fCB0aGF0Ll9jaGVja1NpemUpIHtcbiAgICAgICAgb2JzZXJ2ZXIgPSByZXNpemVPYnNlcnZlcihtYXJrdXAsIG9uUG9zaXRpb24sIHMuem9uZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc01vZGFsKSB7XG4gICAgICAgICRtYXJrdXAucmVtb3ZlQ2xhc3MoJ21ic2MtZnItcG9zJyk7XG5cbiAgICAgICAgaWYgKGRvQW5pbSAmJiAhcHJldkFuaW0pIHtcbiAgICAgICAgICAkbWFya3VwLmFkZENsYXNzKCdtYnNjLWFuaW0taW4gbWJzYy1hbmltLXRyYW5zIG1ic2MtYW5pbS10cmFucy0nICsgZG9BbmltKS5vbihhbmltRW5kLCBvbkFuaW1FbmQpLmZpbmQoJy5tYnNjLWZyLXBvcHVwJykuYWRkQ2xhc3MoJ21ic2MtYW5pbS0nICsgZG9BbmltKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvblNob3cocHJldkZvY3VzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0cmlnZ2VyKCdvblNob3cnLCB7XG4gICAgICAgIHRhcmdldDogbWFya3VwLFxuICAgICAgICB2YWx1ZVRleHQ6IHRoYXQuX3RlbXBWYWx1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvdyhiZWZvcmVTaG93LCAkZWxtKSB7XG4gICAgICBpZiAodGhhdC5faXNWaXNpYmxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGJlZm9yZVNob3cpIHtcbiAgICAgICAgYmVmb3JlU2hvdygpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhhdC5zaG93KCkgIT09IGZhbHNlKSB7XG4gICAgICAgICRhY3RpdmVFbG0gPSAkZWxtO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldCgpIHtcbiAgICAgIHRoYXQuX2ZpbGxWYWx1ZSgpO1xuXG4gICAgICB0cmlnZ2VyKCdvblNldCcsIHtcbiAgICAgICAgdmFsdWVUZXh0OiB0aGF0Ll92YWx1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgdHJpZ2dlcignb25DYW5jZWwnLCB7XG4gICAgICAgIHZhbHVlVGV4dDogdGhhdC5fdmFsdWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgdGhhdC5zZXRWYWwobnVsbCwgdHJ1ZSk7XG4gICAgfSAvLyBDYWxsIHRoZSBwYXJlbnQgY29uc3RydWN0b3JcblxuXG4gICAgQmFzZS5jYWxsKHRoaXMsIGVsLCBzZXR0aW5ncywgdHJ1ZSk7XG4gICAgLyoqXG4gICAgICogUG9zaXRpb25zIHRoZSBzY3JvbGxlciBvbiB0aGUgc2NyZWVuLlxuICAgICAqL1xuXG4gICAgdGhhdC5wb3NpdGlvbiA9IGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgdmFyIGFuY2hvcixcbiAgICAgICAgICBhbmNob3JXaWR0aCxcbiAgICAgICAgICBhbmNob3JIZWlnaHQsXG4gICAgICAgICAgYW5jaG9yUG9zLFxuICAgICAgICAgIGFuY2hvclRvcCxcbiAgICAgICAgICBhbmNob3JMZWZ0LFxuICAgICAgICAgIGFycm93LFxuICAgICAgICAgIGFycm93V2lkdGgsXG4gICAgICAgICAgYXJyb3dIZWlnaHQsXG4gICAgICAgICAgZG9jSGVpZ2h0LFxuICAgICAgICAgIGRvY1dpZHRoLFxuICAgICAgICAgIGlzV3JhcHBlZCxcbiAgICAgICAgICBuZXdIZWlnaHQsXG4gICAgICAgICAgbmV3V2lkdGgsXG4gICAgICAgICAgb2xkSGVpZ2h0LFxuICAgICAgICAgIG9sZFdpZHRoLFxuICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgIHRvcCxcbiAgICAgICAgICBsZWZ0LFxuICAgICAgICAgIGNzcyA9IHt9LFxuICAgICAgICAgIHNjcm9sbExlZnQgPSAwLFxuICAgICAgICAgIHNjcm9sbFRvcCA9IDAsXG4gICAgICAgICAgbWluV2lkdGggPSAwLFxuICAgICAgICAgIHRvdGFsV2lkdGggPSAwO1xuXG4gICAgICBpZiAoIWlzSW5zZXJ0ZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBvbGRXaWR0aCA9IHduZFdpZHRoO1xuICAgICAgb2xkSGVpZ2h0ID0gd25kSGVpZ2h0O1xuICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5taW4obWFya3VwLm9mZnNldEhlaWdodCwgaGFzQ29udGV4dCA/IEluZmluaXR5IDogd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgIG5ld1dpZHRoID0gTWF0aC5taW4obWFya3VwLm9mZnNldFdpZHRoLCBoYXNDb250ZXh0ID8gSW5maW5pdHkgOiB3aW5kb3cuaW5uZXJXaWR0aCk7XG5cbiAgICAgIGlmICghbmV3V2lkdGggfHwgIW5ld0hlaWdodCB8fCB3bmRXaWR0aCA9PT0gbmV3V2lkdGggJiYgd25kSGVpZ2h0ID09PSBuZXdIZWlnaHQgJiYgY2hlY2spIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhhdC5fY2hlY2tSZXNwKG5ld1dpZHRoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHduZFdpZHRoID0gbmV3V2lkdGg7XG4gICAgICB3bmRIZWlnaHQgPSBuZXdIZWlnaHQ7XG5cbiAgICAgIGlmICh0aGF0Ll9pc0Z1bGxTY3JlZW4gfHwgL3RvcHxib3R0b20vLnRlc3Qocy5kaXNwbGF5KSkge1xuICAgICAgICAvLyBTZXQgd2lkdGgsIGlmIGRvY3VtZW50IGlzIGxhcmdlciB0aGFuIHZpZXdwb3J0LCBuZWVkcyB0byBiZSBzZXQgYmVmb3JlIG9uUG9zaXRpb24gKGZvciBjYWxlbmRhcilcbiAgICAgICAgJHBvcHVwLndpZHRoKG5ld1dpZHRoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNNb2RhbCkge1xuICAgICAgICAvLyBSZXNldCB3aWR0aFxuICAgICAgICAkd3JhcHBlci53aWR0aCgnJyk7XG4gICAgICB9XG5cbiAgICAgIHRoYXQuX3Bvc2l0aW9uKCRtYXJrdXApOyAvLyBDYWxsIHBvc2l0aW9uIGZvciBuZXN0ZWQgbW9iaXNjcm9sbCBjb21wb25lbnRzXG4gICAgICAvLyAkKCcubWJzYy1jb21wJywgJG1hcmt1cCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyAgICAgdmFyIGluc3QgPSBpbnN0YW5jZXNbdGhpcy5pZF07XG4gICAgICAvLyAgICAgaWYgKGluc3QgJiYgaW5zdCAhPT0gdGhhdCAmJiBpbnN0LnBvc2l0aW9uKSB7XG4gICAgICAvLyAgICAgICAgIGluc3QucG9zaXRpb24oKTtcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyB9KTtcblxuXG4gICAgICBpZiAoIXRoYXQuX2lzRnVsbFNjcmVlbiAmJiAvY2VudGVyfGJ1YmJsZS8udGVzdChzLmRpc3BsYXkpKSB7XG4gICAgICAgICQkMSgnLm1ic2Mtdy1wJywgJG1hcmt1cCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gTmVlZCBmcmFjdGlvbmFsIHZhbHVlcyBoZXJlLCBzbyBvZmZzZXRXaWR0aCBpcyBub3Qgb2tcbiAgICAgICAgICB3aWR0aCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgdG90YWxXaWR0aCArPSB3aWR0aDtcbiAgICAgICAgICBtaW5XaWR0aCA9IHdpZHRoID4gbWluV2lkdGggPyB3aWR0aCA6IG1pbldpZHRoO1xuICAgICAgICB9KTtcbiAgICAgICAgaXNXcmFwcGVkID0gdG90YWxXaWR0aCA+IG5ld1dpZHRoIC0gMTYgfHwgcy50YWJzID09PSB0cnVlO1xuICAgICAgICAkd3JhcHBlci5jc3Moe1xuICAgICAgICAgICd3aWR0aCc6IHRoYXQuX2lzTGlxdWlkID8gTWF0aC5taW4ocy5tYXhQb3B1cFdpZHRoLCBuZXdXaWR0aCAtIDE2KSA6IE1hdGguY2VpbChpc1dyYXBwZWQgPyBtaW5XaWR0aCA6IHRvdGFsV2lkdGgpLFxuICAgICAgICAgICd3aGl0ZS1zcGFjZSc6IGlzV3JhcHBlZCA/ICcnIDogJ25vd3JhcCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0cmlnZ2VyKCdvblBvc2l0aW9uJywge1xuICAgICAgICB0YXJnZXQ6IG1hcmt1cCxcbiAgICAgICAgcG9wdXA6IHBvcHVwLFxuICAgICAgICBoYXNUYWJzOiBpc1dyYXBwZWQsXG4gICAgICAgIG9sZFdpZHRoOiBvbGRXaWR0aCxcbiAgICAgICAgb2xkSGVpZ2h0OiBvbGRIZWlnaHQsXG4gICAgICAgIHdpbmRvd1dpZHRoOiBuZXdXaWR0aCxcbiAgICAgICAgd2luZG93SGVpZ2h0OiBuZXdIZWlnaHRcbiAgICAgIH0pID09PSBmYWxzZSB8fCAhaXNNb2RhbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChuZWVkc0RpbWVuc2lvbnMpIHtcbiAgICAgICAgc2Nyb2xsTGVmdCA9ICR3bmQuc2Nyb2xsTGVmdCgpO1xuICAgICAgICBzY3JvbGxUb3AgPSAkd25kLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgIGlmICh3bmRXaWR0aCkge1xuICAgICAgICAgICRwZXJzcC5jc3Moe1xuICAgICAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICAgICAgaGVpZ2h0OiAnJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1vZGFsV2lkdGggPSBwb3B1cC5vZmZzZXRXaWR0aDtcbiAgICAgIG1vZGFsSGVpZ2h0ID0gcG9wdXAub2Zmc2V0SGVpZ2h0O1xuICAgICAgc2Nyb2xsTG9jayA9IG1vZGFsSGVpZ2h0IDw9IG5ld0hlaWdodCAmJiBtb2RhbFdpZHRoIDw9IG5ld1dpZHRoO1xuXG4gICAgICBpZiAocy5kaXNwbGF5ID09ICdjZW50ZXInKSB7XG4gICAgICAgIGxlZnQgPSBNYXRoLm1heCgwLCBzY3JvbGxMZWZ0ICsgKG5ld1dpZHRoIC0gbW9kYWxXaWR0aCkgLyAyKTtcbiAgICAgICAgdG9wID0gTWF0aC5tYXgoMCwgc2Nyb2xsVG9wICsgKG5ld0hlaWdodCAtIG1vZGFsSGVpZ2h0KSAvIDIpO1xuICAgICAgfSBlbHNlIGlmIChzLmRpc3BsYXkgPT0gJ2J1YmJsZScpIHtcbiAgICAgICAgYW5jaG9yID0gcy5hbmNob3IgPT09IHVuZGVmaW5lZCA/ICRlbG0gOiAkJDEocy5hbmNob3IpO1xuICAgICAgICBhcnJvdyA9ICQkMSgnLm1ic2MtZnItYXJyLWknLCAkbWFya3VwKVswXTtcbiAgICAgICAgYW5jaG9yUG9zID0gYW5jaG9yLm9mZnNldCgpO1xuICAgICAgICBhbmNob3JUb3AgPSBhbmNob3JQb3MudG9wICsgKGhhc0NvbnRleHQgPyBzY3JvbGxUb3AgLSAkY3R4Lm9mZnNldCgpLnRvcCA6IDApO1xuICAgICAgICBhbmNob3JMZWZ0ID0gYW5jaG9yUG9zLmxlZnQgKyAoaGFzQ29udGV4dCA/IHNjcm9sbExlZnQgLSAkY3R4Lm9mZnNldCgpLmxlZnQgOiAwKTtcbiAgICAgICAgYW5jaG9yV2lkdGggPSBhbmNob3JbMF0ub2Zmc2V0V2lkdGg7XG4gICAgICAgIGFuY2hvckhlaWdodCA9IGFuY2hvclswXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGFycm93V2lkdGggPSBhcnJvdy5vZmZzZXRXaWR0aDtcbiAgICAgICAgYXJyb3dIZWlnaHQgPSBhcnJvdy5vZmZzZXRIZWlnaHQ7IC8vIEhvcml6b250YWwgcG9zaXRpb25pbmdcblxuICAgICAgICBsZWZ0ID0gY29uc3RyYWluKGFuY2hvckxlZnQgLSAobW9kYWxXaWR0aCAtIGFuY2hvcldpZHRoKSAvIDIsIHNjcm9sbExlZnQgKyAzLCBzY3JvbGxMZWZ0ICsgbmV3V2lkdGggLSBtb2RhbFdpZHRoIC0gMyk7IC8vIFZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gICAgICAgIC8vIEJlbG93IHRoZSBpbnB1dFxuXG4gICAgICAgIHRvcCA9IGFuY2hvclRvcCArIGFuY2hvckhlaWdodCArIGFycm93SGVpZ2h0IC8gMjtcblxuICAgICAgICBpZiAodG9wICsgbW9kYWxIZWlnaHQgKyA4ID4gc2Nyb2xsVG9wICsgbmV3SGVpZ2h0ICYmIGFuY2hvclRvcCAtIG1vZGFsSGVpZ2h0IC0gYXJyb3dIZWlnaHQgLyAyID4gc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgJHBvcHVwLnJlbW92ZUNsYXNzKCdtYnNjLWZyLWJ1YmJsZS1ib3R0b20nKS5hZGRDbGFzcygnbWJzYy1mci1idWJibGUtdG9wJyk7IC8vIEFib3ZlIHRoZSBpbnB1dFxuXG4gICAgICAgICAgdG9wID0gYW5jaG9yVG9wIC0gbW9kYWxIZWlnaHQgLSBhcnJvd0hlaWdodCAvIDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHBvcHVwLnJlbW92ZUNsYXNzKCdtYnNjLWZyLWJ1YmJsZS10b3AnKS5hZGRDbGFzcygnbWJzYy1mci1idWJibGUtYm90dG9tJyk7XG4gICAgICAgIH0gLy8gU2V0IGFycm93IHBvc2l0aW9uXG5cblxuICAgICAgICAkJDEoJy5tYnNjLWZyLWFycicsICRtYXJrdXApLmNzcyh7XG4gICAgICAgICAgbGVmdDogY29uc3RyYWluKGFuY2hvckxlZnQgKyBhbmNob3JXaWR0aCAvIDIgLSAobGVmdCArIChtb2RhbFdpZHRoIC0gYXJyb3dXaWR0aCkgLyAyKSwgMCwgYXJyb3dXaWR0aClcbiAgICAgICAgfSk7IC8vIExvY2sgc2Nyb2xsIG9ubHkgaWYgcG9wdXAgaXMgZW50aXJlbHkgaW4gdGhlIHZpZXdwb3J0XG5cbiAgICAgICAgc2Nyb2xsTG9jayA9IHRvcCA+IHNjcm9sbFRvcCAmJiBsZWZ0ID4gc2Nyb2xsTGVmdCAmJiB0b3AgKyBtb2RhbEhlaWdodCA8PSBzY3JvbGxUb3AgKyBuZXdIZWlnaHQgJiYgbGVmdCArIG1vZGFsV2lkdGggPD0gc2Nyb2xsTGVmdCArIG5ld1dpZHRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGVmdCA9IHNjcm9sbExlZnQ7XG4gICAgICAgIHRvcCA9IHMuZGlzcGxheSA9PSAndG9wJyA/IHNjcm9sbFRvcCA6IE1hdGgubWF4KDAsIHNjcm9sbFRvcCArIG5ld0hlaWdodCAtIG1vZGFsSGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5lZWRzRGltZW5zaW9ucykge1xuICAgICAgICAvLyBJZiB0b3AgKyBtb2RhbCBoZWlnaHQgPiBkb2MgaGVpZ2h0LCBpbmNyZWFzZSBkb2MgaGVpZ2h0XG4gICAgICAgIGRvY0hlaWdodCA9IE1hdGgubWF4KHRvcCArIG1vZGFsSGVpZ2h0LCBoYXNDb250ZXh0ID8gY3R4LnNjcm9sbEhlaWdodCA6ICQkMShkb2N1bWVudCkuaGVpZ2h0KCkpO1xuICAgICAgICBkb2NXaWR0aCA9IE1hdGgubWF4KGxlZnQgKyBtb2RhbFdpZHRoLCBoYXNDb250ZXh0ID8gY3R4LnNjcm9sbFdpZHRoIDogJCQxKGRvY3VtZW50KS53aWR0aCgpKTtcbiAgICAgICAgJHBlcnNwLmNzcyh7XG4gICAgICAgICAgd2lkdGg6IGRvY1dpZHRoLFxuICAgICAgICAgIGhlaWdodDogZG9jSGVpZ2h0XG4gICAgICAgIH0pOyAvLyBDaGVjayBpZiBzY3JvbGwgbmVlZGVkXG5cbiAgICAgICAgaWYgKHMuc2Nyb2xsICYmIHMuZGlzcGxheSA9PSAnYnViYmxlJyAmJiAodG9wICsgbW9kYWxIZWlnaHQgKyA4ID4gc2Nyb2xsVG9wICsgbmV3SGVpZ2h0IHx8IGFuY2hvclRvcCA+IHNjcm9sbFRvcCArIG5ld0hlaWdodCB8fCBhbmNob3JUb3AgKyBhbmNob3JIZWlnaHQgPCBzY3JvbGxUb3ApKSB7XG4gICAgICAgICAgJHduZC5zY3JvbGxUb3AoTWF0aC5taW4oYW5jaG9yVG9wLCB0b3AgKyBtb2RhbEhlaWdodCAtIG5ld0hlaWdodCArIDgsIGRvY0hlaWdodCAtIG5ld0hlaWdodCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNzcy50b3AgPSBNYXRoLmZsb29yKHRvcCk7XG4gICAgICBjc3MubGVmdCA9IE1hdGguZmxvb3IobGVmdCk7XG4gICAgICAkcG9wdXAuY3NzKGNzcyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNob3cgbW9iaXNjcm9sbCBvbiBmb2N1cyBhbmQgY2xpY2sgZXZlbnQgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbG0gLSBFdmVudHMgd2lsbCBiZSBhdHRhY2hlZCB0byB0aGlzIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2JlZm9yZVNob3c9dW5kZWZpbmVkXSAtIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgYmVmb3JlIHNob3dpbmcgbW9iaXNjcm9sbC5cbiAgICAgKi9cblxuXG4gICAgdGhhdC5hdHRhY2hTaG93ID0gZnVuY3Rpb24gKGVsbSwgYmVmb3JlU2hvdykge1xuICAgICAgdmFyICRsYWJlbCxcbiAgICAgICAgICAkZWxtID0gJCQxKGVsbSkub2ZmKCcubWJzYycpLFxuICAgICAgICAgIHJlYWRPbmx5ID0gJGVsbS5wcm9wKCdyZWFkb25seScpO1xuICAgICAgdGFwT2ZmKCRlbG0pO1xuXG4gICAgICBpZiAocy5kaXNwbGF5ICE9PSAnaW5saW5lJykge1xuICAgICAgICBpZiAoKHMuc2hvd09uRm9jdXMgfHwgcy5zaG93T25UYXApICYmICRlbG0uaXMoJ2lucHV0LHNlbGVjdCcpKSB7XG4gICAgICAgICAgJGVsbS5wcm9wKCdyZWFkb25seScsIHRydWUpLm9uKCdtb3VzZWRvd24ubWJzYycsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgLy8gUHJldmVudCBpbnB1dCB0byBnZXQgZm9jdXMgb24gdGFwICh2aXJ0dWFsIGtleWJvYXJkIHBvcHMgdXAgb24gc29tZSBkZXZpY2VzKVxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9KS5vbignZm9jdXMubWJzYycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGF0Ll9pc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgaW5wdXQgZm9jdXMgaWYgbW9iaXNjcm9sbCBpcyBiZWluZyBvcGVuZWRcbiAgICAgICAgICAgICAgdGhpcy5ibHVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJGxhYmVsID0gJCQxKCdsYWJlbFtmb3I9XCInICsgJGVsbS5hdHRyKCdpZCcpICsgJ1wiXScpO1xuXG4gICAgICAgICAgaWYgKCEkbGFiZWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAkbGFiZWwgPSAkZWxtLmNsb3Nlc3QoJ2xhYmVsJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEkZWxtLmlzKCdzZWxlY3QnKSkge1xuICAgICAgICAgIGlmIChzLnNob3dPbkZvY3VzKSB7XG4gICAgICAgICAgICAkZWxtLm9uKCdmb2N1cy5tYnNjJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAoIXByZXZlbnRTaG93KSB7XG4gICAgICAgICAgICAgICAgc2hvdyhiZWZvcmVTaG93LCAkZWxtKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50U2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocy5zaG93T25UYXApIHtcbiAgICAgICAgICAgICRlbG0ub24oJ2tleWRvd24ubWJzYycsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSAzMiB8fCBldi5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICAgICAgLy8gU3BhY2Ugb3IgRW50ZXJcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHNob3coYmVmb3JlU2hvdywgJGVsbSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC50YXAoJGVsbSwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgIGlmIChldi5pc01ic2NUYXApIHtcbiAgICAgICAgICAgICAgICB0b3VjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNob3coYmVmb3JlU2hvdywgJGVsbSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCRsYWJlbCAmJiAkbGFiZWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRhcE9mZigkbGFiZWwpO1xuICAgICAgICAgICAgICB0aGF0LnRhcCgkbGFiZWwsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXYudGFyZ2V0ICE9PSAkZWxtWzBdKSB7XG4gICAgICAgICAgICAgICAgICBzaG93KGJlZm9yZVNob3csICRlbG0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZWxtTGlzdC5wdXNoKHtcbiAgICAgICAgICByZWFkT25seTogcmVhZE9ubHksXG4gICAgICAgICAgZWw6ICRlbG0sXG4gICAgICAgICAgbGJsOiAkbGFiZWxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYnV0dG9uIGhhbmRsZXIuXG4gICAgICovXG5cblxuICAgIHRoYXQuc2VsZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzTW9kYWwpIHtcbiAgICAgICAgdGhhdC5oaWRlKGZhbHNlLCAnc2V0JywgZmFsc2UsIHNldCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbmNlbCBhbmQgaGlkZSB0aGUgc2Nyb2xsZXIgaW5zdGFuY2UuXG4gICAgICovXG5cblxuICAgIHRoYXQuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzTW9kYWwpIHtcbiAgICAgICAgdGhhdC5oaWRlKGZhbHNlLCAnY2FuY2VsJywgZmFsc2UsIGNhbmNlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFyIGJ1dHRvbiBoYW5kbGVyLlxuICAgICAqL1xuXG5cbiAgICB0aGF0LmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC5fY2xlYXJWYWx1ZSgpO1xuXG4gICAgICB0cmlnZ2VyKCdvbkNsZWFyJyk7XG5cbiAgICAgIGlmIChpc01vZGFsICYmIHRoYXQuX2lzVmlzaWJsZSAmJiAhdGhhdC5saXZlKSB7XG4gICAgICAgIHRoYXQuaGlkZShmYWxzZSwgJ2NsZWFyJywgZmFsc2UsIGNsZWFyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsZWFyKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGVzIHRoZSBzY3JvbGxlciBhbmQgdGhlIGFzc29jaWF0ZWQgaW5wdXQuXG4gICAgICovXG5cblxuICAgIHRoYXQuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgJCQxLmVhY2goZWxtTGlzdCwgZnVuY3Rpb24gKGksIHYpIHtcbiAgICAgICAgaWYgKHYuZWwuaXMoJ2lucHV0LHNlbGVjdCcpKSB7XG4gICAgICAgICAgdi5lbFswXS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc2FibGVzIHRoZSBzY3JvbGxlciBhbmQgdGhlIGFzc29jaWF0ZWQgaW5wdXQuXG4gICAgICovXG5cblxuICAgIHRoYXQuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHMuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgJCQxLmVhY2goZWxtTGlzdCwgZnVuY3Rpb24gKGksIHYpIHtcbiAgICAgICAgaWYgKHYuZWwuaXMoJ2lucHV0LHNlbGVjdCcpKSB7XG4gICAgICAgICAgdi5lbFswXS5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvd3MgdGhlIHNjcm9sbGVyIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcHJldkFuaW0gLSBQcmV2ZW50IGFuaW1hdGlvbiBpZiB0cnVlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBwcmV2Rm9jdXMgLSBQcmV2ZW50IGZvY3VzaW5nIGlmIHRydWVcbiAgICAgKi9cblxuXG4gICAgdGhhdC5zaG93ID0gZnVuY3Rpb24gKHByZXZBbmltLCBwcmV2Rm9jdXMpIHtcbiAgICAgIHZhciBoYXNCdXR0b25zLCBodG1sLCBzY3JvbGxMZWZ0LCBzY3JvbGxUb3A7XG5cbiAgICAgIGlmIChzLmRpc2FibGVkIHx8IHRoYXQuX2lzVmlzaWJsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFBhcnNlIHZhbHVlIGZyb20gaW5wdXRcblxuXG4gICAgICB0aGF0Ll9yZWFkVmFsdWUoKTtcblxuICAgICAgaWYgKHRyaWdnZXIoJ29uQmVmb3JlU2hvdycpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgICRhY3RpdmVFbG0gPSBudWxsO1xuICAgICAgZG9BbmltID0gcy5hbmltYXRlO1xuICAgICAgYnV0dG9ucyA9IHMuYnV0dG9ucyB8fCBbXTtcbiAgICAgIG5lZWRzRGltZW5zaW9ucyA9IGhhc0NvbnRleHQgfHwgcy5kaXNwbGF5ID09ICdidWJibGUnO1xuICAgICAgbmVlZHNMb2NrID0gbmVlZHNGaXhlZCAmJiAhbmVlZHNEaW1lbnNpb25zICYmIHMuc2Nyb2xsTG9jaztcbiAgICAgIGhhc0J1dHRvbnMgPSBidXR0b25zLmxlbmd0aCA+IDA7IC8vdG91Y2hlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAoZG9BbmltICE9PSBmYWxzZSkge1xuICAgICAgICBpZiAocy5kaXNwbGF5ID09ICd0b3AnKSB7XG4gICAgICAgICAgZG9BbmltID0gZG9BbmltIHx8ICdzbGlkZWRvd24nO1xuICAgICAgICB9IGVsc2UgaWYgKHMuZGlzcGxheSA9PSAnYm90dG9tJykge1xuICAgICAgICAgIGRvQW5pbSA9IGRvQW5pbSB8fCAnc2xpZGV1cCc7XG4gICAgICAgIH0gZWxzZSBpZiAocy5kaXNwbGF5ID09ICdjZW50ZXInIHx8IHMuZGlzcGxheSA9PSAnYnViYmxlJykge1xuICAgICAgICAgIGRvQW5pbSA9IGRvQW5pbSB8fCAncG9wJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNNb2RhbCkge1xuICAgICAgICB3bmRXaWR0aCA9IDA7XG4gICAgICAgIHduZEhlaWdodCA9IDA7XG5cbiAgICAgICAgaWYgKG5lZWRzTG9jayAmJiAhJGxvY2suaGFzQ2xhc3MoJ21ic2MtZnItbG9jay1pb3MnKSkge1xuICAgICAgICAgIC8vJGxvY2suc2Nyb2xsVG9wKDApO1xuICAgICAgICAgIGN0eC5tYnNjU2Nyb2xsVG9wID0gc2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgJHduZC5zY3JvbGxUb3AoKSk7XG4gICAgICAgICAgY3R4Lm1ic2NTY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsICR3bmQuc2Nyb2xsTGVmdCgpKTtcbiAgICAgICAgICAkY3R4LmNzcyh7XG4gICAgICAgICAgICB0b3A6IC1zY3JvbGxUb3AgKyAncHgnLFxuICAgICAgICAgICAgbGVmdDogLXNjcm9sbExlZnQgKyAncHgnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAkbG9jay5hZGRDbGFzcygocy5zY3JvbGxMb2NrID8gJ21ic2MtZnItbG9jaycgOiAnJykgKyAobmVlZHNMb2NrID8gJyBtYnNjLWZyLWxvY2staW9zJyA6ICcnKSArIChoYXNDb250ZXh0ID8gJyBtYnNjLWZyLWxvY2stY3R4JyA6ICcnKSk7IC8vIEhpZGUgdmlydHVhbCBrZXlib2FyZFxuXG4gICAgICAgIGlmICgkJDEoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkuaXMoJ2lucHV0LHRleHRhcmVhJykpIHtcbiAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgfSAvLyBTYXZlIGFjdGl2ZSBpbnN0YW5jZSB0byBwcmV2aW91c1xuXG5cbiAgICAgICAgcHJldkluc3QgPSBtb2Jpc2Nyb2xsLmFjdGl2ZUluc3RhbmNlOyAvLyBTZXQgYWN0aXZlIGluc3RhbmNlXG5cbiAgICAgICAgbW9iaXNjcm9sbC5hY3RpdmVJbnN0YW5jZSA9IHRoYXQ7IC8vIEtlZXAgdHJhY2sgb2YgbW9kYWxzIG9wZW5lZCBwZXIgY29udGV4dFxuXG4gICAgICAgIGN0eC5tYnNjTW9kYWxzID0gKGN0eC5tYnNjTW9kYWxzIHx8IDApICsgMTtcblxuICAgICAgICBpZiAobmVlZHNMb2NrKSB7XG4gICAgICAgICAgY3R4Lm1ic2NJT1NMb2NrID0gKGN0eC5tYnNjSU9TTG9jayB8fCAwKSArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocy5zY3JvbGxMb2NrKSB7XG4gICAgICAgICAgY3R4Lm1ic2NMb2NrID0gKGN0eC5tYnNjTG9jayB8fCAwKSArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gQ3JlYXRlIHdoZWVscyBjb250YWluZXJzXG5cblxuICAgICAgaHRtbCA9ICc8ZGl2IGxhbmc9XCInICsgcy5sYW5nICsgJ1wiIGNsYXNzPVwibWJzYy1mciBtYnNjLScgKyBzLnRoZW1lICsgKHMuYmFzZVRoZW1lID8gJyBtYnNjLScgKyBzLmJhc2VUaGVtZSA6ICcnKSArICcgbWJzYy1mci0nICsgcy5kaXNwbGF5ICsgJyAnICsgKHMuY3NzQ2xhc3MgfHwgJycpICsgJyAnICsgKHMuY29tcENsYXNzIHx8ICcnKSArICh0aGF0Ll9pc0xpcXVpZCA/ICcgbWJzYy1mci1saXEnIDogJycpICsgKGlzTW9kYWwgPyAnIG1ic2MtZnItcG9zJyArIChzLnNob3dPdmVybGF5ID8gJycgOiAnIG1ic2MtZnItbm8tb3ZlcmxheScpIDogJycpICsgKGlzUG9pbnRlciA/ICcgbWJzYy1mci1wb2ludGVyJyA6ICcnKSArIChoYWxmQm9yZGVyID8gJyBtYnNjLWZyLWhiJyA6ICcnKSArICh0b3VjaGVkID8gJycgOiAnIG1ic2Mtbm8tdG91Y2gnKSArIChuZWVkc0xvY2sgPyAnIG1ic2MtcGxhdGZvcm0taW9zJyA6ICcnKSArIChoYXNCdXR0b25zID8gYnV0dG9ucy5sZW5ndGggPj0gMyA/ICcgbWJzYy1mci1idG4tYmxvY2sgJyA6ICcnIDogJyBtYnNjLWZyLW5vYnRuJykgKyAnXCI+JyArIChpc01vZGFsID8gJzxkaXYgY2xhc3M9XCJtYnNjLWZyLXBlcnNwXCI+JyArIChzLnNob3dPdmVybGF5ID8gJzxkaXYgY2xhc3M9XCJtYnNjLWZyLW92ZXJsYXlcIj48L2Rpdj4nIDogJycpICsgLy8gT3ZlcmxheVxuICAgICAgJzxkaXYgcm9sZT1cImRpYWxvZ1wiIGNsYXNzPVwibWJzYy1mci1zY3JvbGxcIj4nIDogJycpICsgJzxkaXYgY2xhc3M9XCJtYnNjLWZyLXBvcHVwJyArIChzLnJ0bCA/ICcgbWJzYy1ydGwnIDogJyBtYnNjLWx0cicpICsgKHMuaGVhZGVyVGV4dCA/ICcgbWJzYy1mci1oYXMtaGRyJyA6ICcnKSArICdcIj4nICsgKCAvLyBQb3B1cFxuICAgICAgcy5kaXNwbGF5ID09PSAnYnViYmxlJyA/ICc8ZGl2IGNsYXNzPVwibWJzYy1mci1hcnItd1wiPjxkaXYgY2xhc3M9XCJtYnNjLWZyLWFyci1pXCI+PGRpdiBjbGFzcz1cIm1ic2MtZnItYXJyXCI+PC9kaXY+PC9kaXY+PC9kaXY+JyA6ICcnKSArICggLy8gQnViYmxlIGFycm93XG4gICAgICBpc01vZGFsID8gJzxkaXYgY2xhc3M9XCJtYnNjLWZyLWZvY3VzXCIgdGFiaW5kZXg9XCItMVwiPjwvZGl2PicgOiAnJykgKyAnPGRpdiBjbGFzcz1cIm1ic2MtZnItd1wiPicgKyAoIC8vIFBvcHVwIGNvbnRlbnRcbiAgICAgIC8vJzxkaXYgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgY2xhc3M9XCJtYnNjLWZyLWFyaWEgbWJzYy1mci1oZG5cIj48L2Rpdj4nICtcbiAgICAgIHMuaGVhZGVyVGV4dCA/ICc8ZGl2IGNsYXNzPVwibWJzYy1mci1oZHJcIj4nICsgKGlzU3RyaW5nKHMuaGVhZGVyVGV4dCkgPyBzLmhlYWRlclRleHQgOiAnJykgKyAnPC9kaXY+JyA6ICcnKSArIC8vIEhlYWRlclxuICAgICAgJzxkaXYgY2xhc3M9XCJtYnNjLWZyLWNcIj4nOyAvLyBXaGVlbCBncm91cCBjb250YWluZXJcblxuICAgICAgaHRtbCArPSB0aGF0Ll9nZW5lcmF0ZUNvbnRlbnQoKTtcbiAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgIGlmIChoYXNCdXR0b25zKSB7XG4gICAgICAgIHZhciBiLFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGosXG4gICAgICAgICAgICBsID0gYnV0dG9ucy5sZW5ndGg7XG4gICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJtYnNjLWZyLWJ0bi1jb250XCI+JztcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGogPSBzLmJ0blJldmVyc2UgPyBsIC0gaSAtIDEgOiBpO1xuICAgICAgICAgIGIgPSBidXR0b25zW2pdO1xuICAgICAgICAgIGIgPSBpc1N0cmluZyhiKSA/IHRoYXQuYnV0dG9uc1tiXSA6IGI7XG5cbiAgICAgICAgICBpZiAoYi5oYW5kbGVyID09PSAnc2V0Jykge1xuICAgICAgICAgICAgYi5wYXJlbnRDbGFzcyA9ICdtYnNjLWZyLWJ0bi1zJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYi5oYW5kbGVyID09PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgYi5wYXJlbnRDbGFzcyA9ICdtYnNjLWZyLWJ0bi1jJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBodG1sICs9ICc8ZGl2JyArIChzLmJ0bldpZHRoID8gJyBzdHlsZT1cIndpZHRoOicgKyAxMDAgLyBidXR0b25zLmxlbmd0aCArICclXCInIDogJycpICsgJyBjbGFzcz1cIm1ic2MtZnItYnRuLXcgJyArIChiLnBhcmVudENsYXNzIHx8ICcnKSArICdcIj4nICsgJzxkaXYgdGFiaW5kZXg9XCIwXCIgcm9sZT1cImJ1dHRvblwiIGNsYXNzPVwibWJzYy1mci1idG4nICsgaiArICcgbWJzYy1mci1idG4tZSAnICsgKGIuY3NzQ2xhc3MgPT09IHVuZGVmaW5lZCA/IHMuYnRuQ2xhc3MgOiBiLmNzc0NsYXNzKSArIChiLmljb24gPyAnIG1ic2MtaWMgbWJzYy1pYy0nICsgYi5pY29uIDogJycpICsgJ1wiPicgKyAoYi50ZXh0IHx8ICcnKSArICc8L2Rpdj48L2Rpdj4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICAgIH1cblxuICAgICAgaHRtbCArPSAnPC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JyArIChpc01vZGFsID8gJzwvZGl2PjwvZGl2PicgOiAnJyk7XG4gICAgICAkbWFya3VwID0gJCQxKGh0bWwpO1xuICAgICAgJHBlcnNwID0gJCQxKCcubWJzYy1mci1wZXJzcCcsICRtYXJrdXApO1xuICAgICAgJG92ZXJsYXkgPSAkJDEoJy5tYnNjLWZyLXNjcm9sbCcsICRtYXJrdXApO1xuICAgICAgJHdyYXBwZXIgPSAkJDEoJy5tYnNjLWZyLXcnLCAkbWFya3VwKTtcbiAgICAgICRwb3B1cCA9ICQkMSgnLm1ic2MtZnItcG9wdXAnLCAkbWFya3VwKTtcbiAgICAgICRoZWFkZXIgPSAkJDEoJy5tYnNjLWZyLWhkcicsICRtYXJrdXApOyAvLyRhcmlhRGl2ID0gJCgnLm1ic2MtZnItYXJpYScsICRtYXJrdXApO1xuXG4gICAgICBtYXJrdXAgPSAkbWFya3VwWzBdO1xuICAgICAgb3ZlcmxheSA9ICRvdmVybGF5WzBdO1xuICAgICAgcG9wdXAgPSAkcG9wdXBbMF07XG4gICAgICB0aGF0Ll9hY3RpdmVFbG0gPSAkJDEoJy5tYnNjLWZyLWZvY3VzJywgJG1hcmt1cClbMF07XG4gICAgICB0aGF0Ll9tYXJrdXAgPSAkbWFya3VwO1xuICAgICAgdGhhdC5faXNWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoYXQubWFya3VwID0gbWFya3VwO1xuXG4gICAgICB0aGF0Ll9tYXJrdXBSZWFkeSgkbWFya3VwKTtcblxuICAgICAgdHJpZ2dlcignb25NYXJrdXBSZWFkeScsIHtcbiAgICAgICAgdGFyZ2V0OiBtYXJrdXBcbiAgICAgIH0pOyAvLyBBdHRhY2ggZXZlbnRzXG5cbiAgICAgIGlmIChpc01vZGFsKSB7XG4gICAgICAgIC8vIEVudGVyIC8gRVNDXG4gICAgICAgICQkMSh3aW5kb3cpLm9uKCdrZXlkb3duJywgb25XbmRLZXlEb3duKTsgLy8gUHJldmVudCBzY3JvbGwgaWYgbm90IHNwZWNpZmllZCBvdGhlcndpc2VcblxuICAgICAgICBpZiAocy5zY3JvbGxMb2NrKSB7XG4gICAgICAgICAgbGlzdGVuKGRvY3VtZW50LCAndG91Y2htb3ZlJywgb25TY3JvbGwsIHtcbiAgICAgICAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbGlzdGVuKGRvY3VtZW50LCAnbW91c2V3aGVlbCcsIG9uU2Nyb2xsLCB7XG4gICAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxpc3Rlbihkb2N1bWVudCwgJ3doZWVsJywgb25TY3JvbGwsIHtcbiAgICAgICAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocy5mb2N1c1RyYXApIHtcbiAgICAgICAgICAkd25kLm9uKCdmb2N1c2luJywgb25Gb2N1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlzTW9kYWwpIHtcbiAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRvb2xiYXIgYW5kIGFkZHJlc3NiYXIgdG8gYXBwZWFyIG9uIGlPU1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpbnNlcnRNYXJrdXAocHJldkFuaW0sIHByZXZGb2N1cyk7XG4gICAgICAgIH0sIG5lZWRzTG9jayA/IDEwMCA6IDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zZXJ0TWFya3VwKHByZXZBbmltLCBwcmV2Rm9jdXMpO1xuICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGlkZXMgdGhlIHNjcm9sbGVyIGluc3RhbmNlLlxuICAgICAqL1xuXG5cbiAgICB0aGF0LmhpZGUgPSBmdW5jdGlvbiAocHJldkFuaW0sIGJ0biwgZm9yY2UsIGNhbGxiYWNrKSB7XG4gICAgICBmdW5jdGlvbiBvbkFuaW1FbmQoKSB7XG4gICAgICAgICRtYXJrdXAub2ZmKGFuaW1FbmQsIG9uQW5pbUVuZCk7XG4gICAgICAgIG9uSGlkZShwcmV2QW5pbSk7XG4gICAgICB9IC8vIElmIG9uQ2xvc2UgaGFuZGxlciByZXR1cm5zIGZhbHNlLCBwcmV2ZW50IGhpZGVcblxuXG4gICAgICBpZiAoIXRoYXQuX2lzVmlzaWJsZSB8fCAhZm9yY2UgJiYgIXRoYXQuX2lzVmFsaWQgJiYgYnRuID09ICdzZXQnIHx8ICFmb3JjZSAmJiB0cmlnZ2VyKCdvbkJlZm9yZUNsb3NlJywge1xuICAgICAgICB2YWx1ZVRleHQ6IHRoYXQuX3RlbXBWYWx1ZSxcbiAgICAgICAgYnV0dG9uOiBidG5cbiAgICAgIH0pID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoYXQuX2lzVmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgb2JzZXJ2ZXIuZGV0YWNoKCk7XG4gICAgICAgIG9ic2VydmVyID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTW9kYWwpIHtcbiAgICAgICAgaWYgKCQkMShkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5pcygnaW5wdXQsdGV4dGFyZWEnKSAmJiBwb3B1cC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vYmlzY3JvbGwuYWN0aXZlSW5zdGFuY2UgPT0gdGhhdCkge1xuICAgICAgICAgIG1vYmlzY3JvbGwuYWN0aXZlSW5zdGFuY2UgPSBwcmV2SW5zdDtcbiAgICAgICAgfVxuXG4gICAgICAgICQkMSh3aW5kb3cpLm9mZigna2V5ZG93bicsIG9uV25kS2V5RG93bik7XG4gICAgICAgICR3bmQub2ZmKCdmb2N1c2luJywgb25Gb2N1cyk7XG4gICAgICAgIHVubGlzdGVuKGRvY3VtZW50LCAndG91Y2htb3ZlJywgb25TY3JvbGwsIHtcbiAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdW5saXN0ZW4oZG9jdW1lbnQsICdtb3VzZXdoZWVsJywgb25TY3JvbGwsIHtcbiAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdW5saXN0ZW4oZG9jdW1lbnQsICd3aGVlbCcsIG9uU2Nyb2xsLCB7XG4gICAgICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIEhpZGUgd2hlZWxzIGFuZCBvdmVybGF5XG5cblxuICAgICAgaWYgKCRtYXJrdXApIHtcbiAgICAgICAgaWYgKGlzTW9kYWwgJiYgaXNJbnNlcnRlZCAmJiBkb0FuaW0gJiYgIXByZXZBbmltKSB7XG4gICAgICAgICAgJG1hcmt1cC5hZGRDbGFzcygnbWJzYy1hbmltLW91dCBtYnNjLWFuaW0tdHJhbnMgbWJzYy1hbmltLXRyYW5zLScgKyBkb0FuaW0pLm9uKGFuaW1FbmQsIG9uQW5pbUVuZCkuZmluZCgnLm1ic2MtZnItcG9wdXAnKS5hZGRDbGFzcygnbWJzYy1hbmltLScgKyBkb0FuaW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9uSGlkZShwcmV2QW5pbSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGF0Ll9kZXRhY2hFdmVudHMoJG1hcmt1cCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSAvLyBGb3IgdmFsaWRhdGlvblxuXG5cbiAgICAgICRlbG0udHJpZ2dlcignYmx1cicpO1xuICAgICAgdHJpZ2dlcignb25DbG9zZScsIHtcbiAgICAgICAgdmFsdWVUZXh0OiB0aGF0Ll92YWx1ZVxuICAgICAgfSk7XG4gICAgfTsgLy8gdGhhdC5hcmlhTWVzc2FnZSA9IGZ1bmN0aW9uICh0eHQpIHtcbiAgICAvLyAgICAgJGFyaWFEaXYuaHRtbCgnJyk7XG4gICAgLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAgICAgJGFyaWFEaXYuaHRtbCh0eHQpO1xuICAgIC8vICAgICB9LCAxMDApO1xuICAgIC8vIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgc2Nyb2xsZXIgaXMgY3VycmVudGx5IHZpc2libGUuXG4gICAgICovXG5cblxuICAgIHRoYXQuaXNWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoYXQuX2lzVmlzaWJsZTtcbiAgICB9OyAvLyBQcm90ZWN0ZWQgZnVuY3Rpb25zIHRvIG92ZXJyaWRlXG5cblxuICAgIHRoYXQuc2V0VmFsID0gbm9vcDtcbiAgICB0aGF0LmdldFZhbCA9IG5vb3A7XG4gICAgdGhhdC5fZ2VuZXJhdGVDb250ZW50ID0gbm9vcDtcbiAgICB0aGF0Ll9hdHRhY2hFdmVudHMgPSBub29wO1xuICAgIHRoYXQuX2RldGFjaEV2ZW50cyA9IG5vb3A7XG4gICAgdGhhdC5fcmVhZFZhbHVlID0gbm9vcDtcbiAgICB0aGF0Ll9jbGVhclZhbHVlID0gbm9vcDtcbiAgICB0aGF0Ll9maWxsVmFsdWUgPSBub29wO1xuICAgIHRoYXQuX21hcmt1cFJlYWR5ID0gbm9vcDtcbiAgICB0aGF0Ll9tYXJrdXBJbnNlcnRlZCA9IG5vb3A7XG4gICAgdGhhdC5fbWFya3VwUmVtb3ZlID0gbm9vcDtcbiAgICB0aGF0Ll9wb3NpdGlvbiA9IG5vb3A7XG4gICAgdGhhdC5fX3Byb2Nlc3NTZXR0aW5ncyA9IG5vb3A7XG4gICAgdGhhdC5fX2luaXQgPSBub29wO1xuICAgIHRoYXQuX19kZXN0cm95ID0gbm9vcDsgLy8gR2VuZXJpYyBmcmFtZSBmdW5jdGlvbnNcblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSBtb2Jpc2Nyb2xsIGluc3RhbmNlLlxuICAgICAqL1xuXG4gICAgdGhhdC5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEZvcmNlIGhpZGUgd2l0aG91dCBhbmltYXRpb25cbiAgICAgIHRoYXQuaGlkZSh0cnVlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAkZWxtLm9mZignLm1ic2MnKTtcbiAgICAgIHRhcE9mZigkZWxtKTsgLy8gUmVtb3ZlIGFsbCBldmVudHMgZnJvbSBlbGVtZW50c1xuXG4gICAgICAkJDEuZWFjaChlbG1MaXN0LCBmdW5jdGlvbiAoaSwgdikge1xuICAgICAgICB2LmVsLm9mZignLm1ic2MnKS5wcm9wKCdyZWFkb25seScsIHYucmVhZE9ubHkpO1xuICAgICAgICB0YXBPZmYodi5lbCk7XG5cbiAgICAgICAgaWYgKHYubGJsKSB7XG4gICAgICAgICAgdi5sYmwub2ZmKCcubWJzYycpO1xuICAgICAgICAgIHRhcE9mZih2LmxibCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGF0Ll9fZGVzdHJveSgpO1xuICAgIH07XG5cbiAgICB0aGF0Ll91cGRhdGVIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdCA9IHMuaGVhZGVyVGV4dCxcbiAgICAgICAgICB0eHQgPSB0ID8gdHlwZW9mIHQgPT09ICdmdW5jdGlvbicgPyB0LmNhbGwoZWwsIHRoYXQuX3RlbXBWYWx1ZSkgOiB0LnJlcGxhY2UoL1xce3ZhbHVlXFx9L2ksIHRoYXQuX3RlbXBWYWx1ZSkgOiAnJztcbiAgICAgICRoZWFkZXIuaHRtbCh0eHQgfHwgJyZuYnNwOycpO1xuICAgIH07XG5cbiAgICB0aGF0Ll9nZXRSZXNwQ29udCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGhhc0NvbnRleHQgPSBzLmNvbnRleHQgIT0gJ2JvZHknO1xuICAgICAgJHduZCA9ICQkMShoYXNDb250ZXh0ID8gcy5jb250ZXh0IDogd2luZG93KTtcbiAgICAgIHJldHVybiBzLmRpc3BsYXkgPT0gJ2lubGluZScgPyAkZWxtLmlzKCdkaXYnKSA/ICRlbG0gOiAkZWxtLnBhcmVudCgpIDogJHduZDtcbiAgICB9O1xuXG4gICAgdGhhdC5fcHJvY2Vzc1NldHRpbmdzID0gZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgIHZhciBiLCBpO1xuXG4gICAgICB0aGF0Ll9fcHJvY2Vzc1NldHRpbmdzKHJlc3ApO1xuXG4gICAgICBpc1BvaW50ZXIgPSAhcy50b3VjaFVpO1xuXG4gICAgICBpZiAoaXNQb2ludGVyKSB7XG4gICAgICAgIHMuZGlzcGxheSA9IHJlc3AuZGlzcGxheSB8fCBzZXR0aW5ncy5kaXNwbGF5IHx8ICdidWJibGUnO1xuICAgICAgICBzLmJ1dHRvbnMgPSByZXNwLmJ1dHRvbnMgfHwgc2V0dGluZ3MuYnV0dG9ucyB8fCBbXTtcbiAgICAgICAgcy5zaG93T3ZlcmxheSA9IHJlc3Auc2hvd092ZXJsYXkgfHwgc2V0dGluZ3Muc2hvd092ZXJsYXkgfHwgZmFsc2U7XG4gICAgICB9IC8vIEFkZCBkZWZhdWx0IGJ1dHRvbnNcblxuXG4gICAgICBzLmJ1dHRvbnMgPSBzLmJ1dHRvbnMgfHwgKHMuZGlzcGxheSAhPT0gJ2lubGluZScgPyBbJ2NhbmNlbCcsICdzZXQnXSA6IFtdKTsgLy8gSGlkZSBoZWFkZXIgdGV4dCBpbiBpbmxpbmUgbW9kZSBieSBkZWZhdWx0XG5cbiAgICAgIHMuaGVhZGVyVGV4dCA9IHMuaGVhZGVyVGV4dCA9PT0gdW5kZWZpbmVkID8gcy5kaXNwbGF5ICE9PSAnaW5saW5lJyA/ICd7dmFsdWV9JyA6IGZhbHNlIDogcy5oZWFkZXJUZXh0O1xuICAgICAgYnV0dG9ucyA9IHMuYnV0dG9ucyB8fCBbXTtcbiAgICAgIGlzTW9kYWwgPSBzLmRpc3BsYXkgIT09ICdpbmxpbmUnO1xuICAgICAgJGN0eCA9ICQkMShzLmNvbnRleHQpO1xuICAgICAgJGxvY2sgPSBoYXNDb250ZXh0ID8gJGN0eCA6ICQkMSgnYm9keSxodG1sJyk7XG4gICAgICBjdHggPSAkY3R4WzBdO1xuICAgICAgdGhhdC5saXZlID0gdHJ1ZTsgLy8gSWYgbm8gc2V0IGJ1dHRvbiBpcyBmb3VuZCwgbGl2ZSBtb2RlIGlzIGFjdGl2YXRlZFxuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiID0gYnV0dG9uc1tpXTtcblxuICAgICAgICBpZiAoYiA9PSAnb2snIHx8IGIgPT0gJ3NldCcgfHwgYi5oYW5kbGVyID09ICdzZXQnKSB7XG4gICAgICAgICAgdGhhdC5saXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhhdC5idXR0b25zLnNldCA9IHtcbiAgICAgICAgdGV4dDogcy5zZXRUZXh0LFxuICAgICAgICBpY29uOiBzLnNldEljb24sXG4gICAgICAgIGhhbmRsZXI6ICdzZXQnXG4gICAgICB9O1xuICAgICAgdGhhdC5idXR0b25zLmNhbmNlbCA9IHtcbiAgICAgICAgdGV4dDogcy5jYW5jZWxUZXh0LFxuICAgICAgICBpY29uOiBzLmNhbmNlbEljb24sXG4gICAgICAgIGhhbmRsZXI6ICdjYW5jZWwnXG4gICAgICB9O1xuICAgICAgdGhhdC5idXR0b25zLmNsb3NlID0ge1xuICAgICAgICB0ZXh0OiBzLmNsb3NlVGV4dCxcbiAgICAgICAgaWNvbjogcy5jbG9zZUljb24sXG4gICAgICAgIGhhbmRsZXI6ICdjYW5jZWwnXG4gICAgICB9O1xuICAgICAgdGhhdC5idXR0b25zLmNsZWFyID0ge1xuICAgICAgICB0ZXh0OiBzLmNsZWFyVGV4dCxcbiAgICAgICAgaWNvbjogcy5jbGVhckljb24sXG4gICAgICAgIGhhbmRsZXI6ICdjbGVhcidcbiAgICAgIH07XG4gICAgICB0aGF0Ll9pc0lucHV0ID0gJGVsbS5pcygnaW5wdXQnKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNjcm9sbGVyIGluaXRpYWxpemF0aW9uLlxuICAgICAqL1xuXG5cbiAgICB0aGF0Ll9pbml0ID0gZnVuY3Rpb24gKG5ld1NldHRpbmdzKSB7XG4gICAgICB2YXIgd2FzVmlzaWJsZSA9IHRoYXQuX2lzVmlzaWJsZSxcbiAgICAgICAgICB3YXNSZWFkeSA9IHdhc1Zpc2libGUgJiYgISRtYXJrdXAuaGFzQ2xhc3MoJ21ic2MtZnItcG9zJyk7XG5cbiAgICAgIGlmICh3YXNWaXNpYmxlKSB7XG4gICAgICAgIHRoYXQuaGlkZSh0cnVlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICB9IC8vIFVuYmluZCBhbGwgZXZlbnRzIChpZiByZS1pbml0KVxuXG5cbiAgICAgICRlbG0ub2ZmKCcubWJzYycpO1xuICAgICAgdGFwT2ZmKCRlbG0pO1xuXG4gICAgICB0aGF0Ll9faW5pdChuZXdTZXR0aW5ncyk7XG5cbiAgICAgIHRoYXQuX2lzTGlxdWlkID0gcy5sYXlvdXQgPT0gJ2xpcXVpZCc7XG5cbiAgICAgIGlmIChpc01vZGFsKSB7XG4gICAgICAgIHRoYXQuX3JlYWRWYWx1ZSgpO1xuXG4gICAgICAgIGlmICghdGhhdC5faGFzQ29udGVudCAmJiAhcy5za2lwU2hvdykge1xuICAgICAgICAgIHRoYXQuYXR0YWNoU2hvdygkZWxtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3YXNWaXNpYmxlKSB7XG4gICAgICAgICAgdGhhdC5zaG93KHdhc1JlYWR5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhhdC5zaG93KCk7XG4gICAgICB9XG5cbiAgICAgICRlbG0ucmVtb3ZlQ2xhc3MoJ21ic2MtY2xvYWsnKS5maWx0ZXIoJ2lucHV0LCBzZWxlY3QsIHRleHRhcmVhJykub24oJ2NoYW5nZS5tYnNjJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoYXQuX3ByZXZlbnRDaGFuZ2UpIHtcbiAgICAgICAgICB0aGF0LnNldFZhbCgkZWxtLnZhbCgpLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGF0Ll9wcmV2ZW50Q2hhbmdlID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhhdC5idXR0b25zID0ge307XG4gICAgdGhhdC5oYW5kbGVycyA9IHtcbiAgICAgIHNldDogdGhhdC5zZWxlY3QsXG4gICAgICBjYW5jZWw6IHRoYXQuY2FuY2VsLFxuICAgICAgY2xlYXI6IHRoYXQuY2xlYXJcbiAgICB9O1xuICAgIHRoYXQuX3ZhbHVlID0gbnVsbDtcbiAgICB0aGF0Ll9pc1ZhbGlkID0gdHJ1ZTtcbiAgICB0aGF0Ll9pc1Zpc2libGUgPSBmYWxzZTsgLy8gQ29uc3RydWN0b3JcblxuICAgIHMgPSB0aGF0LnNldHRpbmdzO1xuICAgIHRyaWdnZXIgPSB0aGF0LnRyaWdnZXI7XG5cbiAgICBpZiAoIWluaGVyaXQpIHtcbiAgICAgIHRoYXQuaW5pdCgpO1xuICAgIH1cbiAgfTtcbiAgRnJhbWUucHJvdG90eXBlLl9kZWZhdWx0cyA9IHtcbiAgICAvLyBMb2NhbGl6YXRpb25cbiAgICBsYW5nOiAnZW4nLFxuICAgIHNldFRleHQ6ICdTZXQnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gc2VsZWN0ZWQnLFxuICAgIGNsb3NlVGV4dDogJ0Nsb3NlJyxcbiAgICBjYW5jZWxUZXh0OiAnQ2FuY2VsJyxcbiAgICBjbGVhclRleHQ6ICdDbGVhcicsXG4gICAgLy8gT3B0aW9uc1xuICAgIGNvbnRleHQ6ICdib2R5JyxcbiAgICBtYXhQb3B1cFdpZHRoOiA2MDAsXG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIGNsb3NlT25PdmVybGF5VGFwOiB0cnVlLFxuICAgIHNob3dPbkZvY3VzOiBpc0FuZHJvaWQgfHwgaXNJT1MsXG4gICAgLy8gTmVlZGVkIGZvciBpb24taW5wdXRcbiAgICBzaG93T25UYXA6IHRydWUsXG4gICAgZGlzcGxheTogJ2NlbnRlcicsXG4gICAgc2Nyb2xsOiB0cnVlLFxuICAgIHNjcm9sbExvY2s6IHRydWUsXG4gICAgc2hvd092ZXJsYXk6IHRydWUsXG4gICAgdGFwOiB0cnVlLFxuICAgIHRvdWNoVWk6IHRydWUsXG4gICAgYnRuQ2xhc3M6ICdtYnNjLWZyLWJ0bicsXG4gICAgYnRuV2lkdGg6IHRydWUsXG4gICAgZm9jdXNUcmFwOiB0cnVlLFxuICAgIGZvY3VzT25DbG9zZTogIWlzSU9TOCAvLyBUZW1wb3JhcnkgZm9yIGlPUzhcblxuICB9O1xuICBjbGFzc2VzLkZyYW1lID0gRnJhbWU7XG4gIHRoZW1lcy5mcmFtZS5tb2Jpc2Nyb2xsID0ge1xuICAgIGhlYWRlclRleHQ6IGZhbHNlLFxuICAgIGJ0bldpZHRoOiBmYWxzZVxuICB9O1xuICB0aGVtZXMuc2Nyb2xsZXIubW9iaXNjcm9sbCA9IGV4dGVuZCQxKHt9LCB0aGVtZXMuZnJhbWUubW9iaXNjcm9sbCwge1xuICAgIHJvd3M6IDUsXG4gICAgc2hvd0xhYmVsOiBmYWxzZSxcbiAgICBzZWxlY3RlZExpbmVCb3JkZXI6IDEsXG4gICAgd2Vla0RheXM6ICdtaW4nLFxuICAgIGNoZWNrSWNvbjogJ2lvbi1pb3M3LWNoZWNrbWFyay1lbXB0eScsXG4gICAgYnRuUGx1c0NsYXNzOiAnbWJzYy1pYyBtYnNjLWljLWFycm93LWRvd241JyxcbiAgICBidG5NaW51c0NsYXNzOiAnbWJzYy1pYyBtYnNjLWljLWFycm93LXVwNScsXG4gICAgYnRuQ2FsUHJldkNsYXNzOiAnbWJzYy1pYyBtYnNjLWljLWFycm93LWxlZnQ1JyxcbiAgICBidG5DYWxOZXh0Q2xhc3M6ICdtYnNjLWljIG1ic2MtaWMtYXJyb3ctcmlnaHQ1J1xuICB9KTtcblxuICBpZiAoaXNCcm93c2VyKSB7XG4gICAgLy8gUHJldmVudCByZS1zaG93IG9uIHdpbmRvdyBmb2N1c1xuICAgICQkMSh3aW5kb3cpLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgkYWN0aXZlRWxtKSB7XG4gICAgICAgIHByZXZlbnRTaG93ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciBQb3B1cCA9IGZ1bmN0aW9uIFBvcHVwKGVsLCBzZXR0aW5ncywgaW5oZXJpdCkge1xuICAgIGZ1bmN0aW9uIGFkZENvbnRlbnQoJG0pIHtcbiAgICAgIC8qIFRSSUFMICovXG4gICAgICBpZiAoISQkMSgnLm1ic2MtZnItYycsICRtKS5oYXNDbGFzcygnbWJzYy13ZGctYycpXG4gICAgICAvKiBUUklBTENPTkQgKi9cbiAgICAgICkge1xuICAgICAgICAgICQkMSgnLm1ic2MtZnItYycsICRtKS5hZGRDbGFzcygnbWJzYy13ZGctYycpLmFwcGVuZCgkZWxtLnNob3coKSk7XG5cbiAgICAgICAgICBpZiAoISQkMSgnLm1ic2Mtdy1wJywgJG0pLmxlbmd0aCkge1xuICAgICAgICAgICAgJCQxKCcubWJzYy1mci1jJywgJG0pLmFkZENsYXNzKCdtYnNjLXctcCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzLFxuICAgICAgICAkcHJldixcbiAgICAgICAgJGVsbSA9ICQkMShlbCksXG4gICAgICAgIHRoYXQgPSB0aGlzOyAvLyBDYWxsIHRoZSBwYXJlbnQgY29uc3RydWN0b3JcblxuICAgIEZyYW1lLmNhbGwodGhpcywgZWwsIHNldHRpbmdzLCB0cnVlKTtcbiAgICAvKiBUUklBTEZVTkMgKi9cblxuICAgIHRoYXQuX2dlbmVyYXRlQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9O1xuXG4gICAgdGhhdC5fbWFya3VwUmVhZHkgPSBmdW5jdGlvbiAoJG0pIHtcbiAgICAgIGlmIChzLmRpc3BsYXkgIT0gJ2lubGluZScpIHtcbiAgICAgICAgYWRkQ29udGVudCgkbSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoYXQuX21hcmt1cEluc2VydGVkID0gZnVuY3Rpb24gKCRtKSB7XG4gICAgICBpZiAocy5kaXNwbGF5ID09ICdpbmxpbmUnKSB7XG4gICAgICAgIGFkZENvbnRlbnQoJG0pO1xuICAgICAgfVxuXG4gICAgICAkbS50cmlnZ2VyKCdtYnNjLWVuaGFuY2UnLCBbe1xuICAgICAgICB0aGVtZTogcy50aGVtZSxcbiAgICAgICAgbGFuZzogcy5sYW5nXG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIHRoYXQuX21hcmt1cFJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICRlbG0uaGlkZSgpO1xuXG4gICAgICBpZiAoJHByZXYgJiYgJHByZXYucGFyZW50KCkubGVuZ3RoKSB7XG4gICAgICAgICRwcmV2LmFmdGVyKCRlbG0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGF0Ll9fcHJvY2Vzc1NldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgcyA9IHRoYXQuc2V0dGluZ3M7XG4gICAgICB0aGF0LmJ1dHRvbnMub2sgPSB7XG4gICAgICAgIHRleHQ6IHMub2tUZXh0LFxuICAgICAgICBpY29uOiBzLm9rSWNvbixcbiAgICAgICAgaGFuZGxlcjogJ3NldCdcbiAgICAgIH07XG4gICAgICBzLmJ1dHRvbnMgPSBzLmJ1dHRvbnMgfHwgKHMuZGlzcGxheSA9PSAnaW5saW5lJyA/IFtdIDogWydvayddKTtcblxuICAgICAgaWYgKCEkcHJldiAmJiAkZWxtLnBhcmVudCgpLmxlbmd0aCkge1xuICAgICAgICAkcHJldiA9ICQkMShkb2N1bWVudC5jcmVhdGVDb21tZW50KCdwb3B1cCcpKTtcbiAgICAgICAgJGVsbS5iZWZvcmUoJHByZXYpO1xuICAgICAgfVxuXG4gICAgICAkZWxtLmhpZGUoKTtcbiAgICB9OyAvLyBDb25zdHJ1Y3RvclxuXG5cbiAgICBpZiAoIWluaGVyaXQpIHtcbiAgICAgIHRoYXQuaW5pdCgpO1xuICAgIH1cbiAgfTtcbiAgUG9wdXAucHJvdG90eXBlID0ge1xuICAgIF9oYXNEZWY6IHRydWUsXG4gICAgX2hhc1RoZW1lOiB0cnVlLFxuICAgIF9oYXNDb250ZW50OiB0cnVlLFxuICAgIF9oYXNMYW5nOiB0cnVlLFxuICAgIF9yZXNwb25zaXZlOiB0cnVlLFxuICAgIF9jbGFzczogJ3BvcHVwJyxcbiAgICBfZGVmYXVsdHM6IGV4dGVuZCQxKHt9LCBGcmFtZS5wcm90b3R5cGUuX2RlZmF1bHRzLCB7XG4gICAgICBjb21wQ2xhc3M6ICdtYnNjLXdkZycsXG4gICAgICBva1RleHQ6ICdPSycsXG4gICAgICBoZWFkZXJUZXh0OiBmYWxzZVxuICAgIH0pXG4gIH07XG4gIGNsYXNzZXMuUG9wdXAgPSBQb3B1cDtcbiAgY2xhc3Nlcy5XaWRnZXQgPSBQb3B1cDtcbiAgbW9iaXNjcm9sbC50aGVtZXMucG9wdXAgPSBtb2Jpc2Nyb2xsLnRoZW1lcy5mcmFtZTtcblxuICB2YXIgaGFzUHJvbWlzZSA9IGlzQnJvd3NlciAmJiAhIXdpbmRvdy5Qcm9taXNlO1xuICB2YXIgcG9wdXBRdWV1ZSA9IFtdO1xuICB2YXIgbm90aWZpY2F0aW9uUXVldWUgPSBbXTtcbiAgdmFyIGFjdGl2ZU5vdGlmaWNhdGlvbjtcblxuICBmdW5jdGlvbiBzaG93UG9wdXAocG9wdXApIHtcbiAgICBpZiAoIXBvcHVwUXVldWUubGVuZ3RoKSB7XG4gICAgICBwb3B1cC5zaG93KCk7XG4gICAgfVxuXG4gICAgcG9wdXBRdWV1ZS5wdXNoKHBvcHVwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKSB7XG4gICAgdmFyIGlzQW55ID0gbm90aWZpY2F0aW9uUXVldWUubGVuZ3RoO1xuICAgIG5vdGlmaWNhdGlvblF1ZXVlLnB1c2gobm90aWZpY2F0aW9uKTsgLy8gT25seSBzaG93IG5vdGlmaWNhdGlvbiBpZiBubyBwb3B1cCBpcyB2aXNpYmxlXG4gICAgLy8gb3RoZXJ3aXNlIHBvc3Rwb25lIGl0IHVudGlsIHBvcHVwIGlzIGNsb3NlZFxuXG4gICAgaWYgKCFwb3B1cFF1ZXVlLmxlbmd0aCkge1xuICAgICAgLy8gSWYgdGhlcmUncyBhIHZpc2libGUgbm90aWZpY2F0aW9uLCBoaWRlIGl0LlxuICAgICAgLy8gVGhlIG5vdGlmaWNhdGlvbiB3aWxsIGJlIHNob3duIGFmdGVyIGhpZGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlXG4gICAgICBpZiAoaXNBbnkpIHtcbiAgICAgICAgbm90aWZpY2F0aW9uUXVldWVbMF0uaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUHJldmVudCBmb2N1cyBvbiBzaG93IGZvciBub3RpZmljYXRpb25zXG4gICAgICAgIG5vdGlmaWNhdGlvbi5zaG93KGZhbHNlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTZXR0aW5ncyhxdWV1ZSwgc2V0dGluZ3MsIHJlc29sdmUsIG1vcmUpIHtcbiAgICAvL2NvbnN0IGFjdGl2ZSA9IG1vYmlzY3JvbGwuYWN0aXZlSW5zdGFuY2U7XG4gICAgcmV0dXJuIGV4dGVuZCQxKHtcbiAgICAgIGRpc3BsYXk6IHNldHRpbmdzLmRpc3BsYXkgfHwgJ2NlbnRlcicsXG4gICAgICBjc3NDbGFzczogJ21ic2MtYWxlcnQnLFxuICAgICAgb2tUZXh0OiBzZXR0aW5ncy5va1RleHQsXG4gICAgICBjYW5jZWxUZXh0OiBzZXR0aW5ncy5jYW5jZWxUZXh0LFxuICAgICAgY29udGV4dDogc2V0dGluZ3MuY29udGV4dCxcbiAgICAgIHRoZW1lOiBzZXR0aW5ncy50aGVtZSxcbiAgICAgIGNsb3NlT25PdmVybGF5VGFwOiBmYWxzZSxcbiAgICAgIG9uQmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIG9uQmVmb3JlQ2xvc2UoKSB7XG4gICAgICAgIHF1ZXVlLnNoaWZ0KCk7XG4gICAgICB9LFxuICAgICAgb25IaWRlOiBmdW5jdGlvbiBvbkhpZGUoZXYsIGluc3QpIHtcbiAgICAgICAgLy9tb2Jpc2Nyb2xsLmFjdGl2ZUluc3RhbmNlID0gYWN0aXZlO1xuICAgICAgICBpZiAocmVzb2x2ZSkge1xuICAgICAgICAgIHJlc29sdmUoaW5zdC5fcmVzb2x2ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2V0dGluZ3MuY2FsbGJhY2spIHtcbiAgICAgICAgICBzZXR0aW5ncy5jYWxsYmFjayhpbnN0Ll9yZXNvbHZlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnN0KSB7XG4gICAgICAgICAgaW5zdC5kZXN0cm95KCk7XG4gICAgICAgIH0gLy8gU2hvdyBuZXh0XG5cblxuICAgICAgICBpZiAocG9wdXBRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBwb3B1cFF1ZXVlWzBdLnNob3coKTtcbiAgICAgICAgfSBlbHNlIGlmIChub3RpZmljYXRpb25RdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBQcmV2ZW50IGZvY3VzIG9uIHNob3cgZm9yIG5vdGlmaWNhdGlvbnNcbiAgICAgICAgICBub3RpZmljYXRpb25RdWV1ZVswXS5zaG93KGZhbHNlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIG1vcmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TWVzc2FnZShzZXR0aW5ncykge1xuICAgIHJldHVybiAoc2V0dGluZ3MudGl0bGUgPyAnPGgyPicgKyBzZXR0aW5ncy50aXRsZSArICc8L2gyPicgOiAnJykgKyAnPHA+JyArIChzZXR0aW5ncy5tZXNzYWdlIHx8ICcnKSArICc8L3A+JztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dBbGVydChwb3B1cCwgc2V0dGluZ3MsIHJlc29sdmUpIHtcbiAgICB2YXIgaW5zdCA9IG5ldyBQb3B1cChwb3B1cCwgZ2V0U2V0dGluZ3MocG9wdXBRdWV1ZSwgc2V0dGluZ3MsIHJlc29sdmUpKTtcbiAgICBzaG93UG9wdXAoaW5zdCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93Q29uZmlybShwb3B1cCwgc2V0dGluZ3MsIHJlc29sdmUpIHtcbiAgICB2YXIgaW5zdCA9IG5ldyBQb3B1cChwb3B1cCwgZ2V0U2V0dGluZ3MocG9wdXBRdWV1ZSwgc2V0dGluZ3MsIHJlc29sdmUsIHtcbiAgICAgIGJ1dHRvbnM6IFsnY2FuY2VsJywgJ29rJ10sXG4gICAgICBvblNldDogZnVuY3Rpb24gb25TZXQoKSB7XG4gICAgICAgIGluc3QuX3Jlc29sdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBpbnN0Ll9yZXNvbHZlID0gZmFsc2U7XG4gICAgc2hvd1BvcHVwKGluc3QpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1Byb21wdChwb3B1cCwgc2V0dGluZ3MsIHJlc29sdmUpIHtcbiAgICB2YXIgaW5wdXQsIGxhYmVsO1xuICAgIHZhciBpbnN0ID0gbmV3IFBvcHVwKHBvcHVwLCBnZXRTZXR0aW5ncyhwb3B1cFF1ZXVlLCBzZXR0aW5ncywgcmVzb2x2ZSwge1xuICAgICAgYnV0dG9uczogWydjYW5jZWwnLCAnb2snXSxcbiAgICAgIG9uTWFya3VwUmVhZHk6IGZ1bmN0aW9uIG9uTWFya3VwUmVhZHkoZXZlbnQsIGluc3QpIHtcbiAgICAgICAgdmFyIHMgPSBpbnN0LnNldHRpbmdzO1xuICAgICAgICBsYWJlbCA9IGluc3QuX21hcmt1cC5maW5kKCdsYWJlbCcpO1xuICAgICAgICBsYWJlbC5hZGRDbGFzcygnbWJzYy0nICsgcy50aGVtZSArIChzLmJhc2VUaGVtZSA/ICcgbWJzYy0nICsgcy5iYXNlVGhlbWUgOiAnJykpO1xuICAgICAgICBpbnB1dCA9IGluc3QuX21hcmt1cC5maW5kKCdpbnB1dCcpWzBdO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgIGlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIGlucHV0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9LFxuICAgICAgb25TZXQ6IGZ1bmN0aW9uIG9uU2V0KCkge1xuICAgICAgICBpbnN0Ll9yZXNvbHZlID0gaW5wdXQudmFsdWU7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIGluc3QuX3Jlc29sdmUgPSBudWxsO1xuICAgIHNob3dQb3B1cChpbnN0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dTbmFja2Jhcihwb3B1cCwgc2V0dGluZ3MsIHJlc29sdmUsIGNzc0NsYXNzLCBhbmltYXRpb24pIHtcbiAgICB2YXIgbm90aWZpY2F0aW9uVGltZXI7XG4gICAgdmFyIGluc3QgPSBuZXcgUG9wdXAocG9wdXAsIGdldFNldHRpbmdzKG5vdGlmaWNhdGlvblF1ZXVlLCBzZXR0aW5ncywgcmVzb2x2ZSwge1xuICAgICAgZGlzcGxheTogc2V0dGluZ3MuZGlzcGxheSB8fCAnYm90dG9tJyxcbiAgICAgIGFuaW1hdGU6IGFuaW1hdGlvbixcbiAgICAgIGNzc0NsYXNzOiAoY3NzQ2xhc3MgfHwgJ21ic2Mtc25hY2tiYXInKSArIChzZXR0aW5ncy5jb2xvciA/ICcgbWJzYy0nICsgc2V0dGluZ3MuY29sb3IgOiAnJyksXG4gICAgICBzY3JvbGxMb2NrOiBmYWxzZSxcbiAgICAgIGZvY3VzVHJhcDogZmFsc2UsXG4gICAgICBidXR0b25zOiBbXSxcbiAgICAgIG9uTWFya3VwUmVhZHk6IGZ1bmN0aW9uIG9uTWFya3VwUmVhZHkoZXZlbnQsIGluc3QpIHtcbiAgICAgICAgdmFyIHMgPSBpbnN0LnNldHRpbmdzO1xuXG4gICAgICAgIHZhciBidXR0b24gPSBpbnN0Ll9tYXJrdXAuZmluZCgnYnV0dG9uJyk7XG5cbiAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdtYnNjLScgKyBzLnRoZW1lICsgKHMuYmFzZVRoZW1lID8gJyBtYnNjLScgKyBzLmJhc2VUaGVtZSA6ICcnKSk7XG4gICAgICB9LFxuICAgICAgb25TaG93OiBmdW5jdGlvbiBvblNob3coZXYsIGluc3QpIHtcbiAgICAgICAgYWN0aXZlTm90aWZpY2F0aW9uID0gaW5zdDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuZHVyYXRpb24gIT09IGZhbHNlKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChpbnN0KSB7XG4gICAgICAgICAgICAgIGluc3QuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHNldHRpbmdzLmR1cmF0aW9uIHx8IDMwMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmJ1dHRvbikge1xuICAgICAgICAgIGluc3QudGFwKCQkMSgnLm1ic2Mtc25hY2tiYXItYnRuJywgZXYudGFyZ2V0KSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaW5zdC5oaWRlKCk7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5idXR0b24uYWN0aW9uKSB7XG4gICAgICAgICAgICAgIHNldHRpbmdzLmJ1dHRvbi5hY3Rpb24uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7XG4gICAgICAgIGFjdGl2ZU5vdGlmaWNhdGlvbiA9IG51bGw7XG4gICAgICAgIGNsZWFyVGltZW91dChub3RpZmljYXRpb25UaW1lcik7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIHNob3dOb3RpZmljYXRpb24oaW5zdCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93VG9hc3QocG9wdXAsIHNldHRpbmdzLCByZXNvbHZlKSB7XG4gICAgc2hvd1NuYWNrYmFyKHBvcHVwLCBzZXR0aW5ncywgcmVzb2x2ZSwgJ21ic2MtdG9hc3QnLCAnZmFkZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhmdW5jLCBwb3B1cCwgc2V0dGluZ3MpIHtcbiAgICB2YXIgcDtcblxuICAgIGlmIChoYXNQcm9taXNlKSB7XG4gICAgICBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgZnVuYyhwb3B1cCwgc2V0dGluZ3MsIHJlc29sdmUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bmMocG9wdXAsIHNldHRpbmdzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIG1vYmlzY3JvbGwuYWxlcnQgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcbiAgICB2YXIgcG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwb3B1cC5pbm5lckhUTUwgPSBnZXRNZXNzYWdlKHNldHRpbmdzKTtcbiAgICByZXR1cm4gc2hvdyhzaG93QWxlcnQsIHBvcHVwLCBzZXR0aW5ncyk7XG4gIH07XG5cbiAgbW9iaXNjcm9sbC5jb25maXJtID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XG4gICAgdmFyIHBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcG9wdXAuaW5uZXJIVE1MID0gZ2V0TWVzc2FnZShzZXR0aW5ncyk7XG4gICAgcmV0dXJuIHNob3coc2hvd0NvbmZpcm0sIHBvcHVwLCBzZXR0aW5ncyk7XG4gIH07XG5cbiAgbW9iaXNjcm9sbC5wcm9tcHQgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcbiAgICB2YXIgcG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwb3B1cC5pbm5lckhUTUwgPSBnZXRNZXNzYWdlKHNldHRpbmdzKSArICc8bGFiZWwgY2xhc3M9XCJtYnNjLWlucHV0XCI+JyArIChzZXR0aW5ncy5sYWJlbCA/ICc8c3BhbiBjbGFzcz1cIm1ic2MtbGFiZWxcIj4nICsgc2V0dGluZ3MubGFiZWwgKyAnPC9zcGFuPicgOiAnJykgKyAnPGlucHV0IGNsYXNzPVwibWJzYy1jb250cm9sXCIgdGFiaW5kZXg9XCIwXCIgdHlwZT1cIicgKyAoc2V0dGluZ3MuaW5wdXRUeXBlIHx8ICd0ZXh0JykgKyAnXCIgcGxhY2Vob2xkZXI9XCInICsgKHNldHRpbmdzLnBsYWNlaG9sZGVyIHx8ICcnKSArICdcIiB2YWx1ZT1cIicgKyAoc2V0dGluZ3MudmFsdWUgfHwgJycpICsgJ1wiPicgKyAnPC9sYWJlbD4nO1xuICAgIHJldHVybiBzaG93KHNob3dQcm9tcHQsIHBvcHVwLCBzZXR0aW5ncyk7XG4gIH07XG5cbiAgbW9iaXNjcm9sbC5zbmFja2JhciA9IGZ1bmN0aW9uIChzZXR0aW5ncykge1xuICAgIHZhciBwb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICBidG4gPSBzZXR0aW5ncy5idXR0b247XG4gICAgcG9wdXAuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJtYnNjLXNuYWNrYmFyLWNvbnRcIj48ZGl2IGNsYXNzPVwibWJzYy1zbmFja2Jhci1tc2dcIj4nICsgKHNldHRpbmdzLm1lc3NhZ2UgfHwgJycpICsgJzwvZGl2PicgKyAoYnRuID8gJzxidXR0b24gY2xhc3M9XCJtYnNjLXNuYWNrYmFyLWJ0biBtYnNjLWJ0biBtYnNjLWJ0bi1mbGF0XCI+JyArIChidG4uaWNvbiA/ICc8c3BhbiBjbGFzcz1cIm1ic2MtaWMgJyArIChidG4udGV4dCA/ICdtYnNjLWJ0bi1pYyAnIDogJycpICsgJ21ic2MtaWMtJyArIGJ0bi5pY29uICsgJ1wiPjwvc3Bhbj4nIDogJycpICsgKGJ0bi50ZXh0IHx8ICcnKSArICc8L2J1dHRvbj4nIDogJycpICsgJzwvZGl2Pic7XG4gICAgcmV0dXJuIHNob3coc2hvd1NuYWNrYmFyLCBwb3B1cCwgc2V0dGluZ3MpO1xuICB9O1xuXG4gIG1vYmlzY3JvbGwudG9hc3QgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcbiAgICB2YXIgcG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwb3B1cC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cIm1ic2MtdG9hc3QtbXNnXCI+JyArIChzZXR0aW5ncy5tZXNzYWdlIHx8ICcnKSArICc8L2Rpdj4nO1xuICAgIHJldHVybiBzaG93KHNob3dUb2FzdCwgcG9wdXAsIHNldHRpbmdzKTtcbiAgfTtcblxuICBtb2Jpc2Nyb2xsLm5vdGlmaWNhdGlvbiA9IHtcbiAgICBkaXNtaXNzOiBmdW5jdGlvbiBkaXNtaXNzKCkge1xuICAgICAgaWYgKGFjdGl2ZU5vdGlmaWNhdGlvbikge1xuICAgICAgICBhY3RpdmVOb3RpZmljYXRpb24uaGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgaGFsZkJvcmRlciQxID0gb3MgPT0gJ2lvcycgJiYgbWFqb3JWZXJzaW9uID4gNztcbiAgdmFyIEZvcm0gPSBmdW5jdGlvbiBGb3JtKGVsLCBzZXR0aW5ncykge1xuICAgIHZhciBzLFxuICAgICAgICBjc3NDbGFzcyA9ICcnLFxuICAgICAgICAkY3R4ID0gJCQxKGVsKSxcbiAgICAgICAgY29udHJvbHMgPSB7fSxcbiAgICAgICAgdGhhdCA9IHRoaXM7XG5cbiAgICBmdW5jdGlvbiB0b3VjaGVkKCkge1xuICAgICAgJGN0eC5yZW1vdmVDbGFzcygnbWJzYy1uby10b3VjaCcpO1xuICAgIH0gLy8gQ2FsbCB0aGUgcGFyZW50IGNvbnN0cnVjdG9yXG5cblxuICAgIEJhc2UuY2FsbCh0aGlzLCBlbCwgc2V0dGluZ3MsIHRydWUpO1xuXG4gICAgdGhhdC5yZWZyZXNoID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgICAgIGlmIChzLmVuaGFuY2UpIHtcbiAgICAgICAgaW5pdENvbnRyb2xzKCRjdHgsIGNvbnRyb2xzLCBzLCBzaGFsbG93KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvcm0gaW5pdGlhbGl6YXRpb24uXG4gICAgICovXG5cblxuICAgIHRoYXQuX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIW1vYmlzY3JvbGwudGhlbWVzLmZvcm1bcy50aGVtZV0pIHtcbiAgICAgICAgcy50aGVtZSA9ICdtb2Jpc2Nyb2xsJztcbiAgICAgIH1cblxuICAgICAgaWYgKCEkY3R4Lmhhc0NsYXNzKCdtYnNjLWZvcm0nKSkge1xuICAgICAgICAkY3R4LnNob3coKTtcbiAgICAgICAgbGlzdGVuKCRjdHhbMF0sICd0b3VjaHN0YXJ0JywgdG91Y2hlZCwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjc3NDbGFzcykge1xuICAgICAgICAkY3R4LnJlbW92ZUNsYXNzKGNzc0NsYXNzKTtcbiAgICAgIH0gLy8gLS0tIFRSSUFMIFNFUlZFUiBDT0RFIFNUQVJUIC0tLVxuXG5cbiAgICAgIGNzc0NsYXNzID0gJ21ic2MtZm9ybSBtYnNjLW5vLXRvdWNoIG1ic2MtJyArIHMudGhlbWUgKyAoaGFsZkJvcmRlciQxID8gJyBtYnNjLWZvcm0taGInIDogJycpICsgKHMuYmFzZVRoZW1lID8gJyBtYnNjLScgKyBzLmJhc2VUaGVtZSA6ICcnKSArIChzLnJ0bCA/ICcgbWJzYy1ydGwnIDogJyBtYnNjLWx0cicpICsgKHMuaW5wdXRTdHlsZSA9PSAnYm94JyA/ICcgbWJzYy1mb3JtLWJveCcgOiAnJykgKyAocy5pbnB1dFN0eWxlID09ICdvdXRsaW5lJyA/ICcgbWJzYy1mb3JtLW91dGxpbmUnIDogJycpOyAvLyAtLS0gVFJJQUwgU0VSVkVSIENPREUgRU5EIC0tLVxuXG4gICAgICAkY3R4LmFkZENsYXNzKGNzc0NsYXNzKS5yZW1vdmVDbGFzcygnbWJzYy1jbG9haycpO1xuICAgICAgdGhhdC5yZWZyZXNoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgbW9iaXNjcm9sbCBpbnN0YW5jZS5cbiAgICAgKi9cblxuXG4gICAgdGhhdC5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICRjdHgucmVtb3ZlQ2xhc3MoY3NzQ2xhc3MpO1xuICAgICAgdW5saXN0ZW4oJGN0eFswXSwgJ3RvdWNoc3RhcnQnLCB0b3VjaGVkLCB7XG4gICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKHZhciBpZCBpbiBjb250cm9scykge1xuICAgICAgICBjb250cm9sc1tpZF0uZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogT2JqZWN0IHdpdGggdGhlIHVuZGVybHlpbmcgZm9ybSBjb250cm9sIGluc3RhbmNlc1xuICAgICAqIGtleXMgYXJlIHRoZSBlbGVtZW50IGlkJ3NcbiAgICAgKi9cblxuXG4gICAgdGhhdC5jb250cm9scyA9IGNvbnRyb2xzOyAvLyBDb25zdHJ1Y3RvclxuXG4gICAgcyA9IHRoYXQuc2V0dGluZ3M7XG4gICAgdGhhdC5pbml0KCk7XG4gIH07IC8vIEV4dGVuZCBkZWZhdWx0c1xuXG4gIEZvcm0ucHJvdG90eXBlID0ge1xuICAgIF9oYXNEZWY6IHRydWUsXG4gICAgX2hhc1RoZW1lOiB0cnVlLFxuICAgIF9oYXNMYW5nOiB0cnVlLFxuICAgIF9jbGFzczogJ2Zvcm0nLFxuICAgIF9kZWZhdWx0czoge1xuICAgICAgdGFwOiBoYXNHaG9zdENsaWNrLFxuICAgICAgc3RvcFByb3A6IHRydWUsXG4gICAgICBydGw6IGZhbHNlLFxuICAgICAgZW5oYW5jZTogdHJ1ZVxuICAgIH1cbiAgfTtcbiAgY2xhc3Nlcy5Gb3JtID0gRm9ybTsgLy8gSW5pdCBtYnNjLWZvcm0gZWxlbWVudHMgb24gcGFnZSBsb2FkXG5cbiAgYXV0b0luaXQoJ1ttYnNjLWVuaGFuY2VdLFttYnNjLWZvcm1dJywgRm9ybSwgdHJ1ZSk7XG5cbiAgdmFyIE1ic2NGb3JtID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNYnNjRm9ybSwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIE1ic2NGb3JtKGluaXRpYWxFbGVtLCBfZm9ybVNlcnZpY2UsIHpvbmUpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBpbml0aWFsRWxlbSwgem9uZSkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5fZm9ybVNlcnZpY2UgPSBfZm9ybVNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMuZW5oYW5jZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIE1ic2NGb3JtLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnNPYmogPSBleHRlbmQkMSh7fSwgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnNPYmo7XG4gICAgICB9O1xuICAgICAgTWJzY0Zvcm0ucHJvdG90eXBlLmluaXRDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgaWYgKG9wdCAmJiBvcHQuZW5oYW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG9wdC5lbmhhbmNlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBvcHRpb25zID0gZXh0ZW5kJDEoe30sIG9wdCwgdGhpcy5pbmxpbmVPcHRpb25zT2JqKTtcbiAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IEZvcm0odGhpcy5yb290RWxlbS5uYXRpdmVFbGVtZW50LCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICBNYnNjRm9ybS5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdtYnNjLWZvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkaXYgI3Jvb3RFbGVtZW50PjxuZy1jb250ZW50PjwvbmctY29udGVudD48L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtNYnNjT3B0aW9uc1NlcnZpY2VdLFxuICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydEFzOiAnbW9iaXNjcm9sbCdcbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NGb3JtLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY09wdGlvbnNTZXJ2aWNlLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY0Zvcm0ucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ29wdGlvbnMnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ29wdGlvbnMnLF0gfSxdLFxuICAgICAgICAgICdlbmhhbmNlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2NvbnRleHQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaW5wdXRTdHlsZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnaW5wdXQtc3R5bGUnLF0gfSxdLFxuICAgICAgICAgICdsYWJlbFN0eWxlJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydsYWJlbC1zdHlsZScsXSB9LF0sXG4gICAgICAgICAgJ3Jvb3RFbGVtJzogW3sgdHlwZTogY29yZS5WaWV3Q2hpbGQsIGFyZ3M6IFsncm9vdEVsZW1lbnQnLCB7IHN0YXRpYzogZmFsc2UgfSxdIH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY0Zvcm07XG4gIH0oTWJzY0Jhc2UpKTtcbiAgdmFyIE1ic2NUZXh0YXJlYSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY1RleHRhcmVhLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1RleHRhcmVhKGluaXRpYWxFbGVtLCBfZm9ybVNlcnZpY2UsIF9pbnB1dFNlcnZpY2UsIF9jb250cm9sLCB6b25lKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaW5pdGlhbEVsZW0sIF9mb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgX2NvbnRyb2wsIHpvbmUpIHx8IHRoaXM7XG4gICAgICAgICAgX3RoaXMuX2lucHV0U2VydmljZSA9IF9pbnB1dFNlcnZpY2U7XG4gICAgICAgICAgX2lucHV0U2VydmljZS5pbnB1dCA9IF90aGlzO1xuICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIE1ic2NUZXh0YXJlYS5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgVGV4dEFyZWEodGhpcy5faW5pdEVsZW0ubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgTWJzY1RleHRhcmVhLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ21ic2MtdGV4dGFyZWEnLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ21ic2MtY29udHJvbC1uZycgfSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgICAgICAgICA8bGFiZWwgXFxuICAgICAgICAgICAgICAgIFtjbGFzcy5tYnNjLWVycl09XFxcImVycm9yXFxcIlxcbiAgICAgICAgICAgICAgICBbY2xhc3MubWJzYy1pbnB1dC1ib3hdPVxcXCJpbnB1dFN0eWxlID09ICdib3gnXFxcIlxcbiAgICAgICAgICAgICAgICBbY2xhc3MubWJzYy1pbnB1dC1vdXRsaW5lXT1cXFwiaW5wdXRTdHlsZSA9PSAnb3V0bGluZSdcXFwiXFxuICAgICAgICAgICAgICAgIFtjbGFzcy5tYnNjLWxhYmVsLXN0YWNrZWRdPVxcXCJsYWJlbFN0eWxlID09ICdzdGFja2VkJ1xcXCJcXG4gICAgICAgICAgICAgICAgW2NsYXNzLm1ic2MtbGFiZWwtaW5saW5lXT1cXFwibGFiZWxTdHlsZSA9PSAnaW5saW5lJ1xcXCJcXG4gICAgICAgICAgICAgICAgW2NsYXNzLm1ic2MtbGFiZWwtZmxvYXRpbmddPVxcXCJsYWJlbFN0eWxlID09ICdmbG9hdGluZydcXFwiXFxuICAgICAgICAgICAgPlxcbiAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwibWJzYy1pbnB1dC13cmFwXFxcIj5cXG4gICAgICAgICAgICAgICAgPHRleHRhcmVhICNpbml0RWxlbWVudCBbcGxhY2Vob2xkZXJdPVxcXCJwbGFjZWhvbGRlclxcXCIgWyhuZ01vZGVsKV09XFxcImlubmVyVmFsdWVcXFwiIChibHVyKT1cXFwib25Ub3VjaCgkZXZlbnQpXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIubmFtZV09XFxcIm5hbWVcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5yb3dzXT1cXFwicm93c1xcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLndyYXBdPVxcXCJ3cmFwXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIubWlubGVuZ3RoXT1cXFwibWlubGVuZ3RoXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIubWF4bGVuZ3RoXT1cXFwibWF4bGVuZ3RoXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXV0b2NvbXBsZXRlXT1cXFwiYXV0b2NvbXBsZXRlXFxcIiBcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmF1dG9jYXBpdGFsaXplXT1cXFwiYXV0b2NhcGl0YWxpemVcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hdXRvY29ycmVjdF09XFxcImF1dG9jb3JyZWN0XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuc3BlbGxjaGVja109XFxcInNwZWxsY2hlY2tcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5hdXRvZm9jdXNdPVxcXCJhdXRvZm9jdXNcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5yZXF1aXJlZF09XFxcInJlcXVpcmVkXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1pY29uXT1cXFwiaWNvbiA/IGljb24gOiBudWxsXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1pY29uLWFsaWduXT1cXFwiaWNvbkFsaWduID8gaWNvbkFsaWduIDogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XFxcImRpc2FibGVkXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgW3JlYWRvbmx5XT1cXFwiX3JlYWRvbmx5XFxcIj48L3RleHRhcmVhPlxcbiAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cXFwiZXJyb3IgJiYgZXJyb3JNZXNzYWdlXFxcIiBjbGFzcz1cXFwibWJzYy1lcnItbXNnXFxcIj57e2Vycm9yTWVzc2FnZX19PC9zcGFuPlxcbiAgICAgICAgICAgIDwvc3Bhbj5cXG4gICAgICAgIDwvbGFiZWw+XFxuICAgIFwiLFxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW01ic2NJbnB1dFNlcnZpY2VdXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjVGV4dGFyZWEuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjT3B0aW9uc1NlcnZpY2UsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjSW5wdXRTZXJ2aWNlLCB9LFxuICAgICAgICAgIHsgdHlwZTogZm9ybXMuTmdDb250cm9sLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY1RleHRhcmVhLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdyb3dzJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3dyYXAnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY1RleHRhcmVhO1xuICB9KE1ic2NJbnB1dEJhc2UpKTtcbiAgdmFyIE1ic2NEcm9wZG93biA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY0Ryb3Bkb3duLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY0Ryb3Bkb3duKGhvc3RFbGVtLCBmb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgY29udHJvbCwgem9uZSkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGhvc3RFbGVtLCBmb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgY29udHJvbCwgem9uZSkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5faW5wdXRTZXJ2aWNlID0gX2lucHV0U2VydmljZTtcbiAgICAgICAgICBfaW5wdXRTZXJ2aWNlLmlucHV0ID0gX3RoaXM7XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NEcm9wZG93bi5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2O1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzLmluc3RhbmNlLl9zZXRUZXh0KCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY0Ryb3Bkb3duLnByb3RvdHlwZS5pbml0Q29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb3B0aW9ucyA9IGV4dGVuZCQxKHt9LCB0aGlzLl9pbmhlcml0ZWRPcHRpb25zLCB0aGlzLm9wdGlvbnMsIHRoaXMuaW5saW5lT3B0aW9uc09iaik7XG4gICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBTZWxlY3QodGhpcy5faW5pdEVsZW0ubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB0aGF0Lmluc3RhbmNlLl9zZXRUZXh0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgTWJzY0Ryb3Bkb3duLnByb3RvdHlwZS53cml0ZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB0aGlzLl92YWx1ZSA9IHY7XG4gICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgdmFyIHRoYXRfMSA9IHRoaXM7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgdGhhdF8xLmluc3RhbmNlLl9zZXRUZXh0KCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjRHJvcGRvd24uZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1kcm9wZG93bicsXG4gICAgICAgICAgICAgICAgICAgICAgaG9zdDogeyAnY2xhc3MnOiAnbWJzYy1jb250cm9sLW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICAgICAgICAgIDxsYWJlbCBcXG4gICAgICAgICAgICAgICAgW2NsYXNzLm1ic2MtZXJyXT1cXFwiZXJyb3JcXFwiXFxuICAgICAgICAgICAgICAgIFtjbGFzcy5tYnNjLWlucHV0LWJveF09XFxcImlucHV0U3R5bGUgPT0gJ2JveCdcXFwiXFxuICAgICAgICAgICAgICAgIFtjbGFzcy5tYnNjLWlucHV0LW91dGxpbmVdPVxcXCJpbnB1dFN0eWxlID09ICdvdXRsaW5lJ1xcXCJcXG4gICAgICAgICAgICAgICAgW2NsYXNzLm1ic2MtbGFiZWwtc3RhY2tlZF09XFxcImxhYmVsU3R5bGUgPT0gJ3N0YWNrZWQnXFxcIlxcbiAgICAgICAgICAgICAgICBbY2xhc3MubWJzYy1sYWJlbC1pbmxpbmVdPVxcXCJsYWJlbFN0eWxlID09ICdpbmxpbmUnXFxcIlxcbiAgICAgICAgICAgICAgICBbY2xhc3MubWJzYy1sYWJlbC1mbG9hdGluZ109XFxcImxhYmVsU3R5bGUgPT0gJ2Zsb2F0aW5nJ1xcXCJcXG4gICAgICAgICAgICA+XFxuICAgICAgICAgICAge3tsYWJlbH19XFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm1ic2MtaW5wdXQtd3JhcFxcXCI+XFxuICAgICAgICAgICAgICAgIDxzZWxlY3QgI2luaXRFbGVtZW50XFxuICAgICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cXFwiaW5uZXJWYWx1ZVxcXCIgXFxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5uYW1lXT1cXFwibmFtZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtaWNvbl09XFxcImljb24gPyBpY29uIDogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtaWNvbi1hbGlnbl09XFxcImljb25BbGlnbiA/IGljb25BbGlnbiA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgICAgICAgIChibHVyKT1cXFwib25Ub3VjaCgkZXZlbnQpXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XFxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVxcXCJlcnJvciAmJiBlcnJvck1lc3NhZ2VcXFwiIGNsYXNzPVxcXCJtYnNjLWVyci1tc2dcXFwiPnt7ZXJyb3JNZXNzYWdlfX08L3NwYW4+XFxuICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgPC9sYWJlbD5cXG4gICAgXCIsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbTWJzY0lucHV0U2VydmljZV1cbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NEcm9wZG93bi5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NJbnB1dFNlcnZpY2UsIH0sXG4gICAgICAgICAgeyB0eXBlOiBmb3Jtcy5OZ0NvbnRyb2wsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgIF07IH07XG4gICAgICBNYnNjRHJvcGRvd24ucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ2xhYmVsJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2ljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaWNvbkFsaWduJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydpY29uLWFsaWduJyxdIH0sXSxcbiAgICAgICAgICAndmFsdWUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaW5wdXRTdHlsZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnaW5wdXQtc3R5bGUnLF0gfSxdLFxuICAgICAgICAgICdsYWJlbFN0eWxlJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydsYWJlbC1zdHlsZScsXSB9LF0sXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1ic2NEcm9wZG93bjtcbiAgfShNYnNjRm9ybVZhbHVlQmFzZSkpO1xuICB2YXIgTWJzY0J1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY0J1dHRvbiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIE1ic2NCdXR0b24oaG9zdEVsZW0sIGZvcm1TZXJ2aWNlLCB6b25lKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaG9zdEVsZW0sIGZvcm1TZXJ2aWNlLCB6b25lKSB8fCB0aGlzO1xuICAgICAgICAgIF90aGlzLl9mbGF0ID0gZmFsc2U7XG4gICAgICAgICAgX3RoaXMuX2Jsb2NrID0gZmFsc2U7XG4gICAgICAgICAgX3RoaXMuX291dGxpbmUgPSBmYWxzZTtcbiAgICAgICAgICBfdGhpcy5fY2xhc3Nlc09iaiA9IHt9O1xuICAgICAgICAgIF90aGlzLnR5cGUgPSAnYnV0dG9uJztcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY0J1dHRvbi5wcm90b3R5cGUsIFwiY3NzQ2xhc3Nlc1wiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5fY2xhc3Nlc09iaikge1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2NsYXNzZXNPYmpba107XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5fY2xhc3Nlc09ialsnbWJzYy1idG4tZmxhdCddID0gdGhpcy5fZmxhdDtcbiAgICAgICAgICAgICAgdGhpcy5fY2xhc3Nlc09ialsnbWJzYy1idG4tYmxvY2snXSA9IHRoaXMuX2Jsb2NrO1xuICAgICAgICAgICAgICB0aGlzLl9jbGFzc2VzT2JqWydtYnNjLWJ0bi1vdXRsaW5lJ10gPSB0aGlzLl9vdXRsaW5lO1xuICAgICAgICAgICAgICBpZiAodGhpcy5jbGFzc2VzKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IHRoaXMuY2xhc3Nlcy5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgICAgaWYgKGNzc0NsYXNzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjc3NDbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjc3NDbGFzc2VzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGFzc2VzT2JqW2Nzc0NsYXNzZXNbaV1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fY2xhc3Nlc09ialsnbWJzYy1idG4tJyArIHRoaXMuY29sb3JdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2xhc3Nlc09iajtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjQnV0dG9uLnByb3RvdHlwZSwgXCJmbGF0XCIsIHtcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZmxhdCA9IGVtcHR5T3JUcnVlKHZhbCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY0J1dHRvbi5wcm90b3R5cGUsIFwiYmxvY2tcIiwge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICB0aGlzLl9ibG9jayA9IGVtcHR5T3JUcnVlKHZhbCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY0J1dHRvbi5wcm90b3R5cGUsIFwib3V0bGluZVwiLCB7XG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgIHRoaXMuX291dGxpbmUgPSBlbXB0eU9yVHJ1ZSh2YWwpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY0J1dHRvbi5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgQnV0dG9uKHRoaXMuX2luaXRFbGVtLm5hdGl2ZUVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIE1ic2NCdXR0b24uZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1idXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICAgICAgPGJ1dHRvbiAjaW5pdEVsZW1lbnQgXFxuICAgICAgICAgICAgW3R5cGVdPVxcXCJ0eXBlXFxcIlxcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cXFwiY3NzQ2xhc3Nlc1xcXCJcXG4gICAgICAgICAgICBbYXR0ci5uYW1lXT1cXFwibmFtZVxcXCJcXG4gICAgICAgICAgICBbYXR0ci5kYXRhLWljb25dPVxcXCJpY29uID8gaWNvbiA6IG51bGxcXFwiXFxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cXFwiZGlzYWJsZWRcXFwiPlxcbiAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICBcIixcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IGNvcmUuQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjQnV0dG9uLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY09wdGlvbnNTZXJ2aWNlLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY0J1dHRvbi5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICAgICAnY2xhc3Nlcyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnY2xhc3MnLF0gfSxdLFxuICAgICAgICAgICd0eXBlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2ljb24nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZmxhdCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdibG9jayc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdvdXRsaW5lJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1ic2NCdXR0b247XG4gIH0oTWJzY0Zvcm1CYXNlKSk7XG4gIHZhciBNYnNjQ2hlY2tib3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1ic2NDaGVja2JveCwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIE1ic2NDaGVja2JveChob3N0RWxlbSwgY2RyLCBmb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgY29udHJvbCwgem9uZSkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGhvc3RFbGVtLCBmb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgY29udHJvbCwgem9uZSkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5jZHIgPSBjZHI7XG4gICAgICAgICAgX3RoaXMuX2NvbG9yQ2xhc3MgPSB7fTtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY0NoZWNrYm94LnByb3RvdHlwZSwgXCJjb2xvckNsYXNzXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9jb2xvckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29sb3JDbGFzc1trXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JDbGFzc1snbWJzYy1jaGVja2JveC0nICsgdGhpcy5jb2xvcl0gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9jb2xvckNsYXNzWydtYnNjLWVyciddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JDbGFzcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NDaGVja2JveC5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgQ2hlY2tCb3godGhpcy5faW5pdEVsZW0ubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgTWJzY0NoZWNrYm94LnByb3RvdHlwZS53cml0ZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB0aGlzLl92YWx1ZSA9IHY7XG4gICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgfTtcbiAgICAgIE1ic2NDaGVja2JveC5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdtYnNjLWNoZWNrYm94JyxcbiAgICAgICAgICAgICAgICAgICAgICBob3N0OiB7ICdjbGFzcyc6ICdtYnNjLWNvbnRyb2wtbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8bGFiZWwgW25nQ2xhc3NdPVxcXCJjb2xvckNsYXNzXFxcIj5cXG4gICAgICAgICAgICA8aW5wdXQgI2luaXRFbGVtZW50IFxcbiAgICAgICAgICAgICAgICB0eXBlPVxcXCJjaGVja2JveFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIubmFtZV09XFxcIm5hbWVcXFwiXFxuICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XFxcImRpc2FibGVkXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWxhYmVsLXN0eWxlXT1cXFwibGFiZWxTdHlsZVxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1pbnB1dC1zdHlsZV09XFxcImlucHV0U3R5bGVcXFwiXFxuICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVxcXCJpbm5lclZhbHVlXFxcIlxcbiAgICAgICAgICAgICAgICAoYmx1cik9XFxcIm9uVG91Y2goJGV2ZW50KVxcXCIgLz5cXG4gICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XFxcImVycm9yICYmIGVycm9yTWVzc2FnZVxcXCIgY2xhc3M9XFxcIm1ic2MtZXJyLW1zZ1xcXCI+e3tlcnJvck1lc3NhZ2V9fTwvc3Bhbj5cXG4gICAgICAgIDwvbGFiZWw+XFxuICAgIFwiLFxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogY29yZS5DaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NDaGVja2JveC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ2hhbmdlRGV0ZWN0b3JSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjT3B0aW9uc1NlcnZpY2UsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjSW5wdXRTZXJ2aWNlLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogZm9ybXMuTmdDb250cm9sLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY0NoZWNrYm94LnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdjb2xvcic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdpbnB1dFN0eWxlJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWydpbnB1dC1zdHlsZScsXSB9LF0sXG4gICAgICAgICAgJ2xhYmVsU3R5bGUnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ2xhYmVsLXN0eWxlJyxdIH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY0NoZWNrYm94O1xuICB9KE1ic2NGb3JtVmFsdWVCYXNlKSk7XG4gIHZhciBNYnNjU3dpdGNoID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNYnNjU3dpdGNoLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1N3aXRjaChob3N0RWxlbSwgem9uZSwgX2Zvcm1TZXJ2aWNlLCBjb250cm9sKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaG9zdEVsZW0sIHpvbmUsIGNvbnRyb2wsIG51bGwsIG51bGwpIHx8IHRoaXM7XG4gICAgICAgICAgX3RoaXMuX2Zvcm1TZXJ2aWNlID0gX2Zvcm1TZXJ2aWNlO1xuICAgICAgICAgIF90aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgX3RoaXMub25DaGFuZ2VFbWl0dGVyID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgICAgX3RoaXMuX2NvbG9yQ2xhc3MgPSB7fTtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY1N3aXRjaC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXROZXdWYWx1ZVByb3h5KHYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NTd2l0Y2gucHJvdG90eXBlLCBcImNvbG9yQ2xhc3NcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHRoaXMuX2NvbG9yQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb2xvckNsYXNzW2tdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh0aGlzLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9jb2xvckNsYXNzWydtYnNjLXN3aXRjaC0nICsgdGhpcy5jb2xvcl0gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9jb2xvckNsYXNzWydtYnNjLWVyciddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JDbGFzcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NTd2l0Y2gucHJvdG90eXBlLnNldE5ld1ZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5nZXRWYWwoKSAhPT0gdikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXRWYWwodiwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NTd2l0Y2gucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuX2luaGVyaXRlZE9wdGlvbnMgPSB0aGlzLl9mb3JtU2VydmljZSA/IHRoaXMuX2Zvcm1TZXJ2aWNlLm9wdGlvbnMgOiB7fTtcbiAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5nT25Jbml0LmNhbGwodGhpcyk7XG4gICAgICB9O1xuICAgICAgTWJzY1N3aXRjaC5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgU3dpdGNoKHRoaXMuX2luaXRFbGVtLm5hdGl2ZUVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0VmFsKHRoaXMuaW5pdGlhbFZhbHVlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NTd2l0Y2guZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ21ic2MtY29udHJvbC1uZycgfSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgICAgIDxsYWJlbCBbbmdDbGFzc109XFxcImNvbG9yQ2xhc3NcXFwiPlxcbiAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cXFwiZXJyb3IgJiYgZXJyb3JNZXNzYWdlXFxcIiBjbGFzcz1cXFwibWJzYy1lcnItbXNnXFxcIj57e2Vycm9yTWVzc2FnZX19PC9zcGFuPlxcbiAgICAgICAgICAgIDxpbnB1dCAjaW5pdEVsZW1lbnQgXFxuICAgICAgICAgICAgICAgIHR5cGU9XFxcImNoZWNrYm94XFxcIlxcbiAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XFxcInN3aXRjaFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIubmFtZV09XFxcIm5hbWVcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtbGFiZWwtc3R5bGVdPVxcXCJsYWJlbFN0eWxlXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWlucHV0LXN0eWxlXT1cXFwiaW5wdXRTdHlsZVxcXCJcXG4gICAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cXFwiZGlzYWJsZWRcXFwiXFxuICAgICAgICAgICAgICAgIChibHVyKT1cXFwib25Ub3VjaCgkZXZlbnQpXFxcIiAvPlxcbiAgICAgICAgPC9sYWJlbD5cXG4gICAgXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QXM6ICdtb2Jpc2Nyb2xsJyxcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IGNvcmUuQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjU3dpdGNoLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjT3B0aW9uc1NlcnZpY2UsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBmb3Jtcy5OZ0NvbnRyb2wsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY1N3aXRjaC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICAgICAnb3B0aW9ucyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnb3B0aW9ucycsXSB9LF0sXG4gICAgICAgICAgJ2Rpc2FibGVkJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ25hbWUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnY29sb3InOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZXJyb3InOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZXJyb3JNZXNzYWdlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3ZhbHVlJzogW3sgdHlwZTogY29yZS5JbnB1dCwgYXJnczogWyd2YWx1ZScsXSB9LF0sXG4gICAgICAgICAgJ29uQ2hhbmdlRW1pdHRlcic6IFt7IHR5cGU6IGNvcmUuT3V0cHV0LCBhcmdzOiBbJ3ZhbHVlQ2hhbmdlJyxdIH0sXSxcbiAgICAgICAgICAnX2luaXRFbGVtJzogW3sgdHlwZTogY29yZS5WaWV3Q2hpbGQsIGFyZ3M6IFsnaW5pdEVsZW1lbnQnLCB7IHN0YXRpYzogZmFsc2UgfSxdIH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY1N3aXRjaDtcbiAgfShNYnNjQ29udHJvbEJhc2UpKTtcbiAgdmFyIE1ic2NTdGVwcGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNYnNjU3RlcHBlciwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIE1ic2NTdGVwcGVyKGhvc3RFbGVtZW50LCB6b25lLCBfZm9ybVNlcnZpY2UsIGNvbnRyb2wpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBob3N0RWxlbWVudCwgem9uZSwgY29udHJvbCwgbnVsbCwgbnVsbCkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5fZm9ybVNlcnZpY2UgPSBfZm9ybVNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMubWluID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLm1heCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBfdGhpcy5zdGVwID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLnZhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBfdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIF90aGlzLl9jb2xvckNsYXNzID0ge307XG4gICAgICAgICAgX3RoaXMub25DaGFuZ2VFbWl0dGVyID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NTdGVwcGVyLnByb3RvdHlwZSwgXCJyZWFkb25seVwiLCB7XG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3JlYWRvbmx5ID0gZW1wdHlPclRydWUodmFsKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjU3RlcHBlci5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXROZXdWYWx1ZVByb3h5KHYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NTdGVwcGVyLnByb3RvdHlwZSwgXCJjb2xvckNsYXNzXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9jb2xvckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29sb3JDbGFzc1trXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JDbGFzc1snbWJzYy1zdGVwcGVyLScgKyB0aGlzLmNvbG9yXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yQ2xhc3M7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBNYnNjU3RlcHBlci5wcm90b3R5cGUuc2V0TmV3VmFsdWUgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgIGlmICh0aGlzLmluc3RhbmNlICYmIHRoaXMuaW5zdGFuY2UuZ2V0VmFsKCkgIT09IHYpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXRWYWwodiwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjU3RlcHBlci5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5faW5oZXJpdGVkT3B0aW9ucyA9IHRoaXMuX2Zvcm1TZXJ2aWNlID8gdGhpcy5fZm9ybVNlcnZpY2Uub3B0aW9ucyA6IHt9O1xuICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUubmdPbkluaXQuY2FsbCh0aGlzKTtcbiAgICAgIH07XG4gICAgICBNYnNjU3RlcHBlci5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgU3RlcHBlcih0aGlzLl9pbml0RWxlbS5uYXRpdmVFbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICBpZiAodGhpcy5pbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnNldFZhbCh0aGlzLmluaXRpYWxWYWx1ZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjU3RlcHBlci5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdtYnNjLXN0ZXBwZXInLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ21ic2MtY29udHJvbC1uZycgfSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJcXG4gICAgICAgIDxkaXYgW25nQ2xhc3NdPVxcXCJjb2xvckNsYXNzXFxcIj5cXG4gICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgICAgICAgPGlucHV0ICNpbml0RWxlbWVudFxcbiAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XFxcInN0ZXBwZXJcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLm5hbWVdPVxcXCJuYW1lXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5taW5dPVxcXCJtaW4gIT09IHVuZGVmaW5lZCA/IG1pbiA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLm1heF09XFxcIm1heCAhPT0gdW5kZWZpbmVkID8gbWF4IDogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIuc3RlcF09XFxcInN0ZXAgIT09IHVuZGVmaW5lZCA/IHN0ZXAgOiBudWxsXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLXZhbF09XFxcInZhbCA/IHZhbCA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtbGFiZWwtc3R5bGVdPVxcXCJsYWJlbFN0eWxlXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWlucHV0LXN0eWxlXT1cXFwiaW5wdXRTdHlsZVxcXCJcXG4gICAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cXFwiZGlzYWJsZWRcXFwiIFxcbiAgICAgICAgICAgICAgICBbcmVhZG9ubHldPVxcXCJfcmVhZG9ubHlcXFwiLz5cXG4gICAgICAgIDwvZGl2PlxcbiAgICBcIixcbiAgICAgICAgICAgICAgICAgICAgICBleHBvcnRBczogJ21vYmlzY3JvbGwnLFxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogY29yZS5DaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NTdGVwcGVyLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjT3B0aW9uc1NlcnZpY2UsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBmb3Jtcy5OZ0NvbnRyb2wsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY1N0ZXBwZXIucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ3JlYWRvbmx5JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ29wdGlvbnMnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ29wdGlvbnMnLF0gfSxdLFxuICAgICAgICAgICd2YWx1ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICduYW1lJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ21pbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdtYXgnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc3RlcCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICd2YWwnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZGlzYWJsZWQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnY29sb3InOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnb25DaGFuZ2VFbWl0dGVyJzogW3sgdHlwZTogY29yZS5PdXRwdXQsIGFyZ3M6IFsndmFsdWVDaGFuZ2UnLF0gfSxdLFxuICAgICAgICAgICdfaW5pdEVsZW0nOiBbeyB0eXBlOiBjb3JlLlZpZXdDaGlsZCwgYXJnczogWydpbml0RWxlbWVudCcsIHsgc3RhdGljOiBmYWxzZSB9LF0gfSxdLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBNYnNjU3RlcHBlcjtcbiAgfShNYnNjQ29udHJvbEJhc2UpKTtcbiAgdmFyIE1ic2NQcm9ncmVzcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY1Byb2dyZXNzLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1Byb2dyZXNzKGhvc3RFbGVtZW50LCB6b25lLCBfZm9ybVNlcnZpY2UsIGNvbnRyb2wpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBob3N0RWxlbWVudCwgem9uZSwgY29udHJvbCwgbnVsbCwgbnVsbCkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5fZm9ybVNlcnZpY2UgPSBfZm9ybVNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMubWF4ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLmljb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgX3RoaXMuaWNvbkFsaWduID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLnZhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBfdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIF90aGlzLl9jb2xvckNsYXNzID0ge307XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NQcm9ncmVzcy5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXROZXdWYWx1ZVByb3h5KHYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NQcm9ncmVzcy5wcm90b3R5cGUsIFwiZGF0YVN0ZXBMYWJlbHNcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLnN0ZXBMYWJlbHMpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RlcExhYmVscztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY1Byb2dyZXNzLnByb3RvdHlwZSwgXCJjb2xvckNsYXNzXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9jb2xvckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29sb3JDbGFzc1trXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JDbGFzc1snbWJzYy1wcm9ncmVzcy0nICsgdGhpcy5jb2xvcl0gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb2xvckNsYXNzO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY1Byb2dyZXNzLnByb3RvdHlwZS5zZXROZXdWYWx1ZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UgJiYgdGhpcy5pbnN0YW5jZS5nZXRWYWwoKSAhPT0gdikge1xuICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnNldFZhbCh2LCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NQcm9ncmVzcy5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5faW5oZXJpdGVkT3B0aW9ucyA9IHRoaXMuX2Zvcm1TZXJ2aWNlID8gdGhpcy5fZm9ybVNlcnZpY2Uub3B0aW9ucyA6IHt9O1xuICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUubmdPbkluaXQuY2FsbCh0aGlzKTtcbiAgICAgIH07XG4gICAgICBNYnNjUHJvZ3Jlc3MucHJvdG90eXBlLmluaXRDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvcHRpb25zID0gZXh0ZW5kJDEoe30sIHRoaXMuX2luaGVyaXRlZE9wdGlvbnMsIHRoaXMub3B0aW9ucywgdGhpcy5pbmxpbmVPcHRpb25zT2JqKTtcbiAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IFByb2dyZXNzKHRoaXMuX2luaXRFbGVtLm5hdGl2ZUVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0VmFsKHRoaXMuaW5pdGlhbFZhbHVlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NQcm9ncmVzcy5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdtYnNjLXByb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICBob3N0OiB7ICdjbGFzcyc6ICdtYnNjLWNvbnRyb2wtbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8bGFiZWwgW25nQ2xhc3NdPVxcXCJjb2xvckNsYXNzXFxcIj5cXG4gICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgICAgICAgPHByb2dyZXNzICNpbml0RWxlbWVudFxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLXN0ZXAtbGFiZWxzXT1cXFwiZGF0YVN0ZXBMYWJlbHNcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtaWNvbl09XFxcImljb24gPyBpY29uIDogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1pY29uLWFsaWduXT1cXFwiaWNvbkFsaWduID8gaWNvbkFsaWduIDogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1sYWJlbC1zdHlsZV09XFxcImxhYmVsU3R5bGVcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtaW5wdXQtc3R5bGVdPVxcXCJpbnB1dFN0eWxlXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5tYXhdPVxcXCJtYXggIT09IHVuZGVmaW5lZCA/IG1heCA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtdmFsXT1cXFwidmFsICE9PSB1bmRlZmluZWQgPyB2YWwgOiBudWxsXFxcIlxcbiAgICAgICAgICAgID5cXG4gICAgICAgICAgICA8L3Byb2dyZXNzPlxcbiAgICAgICAgPC9sYWJlbD5cXG4gICAgXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QXM6ICdtb2Jpc2Nyb2xsJyxcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IGNvcmUuQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjUHJvZ3Jlc3MuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IGZvcm1zLk5nQ29udHJvbCwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgIF07IH07XG4gICAgICBNYnNjUHJvZ3Jlc3MucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ29wdGlvbnMnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ29wdGlvbnMnLF0gfSxdLFxuICAgICAgICAgICd2YWx1ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdtYXgnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaWNvbic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdpY29uQWxpZ24nOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ2ljb24tYWxpZ24nLF0gfSxdLFxuICAgICAgICAgICd2YWwnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZGlzYWJsZWQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc3RlcExhYmVscyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnc3RlcC1sYWJlbHMnLF0gfSxdLFxuICAgICAgICAgICdjb2xvcic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdfaW5pdEVsZW0nOiBbeyB0eXBlOiBjb3JlLlZpZXdDaGlsZCwgYXJnczogWydpbml0RWxlbWVudCcsIHsgc3RhdGljOiBmYWxzZSB9LF0gfSxdLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBNYnNjUHJvZ3Jlc3M7XG4gIH0oTWJzY0NvbnRyb2xCYXNlKSk7XG4gIHZhciBncm91cE5hbWUgPSAxO1xuICB2YXIgTWJzY1JhZGlvU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYnNjUmFkaW9TZXJ2aWNlKCkge1xuICAgICAgICAgIHRoaXMuX2xhc3RWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgdGhpcy5fdmFsdWVPYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjUmFkaW9TZXJ2aWNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLl9uYW1lKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9uYW1lID0gJ21ic2MtcmFkaW8tZ3JvdXAtJyArIChncm91cE5hbWUrKyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgIHRoaXMuX25hbWUgPSBuO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NSYWRpb1NlcnZpY2UucHJvdG90eXBlLCBcIm11bHRpU2VsZWN0XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpU2VsZWN0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICB0aGlzLl9tdWx0aVNlbGVjdCA9IHY7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBNYnNjUmFkaW9TZXJ2aWNlLnByb3RvdHlwZS5vblZhbHVlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVPYnNlcnZhYmxlO1xuICAgICAgfTtcbiAgICAgIE1ic2NSYWRpb1NlcnZpY2UucHJvdG90eXBlLmNoYW5nZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB0aGlzLl92YWx1ZU9ic2VydmFibGUubmV4dCh2KTtcbiAgICAgICAgICB0aGlzLl9sYXN0VmFsdWUgPSB2O1xuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjUmFkaW9TZXJ2aWNlLnByb3RvdHlwZSwgXCJnZXRMYXN0VmFsdWVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbGFzdFZhbHVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NSYWRpb1NlcnZpY2UucHJvdG90eXBlLCBcImNvbG9yXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICB0aGlzLl9jb2xvciA9IHY7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBNYnNjUmFkaW9TZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkluamVjdGFibGUgfSxcbiAgICAgIF07XG4gICAgICBNYnNjUmFkaW9TZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4gICAgICByZXR1cm4gTWJzY1JhZGlvU2VydmljZTtcbiAgfSgpKTtcbiAgdmFyIE1ic2NSYWRpb0dyb3VwQmFzZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY1JhZGlvR3JvdXBCYXNlLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1JhZGlvR3JvdXBCYXNlKGhvc3RFbGVtZW50LCBmb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgX3JhZGlvU2VydmljZSwgY29udHJvbCwgem9uZSkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGhvc3RFbGVtZW50LCBmb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgY29udHJvbCwgem9uZSkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5fcmFkaW9TZXJ2aWNlID0gX3JhZGlvU2VydmljZTtcbiAgICAgICAgICBfdGhpcy52YWx1ZU9ic2VydmVyID0gX3RoaXMuX3JhZGlvU2VydmljZS5vblZhbHVlQ2hhbmdlZCgpLnN1YnNjcmliZShmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICBfdGhpcy5pbm5lclZhbHVlID0gdjtcbiAgICAgICAgICAgICAgX3RoaXMub25Ub3VjaCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjUmFkaW9Hcm91cEJhc2UucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdjtcbiAgICAgICAgICAgICAgdGhpcy5fcmFkaW9TZXJ2aWNlLmNoYW5nZVZhbHVlKHYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY1JhZGlvR3JvdXBCYXNlLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5nT25Jbml0LmNhbGwodGhpcyk7XG4gICAgICAgICAgaWYgKHRoaXMubmFtZSkge1xuICAgICAgICAgICAgICB0aGlzLl9yYWRpb1NlcnZpY2UubmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuY29sb3IpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcmFkaW9TZXJ2aWNlLmNvbG9yID0gdGhpcy5jb2xvcjtcbiAgICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTWJzY1JhZGlvR3JvdXBCYXNlLnByb3RvdHlwZS53cml0ZVZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB0aGlzLl92YWx1ZSA9IHY7XG4gICAgICAgICAgdGhpcy5fcmFkaW9TZXJ2aWNlLmNoYW5nZVZhbHVlKHYpO1xuICAgICAgfTtcbiAgICAgIE1ic2NSYWRpb0dyb3VwQmFzZS5wcm90b3R5cGUudXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgIE1ic2NSYWRpb0dyb3VwQmFzZS5wcm90b3R5cGUubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5fcmFkaW9TZXJ2aWNlLm9uVmFsdWVDaGFuZ2VkKCkudW5zdWJzY3JpYmUodGhpcy52YWx1ZU9ic2VydmVyKTtcbiAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5nT25EZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICB9O1xuICAgICAgTWJzY1JhZGlvR3JvdXBCYXNlLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkRpcmVjdGl2ZSwgYXJnczogW3sgc2VsZWN0b3I6ICdbbWJzYy1yZy1iXScgfSxdIH0sXG4gICAgICBdO1xuICAgICAgTWJzY1JhZGlvR3JvdXBCYXNlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY09wdGlvbnNTZXJ2aWNlLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY0lucHV0U2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NSYWRpb1NlcnZpY2UsIH0sXG4gICAgICAgICAgeyB0eXBlOiBmb3Jtcy5OZ0NvbnRyb2wsIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgIF07IH07XG4gICAgICBNYnNjUmFkaW9Hcm91cEJhc2UucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ25hbWUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAndmFsdWUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY1JhZGlvR3JvdXBCYXNlO1xuICB9KE1ic2NGb3JtVmFsdWVCYXNlKSk7XG4gIHZhciBNYnNjUmFkaW9Hcm91cCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY1JhZGlvR3JvdXAsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBNYnNjUmFkaW9Hcm91cChob3N0RWxlbWVudCwgZm9ybVNlcnZpY2UsIF9pbnB1dFNlcnZpY2UsIHJhZGlvU2VydmljZSwgY29udHJvbCwgem9uZSkge1xuICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBob3N0RWxlbWVudCwgZm9ybVNlcnZpY2UsIF9pbnB1dFNlcnZpY2UsIHJhZGlvU2VydmljZSwgY29udHJvbCwgem9uZSkgfHwgdGhpcztcbiAgICAgIH1cbiAgICAgIE1ic2NSYWRpb0dyb3VwLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ21ic2MtcmFkaW8tZ3JvdXAnLFxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cIixcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtNYnNjUmFkaW9TZXJ2aWNlXVxuICAgICAgICAgICAgICAgICAgfSxdIH0sXG4gICAgICBdO1xuICAgICAgTWJzY1JhZGlvR3JvdXAuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjT3B0aW9uc1NlcnZpY2UsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjSW5wdXRTZXJ2aWNlLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY1JhZGlvU2VydmljZSwgfSxcbiAgICAgICAgICB7IHR5cGU6IGZvcm1zLk5nQ29udHJvbCwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdab25lLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIHJldHVybiBNYnNjUmFkaW9Hcm91cDtcbiAgfShNYnNjUmFkaW9Hcm91cEJhc2UpKTtcbiAgdmFyIE1ic2NSYWRpbyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY1JhZGlvLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1JhZGlvKGhvc3RFbGVtZW50LCBmb3JtU2VydmljZSwgX3JhZGlvU2VydmljZSwgem9uZSkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGhvc3RFbGVtZW50LCBmb3JtU2VydmljZSwgem9uZSkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5fcmFkaW9TZXJ2aWNlID0gX3JhZGlvU2VydmljZTtcbiAgICAgICAgICBfdGhpcy5fY29sb3JDbGFzcyA9IHt9O1xuICAgICAgICAgIHZhciB2ID0gX3RoaXMuX3JhZGlvU2VydmljZS5nZXRMYXN0VmFsdWU7XG4gICAgICAgICAgaWYgKHYgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgX3RoaXMubW9kZWxWYWx1ZSA9IHY7XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzLnZhbHVlT2JzZXJ2ZXIgPSBfdGhpcy5fcmFkaW9TZXJ2aWNlLm9uVmFsdWVDaGFuZ2VkKCkuc3Vic2NyaWJlKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgIF90aGlzLm1vZGVsVmFsdWUgPSB2O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjUmFkaW8ucHJvdG90eXBlLCBcImNoZWNrZWRcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PSB0aGlzLm1vZGVsVmFsdWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY1JhZGlvLnByb3RvdHlwZSwgXCJjb2xvckNsYXNzXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9jb2xvckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29sb3JDbGFzc1trXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JDbGFzc1snbWJzYy1yYWRpby0nICsgdGhpcy5jb2xvcl0gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9jb2xvckNsYXNzWydtYnNjLWVyciddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JDbGFzcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NSYWRpby5wcm90b3R5cGUuY2xpY2tlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdGhpcy5fcmFkaW9TZXJ2aWNlLmNoYW5nZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgfTtcbiAgICAgIE1ic2NSYWRpby5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgUmFkaW8odGhpcy5faW5pdEVsZW0ubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgTWJzY1JhZGlvLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5nT25Jbml0LmNhbGwodGhpcyk7XG4gICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5fcmFkaW9TZXJ2aWNlLm5hbWU7XG4gICAgICAgICAgdGhpcy5jb2xvciA9IHRoaXMuX3JhZGlvU2VydmljZS5jb2xvcjtcbiAgICAgIH07XG4gICAgICBNYnNjUmFkaW8ucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuX3JhZGlvU2VydmljZS5vblZhbHVlQ2hhbmdlZCgpLnVuc3Vic2NyaWJlKHRoaXMudmFsdWVPYnNlcnZlcik7XG4gICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZ09uRGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgfTtcbiAgICAgIE1ic2NSYWRpby5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdtYnNjLXJhZGlvJyxcbiAgICAgICAgICAgICAgICAgICAgICBob3N0OiB7ICdjbGFzcyc6ICdtYnNjLWNvbnRyb2wtbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8bGFiZWwgW25nQ2xhc3NdPVxcXCJjb2xvckNsYXNzXFxcIj5cXG4gICAgICAgICAgICA8aW5wdXQgI2luaXRFbGVtZW50IFxcbiAgICAgICAgICAgICAgICB0eXBlPVxcXCJyYWRpb1xcXCIgXFxuICAgICAgICAgICAgICAgIFthdHRyLm5hbWVdPVxcXCJuYW1lXFxcIiBcXG4gICAgICAgICAgICAgICAgW2F0dHIudmFsdWVdPVxcXCJ2YWx1ZVxcXCJcXG4gICAgICAgICAgICAgICAgW3ZhbHVlXT1cXFwidmFsdWVcXFwiIFxcbiAgICAgICAgICAgICAgICBbY2hlY2tlZF09XFxcImNoZWNrZWRcXFwiXFxuICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XFxcImRpc2FibGVkXFxcIlxcbiAgICAgICAgICAgICAgICAoY2xpY2spPVxcXCJjbGlja2VkKCRldmVudClcXFwiIC8+XFxuICAgICAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxcbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVxcXCJlcnJvciAmJiBlcnJvck1lc3NhZ2VcXFwiIGNsYXNzPVxcXCJtYnNjLWVyci1tc2dcXFwiPnt7ZXJyb3JNZXNzYWdlfX08L3NwYW4+XFxuICAgICAgICA8L2xhYmVsPlxcbiAgICBcIlxuICAgICAgICAgICAgICAgICAgfSxdIH0sXG4gICAgICBdO1xuICAgICAgTWJzY1JhZGlvLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY09wdGlvbnNTZXJ2aWNlLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogTWJzY1JhZGlvU2VydmljZSwgfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdab25lLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NSYWRpby5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICAgICAndmFsdWUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZXJyb3InOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZXJyb3JNZXNzYWdlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1ic2NSYWRpbztcbiAgfShNYnNjRm9ybUJhc2UpKTtcbiAgdmFyIE1ic2NTZWdtZW50ZWRHcm91cCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY1NlZ21lbnRlZEdyb3VwLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1NlZ21lbnRlZEdyb3VwKGhvc3RFbGVtZW50LCBmb3JtU2VydmljZSwgX2lucHV0U2VydmljZSwgcmFkaW9TZXJ2aWNlLCBjb250cm9sLCB6b25lKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaG9zdEVsZW1lbnQsIGZvcm1TZXJ2aWNlLCBfaW5wdXRTZXJ2aWNlLCByYWRpb1NlcnZpY2UsIGNvbnRyb2wsIHpvbmUpIHx8IHRoaXM7XG4gICAgICAgICAgX3RoaXMuc2VsZWN0ID0gJ3NpbmdsZSc7XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NTZWdtZW50ZWRHcm91cC5wcm90b3R5cGUsIFwibXVsdGlTZWxlY3RcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3QgPT0gJ211bHRpcGxlJztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NTZWdtZW50ZWRHcm91cC5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZ09uSW5pdC5jYWxsKHRoaXMpO1xuICAgICAgICAgIHRoaXMuX3JhZGlvU2VydmljZS5tdWx0aVNlbGVjdCA9IHRoaXMubXVsdGlTZWxlY3Q7XG4gICAgICAgICAgaWYgKHRoaXMuY29sb3IpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcmFkaW9TZXJ2aWNlLmNvbG9yID0gdGhpcy5jb2xvcjtcbiAgICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTWJzY1NlZ21lbnRlZEdyb3VwLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ21ic2Mtc2VnbWVudGVkLWdyb3VwJyxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJtYnNjLXNlZ21lbnRlZCBtYnNjLXNlZ21lbnRlZC1ncm91cCBtYnNjLW5vLXRvdWNoXFxcIj48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbTWJzY1JhZGlvU2VydmljZV1cbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NTZWdtZW50ZWRHcm91cC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NJbnB1dFNlcnZpY2UsIGRlY29yYXRvcnM6IFt7IHR5cGU6IGNvcmUuT3B0aW9uYWwgfSxdIH0sXG4gICAgICAgICAgeyB0eXBlOiBNYnNjUmFkaW9TZXJ2aWNlLCB9LFxuICAgICAgICAgIHsgdHlwZTogZm9ybXMuTmdDb250cm9sLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ1pvbmUsIH0sXG4gICAgICBdOyB9O1xuICAgICAgTWJzY1NlZ21lbnRlZEdyb3VwLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdzZWxlY3QnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY1NlZ21lbnRlZEdyb3VwO1xuICB9KE1ic2NSYWRpb0dyb3VwQmFzZSkpO1xuICB2YXIgTWJzY1NlZ21lbnRlZCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoTWJzY1NlZ21lbnRlZCwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIE1ic2NTZWdtZW50ZWQoaG9zdEVsZW1lbnQsIGZvcm1TZXJ2aWNlLCBfcmFkaW9TZXJ2aWNlLCB6b25lKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaG9zdEVsZW1lbnQsIGZvcm1TZXJ2aWNlLCB6b25lKSB8fCB0aGlzO1xuICAgICAgICAgIF90aGlzLl9yYWRpb1NlcnZpY2UgPSBfcmFkaW9TZXJ2aWNlO1xuICAgICAgICAgIF90aGlzLmNoZWNrZWRDaGFuZ2UgPSBuZXcgY29yZS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgICB2YXIgdiA9IF90aGlzLl9yYWRpb1NlcnZpY2UuZ2V0TGFzdFZhbHVlO1xuICAgICAgICAgIGlmICh2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIF90aGlzLm1vZGVsVmFsdWUgPSB2O1xuICAgICAgICAgIH1cbiAgICAgICAgICBfdGhpcy52YWx1ZU9ic2VydmVyID0gX3RoaXMuX3JhZGlvU2VydmljZS5vblZhbHVlQ2hhbmdlZCgpLnN1YnNjcmliZShmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICBfdGhpcy5tb2RlbFZhbHVlID0gdjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY1NlZ21lbnRlZC5wcm90b3R5cGUsIFwiaXNDaGVja2VkXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RlbFZhbHVlICYmIHRoaXMubW9kZWxWYWx1ZS5pbmNsdWRlcyh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09IHRoaXMubW9kZWxWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY1NlZ21lbnRlZC5wcm90b3R5cGUuY2xpY2tlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QgJiYgdGhpcy5jaGVja2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5jaGVja2VkQ2hhbmdlLmVtaXQoISghIXRoaXMuY2hlY2tlZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsVmFsdWUuaW5jbHVkZXModGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMubW9kZWxWYWx1ZS5pbmRleE9mKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWxWYWx1ZS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsVmFsdWUucHVzaCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHRoaXMuX3JhZGlvU2VydmljZS5jaGFuZ2VWYWx1ZSh0aGlzLm1vZGVsVmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fcmFkaW9TZXJ2aWNlLmNoYW5nZVZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjU2VnbWVudGVkLnByb3RvdHlwZSwgXCJjc3NDbGFzc1wiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBjbCA9ICdtYnNjLXNlZ21lbnRlZC1pdGVtJztcbiAgICAgICAgICAgICAgaWYgKHRoaXMuY29sb3IpIHtcbiAgICAgICAgICAgICAgICAgIGNsICs9ICcgbWJzYy1zZWdtZW50ZWQtJyArIHRoaXMuY29sb3I7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGNsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgTWJzY1NlZ21lbnRlZC5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgU2VnbWVudGVkSXRlbSh0aGlzLl9pbml0RWxlbS5uYXRpdmVFbGVtZW50LCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICBNYnNjU2VnbWVudGVkLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5nT25Jbml0LmNhbGwodGhpcyk7XG4gICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5fcmFkaW9TZXJ2aWNlLm5hbWU7XG4gICAgICAgICAgdGhpcy5tdWx0aVNlbGVjdCA9IHRoaXMuX3JhZGlvU2VydmljZS5tdWx0aVNlbGVjdDtcbiAgICAgICAgICB0aGlzLmNvbG9yID0gdGhpcy5fcmFkaW9TZXJ2aWNlLmNvbG9yO1xuICAgICAgfTtcbiAgICAgIE1ic2NTZWdtZW50ZWQucHJvdG90eXBlLm5nT25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuX3JhZGlvU2VydmljZS5vblZhbHVlQ2hhbmdlZCgpLnVuc3Vic2NyaWJlKHRoaXMudmFsdWVPYnNlcnZlcik7XG4gICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZ09uRGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgfTtcbiAgICAgIE1ic2NTZWdtZW50ZWQuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1zZWdtZW50ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHsgJ1tjbGFzc10nOiAnY3NzQ2xhc3MnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8bGFiZWwgY2xhc3M9XFxcIm1ic2Mtc2VnbWVudGVkLWl0ZW0tcmVhZHlcXFwiPlxcbiAgICAgICAgICAgIDxpbnB1dCAjaW5pdEVsZW1lbnQgXFxuICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cXFwic2VnbWVudGVkXFxcIlxcbiAgICAgICAgICAgICAgICBbdHlwZV09XFxcIm11bHRpU2VsZWN0ID8gJ2NoZWNrYm94JyA6ICdyYWRpbydcXFwiIFxcbiAgICAgICAgICAgICAgICBbdmFsdWVdPVxcXCJ2YWx1ZVxcXCIgXFxuICAgICAgICAgICAgICAgIFtjaGVja2VkXT1cXFwiaXNDaGVja2VkXFxcIlxcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIubmFtZV09XFxcIm5hbWVcXFwiIFxcbiAgICAgICAgICAgICAgICBbYXR0ci52YWx1ZV09XFxcInZhbHVlXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWljb25dPVxcXCJpY29uID8gaWNvbiA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgIChjbGljayk9XFxcImNsaWNrZWQoJGV2ZW50KVxcXCIgLz5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwibWJzYy1zZWdtZW50ZWQtY29udGVudFxcXCI+XFxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVxcXCJpY29uXFxcIiBjbGFzcz1cXFwie3snbWJzYy1pYyBtYnNjLWljLScgKyBpY29uIH19XFxcIj48L3NwYW4+XFxuICAgICAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICA8L2xhYmVsPlxcbiAgICBcIlxuICAgICAgICAgICAgICAgICAgfSxdIH0sXG4gICAgICBdO1xuICAgICAgTWJzY1NlZ21lbnRlZC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NSYWRpb1NlcnZpY2UsIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgIF07IH07XG4gICAgICBNYnNjU2VnbWVudGVkLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdpY29uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3ZhbHVlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2NoZWNrZWQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnY2hlY2tlZENoYW5nZSc6IFt7IHR5cGU6IGNvcmUuT3V0cHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY1NlZ21lbnRlZDtcbiAgfShNYnNjRm9ybUJhc2UpKTtcbiAgdmFyIE1ic2NTbGlkZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1ic2NTbGlkZXIsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBNYnNjU2xpZGVyKGhvc3RFbGVtZW50LCBfZm9ybVNlcnZpY2UsIHpvbmUsIGNvbnRyb2wpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBob3N0RWxlbWVudCwgem9uZSwgY29udHJvbCwgbnVsbCwgbnVsbCkgfHwgdGhpcztcbiAgICAgICAgICBfdGhpcy5fZm9ybVNlcnZpY2UgPSBfZm9ybVNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMuX2R1bW15ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLl9uZWVkc1RpbWVvdXQgPSBmYWxzZTtcbiAgICAgICAgICBfdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIF90aGlzLl9jb2xvckNsYXNzID0ge307XG4gICAgICAgICAgX3RoaXMub25DaGFuZ2VFbWl0dGVyID0gbmV3IGNvcmUuRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NTbGlkZXIucHJvdG90eXBlLCBcImlzTXVsdGlcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbGFzdFZhbHVlIGluc3RhbmNlb2YgQXJyYXk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWJzY1NsaWRlci5wcm90b3R5cGUsIFwiZHVtbXlBcnJheVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmICghdGhpcy5fZHVtbXkgfHwgKHRoaXMuaXNNdWx0aSAmJiB0aGlzLl9sYXN0VmFsdWUgJiYgdGhpcy5fbGFzdFZhbHVlLmxlbmd0aCAmJiB0aGlzLl9kdW1teS5sZW5ndGggIT09IHRoaXMuX2xhc3RWYWx1ZS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9kdW1teSA9IEFycmF5KHRoaXMuaXNNdWx0aSA/IHRoaXMuX2xhc3RWYWx1ZS5sZW5ndGggOiAxKS5maWxsKDApLm1hcChmdW5jdGlvbiAoeCwgaSkgeyByZXR1cm4gaTsgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2R1bW15O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NTbGlkZXIucHJvdG90eXBlLCBcImRhdGFTdGVwTGFiZWxzXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5zdGVwTGFiZWxzKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0ZXBMYWJlbHM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NTbGlkZXIucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0TmV3VmFsdWVQcm94eSh2KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjU2xpZGVyLnByb3RvdHlwZSwgXCJjb2xvckNsYXNzXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9jb2xvckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29sb3JDbGFzc1trXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JDbGFzc1snbWJzYy1zbGlkZXItJyArIHRoaXMuY29sb3JdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JDbGFzcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NTbGlkZXIucHJvdG90eXBlLnJlSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgICAgIHRoaXMuc2V0RWxlbWVudCgpO1xuICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2UoaW5wdXQubmF0aXZlRWxlbWVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgb3B0aW9ucyA9IGV4dGVuZCQxKHt9LCB0aGlzLl9pbmhlcml0ZWRPcHRpb25zLCB0aGlzLm9wdGlvbnMsIHRoaXMuaW5saW5lT3B0aW9uc09iaik7XG4gICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBTbGlkZXIodGhpcy5pbnB1dEVsZW1lbnRzLmZpcnN0Lm5hdGl2ZUVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIE1ic2NTbGlkZXIucHJvdG90eXBlLnNldE5ld1ZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgIHRoaXMuX2xhc3RWYWx1ZSA9IHY7XG4gICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgdmFyIGlubmVyVmFsdWUgPSB0aGlzLmluc3RhbmNlLmdldFZhbCgpO1xuICAgICAgICAgICAgICBpZiAodGhpcy5pc011bHRpICYmICghaW5uZXJWYWx1ZSB8fCBpbm5lclZhbHVlLmxlbmd0aCAhPSB2Lmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlSW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluc3RhbmNlLnNldFZhbChfdGhpcy5fbGFzdFZhbHVlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VkID0gKHRoaXMuaXNNdWx0aSAmJiAhZGVlcEVxdWFsc0FycmF5KGlubmVyVmFsdWUsIHYpKSB8fCAoIXRoaXMuaXNNdWx0aSAmJiBpbm5lclZhbHVlICE9PSB2KTtcbiAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXRWYWwodiwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NTbGlkZXIucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuX2luaGVyaXRlZE9wdGlvbnMgPSB0aGlzLl9mb3JtU2VydmljZSA/IHRoaXMuX2Zvcm1TZXJ2aWNlLm9wdGlvbnMgOiB7fTtcbiAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5nT25Jbml0LmNhbGwodGhpcyk7XG4gICAgICB9O1xuICAgICAgTWJzY1NsaWRlci5wcm90b3R5cGUuaW5pdENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQsIGluZGV4KSB7XG4gICAgICAgICAgICAgIGlmIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlKGlucHV0Lm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQkMSh7fSwgdGhpcy5faW5oZXJpdGVkT3B0aW9ucywgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgU2xpZGVyKHRoaXMuaW5wdXRFbGVtZW50cy5maXJzdC5uYXRpdmVFbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICBpZiAodGhpcy5pbml0aWFsVmFsdWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmluaXRpYWxWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnNldFZhbCh0aGlzLmluaXRpYWxWYWx1ZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjU2xpZGVyLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ21ic2Mtc2xpZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICBob3N0OiB7ICdjbGFzcyc6ICdtYnNjLWNvbnRyb2wtbmcnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiXFxuICAgICAgICA8bGFiZWwgW25nQ2xhc3NdPVxcXCJjb2xvckNsYXNzXFxcIj5cXG4gICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XFxuICAgICAgICAgICAgPGlucHV0ICNpbnB1dEVsZW1lbnRzICpuZ0Zvcj1cXFwibGV0IHYgb2YgZHVtbXlBcnJheVxcXCIgXFxuICAgICAgICAgICAgICAgIHR5cGU9XFxcInJhbmdlXFxcIlxcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIudmFsdWVdPVxcXCJkdW1teUFycmF5Lmxlbmd0aCA+IDEgJiYgaW5pdGlhbFZhbHVlID8gaW5pdGlhbFZhbHVlW3ZdOiBpbml0aWFsVmFsdWVcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtc3RlcC1sYWJlbHNdPVxcXCJkYXRhU3RlcExhYmVsc1xcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS10ZW1wbGF0ZV09XFxcInZhbHVlVGVtcGxhdGVcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtdG9vbHRpcF09XFxcInRvb2x0aXAgPyAndHJ1ZScgOiBudWxsXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWhpZ2hsaWdodF09XFxcImhpZ2hsaWdodFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1saXZlXT1cXFwibGl2ZVxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS1pY29uXT1cXFwiaWNvbiA/IGljb24gOiBudWxsXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLXZhbF09XFxcInZhbCA/IHZhbCA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtbGFiZWwtc3R5bGVdPVxcXCJsYWJlbFN0eWxlXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLWlucHV0LXN0eWxlXT1cXFwiaW5wdXRTdHlsZVxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIubmFtZV09XFxcIm5hbWVcXFwiXFxuICAgICAgICAgICAgICAgIFthdHRyLm1heF09XFxcIm1heCAhPT0gdW5kZWZpbmVkID8gbWF4IDogbnVsbFxcXCJcXG4gICAgICAgICAgICAgICAgW2F0dHIubWluXT1cXFwibWluICE9PSB1bmRlZmluZWQgPyBtaW4gOiBudWxsXFxcIlxcbiAgICAgICAgICAgICAgICBbYXR0ci5zdGVwXT1cXFwic3RlcCAhPT0gdW5kZWZpbmVkID8gc3RlcCA6IG51bGxcXFwiXFxuICAgICAgICAgICAgICAgIChibHVyKT1cXFwib25Ub3VjaCgkZXZlbnQpXFxcIiAvPlxcbiAgICAgICAgPC9sYWJlbD5cXG4gICAgXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZXhwb3J0QXM6ICdtb2Jpc2Nyb2xsJ1xuICAgICAgICAgICAgICAgICAgfSxdIH0sXG4gICAgICBdO1xuICAgICAgTWJzY1NsaWRlci5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdab25lLCB9LFxuICAgICAgICAgIHsgdHlwZTogZm9ybXMuTmdDb250cm9sLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBjb3JlLk9wdGlvbmFsIH0sXSB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NTbGlkZXIucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ29wdGlvbnMnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ29wdGlvbnMnLF0gfSxdLFxuICAgICAgICAgICduYW1lJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3Rvb2x0aXAnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaGlnaGxpZ2h0JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2xpdmUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAndmFsdWVUZW1wbGF0ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsndmFsdWUtdGVtcGxhdGUnLF0gfSxdLFxuICAgICAgICAgICdpY29uJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3ZhbCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdtYXgnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnbWluJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ3N0ZXAnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnZGlzYWJsZWQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc3RlcExhYmVscyc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsnc3RlcC1sYWJlbHMnLF0gfSxdLFxuICAgICAgICAgICd2YWx1ZSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQsIGFyZ3M6IFsndmFsdWUnLF0gfSxdLFxuICAgICAgICAgICdjb2xvcic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdvbkNoYW5nZUVtaXR0ZXInOiBbeyB0eXBlOiBjb3JlLk91dHB1dCwgYXJnczogWyd2YWx1ZUNoYW5nZScsXSB9LF0sXG4gICAgICAgICAgJ2lucHV0RWxlbWVudHMnOiBbeyB0eXBlOiBjb3JlLlZpZXdDaGlsZHJlbiwgYXJnczogWydpbnB1dEVsZW1lbnRzJyxdIH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY1NsaWRlcjtcbiAgfShNYnNjQ29udHJvbEJhc2UpKTtcbiAgdmFyIE1ic2NSYXRpbmcgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1ic2NSYXRpbmcsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBNYnNjUmF0aW5nKGhvc3RFbGVtLCB6b25lLCBmb3JtU2VydmljZSwgY29udHJvbCkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGhvc3RFbGVtLCB6b25lLCBjb250cm9sLCBudWxsLCBudWxsKSB8fCB0aGlzO1xuICAgICAgICAgIF90aGlzLmZvcm1TZXJ2aWNlID0gZm9ybVNlcnZpY2U7XG4gICAgICAgICAgX3RoaXMubWluID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLm1heCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBfdGhpcy5zdGVwID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgX3RoaXMudmFsID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF90aGlzLm9uQ2hhbmdlRW1pdHRlciA9IG5ldyBjb3JlLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICAgIF90aGlzLl9jb2xvckNsYXNzID0ge307XG4gICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NSYXRpbmcucHJvdG90eXBlLCBcInJlYWRvbmx5XCIsIHtcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcmVhZG9ubHkgPSBlbXB0eU9yVHJ1ZSh2YWwpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NSYXRpbmcucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0TmV3VmFsdWVQcm94eSh2KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjUmF0aW5nLnByb3RvdHlwZSwgXCJjb2xvckNsYXNzXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9jb2xvckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29sb3JDbGFzc1trXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fY29sb3JDbGFzc1snbWJzYy1yYXRpbmctJyArIHRoaXMuY29sb3JdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JDbGFzcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NSYXRpbmcucHJvdG90eXBlLnNldE5ld1ZhbHVlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZS5nZXRWYWwoKSAhPT0gdikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXRWYWwodiwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NSYXRpbmcucHJvdG90eXBlLm5nT25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuX2luaGVyaXRlZE9wdGlvbnMgPSB0aGlzLmZvcm1TZXJ2aWNlID8gdGhpcy5mb3JtU2VydmljZS5vcHRpb25zIDoge307XG4gICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZ09uSW5pdC5jYWxsKHRoaXMpO1xuICAgICAgfTtcbiAgICAgIE1ic2NSYXRpbmcucHJvdG90eXBlLmluaXRDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvcHRpb25zID0gZXh0ZW5kJDEoe30sIHRoaXMuX2luaGVyaXRlZE9wdGlvbnMsIHRoaXMub3B0aW9ucywgdGhpcy5pbmxpbmVPcHRpb25zT2JqKTtcbiAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IFJhdGluZyh0aGlzLmVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0VmFsKHRoaXMuaW5pdGlhbFZhbHVlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1ic2NSYXRpbmcuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1yYXRpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHsgJ2NsYXNzJzogJ21ic2MtY29udHJvbC1uZycgfSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bGFiZWwgW25nQ2xhc3NdPVxcXCJjb2xvckNsYXNzXFxcIj5cXG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG4gICAgICAgIDxpbnB1dCB0eXBlPVxcXCJyYXRpbmdcXFwiIGRhdGEtcm9sZT1cXFwicmF0aW5nXFxcIiBcXG4gICAgICAgICAgICBbYXR0ci5uYW1lXT1cXFwibmFtZVxcXCJcXG4gICAgICAgICAgICBbYXR0ci5taW5dPVxcXCJtaW4gIT09IHVuZGVmaW5lZCA/IG1pbiA6IG51bGxcXFwiXFxuICAgICAgICAgICAgW2F0dHIubWF4XT1cXFwibWF4ICE9PSB1bmRlZmluZWQgPyBtYXggOiBudWxsXFxcIlxcbiAgICAgICAgICAgIFthdHRyLnN0ZXBdPVxcXCJzdGVwICE9PSB1bmRlZmluZWQgPyBzdGVwIDogbnVsbFxcXCJcXG4gICAgICAgICAgICBbYXR0ci5kYXRhLXZhbF09XFxcInZhbCA/IHZhbCA6IG51bGxcXFwiXFxuICAgICAgICAgICAgW2F0dHIuZGF0YS10ZW1wbGF0ZV09XFxcInRlbXBsYXRlID8gdGVtcGxhdGUgOiBudWxsXFxcIlxcbiAgICAgICAgICAgIFthdHRyLmRhdGEtZW1wdHldPVxcXCJlbXB0eVxcXCJcXG4gICAgICAgICAgICBbYXR0ci5kYXRhLWZpbGxlZF09XFxcImZpbGxlZFxcXCJcXG4gICAgICAgICAgICBbYXR0ci5kYXRhLWxhYmVsLXN0eWxlXT1cXFwibGFiZWxTdHlsZVxcXCJcXG4gICAgICAgICAgICBbYXR0ci5kYXRhLWlucHV0LXN0eWxlXT1cXFwiaW5wdXRTdHlsZVxcXCJcXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVxcXCJkaXNhYmxlZFxcXCJcXG4gICAgICAgICAgICBbcmVhZG9ubHldPVxcXCJfcmVhZG9ubHlcXFwiXFxuICAgICAgICAgICAgKGJsdXIpPVxcXCJvblRvdWNoKCRldmVudClcXFwiIC8+XFxuICAgIDwvbGFiZWw+XCJcbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NSYXRpbmcuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkVsZW1lbnRSZWYsIH0sXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLk5nWm9uZSwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgICAgICB7IHR5cGU6IGZvcm1zLk5nQ29udHJvbCwgZGVjb3JhdG9yczogW3sgdHlwZTogY29yZS5PcHRpb25hbCB9LF0gfSxcbiAgICAgIF07IH07XG4gICAgICBNYnNjUmF0aW5nLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdvcHRpb25zJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ25hbWUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnbWluJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ21heCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdzdGVwJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2Rpc2FibGVkJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2VtcHR5JzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2ZpbGxlZCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICdyZWFkb25seSc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgICAgICd2YWwnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAndGVtcGxhdGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAndmFsdWUnOiBbeyB0eXBlOiBjb3JlLklucHV0LCBhcmdzOiBbJ3ZhbHVlJyxdIH0sXSxcbiAgICAgICAgICAnb25DaGFuZ2VFbWl0dGVyJzogW3sgdHlwZTogY29yZS5PdXRwdXQsIGFyZ3M6IFsndmFsdWVDaGFuZ2UnLF0gfSxdLFxuICAgICAgICAgICdjb2xvcic6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBNYnNjUmF0aW5nO1xuICB9KE1ic2NDb250cm9sQmFzZSkpO1xuICB2YXIgTWJzY0Zvcm1Hcm91cCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYnNjRm9ybUdyb3VwKGluaXRpYWxFbGVtKSB7XG4gICAgICAgICAgdGhpcy5pbml0aWFsRWxlbSA9IGluaXRpYWxFbGVtO1xuICAgICAgICAgIHRoaXMuY29sbGFwc2libGUgPSBudWxsO1xuICAgICAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGluaXRpYWxFbGVtO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1ic2NGb3JtR3JvdXAucHJvdG90eXBlLCBcIm9wZW5cIiwge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuX29wZW4gIT0gdiAmJiB0aGlzLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodikge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5fb3BlbiA9IHY7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBNYnNjRm9ybUdyb3VwLnByb3RvdHlwZS5lbXB0eU9yVHJ1ZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcmV0dXJuIGVtcHR5T3JUcnVlKHYpO1xuICAgICAgfTtcbiAgICAgIE1ic2NGb3JtR3JvdXAucHJvdG90eXBlLm5nQWZ0ZXJWaWV3SW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodGhpcy5jb2xsYXBzaWJsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IENvbGxhcHNpYmxlQmFzZSh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCwgeyBpc09wZW46IHRoaXMuX29wZW4gIT09IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYnNjRm9ybUdyb3VwLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTWJzY0Zvcm1Hcm91cC5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdtYnNjLWZvcm0tZ3JvdXAnLFxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PicsXG4gICAgICAgICAgICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnW2NsYXNzLm1ic2MtZm9ybS1ncm91cC1pbnNldF0nOiAnZW1wdHlPclRydWUoaW5zZXQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tjbGFzcy5tYnNjLWZvcm0tZ3JvdXBdJzogJyFlbXB0eU9yVHJ1ZShpbnNldCknXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFsnOmhvc3QgeyBkaXNwbGF5OiBibG9jazsgfSddXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjRm9ybUdyb3VwLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5FbGVtZW50UmVmLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NGb3JtR3JvdXAucHJvcERlY29yYXRvcnMgPSB7XG4gICAgICAgICAgJ2NvbGxhcHNpYmxlJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ29wZW4nOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaW5zZXQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY0Zvcm1Hcm91cDtcbiAgfSgpKTtcbiAgdmFyIE1ic2NGb3JtR3JvdXBUaXRsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYnNjRm9ybUdyb3VwVGl0bGUoKSB7XG4gICAgICB9XG4gICAgICBNYnNjRm9ybUdyb3VwVGl0bGUuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1mb3JtLWdyb3VwLXRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50PjwvbmctY29udGVudD4nLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tjbGFzcy5tYnNjLWZvcm0tZ3JvdXAtdGl0bGVdJzogJ3RydWUnXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFsnOmhvc3QgeyBkaXNwbGF5OiBibG9jazsgfSddXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjRm9ybUdyb3VwVGl0bGUuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcbiAgICAgIHJldHVybiBNYnNjRm9ybUdyb3VwVGl0bGU7XG4gIH0oKSk7XG4gIHZhciBNYnNjRm9ybUdyb3VwQ29udGVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYnNjRm9ybUdyb3VwQ29udGVudCgpIHtcbiAgICAgIH1cbiAgICAgIE1ic2NGb3JtR3JvdXBDb250ZW50LmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ21ic2MtZm9ybS1ncm91cC1jb250ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50PjwvbmctY29udGVudD4nLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tjbGFzcy5tYnNjLWZvcm0tZ3JvdXAtY29udGVudF0nOiAndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogWyc6aG9zdCB7IGRpc3BsYXk6IGJsb2NrOyB9J11cbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NGb3JtR3JvdXBDb250ZW50LmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4gICAgICByZXR1cm4gTWJzY0Zvcm1Hcm91cENvbnRlbnQ7XG4gIH0oKSk7XG4gIHZhciBNYnNjQWNjb3JkaW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIE1ic2NBY2NvcmRpb24oKSB7XG4gICAgICB9XG4gICAgICBNYnNjQWNjb3JkaW9uLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ21ic2MtYWNjb3JkaW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50PjwvbmctY29udGVudD4nLFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tjbGFzcy5tYnNjLWFjY29yZGlvbl0nOiAndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogWyc6aG9zdCB7IGRpc3BsYXk6IGJsb2NrOyB9J11cbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NBY2NvcmRpb24uY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcbiAgICAgIHJldHVybiBNYnNjQWNjb3JkaW9uO1xuICB9KCkpO1xuICB2YXIgY29tcCA9IFtcbiAgICAgIE1ic2NGb3JtLFxuICAgICAgTWJzY1RleHRhcmVhLFxuICAgICAgTWJzY0Ryb3Bkb3duLFxuICAgICAgTWJzY0J1dHRvbixcbiAgICAgIE1ic2NDaGVja2JveCxcbiAgICAgIE1ic2NTd2l0Y2gsXG4gICAgICBNYnNjU3RlcHBlcixcbiAgICAgIE1ic2NQcm9ncmVzcyxcbiAgICAgIE1ic2NSYWRpb0dyb3VwLFxuICAgICAgTWJzY1JhZGlvR3JvdXBCYXNlLFxuICAgICAgTWJzY1JhZGlvLFxuICAgICAgTWJzY1NlZ21lbnRlZEdyb3VwLFxuICAgICAgTWJzY1NlZ21lbnRlZCxcbiAgICAgIE1ic2NTbGlkZXIsXG4gICAgICBNYnNjUmF0aW5nLFxuICAgICAgTWJzY0Zvcm1Hcm91cCxcbiAgICAgIE1ic2NGb3JtR3JvdXBUaXRsZSxcbiAgICAgIE1ic2NGb3JtR3JvdXBDb250ZW50LFxuICAgICAgTWJzY0FjY29yZGlvblxuICBdO1xuICB2YXIgTWJzY0Zvcm1zTW9kdWxlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIE1ic2NGb3Jtc01vZHVsZSgpIHtcbiAgICAgIH1cbiAgICAgIE1ic2NGb3Jtc01vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRzOiBbZm9ybXMuRm9ybXNNb2R1bGUsIGNvbW1vbi5Db21tb25Nb2R1bGUsIE1ic2NCYXNlTW9kdWxlLCBNYnNjSW5wdXRNb2R1bGVdLFxuICAgICAgICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogY29tcCxcbiAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzOiBbY29tcCwgTWJzY0lucHV0TW9kdWxlLCBNYnNjSW5wdXRdXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjRm9ybXNNb2R1bGUuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfTtcbiAgICAgIHJldHVybiBNYnNjRm9ybXNNb2R1bGU7XG4gIH0oKSk7XG5cbiAgLy8gLS0tXG5cbiAgdmFyIFBhZ2UgPSBmdW5jdGlvbiBQYWdlKGVsLCBzZXR0aW5ncykge1xuICAgIHZhciBjc3NDbGFzcyA9ICcnLFxuICAgICAgICAkZWxtID0gJCQxKGVsKSxcbiAgICAgICAgdGhhdCA9IHRoaXMsXG4gICAgICAgIHMgPSB0aGF0LnNldHRpbmdzOyAvLyBDYWxsIHRoZSBwYXJlbnQgY29uc3RydWN0b3JcblxuICAgIEJhc2UuY2FsbCh0aGlzLCBlbCwgc2V0dGluZ3MsIHRydWUpO1xuICAgIC8qKlxuICAgICAqIFBhZ2UgaW5pdGlhbGl6YXRpb24uXG4gICAgICovXG5cbiAgICB0aGF0Ll9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGN0eCA9IHMuY29udGV4dCxcbiAgICAgICAgICAkY3R4ID0gJCQxKGN0eCksXG4gICAgICAgICAgJHRvcE1lbnUgPSAkY3R4LmZpbmQoJy5tYnNjLW1zLXRvcCAubWJzYy1tcycpLFxuICAgICAgICAgICRib3R0b21NZW51ID0gJGN0eC5maW5kKCcubWJzYy1tcy1ib3R0b20gLm1ic2MtbXMnKSxcbiAgICAgICAgICBjc3MgPSB7fTtcblxuICAgICAgaWYgKGN0eCA9PSAnYm9keScpIHtcbiAgICAgICAgJCQxKCdib2R5LGh0bWwnKS5hZGRDbGFzcygnbWJzYy1wYWdlLWN0eCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGN0eC5hZGRDbGFzcygnbWJzYy1wYWdlLWN0eCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3NzQ2xhc3MpIHtcbiAgICAgICAgJGVsbS5yZW1vdmVDbGFzcyhjc3NDbGFzcyk7XG4gICAgICB9XG5cbiAgICAgIGlmICgkdG9wTWVudS5sZW5ndGgpIHtcbiAgICAgICAgY3NzLnBhZGRpbmdUb3AgPSAkdG9wTWVudVswXS5vZmZzZXRIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICgkYm90dG9tTWVudS5sZW5ndGgpIHtcbiAgICAgICAgY3NzLnBhZGRpbmdCb3R0b20gPSAkYm90dG9tTWVudVswXS5vZmZzZXRIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGNzc0NsYXNzID0gJ21ic2MtcGFnZSBtYnNjLScgKyBzLnRoZW1lICsgKHMuYmFzZVRoZW1lID8gJyBtYnNjLScgKyBzLmJhc2VUaGVtZSA6ICcnKSArIChzLnJ0bCA/ICcgbWJzYy1ydGwnIDogJyBtYnNjLWx0cicpO1xuICAgICAgJGVsbS5hZGRDbGFzcyhjc3NDbGFzcykucmVtb3ZlQ2xhc3MoJ21ic2MtY2xvYWsnKS5jc3MoY3NzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSBtb2Jpc2Nyb2xsIGluc3RhbmNlLlxuICAgICAqL1xuXG5cbiAgICB0aGF0Ll9kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgJGVsbS5yZW1vdmVDbGFzcyhjc3NDbGFzcyk7XG4gICAgfTsgLy8gQ29uc3RydWN0b3JcblxuXG4gICAgcyA9IHRoYXQuc2V0dGluZ3M7XG4gICAgdGhhdC5pbml0KCk7XG4gIH07IC8vIEV4dGVuZCBkZWZhdWx0c1xuXG4gIFBhZ2UucHJvdG90eXBlID0ge1xuICAgIF9oYXNEZWY6IHRydWUsXG4gICAgX2hhc1RoZW1lOiB0cnVlLFxuICAgIF9oYXNMYW5nOiB0cnVlLFxuICAgIF9jbGFzczogJ3BhZ2UnLFxuICAgIF9kZWZhdWx0czoge1xuICAgICAgY29udGV4dDogJ2JvZHknXG4gICAgfVxuICB9O1xuICBjbGFzc2VzLlBhZ2UgPSBQYWdlO1xuICBtb2Jpc2Nyb2xsLnRoZW1lcy5wYWdlLm1vYmlzY3JvbGwgPSB7fTsgLy8gLS0tXG4gIC8vIFBhZ2UgZW5kXG4gIC8vIEluaXQgbWJzYy1wYWdlIGVsZW1lbnRzIG9uIHBhZ2UgbG9hZCBvciB3aGVuIG1ic2MtZW5oYW5jZSBldmVudCBpcyB0cmlnZ2VyZXNcblxuICBhdXRvSW5pdCgnW21ic2MtcGFnZV0nLCBQYWdlKTtcblxuICB2YXIgTWJzY1BhZ2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1ic2NQYWdlLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTWJzY1BhZ2UoaG9zdEVsZW1lbnQsIG9wdGlvbnNTZXJ2aWNlLCB6b25lKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaG9zdEVsZW1lbnQsIHpvbmUpIHx8IHRoaXM7XG4gICAgICAgICAgX3RoaXMub3B0aW9uc1NlcnZpY2UgPSBvcHRpb25zU2VydmljZTtcbiAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBNYnNjUGFnZS5wcm90b3R5cGUubmdPbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdGlvbnNPYmogPSBleHRlbmQkMSh7fSwgdGhpcy5vcHRpb25zLCB0aGlzLmlubGluZU9wdGlvbnNPYmopO1xuICAgICAgICAgIHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucyA9IG9wdGlvbnNPYmo7XG4gICAgICB9O1xuICAgICAgTWJzY1BhZ2UucHJvdG90eXBlLmluaXRDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvcHRpb25zID0gZXh0ZW5kJDEoe30sIHRoaXMub3B0aW9ucywgdGhpcy5pbmxpbmVPcHRpb25zT2JqKTtcbiAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IFBhZ2UodGhpcy5pbml0RWxlbS5uYXRpdmVFbGVtZW50LCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICBNYnNjUGFnZS5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5Db21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdtYnNjLXBhZ2UnLFxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiAjaW5pdEVsZW1lbnQ+PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PjwvZGl2PicsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbTWJzY09wdGlvbnNTZXJ2aWNlXSxcbiAgICAgICAgICAgICAgICAgICAgICBleHBvcnRBczogJ21vYmlzY3JvbGwnXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjUGFnZS5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgICAgICB7IHR5cGU6IE1ic2NPcHRpb25zU2VydmljZSwgfSxcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuTmdab25lLCB9LFxuICAgICAgXTsgfTtcbiAgICAgIE1ic2NQYWdlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdvcHRpb25zJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2NvbnRleHQnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnaW5pdEVsZW0nOiBbeyB0eXBlOiBjb3JlLlZpZXdDaGlsZCwgYXJnczogWydpbml0RWxlbWVudCcsIHsgc3RhdGljOiBmYWxzZSB9LF0gfSxdLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBNYnNjUGFnZTtcbiAgfShNYnNjQmFzZSkpO1xuICB2YXIgTWJzY05vdGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gTWJzY05vdGUoaW5pdGlhbEVsZW0pIHtcbiAgICAgICAgICB0aGlzLmluaXRpYWxFbGVtID0gaW5pdGlhbEVsZW07XG4gICAgICAgICAgdGhpcy5jb2xvciA9ICdwcmltYXJ5JztcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYnNjTm90ZS5wcm90b3R5cGUsIFwiY2xhc3NOYW1lc1wiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiAnbWJzYy1ub3RlIG1ic2Mtbm90ZS0nICsgdGhpcy5jb2xvcjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE1ic2NOb3RlLmRlY29yYXRvcnMgPSBbXG4gICAgICAgICAgeyB0eXBlOiBjb3JlLkNvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ21ic2Mtbm90ZScsXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8bmctY29udGVudD48L25nLWNvbnRlbnQ+JyxcbiAgICAgICAgICAgICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICdbY2xhc3NdJzogJ2NsYXNzTmFtZXMnXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IFsnOmhvc3QgeyBkaXNwbGF5OiBibG9jazsgfSddXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjTm90ZS5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuRWxlbWVudFJlZiwgfSxcbiAgICAgIF07IH07XG4gICAgICBNYnNjTm90ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICAgICAnY29sb3InOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWJzY05vdGU7XG4gIH0oKSk7XG4gIHZhciBNYnNjQXZhdGFyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIE1ic2NBdmF0YXIoKSB7XG4gICAgICAgICAgdGhpcy5kcmFnZ2FibGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIE1ic2NBdmF0YXIuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgICB7IHR5cGU6IGNvcmUuQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbWJzYy1hdmF0YXInLFxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGltZyBjbGFzcz1cIm1ic2MtYXZhdGFyXCIgW3NyY109XCJzcmNcIiBbYWx0XT1cImFsdFwiIFtkcmFnZ2FibGVdPVwiZHJhZ2dhYmxlXCIgLz4nXG4gICAgICAgICAgICAgICAgICB9LF0gfSxcbiAgICAgIF07XG4gICAgICBNYnNjQXZhdGFyLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4gICAgICBNYnNjQXZhdGFyLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICAgICdkcmFnZ2FibGUnOiBbeyB0eXBlOiBjb3JlLklucHV0IH0sXSxcbiAgICAgICAgICAnc3JjJzogW3sgdHlwZTogY29yZS5JbnB1dCB9LF0sXG4gICAgICAgICAgJ2FsdCc6IFt7IHR5cGU6IGNvcmUuSW5wdXQgfSxdLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBNYnNjQXZhdGFyO1xuICB9KCkpO1xuICB2YXIgTWJzY1BhZ2VNb2R1bGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gTWJzY1BhZ2VNb2R1bGUoKSB7XG4gICAgICB9XG4gICAgICBNYnNjUGFnZU1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgICAgICAgIHsgdHlwZTogY29yZS5OZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRzOiBbTWJzY0Jhc2VNb2R1bGVdLFxuICAgICAgICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW01ic2NQYWdlLCBNYnNjTm90ZSwgTWJzY0F2YXRhcl0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwb3J0czogW01ic2NQYWdlLCBNYnNjTm90ZSwgTWJzY0F2YXRhcl1cbiAgICAgICAgICAgICAgICAgIH0sXSB9LFxuICAgICAgXTtcbiAgICAgIE1ic2NQYWdlTW9kdWxlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH07XG4gICAgICByZXR1cm4gTWJzY1BhZ2VNb2R1bGU7XG4gIH0oKSk7XG5cbiAgdmFyIE1ic2NDb21tZXJjaWFsQ29tcG9uZW50ID0gZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYnNjQ29tbWVyY2lhbENvbXBvbmVudCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIE1ic2NDb21tZXJjaWFsQ29tcG9uZW50KGhvc3RFbGVtZW50LCBvcHRpb25zU2VydmljZSwgem9uZSkge1xuICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaG9zdEVsZW1lbnQsIHpvbmUpIHx8IHRoaXM7XG5cbiAgICAgIF90aGlzLm9wdGlvbnNTZXJ2aWNlID0gb3B0aW9uc1NlcnZpY2U7XG4gICAgICBfdGhpcy5tYnNjT3B0aW9ucyA9IHt9O1xuICAgICAgX3RoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIE1ic2NDb21tZXJjaWFsQ29tcG9uZW50LnByb3RvdHlwZS5uZ0FmdGVyVmlld0luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIW1vYmlzY3JvbGwuYWxlcnRlZCkge1xuICAgICAgICBtb2Jpc2Nyb2xsLmNvbmZpcm0oe1xuICAgICAgICAgIHRpdGxlOiAnTW9iaXNjcm9sbCBMaXRlIGRvZXNuXFwndCBzdXBwb3J0IHRoaXMgZnVuY3Rpb25hbGl0eS4nLFxuICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgY2FuIHRyeSB0aGUgZnVsbCB0b29sc2V0IHdpdGggYSBmcmVlIHRyaWFsLiBJZiB5b3VcXCdyZSBoYXZpbmcgdHJvdWJsZSwgPGEgaHJlZj1cIm1haWx0bzpzdXBwb3J0QG1vYmlzY3JvbGwuY29tXCIgdGFyZ2V0PVwiX3RvcFwiPmxldCB1cyBrbm93PC9hPi4nLFxuICAgICAgICAgIG9rVGV4dDogJ1N0YXJ0IFRyaWFsJyxcbiAgICAgICAgICBjYW5jZWxUZXh0OiAnT2snLFxuICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjayhzdGFydFRyaWFsKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRUcmlhbCkge1xuICAgICAgICAgICAgICB3aW5kb3cub3BlbihcIi8vbW9iaXNjcm9sbC5jb20vXCIsICdfYmxhbmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBtb2Jpc2Nyb2xsLmFsZXJ0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBNYnNjQ29tbWVyY2lhbENvbXBvbmVudC5kZWNvcmF0b3JzID0gW3tcbiAgICAgIHR5cGU6IGNvcmUuQ29tcG9uZW50LFxuICAgICAgYXJnczogW3tcbiAgICAgICAgc2VsZWN0b3I6IFwiXFxuICAgIG1ic2MtY2FsZW5kYXIsIFttYnNjLWNhbGVuZGFyXSxcXG4gICAgbWJzYy1kYXRlLCBbbWJzYy1kYXRlXSxcXG4gICAgbWJzYy10aW1lLCBbbWJzYy10aW1lXSxcXG4gICAgbWJzYy1kYXRldGltZSwgW21ic2MtZGF0ZXRpbWVdLFxcbiAgICBtYnNjLWV2ZW50Y2FsZW5kYXIsIFttYnNjLWV2ZW50Y2FsZW5kYXJdLFxcbiAgICBtYnNjLWNhcmQsIFttYnNjLWNhcmRdLCBtYnNjLWNhcmQtaGVhZGVyLCBtYnNjLWNhcmQtY29udGVudCwgbWJzYy1jYXJkLWZvb3RlciwgbWJzYy1jYXJkLXRpdGxlLCBtYnNjLWNhcmQtc3VidGl0bGUsXFxuICAgIG1ic2MtY29sb3IsIFttYnNjLWNvbG9yXSxcXG4gICAgbWJzYy1pbWFnZSwgW21ic2MtaW1hZ2VdLFxcbiAgICBtYnNjLWxpc3R2aWV3LCBtYnNjLWxpc3R2aWV3LWl0ZW0sIG1ic2MtbGlzdHZpZXctaGVhZGVyLCBtYnNjLWxpc3R2aWV3LXN1Ymxpc3QsXFxuICAgIG1ic2MtbWVhc3VyZW1lbnQsIFttYnNjLW1lYXN1cmVtZW50XSwgbWJzYy10ZW1wZXJhdHVyZSwgW21ic2MtdGVtcGVyYXR1cmVdLCBtYnNjLWRpc3RhbmNlLCBbbWJzYy1kaXN0YW5jZV0sIG1ic2Mtc3BlZWQsIFttYnNjLXNwZWVkXSwgbWJzYy1mb3JjZSwgW21ic2MtZm9yY2VdLCBtYnNjLW1hc3MsIFttYnNjLW1hc3NdLFxcbiAgICBtYnNjLW5hdi1pdGVtLCBtYnNjLWJvdHRvbS1uYXYsIG1ic2MtaGFtYnVyZ2VyLW5hdiwgbWJzYy10YWItbmF2LFxcbiAgICBtYnNjLW51bWJlciwgW21ic2MtbnVtYmVyXSxcXG4gICAgbWJzYy1udW1wYWQsIFttYnNjLW51bXBhZF0sIG1ic2MtbnVtcGFkLWRlY2ltYWwsIFttYnNjLW51bXBhZC1kZWNpbWFsXSwgbWJzYy1udW1wYWQtZGF0ZSwgW21ic2MtbnVtcGFkLWRhdGVdLCBtYnNjLW51bXBhZC10aW1lLCBbbWJzYy1udW1wYWQtdGltZV0sIG1ic2MtbnVtcGFkLXRpbWVzcGFuLCBbbWJzYy1udW1wYWQtdGltZXNwYW5dLFxcbiAgICBtYnNjLW9wdGlvbmxpc3QsIG1ic2Mtb3B0aW9uLWl0ZW0sXFxuICAgIG1ic2MtcmFuZ2UsIFttYnNjLXJhbmdlXSxcXG4gICAgbWJzYy1zY3JvbGxlciwgW21ic2Mtc2Nyb2xsZXJdLFxcbiAgICBtYnNjLXNjcm9sbHZpZXcsIFttYnNjLXNjcm9sbHZpZXddLCBtYnNjLXNjcm9sbHZpZXctaXRlbSwgW21ic2Mtc2Nyb2xsdmlldy1pdGVtXSxcXG4gICAgbWJzYy1zZWxlY3QsIFttYnNjLXNlbGVjdF0sXFxuICAgIG1ic2MtdGltZXIsIFttYnNjLXRpbWVyXSxcXG4gICAgbWJzYy10aW1lc3BhbiwgW21ic2MtdGltZXNwYW5dLFxcbiAgICBtYnNjLXRyZWVsaXN0LCBbbWJzYy10cmVlbGlzdF0sXFxuICAgIG1ic2Mtd2lkZ2V0XFxuICAgIFwiLFxuICAgICAgICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50PjwvbmctY29udGVudD4nLFxuICAgICAgICBleHBvcnRBczogJ21vYmlzY3JvbGwnLFxuICAgICAgICBzdHlsZXM6IFsnOmhvc3QgeyBkaXNwbGF5OiBibG9jayB9J11cbiAgICAgIH1dXG4gICAgfV07XG5cbiAgICBNYnNjQ29tbWVyY2lhbENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICB0eXBlOiBjb3JlLkVsZW1lbnRSZWZcbiAgICAgIH0sIHtcbiAgICAgICAgdHlwZTogTWJzY09wdGlvbnNTZXJ2aWNlLFxuICAgICAgICBkZWNvcmF0b3JzOiBbe1xuICAgICAgICAgIHR5cGU6IGNvcmUuT3B0aW9uYWxcbiAgICAgICAgfV1cbiAgICAgIH0sIHtcbiAgICAgICAgdHlwZTogY29yZS5OZ1pvbmVcbiAgICAgIH1dO1xuICAgIH07XG5cbiAgICBNYnNjQ29tbWVyY2lhbENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICAgICdtYnNjT3B0aW9ucyc6IFt7XG4gICAgICAgIHR5cGU6IGNvcmUuSW5wdXQsXG4gICAgICAgIGFyZ3M6IFsnbWJzYy1vcHRpb25zJ11cbiAgICAgIH1dLFxuICAgICAgJ29wdGlvbnMnOiBbe1xuICAgICAgICB0eXBlOiBjb3JlLklucHV0XG4gICAgICB9XSxcbiAgICAgICdkYXRhJzogW3tcbiAgICAgICAgdHlwZTogY29yZS5JbnB1dFxuICAgICAgfV0sXG4gICAgICAnbWJzY0RhdGEnOiBbe1xuICAgICAgICB0eXBlOiBjb3JlLklucHV0LFxuICAgICAgICBhcmdzOiBbJ21ic2MtZGF0YSddXG4gICAgICB9XSxcbiAgICAgICdpbml0RWxlbSc6IFt7XG4gICAgICAgIHR5cGU6IGNvcmUuVmlld0NoaWxkLFxuICAgICAgICBhcmdzOiBbJ2luaXRFbGVtZW50Jywge1xuICAgICAgICAgIHN0YXRpYzogZmFsc2VcbiAgICAgICAgfV1cbiAgICAgIH1dXG4gICAgfTtcbiAgICByZXR1cm4gTWJzY0NvbW1lcmNpYWxDb21wb25lbnQ7XG4gIH0oTWJzY0Jhc2UpO1xuXG4gIHZhciBkaXJlY3RpdmVzID0gW01ic2NGb3JtLCBNYnNjUmF0aW5nLCBNYnNjUGFnZSwgTWJzY05vdGUsIE1ic2NBdmF0YXIsIE1ic2NJbnB1dCwgTWJzY0Ryb3Bkb3duLCBNYnNjVGV4dGFyZWEsIE1ic2NCdXR0b24sIE1ic2NDaGVja2JveCwgTWJzY1N3aXRjaCwgTWJzY1N0ZXBwZXIsIE1ic2NQcm9ncmVzcywgTWJzY1NsaWRlciwgTWJzY1JhZGlvLCBNYnNjUmFkaW9Hcm91cCwgTWJzY1NlZ21lbnRlZEdyb3VwLCBNYnNjU2VnbWVudGVkLCBNYnNjQ29tbWVyY2lhbENvbXBvbmVudCwgTWJzY0Zvcm1Hcm91cCwgTWJzY0Zvcm1Hcm91cFRpdGxlLCBNYnNjRm9ybUdyb3VwQ29udGVudF07XG5cbiAgdmFyIE1ic2NNb2R1bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWJzY01vZHVsZSgpIHt9XG5cbiAgICBNYnNjTW9kdWxlLmRlY29yYXRvcnMgPSBbe1xuICAgICAgdHlwZTogY29yZS5OZ01vZHVsZSxcbiAgICAgIGFyZ3M6IFt7XG4gICAgICAgIGltcG9ydHM6IFtmb3Jtcy5Gb3Jtc01vZHVsZSwgY29tbW9uLkNvbW1vbk1vZHVsZSwgTWJzY0Zvcm1zTW9kdWxlLCBNYnNjUGFnZU1vZHVsZV0sXG4gICAgICAgIGRlY2xhcmF0aW9uczogW01ic2NDb21tZXJjaWFsQ29tcG9uZW50XSxcbiAgICAgICAgZXhwb3J0czogW2RpcmVjdGl2ZXMsIE1ic2NDb21tZXJjaWFsQ29tcG9uZW50LCBNYnNjRm9ybXNNb2R1bGUsIE1ic2NQYWdlTW9kdWxlXVxuICAgICAgfV1cbiAgICB9XTtcblxuICAgIE1ic2NNb2R1bGUuY3RvclBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfTtcblxuICAgIHJldHVybiBNYnNjTW9kdWxlO1xuICB9KCk7XG5cbiAgLy8gQXJhYmljXG4gIG1vYmlzY3JvbGwuaTE4bi5hciA9IHtcbiAgICAvLyBDb3JlXG4gICAgcnRsOiB0cnVlLFxuICAgIC8vIFJpZ2h0IHRvIGxlZnQgbW9kZVxuICAgIHNldFRleHQ6ICfYqti52YrZitmGJyxcbiAgICBjYW5jZWxUZXh0OiAn2KXZhNi62KfYoScsXG4gICAgY2xlYXJUZXh0OiAn2YXYs9itJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9INin2YTZhdit2K/YrycsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWyfYp9mE2KPYrdivJywgJ9in2YTYp9ir2YbZitmGJywgJ9in2YTYq9mE2KfYq9in2KEnLCAn2KfZhNij2LHYqNi52KfYoScsICfYp9mE2K7ZhdmK2LMnLCAn2KfZhNis2YXYudipJywgJ9in2YTYs9io2KonXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ9ij2K3YrycsICfYp9ir2YbZitmGJywgJ9ir2YTYp9ir2KfYoScsICfYo9ix2KjYudin2KEnLCAn2K7ZhdmK2LMnLCAn2KzZhdi52KknLCAn2LPYqNiqJ10sXG4gICAgZGF5TmFtZXNNaW46IFsn2K0nLCAn2YYnLCAn2KsnLCAn2LEnLCAn2K4nLCAn2KwnLCAn2LMnXSxcbiAgICBkYXlUZXh0OiAn2YrZiNmFJyxcbiAgICBob3VyVGV4dDogJ9iz2KfYudin2KonLFxuICAgIG1pbnV0ZVRleHQ6ICfYp9mE2K/Zgtin2KbZgicsXG4gICAgbW9udGhOYW1lczogWyfZitmG2KfZitixJywgJ9mB2KjYsdin2YrYsScsICfZhdin2LHYsycsICfYp9io2LHZitmEJywgJ9mF2KfZitmIJywgJ9mK2YjZhtmK2YgnLCAn2YrZiNmE2YrZiCcsICfYo9i62LPYt9izJywgJ9iz2KjYqtmF2KjYsScsICfYo9mD2KrZiNio2LEnLCAn2YbZiNmB2YXYqNixJywgJ9iv2YrYs9mF2KjYsSddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyfZitmG2KfZitixJywgJ9mB2KjYsdin2YrYsScsICfZhdin2LHYsycsICfYp9io2LHZitmEJywgJ9mF2KfZitmIJywgJ9mK2YjZhtmK2YgnLCAn2YrZiNmE2YrZiCcsICfYo9i62LPYt9izJywgJ9iz2KjYqtmF2KjYsScsICfYo9mD2KrZiNio2LEnLCAn2YbZiNmB2YXYqNixJywgJ9iv2YrYs9mF2KjYsSddLFxuICAgIG1vbnRoVGV4dDogJ9i02YfYsScsXG4gICAgc2VjVGV4dDogJ9ir2YjYp9mG2YonLFxuICAgIGFtVGV4dDogJ9i1JyxcbiAgICBwbVRleHQ6ICfZhScsXG4gICAgdGltZUZvcm1hdDogJ2hoOmlpIEEnLFxuICAgIHllYXJUZXh0OiAn2LnYp9mFJyxcbiAgICBub3dUZXh0OiAn2KfZhNii2YYnLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGZpcnN0RGF5OiAwLFxuICAgIGRhdGVUZXh0OiAn2KrYp9ix2YrYricsXG4gICAgdGltZVRleHQ6ICfZiNmC2KonLFxuICAgIGNsb3NlVGV4dDogJ9il2LrZhNin2YInLFxuICAgIHRvZGF5VGV4dDogJ9in2YTZitmI2YUnLFxuICAgIHByZXZNb250aFRleHQ6ICfYp9mE2LTZh9ixINin2YTYs9in2KjZgicsXG4gICAgbmV4dE1vbnRoVGV4dDogJ9in2YTYtNmH2LEg2KfZhNmC2KfYr9mFJyxcbiAgICBwcmV2WWVhclRleHQ6ICfYp9mE2LPZhtmHINin2YTYs9in2KjZgtipJyxcbiAgICBuZXh0WWVhclRleHQ6ICfYp9mE2LnYp9mFINin2YTZgtin2K/ZhScsXG4gICAgYWxsRGF5VGV4dDogJ9in2YTZitmI2YUg2YPZhNmHJyxcbiAgICBub0V2ZW50c1RleHQ6ICfZhNinINiq2YjYrNivINin2K3Yr9in2KsnLFxuICAgIC8vIEV2ZW50IGNhbGVuZGFyXG4gICAgZXZlbnRUZXh0OiAn2KfZhNit2K/YqycsXG4gICAgZXZlbnRzVGV4dDogJ9ij2K3Yr9in2KsnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAn2YjYp9it2K8g2KLYrtixJyxcbiAgICBtb3JlRXZlbnRzUGx1cmFsVGV4dDogJ9in2KvZhtin2YYg2KLYrtix2KfZhiB7Y291bnR9JyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICfZitio2K/YpycsXG4gICAgdG9UZXh0OiAn2YrZhtiq2YfZiicsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ9mD2KfZhdmEJyxcbiAgICBmcmFjdGlvblRleHQ6ICfYrNiy2KEnLFxuICAgIHVuaXRUZXh0OiAn2YjYrdiv2KknLFxuICAgIC8vIE51bXBhZCBkYXRlXG4gICAgZGVsaW1pdGVyOiAnLycsXG4gICAgLy8gTnVtcGFkIGRlY2ltYWxcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLicsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnLCcsXG4gICAgLy8gVGltZXIgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsn2LPZhtmI2KfYqicsICfYo9i02YfYsScsICfYo9mK2KfZhScsICfYs9in2LnYqScsICfYr9mC2KfYptmCJywgJ9ir2YjYp9mG2YonLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsn2LPZhtmI2KfYqicsICfYo9i02YfYsScsICfYo9mK2KfZhScsICfYs9in2LnYqScsICfYr9mC2KfYptmCJywgJ9ir2YjYp9mG2YonLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAn2KjYr9ihJyxcbiAgICBzdG9wVGV4dDogJ9il2YrZgtin2YEnLFxuICAgIHJlc2V0VGV4dDogJ9il2LnYp9iv2Kkg2LbYqNi3JyxcbiAgICBsYXBUZXh0OiAn2KfZhNiv2YjYsdipJyxcbiAgICBoaWRlVGV4dDogJ9il2K7Zgdin2KEnLFxuICAgIC8vIEZvcm1zXG4gICAgb2ZmVGV4dDogJ9il2YrZgtin2YEnLFxuICAgIG9uVGV4dDogJ9iq2LTYutmK2YQnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICfYsdis2YjYuScsXG4gICAgdW5kb1RleHQ6ICfYqtix2KfYrNi5J1xuICB9O1xuXG4gIC8vIEJ1bGdhcmlhblxuICBtb2Jpc2Nyb2xsLmkxOG4uYmcgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICfQl9Cw0LTQsNCy0LDQvdC1JyxcbiAgICBjYW5jZWxUZXh0OiAn0J7RgtC80Y/QvdCwJyxcbiAgICBjbGVhclRleHQ6ICfQmNC30YfQuNGB0YLQstCw0L3QtScsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSDQv9C+0LTQsdGA0LDQvScsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBkYXlOYW1lczogWyfQndC10LTQtdC70Y8nLCAn0J/QvtC90LXQtNC10LvQvdC40LonLCAn0JLRgtC+0YDQvdC40LonLCAn0KHRgNGP0LTQsCcsICfQp9C10YLQstGK0YDRgtGK0LonLCAn0J/QtdGC0YrQuicsICfQodGK0LHQvtGC0LAnXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ9Cd0LXQtCcsICfQn9C+0L0nLCAn0JLRgtC+JywgJ9Ch0YDRjycsICfQp9C10YInLCAn0J/QtdGCJywgJ9Ch0YrQsSddLFxuICAgIGRheU5hbWVzTWluOiBbJ9Cd0LUnLCAn0J/QvicsICfQktGCJywgJ9Ch0YAnLCAn0KfQtScsICfQn9C1JywgJ9Ch0YonXSxcbiAgICBkYXlUZXh0OiAn0LTQtdC9JyxcbiAgICBkZWxpbWl0ZXI6ICcuJyxcbiAgICBob3VyVGV4dDogJ9GH0LDRgScsXG4gICAgbWludXRlVGV4dDogJ9C80LjQvdGD0YLQsCcsXG4gICAgbW9udGhOYW1lczogWyfQr9C90YPQsNGA0LgnLCAn0KTQtdCy0YDRg9Cw0YDQuCcsICfQnNCw0YDRgicsICfQkNC/0YDQuNC7JywgJ9Cc0LDQuScsICfQrtC90LgnLCAn0K7Qu9C4JywgJ9CQ0LLQs9GD0YHRgicsICfQodC10L/RgtC10LzQstGA0LgnLCAn0J7QutGC0L7QvNCy0YDQuCcsICfQndC+0LXQvNCy0YDQuCcsICfQlNC10LrQtdC80LLRgNC4J10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ9Cv0L3RgycsICfQpNC10LInLCAn0JzQsNGAJywgJ9CQ0L/RgCcsICfQnNCw0LknLCAn0K7QvdC4JywgJ9Cu0LvQuCcsICfQkNCy0LMnLCAn0KHQtdC/JywgJ9Ce0LrRgicsICfQndC+0LInLCAn0JTQtdC6J10sXG4gICAgbW9udGhUZXh0OiAn0LzQtdGB0LXRhicsXG4gICAgc2VjVGV4dDogJ9GB0LXQutGD0L3QtNC4JyxcbiAgICB0aW1lRm9ybWF0OiAnSDppaScsXG4gICAgeWVhclRleHQ6ICfQs9C+0LTQuNC90LAnLFxuICAgIG5vd1RleHQ6ICfQodC10LPQsCcsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ9CU0LDRgtCwJyxcbiAgICB0aW1lVGV4dDogJ9C/0YrRgicsXG4gICAgdG9kYXlUZXh0OiAn0LTQvdC10YEnLFxuICAgIHByZXZNb250aFRleHQ6ICfQn9GA0LXQtNC40YjQvdC40Y8g0LzQtdGB0LXRhicsXG4gICAgbmV4dE1vbnRoVGV4dDogJ9Ch0LvQtdC00LLQsNGJ0LjRj9GCINC80LXRgdC10YYnLFxuICAgIHByZXZZZWFyVGV4dDogJ9Cf0YDQtdC00YXQvtC00L3QsNGC0LAg0LPQvtC00LjQvdCwJyxcbiAgICBuZXh0WWVhclRleHQ6ICfQodC70LXQtNCy0LDRidCw0YLQsCDQs9C+0LTQuNC90LAnLFxuICAgIGNsb3NlVGV4dDogJ9C30LDRgtCy0L7RgNC4JyxcbiAgICBldmVudFRleHQ6ICfQodGK0LHQuNGC0LjQtScsXG4gICAgZXZlbnRzVGV4dDogJ9Ch0YrQsdC40YLQuNGPJyxcbiAgICBhbGxEYXlUZXh0OiAn0KbRj9C7INC00LXQvScsXG4gICAgbm9FdmVudHNUZXh0OiAn0J3Rj9C80LAg0YHRitCx0LjRgtC40Y8nLFxuICAgIG1vcmVFdmVudHNUZXh0OiAn0J7RidC1IHtjb3VudH0nLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ9Ce0KInLFxuICAgIHRvVGV4dDogJ9CU0J4nLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICfRhtGP0LvQvicsXG4gICAgZnJhY3Rpb25UZXh0OiAn0YTRgNCw0LrRhtC40Y8nLFxuICAgIHVuaXRUZXh0OiAn0LXQtNC40L3QuNGG0LAnLFxuICAgIC8vIFRpbWUgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsn0JPQvtC00LjQvdC4JywgJ9C80LXRgdC10YbQsCcsICfQtNC90LgnLCAn0YfQsNGB0LAnLCAn0LzQuNC90YPRgtC4JywgJ9GB0LXQutGD0L3QtNC4JywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ9CT0L7QtNC40L3QuCcsICfQvNC10YHQtdGG0LAnLCAn0LTQvdC4JywgJ9GH0LDRgdCwJywgJ9C80LjQvdGD0YLQuCcsICfRgdC10LrRg9C90LTQuCcsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICfQodGC0LDRgNGCJyxcbiAgICBzdG9wVGV4dDogJ9Ch0YLQvtC/JyxcbiAgICByZXNldFRleHQ6ICfQndGD0LvQuNGA0LDQvdC1JyxcbiAgICBsYXBUZXh0OiAn0J7QsdC40LrQvtC70LrQsCcsXG4gICAgaGlkZVRleHQ6ICfQutGA0LjRjycsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ9Cy0YDRitGJ0LDQvdC1JyxcbiAgICB1bmRvVGV4dDogJ9Ce0KLQnNCv0J3QkCcsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICfQmNCX0JrQmycsXG4gICAgb25UZXh0OiAn0JLQmtCbJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBDYXRhbMOgXG4gIG1vYmlzY3JvbGwuaTE4bi5jYSA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ0FjY2VwdGFyJyxcbiAgICBjYW5jZWxUZXh0OiAnQ2FuY2VswrdsYXInLFxuICAgIGNsZWFyVGV4dDogJ0VzYm9ycmFyJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IHNlbGVjY2lvbmF0JyxcbiAgICBzZWxlY3RlZFBsdXJhbFRleHQ6ICd7Y291bnR9IHNlbGVjY2lvbmF0cycsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWydEaXVtZW5nZScsICdEaWxsdW5zJywgJ0RpbWFydHMnLCAnRGltZWNyZXMnLCAnRGlqb3VzJywgJ0RpdmVuZHJlcycsICdEaXNzYWJ0ZSddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnRGcnLCAnRGwnLCAnRHQnLCAnRGMnLCAnRGonLCAnRHYnLCAnRHMnXSxcbiAgICBkYXlOYW1lc01pbjogWydEZycsICdEbCcsICdEdCcsICdEYycsICdEaicsICdEdicsICdEcyddLFxuICAgIGRheVRleHQ6ICdEaWEnLFxuICAgIGhvdXJUZXh0OiAnSG9yZXMnLFxuICAgIG1pbnV0ZVRleHQ6ICdNaW51dHMnLFxuICAgIG1vbnRoTmFtZXM6IFsnR2VuZXInLCAnRmVicmVyJywgJ01hcsOnJywgJ0FicmlsJywgJ01haWcnLCAnSnVueScsICdKdWxpb2wnLCAnQWdvc3QnLCAnU2V0ZW1icmUnLCAnT2N0dWJyZScsICdOb3ZlbWJyZScsICdEZXNlbWJyZSddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydHZW4nLCAnRmViJywgJ01hcicsICdBYnInLCAnTWFpJywgJ0p1bicsICdKdWwnLCAnQWdvJywgJ1NldCcsICdPY3QnLCAnTm92JywgJ0RlcyddLFxuICAgIG1vbnRoVGV4dDogJ01lcycsXG4gICAgc2VjVGV4dDogJ1NlZ29ucycsXG4gICAgdGltZUZvcm1hdDogJ0hIOmlpJyxcbiAgICB5ZWFyVGV4dDogJ0FueScsXG4gICAgbm93VGV4dDogJ0FyYScsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICB0b2RheVRleHQ6ICdBdnVpJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdGEnLFxuICAgIHRpbWVUZXh0OiAnVGVtcHMnLFxuICAgIGNsb3NlVGV4dDogJ1RhbmNhcicsXG4gICAgYWxsRGF5VGV4dDogJ1RvdCBlbCBkaWEnLFxuICAgIG5vRXZlbnRzVGV4dDogJ0NhcCBlc2RldmVuaW1lbnQnLFxuICAgIGV2ZW50VGV4dDogJ0VzZGV2ZW5pbWVudHMnLFxuICAgIGV2ZW50c1RleHQ6ICdFc2RldmVuaW1lbnRzJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ3tjb3VudH0gbcOpcycsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnSW5pY2lhcicsXG4gICAgdG9UZXh0OiAnRmluYWwnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICdTZW5jZXInLFxuICAgIGZyYWN0aW9uVGV4dDogJ0ZyYWNjacOzJyxcbiAgICB1bml0VGV4dDogJ1VuaXRhdCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWydBbnlzJywgJ01lc29zJywgJ0RpZXMnLCAnSG9yZXMnLCAnTWludXRzJywgJ1NlZ29ucycsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydBbnlzJywgJ01lc29zJywgJ0RpZXMnLCAnSHJzJywgJ01pbnMnLCAnU2VjcycsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdJbmljaWFyJyxcbiAgICBzdG9wVGV4dDogJ0F0dXJhcicsXG4gICAgcmVzZXRUZXh0OiAnUmVpbmljaWFyJyxcbiAgICBsYXBUZXh0OiAnVm9sdGEnLFxuICAgIGhpZGVUZXh0OiAnQW1hZ2FyJyxcbiAgICAvLyBMaXN0dmlld1xuICAgIGJhY2tUZXh0OiAnRW5yZXJlJyxcbiAgICB1bmRvVGV4dDogJ0Rlc2bDqXMnLFxuICAgIC8vIEZvcm1cbiAgICBvZmZUZXh0OiAnTm8nLFxuICAgIG9uVGV4dDogJ1NpJ1xuICB9O1xuXG4gIC8vIENlc3RpbmFcbiAgbW9iaXNjcm9sbC5pMThuLmNzID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAnWmFkZWonLFxuICAgIGNhbmNlbFRleHQ6ICdTdG9ybm8nLFxuICAgIGNsZWFyVGV4dDogJ1Z5bWF6YXQnLFxuICAgIHNlbGVjdGVkVGV4dDogJ096bmHEjWVuw706IHtjb3VudH0nLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgZGF5TmFtZXM6IFsnTmVkxJtsZScsICdQb25kxJtsw60nLCAnw5p0ZXLDvScsICdTdMWZZWRhJywgJ8SMdHZydGVrJywgJ1DDoXRlaycsICdTb2JvdGEnXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ05lJywgJ1BvJywgJ8OadCcsICdTdCcsICfEjHQnLCAnUMOhJywgJ1NvJ10sXG4gICAgZGF5TmFtZXNNaW46IFsnTicsICdQJywgJ8OaJywgJ1MnLCAnxIwnLCAnUCcsICdTJ10sXG4gICAgZGF5VGV4dDogJ0RlbicsXG4gICAgaG91clRleHQ6ICdIb2RpbnknLFxuICAgIG1pbnV0ZVRleHQ6ICdNaW51dHknLFxuICAgIG1vbnRoTmFtZXM6IFsnTGVkZW4nLCAnw5pub3InLCAnQsWZZXplbicsICdEdWJlbicsICdLdsSbdGVuJywgJ8SMZXJ2ZW4nLCAnxIxlcnZlbmVjJywgJ1NycGVuJywgJ1rDocWZw60nLCAnxZjDrWplbicsICdMaXN0b3BhZCcsICdQcm9zaW5lYyddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydMZWQnLCAnw5pubycsICdCxZllJywgJ0R1YicsICdLdsSbJywgJ8SMZXInLCAnxIx2YycsICdTcHInLCAnWsOhxZknLCAnxZjDrWonLCAnTGlzJywgJ1BybyddLFxuICAgIG1vbnRoVGV4dDogJ03Em3PDrWMnLFxuICAgIHNlY1RleHQ6ICdTZWt1bmR5JyxcbiAgICB0aW1lRm9ybWF0OiAnSEg6aWknLFxuICAgIHllYXJUZXh0OiAnUm9rJyxcbiAgICBub3dUZXh0OiAnVGXEjycsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHBtVGV4dDogJ3BtJyxcbiAgICB0b2RheVRleHQ6ICdEbmVzJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdHVtJyxcbiAgICB0aW1lVGV4dDogJ8SMYXMnLFxuICAgIGNsb3NlVGV4dDogJ1phdsWZw610JyxcbiAgICBhbGxEYXlUZXh0OiAnQ2Vsw70gZGVuJyxcbiAgICBub0V2ZW50c1RleHQ6ICfFvcOhZG7DqSB1ZMOhbG9zdGknLFxuICAgIGV2ZW50VGV4dDogJ1Vkw6Fsb3N0w60nLFxuICAgIGV2ZW50c1RleHQ6ICdVZMOhbG9zdGknLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50fSBkYWzFocOtJyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICdaYcSNw6F0ZWsnLFxuICAgIHRvVGV4dDogJ0tvbmVjJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAnQ2Vsw70nLFxuICAgIGZyYWN0aW9uVGV4dDogJ8SMw6FzdCcsXG4gICAgdW5pdFRleHQ6ICdKZWRub3RrYScsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWydSb2t5JywgJ03Em3PDrWNlJywgJ0RueScsICdIb2RpbnknLCAnTWludXR5JywgJ1Nla3VuZHknLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsnUm9rJywgJ03Em3MnLCAnRG55JywgJ0hvZCcsICdNaW4nLCAnU2VjJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ1N0YXJ0JyxcbiAgICBzdG9wVGV4dDogJ1N0b3AnLFxuICAgIHJlc2V0VGV4dDogJ1Jlc2V0b3ZhdCcsXG4gICAgbGFwVGV4dDogJ0V0YXBhJyxcbiAgICBoaWRlVGV4dDogJ1NjaG92YXQnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdacMSbdCcsXG4gICAgdW5kb1RleHQ6ICdacMSbdCcsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdPJyxcbiAgICBvblRleHQ6ICdJJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBEYW5za1xuICBtb2Jpc2Nyb2xsLmkxOG4uZGEgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdTw6Z0JyxcbiAgICBjYW5jZWxUZXh0OiAnQW5udWxsZXInLFxuICAgIGNsZWFyVGV4dDogJ1J5ZCcsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSB2YWxndCcsXG4gICAgc2VsZWN0ZWRQbHVyYWxUZXh0OiAne2NvdW50fSB2YWxndCcsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWydTw7huZGFnJywgJ01hbmRhZycsICdUaXJzZGFnJywgJ09uc2RhZycsICdUb3JzZGFnJywgJ0ZyZWRhZycsICdMw7hyZGFnJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWydTw7huJywgJ01hbicsICdUaXInLCAnT25zJywgJ1RvcicsICdGcmUnLCAnTMO4ciddLFxuICAgIGRheU5hbWVzTWluOiBbJ1MnLCAnTScsICdUJywgJ08nLCAnVCcsICdGJywgJ0wnXSxcbiAgICBkYXlUZXh0OiAnRGFnJyxcbiAgICBob3VyVGV4dDogJ1RpbWVyJyxcbiAgICBtaW51dGVUZXh0OiAnTWludXR0ZXInLFxuICAgIG1vbnRoTmFtZXM6IFsnSmFudWFyJywgJ0ZlYnJ1YXInLCAnTWFydHMnLCAnQXByaWwnLCAnTWFqJywgJ0p1bmknLCAnSnVsaScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09rdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01haicsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2t0JywgJ05vdicsICdEZWMnXSxcbiAgICBtb250aFRleHQ6ICdNw6VuZWQnLFxuICAgIHNlY1RleHQ6ICdTZWt1bmRlcicsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHBtVGV4dDogJ3BtJyxcbiAgICB0aW1lRm9ybWF0OiAnSEguaWknLFxuICAgIHllYXJUZXh0OiAnw4VyJyxcbiAgICBub3dUZXh0OiAnTnUnLFxuICAgIHRvZGF5VGV4dDogJ0kgZGFnJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdG8nLFxuICAgIHRpbWVUZXh0OiAnVGlkJyxcbiAgICBjbG9zZVRleHQ6ICdMdWsnLFxuICAgIGFsbERheVRleHQ6ICdIZWxlIGRhZ2VuJyxcbiAgICBub0V2ZW50c1RleHQ6ICdJbmdlbiBiZWdpdmVuaGVkZXInLFxuICAgIGV2ZW50VGV4dDogJ0JlZ2l2ZW5oZWRlcicsXG4gICAgZXZlbnRzVGV4dDogJ0JlZ2l2ZW5oZWRlcicsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICd7Y291bnR9IG1lcmUnLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ1N0YXJ0JyxcbiAgICB0b1RleHQ6ICdTbHV0JyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAnSGVsZScsXG4gICAgZnJhY3Rpb25UZXh0OiAnRGVsZScsXG4gICAgdW5pdFRleHQ6ICdFbmhlZCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfDhXInLCAnTcOlbmVkZXInLCAnRGFnZScsICdUaW1lcicsICdNaW51dHRlcicsICdTZWt1bmRlcicsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWyfDhXInLCAnTWRyJywgJ0RnJywgJ1RpbWVyJywgJ01pbicsICdTZWsnLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAnU3RhcnQnLFxuICAgIHN0b3BUZXh0OiAnU3RvcCcsXG4gICAgcmVzZXRUZXh0OiAnTnVsc3RpbCcsXG4gICAgbGFwVGV4dDogJ09tZ2FuZycsXG4gICAgaGlkZVRleHQ6ICdTa2p1bCcsXG4gICAgLy8gRm9ybXNcbiAgICBvZmZUZXh0OiAnRnJhJyxcbiAgICBvblRleHQ6ICdUaWwnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdUaWxiYWdlJyxcbiAgICB1bmRvVGV4dDogJ0ZvcnRyeWQnXG4gIH07XG5cbiAgLy8gRGV1dHNjaFxuICBtb2Jpc2Nyb2xsLmkxOG4uZGUgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdPSycsXG4gICAgY2FuY2VsVGV4dDogJ0FiYnJlY2hlbicsXG4gICAgY2xlYXJUZXh0OiAnTMO2c2NoZW4nLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gYXVzZ2V3w6RobHQnLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgZGF5TmFtZXM6IFsnU29ubnRhZycsICdNb250YWcnLCAnRGllbnN0YWcnLCAnTWl0dHdvY2gnLCAnRG9ubmVyc3RhZycsICdGcmVpdGFnJywgJ1NhbXN0YWcnXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ1NvJywgJ01vJywgJ0RpJywgJ01pJywgJ0RvJywgJ0ZyJywgJ1NhJ10sXG4gICAgZGF5TmFtZXNNaW46IFsnUycsICdNJywgJ0QnLCAnTScsICdEJywgJ0YnLCAnUyddLFxuICAgIGRheVRleHQ6ICdUYWcnLFxuICAgIGRlbGltaXRlcjogJy4nLFxuICAgIGhvdXJUZXh0OiAnU3R1bmRlJyxcbiAgICBtaW51dGVUZXh0OiAnTWludXRlbicsXG4gICAgbW9udGhOYW1lczogWydKYW51YXInLCAnRmVicnVhcicsICdNw6RyeicsICdBcHJpbCcsICdNYWknLCAnSnVuaScsICdKdWxpJywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2t0b2JlcicsICdOb3ZlbWJlcicsICdEZXplbWJlciddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydKYW4nLCAnRmViJywgJ03DpHInLCAnQXByJywgJ01haScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2t0JywgJ05vdicsICdEZXonXSxcbiAgICBtb250aFRleHQ6ICdNb25hdCcsXG4gICAgc2VjVGV4dDogJ1Nla3VuZGVuJyxcbiAgICB0aW1lRm9ybWF0OiAnSEg6aWknLFxuICAgIHllYXJUZXh0OiAnSmFocicsXG4gICAgbm93VGV4dDogJ0pldHp0JyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHRvZGF5VGV4dDogJ0hldXRlJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdHVtJyxcbiAgICB0aW1lVGV4dDogJ1plaXQnLFxuICAgIGNsb3NlVGV4dDogJ1NjaGxpZcOfZW4nLFxuICAgIGFsbERheVRleHQ6ICdHYW56dMOkZ2lnJyxcbiAgICBub0V2ZW50c1RleHQ6ICdLZWluZSBFcmVpZ25pc3NlJyxcbiAgICBldmVudFRleHQ6ICdFcmVpZ25pcycsXG4gICAgZXZlbnRzVGV4dDogJ0VyZWlnbmlzc2UnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50fSB3ZWl0ZXJlcyBFbGVtZW50JyxcbiAgICBtb3JlRXZlbnRzUGx1cmFsVGV4dDogJ3tjb3VudH0gd2VpdGVyZSBFbGVtZW50ZScsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnVm9uJyxcbiAgICB0b1RleHQ6ICdCaXMnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICdHYW56ZSBaYWhsJyxcbiAgICBmcmFjdGlvblRleHQ6ICdCcnVjaHphaGwnLFxuICAgIHVuaXRUZXh0OiAnTWHDn2VpbmhlaXQnLFxuICAgIC8vIFRpbWUgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsnSmFocmUnLCAnTW9uYXRlJywgJ1RhZ2UnLCAnU3R1bmRlbicsICdNaW51dGVuJywgJ1Nla3VuZGVuJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ0phaHIuJywgJ01vbi4nLCAnVGFnLicsICdTdGQuJywgJ01pbi4nLCAnU2VrLicsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdTdGFydGVuJyxcbiAgICBzdG9wVGV4dDogJ1N0b3BwZW4nLFxuICAgIHJlc2V0VGV4dDogJ1p1csO8Y2tzZXR6ZW4nLFxuICAgIGxhcFRleHQ6ICdMYXAnLFxuICAgIGhpZGVUZXh0OiAnQXVzYmxlbmRlbicsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ1p1csO8Y2snLFxuICAgIHVuZG9UZXh0OiAnUsO8Y2tnw6RuZ2lnIG1hY2hlbicsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdBdXMnLFxuICAgIG9uVGV4dDogJ0VpbicsXG4gICAgLy8gTnVtcGFkXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogJywnLFxuICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJyAnXG4gIH07XG5cbiAgLy8gR3JlZWtcbiAgbW9iaXNjcm9sbC5pMThuLmVsID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAnzp/Pgc65z4POvM6/z4InLFxuICAgIGNhbmNlbFRleHQ6ICfOkc66z4XPgc+Jz4POtycsXG4gICAgY2xlYXJUZXh0OiAnzpTOuc6xzrPPgc6xz4bOtycsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSDOtc+AzrnOu861zrPOvM6tzr3OsScsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWyfOms+Fz4HOuc6xzrrOricsICfOlM61z4XPhM6tz4HOsScsICfOpM+Bzq/PhM63JywgJ86kzrXPhM6sz4HPhM63JywgJ86gzq3OvM+Az4TOtycsICfOoM6xz4HOsc+DzrrOtc+Fzq4nLCAnzqPOrM6yzrLOsc+Ezr8nXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ86az4XPgScsICfOlM61z4UnLCAnzqTPgc65JywgJ86kzrXPhCcsICfOoM61zrwnLCAnzqDOsc+BJywgJ86jzrHOsiddLFxuICAgIGRheU5hbWVzTWluOiBbJ86az4UnLCAnzpTOtScsICfOpM+BJywgJ86kzrUnLCAnzqDOtScsICfOoM6xJywgJ86jzrEnXSxcbiAgICBkYXlUZXh0OiAnzrfOvM6tz4HOsScsXG4gICAgZGVsaW1pdGVyOiAnLycsXG4gICAgaG91clRleHQ6ICfPjs+BzrEnLFxuICAgIG1pbnV0ZVRleHQ6ICfOu861z4DPhM+MJyxcbiAgICBtb250aE5hbWVzOiBbJ86ZzrHOvc6/z4XOrM+BzrnOv8+CJywgJ86mzrXOss+Bzr/Phc6sz4HOuc6/z4InLCAnzpzOrM+Bz4TOuc6/z4InLCAnzpHPgM+Bzq/Ou865zr/PgicsICfOnM6szrnOv8+CJywgJ86Zzr/Pjc69zrnOv8+CJywgJ86Zzr/Pjc67zrnOv8+CJywgJ86Rz43Os86/z4XPg8+Ezr/PgicsICfOo861z4DPhM6tzrzOss+BzrnOv8+CJywgJ86fzrrPhM+OzrLPgc65zr/PgicsICfOnc6/zq3OvM6yz4HOuc6/z4InLCAnzpTOtc66zq3OvM6yz4HOuc6/z4InXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsnzpnOsc69JywgJ86mzrXOsicsICfOnM6xz4EnLCAnzpHPgM+BJywgJ86czrHOuScsICfOmc6/z4XOvScsICfOmc6/z4XOuycsICfOkc+FzrMnLCAnzqPOtc+AJywgJ86fzrrPhCcsICfOnc6/zrUnLCAnzpTOtc66J10sXG4gICAgbW9udGhUZXh0OiAnzpzOrs69zrHPgicsXG4gICAgc2VjVGV4dDogJ860zrXPhc+EzrXPgc+MzrvOtc+Az4TOsScsXG4gICAgdGltZUZvcm1hdDogJ0g6aWknLFxuICAgIHllYXJUZXh0OiAnzq3PhM6/z4InLFxuICAgIG5vd1RleHQ6ICfPhM+Oz4HOsScsXG4gICAgcG1UZXh0OiAnzrzOvCcsXG4gICAgYW1UZXh0OiAnz4DOvCcsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZmlyc3REYXk6IDEsXG4gICAgZGF0ZVRleHQ6ICfOl868zrXPgc6/zrzOt869zq/OsScsXG4gICAgdGltZVRleHQ6ICfPhs6/z4HOrCcsXG4gICAgdG9kYXlUZXh0OiAnzqPOrs68zrXPgc6xJyxcbiAgICBwcmV2TW9udGhUZXh0OiAnzqDPgc6/zrfOs86/z43OvM61zr3OvyDOvM6uzr3OsScsXG4gICAgbmV4dE1vbnRoVGV4dDogJ86Vz4DPjM68zrXOvc6/IM68zq7Ovc6xJyxcbiAgICBwcmV2WWVhclRleHQ6ICfOoM+Bzr/Ot86zzr/Pjc68zrXOvc6/IM6tz4TOv8+CJyxcbiAgICBuZXh0WWVhclRleHQ6ICfOlc+Az4zOvM61zr3OvyDOrc+Ezr/PgicsXG4gICAgY2xvc2VUZXh0OiAnzprOu861zq/Pg865zrzOvycsXG4gICAgZXZlbnRUZXh0OiAnzpPOtc6zzr/Ovc+Mz4TOsScsXG4gICAgZXZlbnRzVGV4dDogJ86TzrXOs86/zr3PjM+EzrEnLFxuICAgIGFsbERheVRleHQ6ICfOn867zr/Ors68zrXPgc6/JyxcbiAgICBub0V2ZW50c1RleHQ6ICfOlM61zr0gz4XPgM6sz4HPh86/z4XOvSDOs861zrPOv869z4zPhM6xJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ3tjb3VudH0gzrHOus+MzrzOtycsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnzpHPgc+Hzq4nLFxuICAgIHRvVGV4dDogJ86kzq3Ou86/z4InLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICfOn867z4zOus67zrfPgc6/z4InLFxuICAgIGZyYWN0aW9uVGV4dDogJ866zrvOrM+DzrzOsScsXG4gICAgdW5pdFRleHQ6ICfOnM6/zr3OrM60zrEnLFxuICAgIC8vIFRpbWUgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsnzqfPgc+Mzr3Ouc6xJywgJ86czq7Ovc61z4InLCAnzpfOvM6tz4HOtc+CJywgJ86pz4HOtc+CJywgJ86bzrXPgM+EzqwnLCAnzrTOtc+Fz4TOtc+Bz4zOu861z4DPhM6xJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ86nz4HPjM69zrnOsScsICfOnM6uzr3Otc+CJywgJ86XzrzOrc+BzrXPgicsICfOqc+BzrXPgicsICfOm861z4DPhM6sJywgJ860zrXPhc+EJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ86EzpXOvc6xz4HOvs63JyxcbiAgICBzdG9wVGV4dDogJ86UzrnOsc66zr/PgM6uJyxcbiAgICByZXNldFRleHQ6ICfOlc+AzrHOvc6xz4bOv8+BzqwnLFxuICAgIGxhcFRleHQ6ICfOk8+Nz4HOv8+CJyxcbiAgICBoaWRlVGV4dDogJ866z4HPjc6yz4knLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICfOoM6vz4PPiScsXG4gICAgdW5kb1RleHQ6ICfOkc69zrHOuc+BzrXPg863JyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ86Rzr3Otc69zrXPgc6zz4wnLFxuICAgIG9uVGV4dDogJ86Vzr3Otc+BzrPPjCcsXG4gICAgLy8gTnVtcGFkXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogJywnLFxuICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJyAnXG4gIH07XG5cbiAgLy8gRW5nbGlzaCAoVUspXG4gIG1vYmlzY3JvbGwuaTE4blsnZW4tR0InXSA9IG1vYmlzY3JvbGwuaTE4blsnZW4tVUsnXSA9IHtcbiAgICBkYXRlRm9ybWF0OiAnZGQvbW0veXknLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaSdcbiAgfTtcblxuICAvLyBFc3Bhw7FvbFxuICBtb2Jpc2Nyb2xsLmkxOG4uZXMgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdBY2VwdGFyJyxcbiAgICBjYW5jZWxUZXh0OiAnQ2FuY2VsYXInLFxuICAgIGNsZWFyVGV4dDogJ0JvcnJhcicsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSBzZWxlY2Npb25hZG8nLFxuICAgIHNlbGVjdGVkUGx1cmFsVGV4dDogJ3tjb3VudH0gc2VsZWNjaW9uYWRvcycsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWydEb21pbmdvJywgJ0x1bmVzJywgJ01hcnRlcycsICdNacOpcmNvbGVzJywgJ0p1ZXZlcycsICdWaWVybmVzJywgJ1PDoWJhZG8nXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ0RvJywgJ0x1JywgJ01hJywgJ01pJywgJ0p1JywgJ1ZpJywgJ1PDoSddLFxuICAgIGRheU5hbWVzTWluOiBbJ0QnLCAnTCcsICdNJywgJ00nLCAnSicsICdWJywgJ1MnXSxcbiAgICBkYXlUZXh0OiAnRMOtYScsXG4gICAgaG91clRleHQ6ICdIb3JhcycsXG4gICAgbWludXRlVGV4dDogJ01pbnV0b3MnLFxuICAgIG1vbnRoTmFtZXM6IFsnRW5lcm8nLCAnRmVicmVybycsICdNYXJ6bycsICdBYnJpbCcsICdNYXlvJywgJ0p1bmlvJywgJ0p1bGlvJywgJ0Fnb3N0bycsICdTZXB0aWVtYnJlJywgJ09jdHVicmUnLCAnTm92aWVtYnJlJywgJ0RpY2llbWJyZSddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydFbmUnLCAnRmViJywgJ01hcicsICdBYnInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQWdvJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RpYyddLFxuICAgIG1vbnRoVGV4dDogJ01lcycsXG4gICAgc2VjVGV4dDogJ1NlZ3VuZG9zJyxcbiAgICB0aW1lRm9ybWF0OiAnSEg6aWknLFxuICAgIHllYXJUZXh0OiAnQSZudGlsZGU7bycsXG4gICAgbm93VGV4dDogJ0Fob3JhJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHRvZGF5VGV4dDogJ0hveScsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZmlyc3REYXk6IDEsXG4gICAgZGF0ZVRleHQ6ICdGZWNoYScsXG4gICAgdGltZVRleHQ6ICdUaWVtcG8nLFxuICAgIGNsb3NlVGV4dDogJ0NlcnJhcicsXG4gICAgYWxsRGF5VGV4dDogJ1RvZG8gZWwgZMOtYScsXG4gICAgbm9FdmVudHNUZXh0OiAnTm8gaGF5IGV2ZW50b3MnLFxuICAgIGV2ZW50VGV4dDogJ0V2ZW50bycsXG4gICAgZXZlbnRzVGV4dDogJ0V2ZW50b3MnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50fSBtw6FzJyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICdJbmljaWFyJyxcbiAgICB0b1RleHQ6ICdGaW5hbCcsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ0VudGVybycsXG4gICAgZnJhY3Rpb25UZXh0OiAnRnJhY2Npw7NuJyxcbiAgICB1bml0VGV4dDogJ1VuaWRhZCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWydBw7FvcycsICdNZXNlcycsICdEw61hcycsICdIb3JhcycsICdNaW51dG9zJywgJ1NlZ3VuZG9zJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ0HDsW8nLCAnTWVzJywgJ0TDrWEnLCAnSG9yYScsICdNaW4nLCAnU2VnJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ0luaWNpYXInLFxuICAgIHN0b3BUZXh0OiAnRGV0w6luZ2FzZScsXG4gICAgcmVzZXRUZXh0OiAnUmVpbmljaWFsaXphcicsXG4gICAgbGFwVGV4dDogJ0xhcCcsXG4gICAgaGlkZVRleHQ6ICdFc2NvbmRlcicsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ0F0csOhcycsXG4gICAgdW5kb1RleHQ6ICdEZXNoYWNlcicsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdObycsXG4gICAgb25UZXh0OiAnU8OtJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyDZgdin2LHYs9uMXG4gIG1vYmlzY3JvbGwuaTE4bi5mYSA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ9iq2KfZitmK2K8nLFxuICAgIGNhbmNlbFRleHQ6ICfYp9mG2LXYsdin2YEnLFxuICAgIGNsZWFyVGV4dDogJ9mI2KfYttitICcsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSDZhdmG2KrYrtioJyxcbiAgICAvLyBEYXRldGltZSBjb21wb25lbnRcbiAgICBjYWxlbmRhclN5c3RlbTogJ2phbGFsaScsXG4gICAgZGF0ZUZvcm1hdDogJ3l5L21tL2RkJyxcbiAgICBkYXlOYW1lczogWyfZitqp2LTZhtio2YcnLCAn2K/ZiNi02YbYqNmHJywgJ9iz2YfigIzYtNmG2KjZhycsICfahtmH2KfYsdi02YbYqNmHJywgJ9m+2YbYrOKAjNi02YbYqNmHJywgJ9is2YXYudmHJywgJ9i02YbYqNmHJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWyfbjCcsICfYrycsICfYsycsICfahicsICfZvicsICfYrCcsICfYtCddLFxuICAgIGRheU5hbWVzTWluOiBbJ9uMJywgJ9ivJywgJ9izJywgJ9qGJywgJ9m+JywgJ9isJywgJ9i0J10sXG4gICAgZGF5VGV4dDogJ9ix2YjYsicsXG4gICAgaG91clRleHQ6ICfYs9in2LnYqicsXG4gICAgbWludXRlVGV4dDogJ9iv2YLZitmC2YcnLFxuICAgIG1vbnRoTmFtZXM6IFsn2YHYsdmI2LHYr9mK2YYnLCAn2KfYsdiv2YrYqNmH2LTYqicsICfYrtix2K/Yp9ivJywgJ9iq2YrYsScsICfZhdix2K/Yp9ivJywgJ9i02YfYsdmK2YjYsScsICfZhdmH2LEnLCAn2KLYqNin2YYnLCAn2KLYsNixJywgJ9iv24wnLCAn2KjZh9mF2YYnLCAn2KfYs9mB2YbYryddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyfZgdix2YjYsdiv2YrZhicsICfYp9ix2K/Zitio2YfYtNiqJywgJ9iu2LHYr9in2K8nLCAn2KrZitixJywgJ9mF2LHYr9in2K8nLCAn2LTZh9ix2YrZiNixJywgJ9mF2YfYsScsICfYotio2KfZhicsICfYotiw2LEnLCAn2K/bjCcsICfYqNmH2YXZhicsICfYp9iz2YHZhtivJ10sXG4gICAgbW9udGhUZXh0OiAn2YXYp9mHJyxcbiAgICBzZWNUZXh0OiAn2KvYp9mG2YrZhycsXG4gICAgdGltZUZvcm1hdDogJ0hIOmlpJyxcbiAgICB0aW1lV2hlZWxzOiAnaWlISCcsXG4gICAgLy8gTmVlZCB0aGlzIGZvciBjb3JyZWN0IFJUTCBkaXNwbGF5XG4gICAgeWVhclRleHQ6ICfYs9in2YQnLFxuICAgIG5vd1RleHQ6ICfYp9qp2YbZiNmGJyxcbiAgICBhbVRleHQ6ICfYqCcsXG4gICAgcG1UZXh0OiAn2LUnLFxuICAgIHRvZGF5VGV4dDogJ9in2YXYsdmI2LInLFxuICAgIC8vZ2V0TnVtYmVyOiBmdW5jdGlvbiAobikge1xuICAgIC8vICAgIHZhciBpLFxuICAgIC8vICAgICAgICBudW1zID0gW1wi27BcIiwgXCLbsVwiLCBcItuyXCIsIFwi27NcIiwgXCLbtFwiLCBcItu1XCIsIFwi27ZcIiwgXCLbt1wiLCBcItu4XCIsIFwi27lcIl0sXG4gICAgLy8gICAgICAgIHJlcyA9ICcnO1xuICAgIC8vICAgIG4gPSBuICsgJyc7XG4gICAgLy8gICAgZm9yIChpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAvLyAgICAgICAgcmVzICs9IG51bXNbK25baV1dO1xuICAgIC8vICAgIH1cbiAgICAvLyAgICByZXR1cm4gcmVzO1xuICAgIC8vfSxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogNixcbiAgICBydGw6IHRydWUsXG4gICAgZGF0ZVRleHQ6ICfYqtin2LHbjNiuICcsXG4gICAgdGltZVRleHQ6ICfYstmF2KfZhiAnLFxuICAgIGNsb3NlVGV4dDogJ9mG2LLYr9uM2qknLFxuICAgIGFsbERheVRleHQ6ICfYqtmF2KfZhSDYsdmI2LInLFxuICAgIG5vRXZlbnRzVGV4dDogJ9mH24zahiDYsdmI24zYr9in2K8nLFxuICAgIGV2ZW50VGV4dDogJ9ix2YjbjNiv2KfYrycsXG4gICAgZXZlbnRzVGV4dDogJ9ix2YjbjNiv2KfYr9mH2KcnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50fSDZhdmI2LHYryDYr9uM2q/YsScsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAn2LTYsdmI2LkgJyxcbiAgICB0b1RleHQ6ICfZvtin24zYp9mGJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAn2KrZhdin2YUnLFxuICAgIGZyYWN0aW9uVGV4dDogJ9qp2LPYsScsXG4gICAgdW5pdFRleHQ6ICfZiNin2K3YrycsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfYs9in2YQnLCAn2YXYp9mHJywgJ9ix2YjYsicsICfYs9in2LnYqicsICfYr9mC24zZgtmHJywgJ9ir2KfZhtuM2YcnLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsn2LPYp9mEJywgJ9mF2KfZhycsICfYsdmI2LInLCAn2LPYp9i52KonLCAn2K/ZgtuM2YLZhycsICfYq9in2YbbjNmHJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ9i02LHZiNi5JyxcbiAgICBzdG9wVGV4dDogJ9m+2KfZitin2YYnLFxuICAgIHJlc2V0VGV4dDogJ9iq2YbYuNuM2YUg2YXYrNiv2K8nLFxuICAgIGxhcFRleHQ6ICdMYXAnLFxuICAgIGhpZGVUZXh0OiAn2b7ZhtmH2KfZhiDaqdix2K/ZhicsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ9m+2LTYqicsXG4gICAgdW5kb1RleHQ6ICfZiNin2obbjNiv2YYnXG4gIH07XG5cbiAgLy8gU3VvbWlcbiAgbW9iaXNjcm9sbC5pMThuLmZpID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAnQXNldGEnLFxuICAgIGNhbmNlbFRleHQ6ICdQZXJ1dXRhJyxcbiAgICBjbGVhclRleHQ6ICdUeWhqZW5uw6QnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gdmFsaXRhJyxcbiAgICAvLyBEYXRldGltZSBjb21wb25lbnRcbiAgICBkYXRlRm9ybWF0OiAnZC4gTU0geXknLFxuICAgIGRheU5hbWVzOiBbJ1N1bm51bnRhaScsICdNYWFuYW50YWknLCAnVGlpc3RhaScsICdLZXNraXZpaWtvJywgJ1RvcnN0YWknLCAnUGVyamFudGFpJywgJ0xhdWFudGFpJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWydTdScsICdNYScsICdUaScsICdLZScsICdUbycsICdQZScsICdMYSddLFxuICAgIGRheU5hbWVzTWluOiBbJ1MnLCAnTScsICdUJywgJ0snLCAnVCcsICdQJywgJ0wnXSxcbiAgICBkYXlUZXh0OiAnUMOkaXbDpCcsXG4gICAgZGVsaW1pdGVyOiAnLicsXG4gICAgaG91clRleHQ6ICdUdW50aWEnLFxuICAgIG1pbnV0ZVRleHQ6ICdNaW51dXR0aScsXG4gICAgbW9udGhOYW1lczogWydUYW1taWt1dScsICdIZWxtaWt1dScsICdNYWFsaXNrdXUnLCAnSHVodGlrdXUnLCAnVG91a29rdXUnLCAnS2Vzw6RrdXUnLCAnSGVpbsOka3V1JywgJ0Vsb2t1dScsICdTeXlza3V1JywgJ0xva2FrdXUnLCAnTWFycmFza3V1JywgJ0pvdWx1a3V1J10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ1RhbScsICdIZWwnLCAnTWFhJywgJ0h1aCcsICdUb3UnLCAnS2VzJywgJ0hlaScsICdFbG8nLCAnU3l5JywgJ0xvaycsICdNYXInLCAnSm91J10sXG4gICAgbW9udGhUZXh0OiAnS3V1a2F1c2knLFxuICAgIHNlY1RleHQ6ICdTZWt1bmRhJyxcbiAgICB0aW1lRm9ybWF0OiAnSDppaScsXG4gICAgeWVhclRleHQ6ICdWdW9zaScsXG4gICAgbm93VGV4dDogJ055dCcsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ1DDpGl2w6R5cycsXG4gICAgdGltZVRleHQ6ICdBaWthJyxcbiAgICB0b2RheVRleHQ6ICdUw6Ruw6TDpG4nLFxuICAgIHByZXZNb250aFRleHQ6ICdFZGVsbGluZW4ga3V1a2F1c2knLFxuICAgIG5leHRNb250aFRleHQ6ICdFbnNpIGt1dXNzYScsXG4gICAgcHJldlllYXJUZXh0OiAnRWRlbGxpbmVuIHZ1b3NpJyxcbiAgICBuZXh0WWVhclRleHQ6ICdFbnNpIHZ1b3NpJyxcbiAgICBjbG9zZVRleHQ6ICdTdWxqZScsXG4gICAgZXZlbnRUZXh0OiAnVGFwYWh0dW1pYScsXG4gICAgZXZlbnRzVGV4dDogJ1RhcGFodHVtaWEnLFxuICAgIGFsbERheVRleHQ6ICdLb2tvIHDDpGl2w6QnLFxuICAgIG5vRXZlbnRzVGV4dDogJ0VpIHRhcGFodHVtaWEnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50fSBtdXUnLFxuICAgIG1vcmVFdmVudHNQbHVyYWxUZXh0OiAne2NvdW50fSBtdXV0YScsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnQWxrYWEnLFxuICAgIHRvVGV4dDogJ1DDpMOkdHR5eScsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ0tva29uYWluZW4nLFxuICAgIGZyYWN0aW9uVGV4dDogJ011cnRvbHVrdScsXG4gICAgdW5pdFRleHQ6ICdZa3Npa2vDticsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWydWdW9zaScsICdLdXVrYXVzaScsICdQw6RpdsOkJywgJ1R1bm5pbicsICdNaW51dXR0aScsICdzZWt1bnRpYScsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydWdW8nLCAnS3V1JywgJ1DDpGknLCAnVHVuJywgJ01pbicsICdTZWsnLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAnS8OkeW5uaXN0eXMnLFxuICAgIHN0b3BUZXh0OiAnU2VpcycsXG4gICAgcmVzZXRUZXh0OiAnQXNldGEgdXVkZWxsZWVuJyxcbiAgICBsYXBUZXh0OiAnS2llcnJvcycsXG4gICAgaGlkZVRleHQ6ICdWdW90YScsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ0VkZWxsaW5lbicsXG4gICAgdW5kb1RleHQ6ICdLdW1vYScsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdQb2lzJyxcbiAgICBvblRleHQ6ICdQw6TDpGxsw6QnLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vIEZyYW7Dp2Fpc1xuICBtb2Jpc2Nyb2xsLmkxOG4uZnIgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdUZXJtaW5lcicsXG4gICAgY2FuY2VsVGV4dDogJ0FubnVsZXInLFxuICAgIGNsZWFyVGV4dDogJ0VmZmFjZXInLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gc8OpbGVjdGlvbm7DqScsXG4gICAgc2VsZWN0ZWRQbHVyYWxUZXh0OiAne2NvdW50fSBzw6lsZWN0aW9ubsOpcycsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWydEaW1hbmNoZScsICdMdW5kaScsICdNYXJkaScsICdNZXJjcmVkaScsICdKZXVkaScsICdWZW5kcmVkaScsICdTYW1lZGknXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ0RpbS4nLCAnTHVuLicsICdNYXIuJywgJ01lci4nLCAnSmV1LicsICdWZW4uJywgJ1NhbS4nXSxcbiAgICBkYXlOYW1lc01pbjogWydEJywgJ0wnLCAnTScsICdNJywgJ0onLCAnVicsICdTJ10sXG4gICAgZGF5VGV4dDogJ0pvdXInLFxuICAgIG1vbnRoVGV4dDogJ01vaXMnLFxuICAgIG1vbnRoTmFtZXM6IFsnSmFudmllcicsICdGw6l2cmllcicsICdNYXJzJywgJ0F2cmlsJywgJ01haScsICdKdWluJywgJ0p1aWxsZXQnLCAnQW/Du3QnLCAnU2VwdGVtYnJlJywgJ09jdG9icmUnLCAnTm92ZW1icmUnLCAnRMOpY2VtYnJlJ10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ0phbnYuJywgJ0bDqXZyLicsICdNYXJzJywgJ0F2cmlsJywgJ01haScsICdKdWluJywgJ0p1aWwuJywgJ0Fvw7t0JywgJ1NlcHQuJywgJ09jdC4nLCAnTm92LicsICdEw6ljLiddLFxuICAgIGhvdXJUZXh0OiAnSGV1cmVzJyxcbiAgICBtaW51dGVUZXh0OiAnTWludXRlcycsXG4gICAgc2VjVGV4dDogJ1NlY29uZGVzJyxcbiAgICB0aW1lRm9ybWF0OiAnSEg6aWknLFxuICAgIHllYXJUZXh0OiAnQW5uw6llJyxcbiAgICBub3dUZXh0OiAnTWFpbnRlbmFudCcsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICB0b2RheVRleHQ6IFwiQXVqb3VyZCdodWlcIixcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdGUnLFxuICAgIHRpbWVUZXh0OiAnSGV1cmUnLFxuICAgIGNsb3NlVGV4dDogJ0Zlcm1lcicsXG4gICAgYWxsRGF5VGV4dDogJ1RvdXRlIGxhIGpvdXJuw6llJyxcbiAgICBub0V2ZW50c1RleHQ6ICdBdWN1biDDqXbDqW5lbWVudCcsXG4gICAgZXZlbnRUZXh0OiAnw4l2w6luZW1lbnQnLFxuICAgIGV2ZW50c1RleHQ6ICfDiXbDqW5lbWVudHMnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50fSBhdXRyZScsXG4gICAgbW9yZUV2ZW50c1BsdXJhbFRleHQ6ICd7Y291bnR9IGF1dHJlcycsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnRMOpbWFycmVyJyxcbiAgICB0b1RleHQ6ICdGaW4nLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICdFbnRpZXInLFxuICAgIGZyYWN0aW9uVGV4dDogJ0ZyYWN0aW9uJyxcbiAgICB1bml0VGV4dDogJ1VuaXTDqScsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWydBbnMnLCAnTW9pcycsICdKb3VycycsICdIZXVyZXMnLCAnTWludXRlcycsICdTZWNvbmRlcycsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydBbnMnLCAnTW9pcycsICdKb3VycycsICdIcnMnLCAnTWluJywgJ1NlYycsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdEw6ltYXJyZXInLFxuICAgIHN0b3BUZXh0OiAnQXJyw6p0ZXInLFxuICAgIHJlc2V0VGV4dDogJ1LDqWluaXRpYWxpc2VyJyxcbiAgICBsYXBUZXh0OiAnTGFwJyxcbiAgICBoaWRlVGV4dDogJ0NhY2hleicsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ1JldG91cicsXG4gICAgdW5kb1RleHQ6ICdBbm51bGVyJyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ05vbicsXG4gICAgb25UZXh0OiAnT3VpJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBIZWJyZXdcbiAgbW9iaXNjcm9sbC5pMThuLmhlID0ge1xuICAgIC8vIENvcmVcbiAgICBydGw6IHRydWUsXG4gICAgLy8gUmlnaHQgdG8gbGVmdCBtb2RlXG4gICAgc2V0VGV4dDogJ9ep157Xmdeo15QnLFxuICAgIGNhbmNlbFRleHQ6ICfXkdeZ15jXldecJyxcbiAgICBjbGVhclRleHQ6ICfXoNen15QnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0g16DXkdeX16gnLFxuICAgIHNlbGVjdGVkUGx1cmFsVGV4dDogJ3tjb3VudH0g16DXkdeX16jXlScsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWyfXqNeQ16nXldefJywgJ9ep16DXmScsICfXqdec15nXqdeZJywgJ9eo15HXmdei15knLCAn15fXnteZ16nXmScsICfXqdeZ16nXmScsICfXqdeR16onXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbXCLXkCdcIiwgXCLXkSdcIiwgXCLXkidcIiwgXCLXkydcIiwgXCLXlCdcIiwgXCLXlSdcIiwgXCLXqSdcIl0sXG4gICAgZGF5TmFtZXNNaW46IFsn15AnLCAn15EnLCAn15InLCAn15MnLCAn15QnLCAn15UnLCAn16knXSxcbiAgICBkYXlUZXh0OiAn15nXldedJyxcbiAgICBob3VyVGV4dDogJ9ep16LXldeqJyxcbiAgICBtaW51dGVUZXh0OiAn15PXp9eV16onLFxuICAgIG1vbnRoTmFtZXM6IFsn15nXoNeV15DXqCcsICfXpNeR16jXldeQ16gnLCAn157XqNelJywgJ9eQ16TXqNeZ15wnLCAn157XkNeZJywgJ9eZ15XXoNeZJywgJ9eZ15XXnNeZJywgJ9eQ15XXkteV16HXmCcsICfXodek15jXnteR16gnLCAn15DXlden15jXldeR16gnLCAn16DXldeR157XkdeoJywgJ9eT16bXnteR16gnXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFtcIteZ16DXlVwiLCBcItek15HXqFwiLCBcItee16jXpVwiLCBcIteQ16TXqFwiLCBcItee15DXmVwiLCBcIteZ15XXoFwiLCBcIteZ15XXnFwiLCBcIteQ15XXklwiLCBcIteh16TXmFwiLCBcIteQ15XXp1wiLCBcIteg15XXkVwiLCBcIteT16bXnlwiXSxcbiAgICBtb250aFRleHQ6ICfXl9eV15PXqScsXG4gICAgc2VjVGV4dDogJ9ep16DXmdeV16onLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgdGltZUZvcm1hdDogJ0hIOmlpJyxcbiAgICB0aW1lV2hlZWxzOiAnaWlISCcsXG4gICAgLy8gTmVlZCB0aGlzIGZvciBjb3JyZWN0IFJUTCBkaXNwbGF5XG4gICAgeWVhclRleHQ6ICfXqdeg15QnLFxuICAgIG5vd1RleHQ6ICfXoteb16nXmdeVJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMCxcbiAgICBkYXRlVGV4dDogJ9eq15DXqNeZ15onLFxuICAgIHRpbWVUZXh0OiAn15bXntefJyxcbiAgICBjbG9zZVRleHQ6ICfXodeS15nXqNeUJyxcbiAgICB0b2RheVRleHQ6ICfXlNeZ15XXnScsXG4gICAgYWxsRGF5VGV4dDogJ9eb15wg15TXmdeV150nLFxuICAgIG5vRXZlbnRzVGV4dDogJ9eQ15nXnyDXkNeZ16jXldei15nXnScsXG4gICAgLy8gRXZlbnQgY2FsZW5kYXJcbiAgICBldmVudFRleHQ6ICfXnta016fXqNa215QnLFxuICAgIGV2ZW50c1RleHQ6ICfXnta016fXqNa215QnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAn15DXmdeo15XXoiDXkNeX15Mg16DXldeh16MnLFxuICAgIG1vcmVFdmVudHNQbHVyYWxUZXh0OiAne2NvdW50fSDXkNeZ16jXldei15nXnSDXoNeV16HXpNeZ150nLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ9eU16rXl9ec15QnLFxuICAgIHRvVGV4dDogJ9eh15nXldedJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAn15vWvNa515wnLFxuICAgIGZyYWN0aW9uVGV4dDogJ9ep15HXqNeZ16gnLFxuICAgIHVuaXRUZXh0OiAn15nXl9eZ15PXlCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfXqdeg15nXnScsICfXl9eV15PXqdeZ150nLCAn15nXnteZ150nLCAn16nXoteV16onLCAn15PXp9eV16onLCAn16nXoNeZ15nXnScsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWyfXqdeg15nXnScsICfXl9eV15PXqdeZ150nLCAn15nXnteZ150nLCAn16nXoteV16onLCAn15PXp9eV16onLCAn16nXoNeZ15nXnScsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICfXlNeq15fXnCcsXG4gICAgc3RvcFRleHQ6ICfXotem15XXqCcsXG4gICAgcmVzZXRUZXh0OiAn15DXqteX15XXnCcsXG4gICAgbGFwVGV4dDogJ9eU16fXpNeUJyxcbiAgICBoaWRlVGV4dDogJ9eU16HXqteoJyxcbiAgICAvLyBGb3Jtc1xuICAgIG9mZlRleHQ6ICfXm9eZ15HXldeZJyxcbiAgICBvblRleHQ6ICfXlNek16LXnNeUJyxcbiAgICAvLyBMaXN0dmlld1xuICAgIGJhY2tUZXh0OiAn15fXlteV16gnLFxuICAgIHVuZG9UZXh0OiAn15HXmdeY15XXnCDXpNei15XXnNeUJ1xuICB9O1xuXG4gIC8vIEhpbmRpXG4gIG1vYmlzY3JvbGwuaTE4bi5oaSA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ+CkuOCliOCknyDgpJXgpLDgpYfgpIInLFxuICAgIGNhbmNlbFRleHQ6ICfgpLDgpKbgpY3gpKYg4KSV4KSw4KWH4KSCJyxcbiAgICBjbGVhclRleHQ6ICfgpLjgpL7gpZ4g4KSV4KWLJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IOCkmuCkr+CkqOCkv+CkpCcsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWyfgpLDgpLXgpL/gpLXgpL7gpLAnLCAn4KS44KWL4KSu4KS14KS+4KSwJywgJ+CkruCkguCkl+CksuCkteCkvuCksCcsICfgpKzgpYHgpKfgpLXgpL7gpLAnLCAn4KSX4KWB4KSw4KWB4KS14KS+4KSwJywgJ+CktuClgeCkleCljeCksOCkteCkvuCksCcsICfgpLbgpKjgpL/gpLXgpL7gpLAnXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ+CksOCkteCkvycsICfgpLjgpYvgpK4nLCAn4KSu4KSC4KSX4KSyJywgJ+CkrOClgeCkpycsICfgpJfgpYHgpLDgpYEnLCAn4KS24KWB4KSV4KWN4KSwJywgJ+CktuCkqOCkvyddLFxuICAgIGRheU5hbWVzTWluOiBbJ+CksOCkteCkvycsICfgpLjgpYvgpK4nLCAn4KSu4KSC4KSX4KSyJywgJ+CkrOClgeCkpycsICfgpJfgpYHgpLDgpYEnLCAn4KS24KWB4KSV4KWN4KSwJywgJ+CktuCkqOCkvyddLFxuICAgIGRheVRleHQ6ICfgpKbgpL/gpKgnLFxuICAgIGRlbGltaXRlcjogJy4nLFxuICAgIGhvdXJUZXh0OiAn4KSY4KSC4KSf4KS+JyxcbiAgICBtaW51dGVUZXh0OiAn4KSu4KS/4KSo4KSfJyxcbiAgICBtb250aE5hbWVzOiBbJ+CknOCkqOCkteCksOClgCAnLCAn4KSr4KSw4KS14KSw4KWAJywgJ+CkruCkvuCksOCljeCkmicsICfgpIXgpKrgpY3gpLDgpYfgpLInLCAn4KSu4KSIJywgJ+CknOClguCkqCcsICfgpJzgpYLgpLLgpL7gpIgnLCAn4KSF4KSX4KS44KWN4KSkICcsICfgpLjgpL/gpKTgpK7gpY3gpKzgpLAnLCAn4KSF4KSV4KWN4KSf4KWC4KSs4KSwJywgJ+CkqOCkteCkruCljeCkrOCksCcsICfgpKbgpL/gpLjgpK7gpY3gpKzgpLAnXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsn4KSc4KSoJywgJ+Ckq+CksCcsICfgpK7gpL7gpLDgpY3gpJonLCAn4KSF4KSq4KWN4KSw4KWH4KSyJywgJ+CkruCkiCcsICfgpJzgpYLgpKgnLCAn4KSc4KWC4KSy4KS+4KSIJywgJ+CkheCklycsICfgpLjgpL/gpKQnLCAn4KSF4KSV4KWN4KSfJywgJ+CkqOCktScsICfgpKbgpL8nXSxcbiAgICBtb250aFRleHQ6ICfgpK7gpLngpYDgpKjgpL4nLFxuICAgIHNlY1RleHQ6ICfgpLjgpYfgpJXgpILgpKEnLFxuICAgIHRpbWVGb3JtYXQ6ICdIOmlpJyxcbiAgICB5ZWFyVGV4dDogJ+CkuOCkvuCksicsXG4gICAgbm93VGV4dDogJ+CkheCkrCcsXG4gICAgcG1UZXh0OiAn4KSF4KSq4KSw4KS+4KS54KWN4KSoJyxcbiAgICBhbVRleHQ6ICfgpKrgpYLgpLDgpY3gpLXgpL7gpLngpY3gpKgnLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGRhdGVUZXh0OiAn4KSk4KS/4KSl4KS/JyxcbiAgICB0aW1lVGV4dDogJ+CkuOCkruCkrycsXG4gICAgdG9kYXlUZXh0OiAn4KSG4KScJyxcbiAgICBwcmV2TW9udGhUZXh0OiAn4KSq4KS/4KSb4KWN4KSy4KS+IOCkruCkueCkv+CkqOCkvicsXG4gICAgbmV4dE1vbnRoVGV4dDogJ+CkheCkl+CksuClhyDgpK7gpLngpYDgpKjgpYcnLFxuICAgIHByZXZZZWFyVGV4dDogJ+CkquCkv+Ckm+CksuCkviDgpLjgpL7gpLInLFxuICAgIG5leHRZZWFyVGV4dDogJ+CkheCkl+CksuClhyDgpLXgpLDgpY3gpLcnLFxuICAgIGNsb3NlVGV4dDogJ+CkrOCkguCkpicsXG4gICAgZXZlbnRUZXh0OiAn4KSH4KS14KWH4KSf4KWpJyxcbiAgICBldmVudHNUZXh0OiAn4KSH4KS14KWH4KSf4KWpJyxcbiAgICBhbGxEYXlUZXh0OiAn4KSq4KWC4KSw4KWHIOCkpuCkv+CkqCcsXG4gICAgbm9FdmVudHNUZXh0OiAnRWkgdGFwYWh0dW1pYScsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICd7Y291bnR9IOCklOCksCcsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAn4KS44KWHJyxcbiAgICB0b1RleHQ6ICfgpKTgpJUnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICfgpLjgpK7gpYLgpJrgpL4nLFxuICAgIGZyYWN0aW9uVGV4dDogJ+CkheCkguCkticsXG4gICAgdW5pdFRleHQ6ICfgpIfgpJXgpL7gpIgnLFxuICAgIC8vIFRpbWUgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsn4KS44KS+4KSyJywgJ+CkruCkueClgOCkqOClhycsICfgpKbgpL/gpKgnLCAn4KSY4KSC4KSf4KWHJywgJ+CkruCkv+CkqOCknycsICfgpLjgpYfgpJXgpILgpKEnLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsn4KS44KS+4KSyJywgJ+CkruCkueClgOCkqOClhycsICfgpKbgpL/gpKgnLCAn4KSY4KSC4KSf4KWHJywgJ+CkruCkv+CkqOCknycsICfgpLjgpYfgpJXgpILgpKEnLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAn4KSq4KWN4KSw4KS+4KSw4KSC4KStJyxcbiAgICBzdG9wVGV4dDogJ+CksOCli+CkleClh+CkgicsXG4gICAgcmVzZXRUZXh0OiAn4KSw4KWA4KS44KWH4KSfIOCkleCksOClh+CkgicsXG4gICAgbGFwVGV4dDogJ+CksuCliOCkqicsXG4gICAgaGlkZVRleHQ6ICfgpJvgpL/gpKrgpL7gpKjgpL4nLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICfgpLXgpL7gpKrgpLgnLFxuICAgIC8vIGNoZWNrXG4gICAgdW5kb1RleHQ6ICfgpLXgpL7gpKrgpLgg4KSy4KS+4KSP4KSCJyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ+CkrOCkguCkpicsXG4gICAgb25UZXh0OiAn4KSa4KS+4KSy4KWCJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBDcm9hdGlhblxuICBtb2Jpc2Nyb2xsLmkxOG4uaHIgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdQb3N0YXZpJyxcbiAgICBjYW5jZWxUZXh0OiAnSXpsYXonLFxuICAgIGNsZWFyVGV4dDogJ0l6YnJpxaFpJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IG9kYWJyYW4nLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgZGF5TmFtZXM6IFsnTmVkamVsamEnLCAnUG9uZWRqZWxqYWsnLCAnVXRvcmFrJywgJ1NyaWplZGEnLCAnxIxldHZydGFrJywgJ1BldGFrJywgJ1N1Ym90YSddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnTmVkJywgJ1BvbicsICdVdG8nLCAnU3JpJywgJ8SMZXQnLCAnUGV0JywgJ1N1YiddLFxuICAgIGRheU5hbWVzTWluOiBbJ05lJywgJ1BvJywgJ1V0JywgJ1NyJywgJ8SMZScsICdQZScsICdTdSddLFxuICAgIGRheVRleHQ6ICdEYW4nLFxuICAgIGRlbGltaXRlcjogJy4nLFxuICAgIGhvdXJUZXh0OiAnU2F0JyxcbiAgICBtaW51dGVUZXh0OiAnTWludXRhJyxcbiAgICBtb250aE5hbWVzOiBbJ1NpamXEjWFuaicsICdWZWxqYcSNYScsICdPxb51amFrJywgJ1RyYXZhbmonLCAnU3ZpYmFuaicsICdMaXBhbmonLCAnU3JwYW5qJywgJ0tvbG92b3onLCAnUnVqYW4nLCAnTGlzdG9wYWQnLCAnU3R1ZGVuaScsICdQcm9zaW5hYyddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydTaWonLCAnVmVsaicsICdPxb51JywgJ1RyYScsICdTdmknLCAnTGlwJywgJ1NycCcsICdLb2wnLCAnUnVqJywgJ0xpcycsICdTdHUnLCAnUHJvJ10sXG4gICAgbW9udGhUZXh0OiAnTWplc2VjJyxcbiAgICBzZWNUZXh0OiAnU2VrdW5kYScsXG4gICAgdGltZUZvcm1hdDogJ0g6aWknLFxuICAgIHllYXJUZXh0OiAnR29kaW5hJyxcbiAgICBub3dUZXh0OiAnU2FkYScsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdHVtJyxcbiAgICB0aW1lVGV4dDogJ1ZyaWplbWUnLFxuICAgIHRvZGF5VGV4dDogJ0RhbmFzJyxcbiAgICBwcmV2TW9udGhUZXh0OiAnUHJldGhvZG5pIG1qZXNlYycsXG4gICAgbmV4dE1vbnRoVGV4dDogJ1NsamVkZcSHaSBtamVzZWMnLFxuICAgIHByZXZZZWFyVGV4dDogJ1ByZXRob2RuaSBnb2RpbmEnLFxuICAgIG5leHRZZWFyVGV4dDogJ1NsaWplZGXEh2UgZ29kaW5lJyxcbiAgICBjbG9zZVRleHQ6ICdaYXR2b3JpJyxcbiAgICBldmVudFRleHQ6ICdEb2dhxJFhaicsXG4gICAgZXZlbnRzVGV4dDogJ2RvZ2HEkWFqYScsXG4gICAgYWxsRGF5VGV4dDogJ0NpamVsaSBkYW4nLFxuICAgIG5vRXZlbnRzVGV4dDogJ0JleiBkb2dhxJFhamEnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAnSm/FoSB7Y291bnR9JyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICdQb8SNaW5qZScsXG4gICAgdG9UZXh0OiAnWmF2csWhYXZhJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAnQ2plbGluYScsXG4gICAgZnJhY3Rpb25UZXh0OiAnRnJha2NpamEnLFxuICAgIHVuaXRUZXh0OiAnSmVkaW5pY2EnLFxuICAgIC8vIFRpbWUgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsnZ29kaW5hJywgJ21qZXNlYycsICdkYW4nLCAnc2F0JywgJ21pbnV0YScsICdzZWt1bmRhJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ2dvZCcsICdtamUnLCAnZGFuJywgJ3NhdCcsICdtaW4nLCAnc2VjJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ1BvxI1ldGFrJyxcbiAgICBzdG9wVGV4dDogJ1ByZWtpZCcsXG4gICAgcmVzZXRUZXh0OiAnUmVzZXRpcmFqJyxcbiAgICBsYXBUZXh0OiAnQ2lrbHVzJyxcbiAgICBoaWRlVGV4dDogJ1Nha3JpdGknLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdOYXRyYWcnLFxuICAgIHVuZG9UZXh0OiAnUG9uacWhdGF2YW5qZScsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdVa2xqLicsXG4gICAgb25UZXh0OiAnSXNrbGouJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBNYWd5YXJcbiAgbW9iaXNjcm9sbC5pMThuLmh1ID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAnT0snLFxuICAgIGNhbmNlbFRleHQ6ICdNw6lnc2UnLFxuICAgIGNsZWFyVGV4dDogJ1TDtnJsw6lzJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IGtpdsOhbGFzenR2YScsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ3l5Lm1tLmRkLicsXG4gICAgZGF5TmFtZXM6IFsnVmFzw6FybmFwJywgJ0jDqXRmxZEnLCAnS2VkZCcsICdTemVyZGEnLCAnQ3PDvHTDtnJ0w7ZrJywgJ1DDqW50ZWsnLCAnU3pvbWJhdCddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnVmEnLCAnSMOpJywgJ0tlJywgJ1N6ZScsICdDc8O8JywgJ1DDqScsICdTem8nXSxcbiAgICBkYXlOYW1lc01pbjogWydWJywgJ0gnLCAnSycsICdTeicsICdDcycsICdQJywgJ1N6J10sXG4gICAgZGF5VGV4dDogJ05hcCcsXG4gICAgZGVsaW1pdGVyOiAnLicsXG4gICAgaG91clRleHQ6ICfDk3JhJyxcbiAgICBtaW51dGVUZXh0OiAnUGVyYycsXG4gICAgbW9udGhOYW1lczogWydKYW51w6FyJywgJ0ZlYnJ1w6FyJywgJ03DoXJjaXVzJywgJ8OBcHJpbGlzJywgJ03DoWp1cycsICdKw7puaXVzJywgJ0rDumxpdXMnLCAnQXVndXN6dHVzJywgJ1N6ZXB0ZW1iZXInLCAnT2t0w7NiZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsnSmFuJywgJ0ZlYicsICdNw6FyJywgJ8OBcHInLCAnTcOhaicsICdKw7puJywgJ0rDumwnLCAnQXVnJywgJ1N6ZXAnLCAnT2t0JywgJ05vdicsICdEZWMnXSxcbiAgICBtb250aFRleHQ6ICdIw7NuYXAnLFxuICAgIHNlY1RleHQ6ICdNw6Fzb2RwZXJjJyxcbiAgICB0aW1lRm9ybWF0OiAnSDppaScsXG4gICAgeWVhclRleHQ6ICfDiXYnLFxuICAgIG5vd1RleHQ6ICdNb3N0JyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGRhdGVUZXh0OiAnRMOhdHVtJyxcbiAgICB0aW1lVGV4dDogJ0lkxZEnLFxuICAgIHRvZGF5VGV4dDogJ01hJyxcbiAgICBwcmV2TW9udGhUZXh0OiAnRWzFkXrFkSBow7NuYXAnLFxuICAgIG5leHRNb250aFRleHQ6ICdLw7Z2ZXRrZXrFkSBow7NuYXAnLFxuICAgIHByZXZZZWFyVGV4dDogJ0VsxZF6xZEgw6l2JyxcbiAgICBuZXh0WWVhclRleHQ6ICdLw7Z2ZXRrZXrFkSDDqXYnLFxuICAgIGNsb3NlVGV4dDogJ0JlesOhcicsXG4gICAgZXZlbnRUZXh0OiAnZXNlbcOpbnknLFxuICAgIGV2ZW50c1RleHQ6ICdlc2Vtw6lueScsXG4gICAgYWxsRGF5VGV4dDogJ0Vnw6lzeiBuYXAnLFxuICAgIG5vRXZlbnRzVGV4dDogJ05pbmNzIGVzZW3DqW55JyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ3tjb3VudH0gdG92w6FiYmknLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ0VsZWplJyxcbiAgICB0b1RleHQ6ICdWw6lnZScsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ0Vnw6lzeicsXG4gICAgZnJhY3Rpb25UZXh0OiAnVMO2cnQnLFxuICAgIHVuaXRUZXh0OiAnRWd5c8OpZycsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfDiXYnLCAnSMOzbmFwJywgJ05hcCcsICfDk3JhJywgJ1BlcmMnLCAnTcOhc29kcGVyYycsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWyfDiXYnLCAnSMOzLicsICdOYXAnLCAnw5NyYScsICdQZXJjJywgJ01wLicsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdJbmTDrXQnLFxuICAgIHN0b3BUZXh0OiAnTWVnw6FsbMOtdCcsXG4gICAgcmVzZXRUZXh0OiAnVmlzc3phw6FsbMOtdCcsXG4gICAgbGFwVGV4dDogJ0xhcCcsXG4gICAgaGlkZVRleHQ6ICdFbHJlanQnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdWaXNzemEnLFxuICAgIHVuZG9UZXh0OiAnVmlzc3phdm9uJyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ0tpJyxcbiAgICBvblRleHQ6ICdCZScsXG4gICAgLy8gTnVtcGFkXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogJywnLFxuICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJyAnXG4gIH07XG5cbiAgLy8gSXRhbGlhbm8gXG4gIG1vYmlzY3JvbGwuaTE4bi5pdCA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ09LJyxcbiAgICBjYW5jZWxUZXh0OiAnQW5udWxsYScsXG4gICAgY2xlYXJUZXh0OiAnQ2hpYXJpcmUnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gc2VsZXppb25hdG8nLFxuICAgIHNlbGVjdGVkUGx1cmFsVGV4dDogJ3tjb3VudH0gc2VsZXppb25hdGknLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICdkZC9tbS95eScsXG4gICAgZGF5TmFtZXM6IFsnRG9tZW5pY2EnLCAnTHVuZWTDrCcsICdNYXJ0ZWTDrCcsICdNZXJjb2xlZMOsJywgJ0dpb3ZlZMOsJywgJ1ZlbmVyZMOsJywgJ1NhYmF0byddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnRG8nLCAnTHUnLCAnTWEnLCAnTWUnLCAnR2knLCAnVmUnLCAnU2EnXSxcbiAgICBkYXlOYW1lc01pbjogWydEJywgJ0wnLCAnTScsICdNJywgJ0cnLCAnVicsICdTJ10sXG4gICAgZGF5VGV4dDogJ0dpb3JubycsXG4gICAgaG91clRleHQ6ICdPcmUnLFxuICAgIG1pbnV0ZVRleHQ6ICdNaW51dGknLFxuICAgIG1vbnRoTmFtZXM6IFsnR2VubmFpbycsICdGZWJicmFpbycsICdNYXJ6bycsICdBcHJpbGUnLCAnTWFnZ2lvJywgJ0dpdWdubycsICdMdWdsaW8nLCAnQWdvc3RvJywgJ1NldHRlbWJyZScsICdPdHRvYnJlJywgJ05vdmVtYnJlJywgJ0RpY2VtYnJlJ10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ0dlbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYWcnLCAnR2l1JywgJ0x1ZycsICdBZ28nLCAnU2V0JywgJ090dCcsICdOb3YnLCAnRGljJ10sXG4gICAgbW9udGhUZXh0OiAnTWVzZScsXG4gICAgc2VjVGV4dDogJ1NlY29uZGknLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaScsXG4gICAgeWVhclRleHQ6ICdBbm5vJyxcbiAgICBub3dUZXh0OiAnT3JhJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHRvZGF5VGV4dDogJ09nZ2knLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGRhdGVUZXh0OiAnRGF0YScsXG4gICAgdGltZVRleHQ6ICdWb2x0YScsXG4gICAgY2xvc2VUZXh0OiAnQ2hpdWRlcmUnLFxuICAgIGFsbERheVRleHQ6ICdUdXR0byBpbCBnaW9ybm8nLFxuICAgIG5vRXZlbnRzVGV4dDogJ05lc3N1biBldmVudG8nLFxuICAgIGV2ZW50VGV4dDogJ0V2ZW50bycsXG4gICAgZXZlbnRzVGV4dDogJ0V2ZW50aScsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICd7Y291bnR9IGFsdHJvJyxcbiAgICBtb3JlRXZlbnRzUGx1cmFsVGV4dDogJ2FsdHJpIHtjb3VudH0nLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ0luaXppbycsXG4gICAgdG9UZXh0OiAnRmluZScsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ0ludGVybycsXG4gICAgZnJhY3Rpb25UZXh0OiAnRnJhemlvbmUnLFxuICAgIHVuaXRUZXh0OiAnVW5pdMOgJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ0FubmknLCAnTWVzaScsICdHaW9ybmknLCAnT3JlJywgJ01pbnV0aScsICdTZWNvbmRpJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ0FubmknLCAnTWVzaScsICdHaW8nLCAnT3JlJywgJ01pbicsICdTZWMnLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAnSW5pemlvJyxcbiAgICBzdG9wVGV4dDogJ0FycmVzdG8nLFxuICAgIHJlc2V0VGV4dDogJ1JpcHJpc3RpbmEnLFxuICAgIGxhcFRleHQ6ICdMYXAnLFxuICAgIGhpZGVUZXh0OiAnTmFzY29uZGknLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdJbmRpZXRybycsXG4gICAgdW5kb1RleHQ6ICdBbm51bGxhJyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ1ZpYScsXG4gICAgb25UZXh0OiAnU3UnLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vIOaXpeacrOiqniAtIEphcGFuZXNlXG4gIG1vYmlzY3JvbGwuaTE4bi5qYSA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ+OCu+ODg+ODiCcsXG4gICAgY2FuY2VsVGV4dDogJ+OCreODo+ODs+OCu+ODqycsXG4gICAgY2xlYXJUZXh0OiAn44Kv44Oq44KiJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IOmBuOaKnicsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ3l55bm0bW3mnIhkZOaXpScsXG4gICAgZGF5TmFtZXM6IFsn5pelJywgJ+aciCcsICfngasnLCAn5rC0JywgJ+acqCcsICfph5EnLCAn5ZyfJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWyfml6UnLCAn5pyIJywgJ+eBqycsICfmsLQnLCAn5pyoJywgJ+mHkScsICflnJ8nXSxcbiAgICBkYXlOYW1lc01pbjogWyfml6UnLCAn5pyIJywgJ+eBqycsICfmsLQnLCAn5pyoJywgJ+mHkScsICflnJ8nXSxcbiAgICBkYXlUZXh0OiAn5pelJyxcbiAgICBob3VyVGV4dDogJ+aZgicsXG4gICAgbWludXRlVGV4dDogJ+WIhicsXG4gICAgbW9udGhOYW1lczogWycx5pyIJywgJzLmnIgnLCAnM+aciCcsICc05pyIJywgJzXmnIgnLCAnNuaciCcsICc35pyIJywgJzjmnIgnLCAnOeaciCcsICcxMOaciCcsICcxMeaciCcsICcxMuaciCddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWycx5pyIJywgJzLmnIgnLCAnM+aciCcsICc05pyIJywgJzXmnIgnLCAnNuaciCcsICc35pyIJywgJzjmnIgnLCAnOeaciCcsICcxMOaciCcsICcxMeaciCcsICcxMuaciCddLFxuICAgIG1vbnRoVGV4dDogJ+aciCcsXG4gICAgc2VjVGV4dDogJ+enkicsXG4gICAgdGltZUZvcm1hdDogJ0hIOmlpJyxcbiAgICB5ZWFyVGV4dDogJ+W5tCcsXG4gICAgbm93VGV4dDogJ+S7iicsXG4gICAgcG1UZXh0OiAn5Y2I5b6MJyxcbiAgICBhbVRleHQ6ICfljYjliY0nLFxuICAgIHllYXJTdWZmaXg6ICflubQnLFxuICAgIG1vbnRoU3VmZml4OiAn5pyIJyxcbiAgICBkYXlTdWZmaXg6ICfml6UnLFxuICAgIHRvZGF5VGV4dDogJ+S7iuaXpScsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZGF0ZVRleHQ6ICfml6Xku5gnLFxuICAgIHRpbWVUZXh0OiAn5pmC6ZaTJyxcbiAgICBjbG9zZVRleHQ6ICfjgq/jg63jg7zjgronLFxuICAgIGFsbERheVRleHQ6ICfntYLml6UnLFxuICAgIG5vRXZlbnRzVGV4dDogJ+OCpOODmeODs+ODiOOBr+OBguOCiuOBvuOBm+OCkycsXG4gICAgZXZlbnRUZXh0OiAn44Kk44OZ44Oz44OIJyxcbiAgICBldmVudHNUZXh0OiAn44Kk44OZ44Oz44OIJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ+S7liB7Y291bnR9IOS7ticsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAn6ZaL5aeLJyxcbiAgICB0b1RleHQ6ICfntYLjgo/jgoonLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICflhajmlbAnLFxuICAgIGZyYWN0aW9uVGV4dDogJ+WIhuaVsCcsXG4gICAgdW5pdFRleHQ6ICfljZjkvY0nLFxuICAgIC8vIFRpbWUgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsn5bm06ZaTJywgJ+aciOmWkycsICfml6XplpMnLCAn5pmC6ZaTJywgJ+WIhicsICfnp5InLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsn5bm06ZaTJywgJ+aciOmWkycsICfml6XplpMnLCAn5pmC6ZaTJywgJ+WIhicsICfnp5InLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAn6ZaL5aeLJyxcbiAgICBzdG9wVGV4dDogJ+WBnOatoicsXG4gICAgcmVzZXRUZXh0OiAn44Oq44K744OD44OIJyxcbiAgICBsYXBUZXh0OiAn44Op44OD44OXJyxcbiAgICBoaWRlVGV4dDogJ+maoOOBmScsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ+ODkOODg+OCrycsXG4gICAgdW5kb1RleHQ6ICfjgqLjg7Pjg4njgqUnXG4gIH07XG5cbiAgLy8gS29yZWFuXG4gIG1vYmlzY3JvbGwuaTE4bi5rbyA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ+yEpOyglScsXG4gICAgY2FuY2VsVGV4dDogJ+y3qOyGjCcsXG4gICAgY2xlYXJUZXh0OiAn7IKt7KCcJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IOyEoO2DneuQnCcsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ3l564WEbW3sm5RkZOydvCcsXG4gICAgZGF5TmFtZXM6IFsn7J287JqU7J28JywgJ+yblOyalOydvCcsICftmZTsmpTsnbwnLCAn7IiY7JqU7J28JywgJ+uqqeyalOydvCcsICfquIjsmpTsnbwnLCAn7Yag7JqU7J28J10sXG4gICAgZGF5TmFtZXNTaG9ydDogWyfsnbwnLCAn7JuUJywgJ+2ZlCcsICfsiJgnLCAn66qpJywgJ+q4iCcsICfthqAnXSxcbiAgICBkYXlOYW1lc01pbjogWyfsnbwnLCAn7JuUJywgJ+2ZlCcsICfsiJgnLCAn66qpJywgJ+q4iCcsICfthqAnXSxcbiAgICBkYXlUZXh0OiAn7J28JyxcbiAgICBkZWxpbWl0ZXI6ICctJyxcbiAgICBob3VyVGV4dDogJ+yLnOqwhCcsXG4gICAgbWludXRlVGV4dDogJ+u2hCcsXG4gICAgbW9udGhOYW1lczogWycx7JuUJywgJzLsm5QnLCAnM+yblCcsICc07JuUJywgJzXsm5QnLCAnNuyblCcsICc37JuUJywgJzjsm5QnLCAnOeyblCcsICcxMOyblCcsICcxMeyblCcsICcxMuyblCddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWycx7JuUJywgJzLsm5QnLCAnM+yblCcsICc07JuUJywgJzXsm5QnLCAnNuyblCcsICc37JuUJywgJzjsm5QnLCAnOeyblCcsICcxMOyblCcsICcxMeyblCcsICcxMuyblCddLFxuICAgIG1vbnRoVGV4dDogJ+uLrCcsXG4gICAgc2VjVGV4dDogJ+y0iCcsXG4gICAgdGltZUZvcm1hdDogJ0g6aWknLFxuICAgIHllYXJUZXh0OiAn64WEJyxcbiAgICBub3dUZXh0OiAn7KeA6riIJyxcbiAgICBwbVRleHQ6ICfsmKTtm4QnLFxuICAgIGFtVGV4dDogJ+yYpOyghCcsXG4gICAgeWVhclN1ZmZpeDogJ+uFhCcsXG4gICAgbW9udGhTdWZmaXg6ICfsm5QnLFxuICAgIGRheVN1ZmZpeDogJ+ydvCcsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZmlyc3REYXk6IDAsXG4gICAgZGF0ZVRleHQ6ICfrgqDsp5wnLFxuICAgIHRpbWVUZXh0OiAn7Iuc6rCEJyxcbiAgICB0b2RheVRleHQ6ICfsmKTripgnLFxuICAgIHByZXZNb250aFRleHQ6ICfsnbTsoIQg64usJyxcbiAgICBuZXh0TW9udGhUZXh0OiAn64uk7J2MIOuLrCcsXG4gICAgcHJldlllYXJUZXh0OiAn7J207KCEIOuFhCcsXG4gICAgbmV4dFllYXJUZXh0OiAn64uk7J2MIOuFhCcsXG4gICAgY2xvc2VUZXh0OiAn64ur6riwJyxcbiAgICBldmVudFRleHQ6ICfsnbTrsqTtirgnLFxuICAgIGV2ZW50c1RleHQ6ICfsnbTrsqTtirgnLFxuICAgIGFsbERheVRleHQ6ICfsooXsnbwnLFxuICAgIG5vRXZlbnRzVGV4dDogJ+ydtOuypO2KuCDsl4bsnYwnLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50feqwnCDrjZTrs7TquLAnLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ+yLnOyekScsXG4gICAgdG9UZXh0OiAn7KKF66OMJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAn7KCV7IiYJyxcbiAgICBmcmFjdGlvblRleHQ6ICfrtoTsiJgnLFxuICAgIHVuaXRUZXh0OiAn64uo7JyEJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ+uFhCcsICfri6wnLCAn7J28JywgJ+yLnOqwhCcsICfrtoQnLCAn7LSIJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ+uFhCcsICfri6wnLCAn7J28JywgJ+yLnOqwhCcsICfrtoQnLCAn7LSIJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ+yLnOyekScsXG4gICAgc3RvcFRleHQ6ICfspJHsp4AgJyxcbiAgICByZXNldFRleHQ6ICfstIjquLDtmZQnLFxuICAgIGxhcFRleHQ6ICfquLDroZ0nLFxuICAgIGhpZGVUZXh0OiAn7Iio64qUIOyepeyGjCcsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ+uSpOuhnCcsXG4gICAgdW5kb1RleHQ6ICfsi6Ttlonst6jshownLFxuICAgIC8vIEZvcm1cbiAgICBvZmZUZXh0OiAn64GUJyxcbiAgICBvblRleHQ6ICfsvKwnLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vIExpZXR1dmnFs1xuICBtb2Jpc2Nyb2xsLmkxOG4ubHQgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdPSycsXG4gICAgY2FuY2VsVGV4dDogJ0F0xaFhdWt0aScsXG4gICAgY2xlYXJUZXh0OiAnScWhdmFseXRpJyxcbiAgICBzZWxlY3RlZFRleHQ6ICdQYXNpcmlua3RhcyB7Y291bnR9JyxcbiAgICBzZWxlY3RlZFBsdXJhbFRleHQ6ICdQYXNpcmlua3RpIHtjb3VudH0nLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICd5eS1tbS1kZCcsXG4gICAgZGF5TmFtZXM6IFsnU2VrbWFkaWVuaXMnLCAnUGlybWFkaWVuaXMnLCAnQW50cmFkaWVuaXMnLCAnVHJlxI1pYWRpZW5pcycsICdLZXR2aXJ0YWRpZW5pcycsICdQZW5rdGFkaWVuaXMnLCAnxaBlxaF0YWRpZW5pcyddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnUycsICdQcicsICdBJywgJ1QnLCAnSycsICdQbicsICfFoCddLFxuICAgIGRheU5hbWVzTWluOiBbJ1MnLCAnUHInLCAnQScsICdUJywgJ0snLCAnUG4nLCAnxaAnXSxcbiAgICBkYXlUZXh0OiAnRGllbmEnLFxuICAgIGhvdXJUZXh0OiAnVmFsYW5kYScsXG4gICAgbWludXRlVGV4dDogJ01pbnV0ZXMnLFxuICAgIG1vbnRoTmFtZXM6IFsnU2F1c2lzJywgJ1Zhc2FyaXMnLCAnS292YXMnLCAnQmFsYW5kaXMnLCAnR2VndcW+xJcnLCAnQmlyxb5lbGlzJywgJ0xpZXBhJywgJ1J1Z3Bqxat0aXMnLCAnUnVnc8SXamlzJywgJ1NwYWxpcycsICdMYXBrcml0aXMnLCAnR3J1b2RpcyddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydTYXUnLCAnVmFzJywgJ0tvdicsICdCYWwnLCAnR2VnJywgJ0JpcicsICdMaWUnLCAnUnVncCcsICdSdWdzJywgJ1NwYScsICdMYXAnLCAnR3J1byddLFxuICAgIG1vbnRoVGV4dDogJ03El251bycsXG4gICAgc2VjVGV4dDogJ1Nla3VuZGVzJyxcbiAgICBhbVRleHQ6ICdhbScsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaScsXG4gICAgeWVhclRleHQ6ICdNZXRhaScsXG4gICAgbm93VGV4dDogJ0RhYmFyJyxcbiAgICB0b2RheVRleHQ6ICfFoGlhbmRpZW4nLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGRhdGVUZXh0OiAnRGF0YScsXG4gICAgdGltZVRleHQ6ICdMYWlrYXMnLFxuICAgIGNsb3NlVGV4dDogJ1XFvmRhcnl0aScsXG4gICAgYWxsRGF5VGV4dDogJ1Zpc8SFIGRpZW7EhScsXG4gICAgbm9FdmVudHNUZXh0OiAnTsSXcmEgxK92eWtpxbMnLFxuICAgIGV2ZW50VGV4dDogJ8SudnlracWzJyxcbiAgICBldmVudHNUZXh0OiAnxK52eWtpYWknLFxuICAgIG1vcmVFdmVudHNUZXh0OiAnRGFyIHtjb3VudH0nLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ051bycsXG4gICAgdG9UZXh0OiAnSWtpJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAnVmlzYXMnLFxuICAgIGZyYWN0aW9uVGV4dDogJ0ZyYWtjaWphJyxcbiAgICB1bml0VGV4dDogJ1ZpZW5ldGFzJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ01ldGFpJywgJ03El25lc2lhaScsICdEaWVub3MnLCAnVmFsYW5kb3MnLCAnTWludXRlcycsICdTZWt1bmRlcycsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydtJywgJ23El24uJywgJ2QnLCAnaCcsICdtaW4nLCAncycsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdQcmFkxJd0aScsXG4gICAgc3RvcFRleHQ6ICdTdXN0YWJkeXRpJyxcbiAgICByZXNldFRleHQ6ICdJxaFuYXVqbycsXG4gICAgbGFwVGV4dDogJ1JhdGFzJyxcbiAgICBoaWRlVGV4dDogJ1NsxJdwdGknLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdBdGdhbCcsXG4gICAgdW5kb1RleHQ6ICdBbnVsaXVvdGknLFxuICAgIC8vIEZvcm1cbiAgICBvZmZUZXh0OiAnScWhai4nLFxuICAgIG9uVGV4dDogJ8Suai4nLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vIE5lZGVybGFuZHNcbiAgbW9iaXNjcm9sbC5pMThuLm5sID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAnSW5zdGVsbGVuJyxcbiAgICBjYW5jZWxUZXh0OiAnQW5udWxlcmVuJyxcbiAgICBjbGVhclRleHQ6ICdMZWVnbWFrZW4nLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gZ2Vrb3plbicsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkLW1tLXl5JyxcbiAgICBkYXlOYW1lczogWydab25kYWcnLCAnTWFhbmRhZycsICdEaW5zZGFnJywgJ1dvZW5zZGFnJywgJ0RvbmRlcmRhZycsICdWcmlqZGFnJywgJ1phdGVyZGFnJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWyd6bycsICdtYScsICdkaScsICd3bycsICdkbycsICd2cicsICd6YSddLFxuICAgIGRheU5hbWVzTWluOiBbJ3onLCAnbScsICdkJywgJ3cnLCAnZCcsICd2JywgJ3onXSxcbiAgICBkYXlUZXh0OiAnRGFnJyxcbiAgICBob3VyVGV4dDogJ1V1cicsXG4gICAgbWludXRlVGV4dDogJ01pbnV0ZW4nLFxuICAgIG1vbnRoTmFtZXM6IFsnamFudWFyaScsICdmZWJydWFyaScsICdtYWFydCcsICdhcHJpbCcsICdtZWknLCAnanVuaScsICdqdWxpJywgJ2F1Z3VzdHVzJywgJ3NlcHRlbWJlcicsICdva3RvYmVyJywgJ25vdmVtYmVyJywgJ2RlY2VtYmVyJ10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ2phbicsICdmZWInLCAnbXJ0JywgJ2FwcicsICdtZWknLCAnanVuJywgJ2p1bCcsICdhdWcnLCAnc2VwJywgJ29rdCcsICdub3YnLCAnZGVjJ10sXG4gICAgbW9udGhUZXh0OiAnTWFhbmQnLFxuICAgIHNlY1RleHQ6ICdTZWNvbmRlbicsXG4gICAgdGltZUZvcm1hdDogJ0hIOmlpJyxcbiAgICB5ZWFyVGV4dDogJ0phYXInLFxuICAgIG5vd1RleHQ6ICdOdScsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICB0b2RheVRleHQ6ICdWYW5kYWFnJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdHVtJyxcbiAgICB0aW1lVGV4dDogJ1RpamQnLFxuICAgIGNsb3NlVGV4dDogJ1NsdWl0ZW4nLFxuICAgIGFsbERheVRleHQ6ICdIZWxlIGRhZycsXG4gICAgbm9FdmVudHNUZXh0OiAnR2VlbiBhY3Rpdml0ZWl0ZW4nLFxuICAgIGV2ZW50VGV4dDogJ0FjdGl2aXRlaXQnLFxuICAgIGV2ZW50c1RleHQ6ICdBY3Rpdml0ZWl0ZW4nLFxuICAgIG1vcmVFdmVudHNUZXh0OiAnbm9nIHtjb3VudH0nLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ1N0YXJ0JyxcbiAgICB0b1RleHQ6ICdFaW5kZScsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ2dlaGVlbCcsXG4gICAgZnJhY3Rpb25UZXh0OiAnZnJhY3RpZScsXG4gICAgdW5pdFRleHQ6ICdlZW5oZWlkJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ0phcmVuJywgJ01hYW5kZW4nLCAnRGFnZW4nLCAnVXJlbicsICdNaW51dGVuJywgJ1NlY29uZGVuJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ2onLCAnbScsICdkJywgJ3UnLCAnbWluJywgJ3NlYycsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdTdGFydCcsXG4gICAgc3RvcFRleHQ6ICdTdG9wJyxcbiAgICByZXNldFRleHQ6ICdSZXNldCcsXG4gICAgbGFwVGV4dDogJ1JvbmRlJyxcbiAgICBoaWRlVGV4dDogJ1ZlcmJlcmdlbicsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ1RlcnVnJyxcbiAgICB1bmRvVGV4dDogJ09uZ2VkLiBtYWtlbicsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdVaXQnLFxuICAgIG9uVGV4dDogJ0FhbicsXG4gICAgLy8gTnVtcGFkXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogJywnLFxuICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJyAnXG4gIH07XG5cbiAgLy8gTm9yc2tcbiAgbW9iaXNjcm9sbC5pMThuLm5vID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAnT0snLFxuICAgIGNhbmNlbFRleHQ6ICdBdmJyeXQnLFxuICAgIGNsZWFyVGV4dDogJ1TDuG1tZScsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSB2YWxndCcsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBkYXlOYW1lczogWydTw7huZGFnJywgJ01hbmRhZycsICdUaXJzZGFnJywgJ09uc2RhZycsICdUb3JzZGFnJywgJ0ZyZWRhZycsICdMw7hyZGFnJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWydTw7gnLCAnTWEnLCAnVGknLCAnT24nLCAnVG8nLCAnRnInLCAnTMO4J10sXG4gICAgZGF5TmFtZXNNaW46IFsnUycsICdNJywgJ1QnLCAnTycsICdUJywgJ0YnLCAnTCddLFxuICAgIGRheVRleHQ6ICdEYWcnLFxuICAgIGRlbGltaXRlcjogJy4nLFxuICAgIGhvdXJUZXh0OiAnVGltZScsXG4gICAgbWludXRlVGV4dDogJ01pbnV0dCcsXG4gICAgbW9udGhOYW1lczogWydKYW51YXInLCAnRmVicnVhcicsICdNYXJzJywgJ0FwcmlsJywgJ01haScsICdKdW5pJywgJ0p1bGknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPa3RvYmVyJywgJ05vdmVtYmVyJywgJ0Rlc2VtYmVyJ10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYWknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09rdCcsICdOb3YnLCAnRGVzJ10sXG4gICAgbW9udGhUZXh0OiAnTcOlbmVkJyxcbiAgICBzZWNUZXh0OiAnU2VrdW5kJyxcbiAgICB0aW1lRm9ybWF0OiAnSEg6aWknLFxuICAgIHllYXJUZXh0OiAnw4VyJyxcbiAgICBub3dUZXh0OiAnTsOlJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHRvZGF5VGV4dDogJ0kgZGFnJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdG8nLFxuICAgIHRpbWVUZXh0OiAnVGlkJyxcbiAgICBjbG9zZVRleHQ6ICdMdWtrJyxcbiAgICBhbGxEYXlUZXh0OiAnSGVsZSBkYWdlbicsXG4gICAgbm9FdmVudHNUZXh0OiAnSW5nZW4gaGVuZGVsc2VyJyxcbiAgICBldmVudFRleHQ6ICdIZW5kZWxzZScsXG4gICAgZXZlbnRzVGV4dDogJ0hlbmRlbHNlcicsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICd7Y291bnR9IG1lcmUnLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ1N0YXJ0JyxcbiAgICB0b1RleHQ6ICdFbmQnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICdIZWxlJyxcbiAgICBmcmFjdGlvblRleHQ6ICdGcmFrc2pvbicsXG4gICAgdW5pdFRleHQ6ICdFbmhldCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfDhXInLCAnTcOlbmVkZXInLCAnRGFnZXInLCAnVGltZXInLCAnTWludXR0ZXInLCAnU2VrdW5kZXInLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsnw4VyJywgJ03DpW4nLCAnRGFnJywgJ1RpbWUnLCAnTWluJywgJ1NlaycsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdTdGFydCcsXG4gICAgc3RvcFRleHQ6ICdTdG9wcCcsXG4gICAgcmVzZXRUZXh0OiAnVGlsYmFrZXN0aWxsZScsXG4gICAgbGFwVGV4dDogJ1J1bmRlJyxcbiAgICBoaWRlVGV4dDogJ1NranVsJyxcbiAgICAvLyBMaXN0dmlld1xuICAgIGJhY2tUZXh0OiAnVGlsYmFrZScsXG4gICAgdW5kb1RleHQ6ICdBbmdyZScsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdBdicsXG4gICAgb25UZXh0OiAnUMOlJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBQb2xza2lcbiAgbW9iaXNjcm9sbC5pMThuLnBsID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAnWmVzdGF3JyxcbiAgICBjYW5jZWxUZXh0OiAnQW51bHVqJyxcbiAgICBjbGVhclRleHQ6ICdPY3p5xZtjacSHJyxcbiAgICBzZWxlY3RlZFRleHQ6ICdXeWLDs3I6IHtjb3VudH0nLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICd5eS1tbS1kZCcsXG4gICAgZGF5TmFtZXM6IFsnTmllZHppZWxhJywgJ1BvbmllZHppYcWCZWsnLCAnV3RvcmVrJywgJ8Wacm9kYScsICdDendhcnRlaycsICdQacSFdGVrJywgJ1NvYm90YSddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnTmllZHouJywgJ1Bvbi4nLCAnV3QuJywgJ8Waci4nLCAnQ3p3LicsICdQdC4nLCAnU29iLiddLFxuICAgIGRheU5hbWVzTWluOiBbJ04nLCAnUCcsICdXJywgJ8WaJywgJ0MnLCAnUCcsICdTJ10sXG4gICAgZGF5VGV4dDogJ0R6aWXFhCcsXG4gICAgaG91clRleHQ6ICdHb2R6aW55JyxcbiAgICBtaW51dGVUZXh0OiAnTWludXR5JyxcbiAgICBtb250aE5hbWVzOiBbJ1N0eWN6ZcWEJywgJ0x1dHknLCAnTWFyemVjJywgJ0t3aWVjaWXFhCcsICdNYWonLCAnQ3plcndpZWMnLCAnTGlwaWVjJywgJ1NpZXJwaWXFhCcsICdXcnplc2llxYQnLCAnUGHFumR6aWVybmlrJywgJ0xpc3RvcGFkJywgJ0dydWR6aWXFhCddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydTdHknLCAnTHV0JywgJ01hcicsICdLd2knLCAnTWFqJywgJ0N6ZScsICdMaXAnLCAnU2llJywgJ1dyeicsICdQYcW6JywgJ0xpcycsICdHcnUnXSxcbiAgICBtb250aFRleHQ6ICdNaWVzacSFYycsXG4gICAgc2VjVGV4dDogJ1Nla3VuZHknLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaScsXG4gICAgeWVhclRleHQ6ICdSb2snLFxuICAgIG5vd1RleHQ6ICdUZXJheicsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHBtVGV4dDogJ3BtJyxcbiAgICB0b2RheVRleHQ6ICdEemlzaWFqJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdGEnLFxuICAgIHRpbWVUZXh0OiAnQ3phcycsXG4gICAgY2xvc2VUZXh0OiAnWmFrb8WEY3plbmllJyxcbiAgICBhbGxEYXlUZXh0OiAnQ2HFgnkgZHppZcWEJyxcbiAgICBub0V2ZW50c1RleHQ6ICdCcmFrIHd5ZGFyemXFhCcsXG4gICAgZXZlbnRUZXh0OiAnV3lkYXJ6ZcWEJyxcbiAgICBldmVudHNUZXh0OiAnV3lkYXJ6ZW5pYScsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICdKZXN6Y3plIHtjb3VudH0nLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ1JvenBvY3rEmWNpZScsXG4gICAgdG9UZXh0OiAnS29uaWVjJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAnQ2HFgnknLFxuICAgIGZyYWN0aW9uVGV4dDogJ1XFgmFtZWsnLFxuICAgIHVuaXRUZXh0OiAnSmVkbm9zdGthJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ0xhdGEnLCAnTWllc2nEhWMnLCAnRG5pJywgJ0dvZHppbnknLCAnTWludXR5JywgJ1Nla3VuZHknLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsnUicsICdNJywgJ0R6JywgJ0dvZHonLCAnTWluJywgJ1NlaycsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdSb3pwb2N6xJljaWUnLFxuICAgIHN0b3BUZXh0OiAnWmF0cnp5bWHEhycsXG4gICAgcmVzZXRUZXh0OiAnWnJlc2V0b3dhxIcnLFxuICAgIGxhcFRleHQ6ICdaYWvFgmFka2EnLFxuICAgIGhpZGVUZXh0OiAnVWtyecSHJyxcbiAgICAvLyBMaXN0dmlld1xuICAgIGJhY2tUZXh0OiAnV3LDs8SHJyxcbiAgICB1bmRvVGV4dDogJ0NvZm5paicsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdXecWCJyxcbiAgICBvblRleHQ6ICdXxYInLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vIFBvcnR1Z3XDqnMgQnJhc2lsZWlyb1xuICBtb2Jpc2Nyb2xsLmkxOG5bJ3B0LUJSJ10gPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdTZWxlY2lvbmFyJyxcbiAgICBjYW5jZWxUZXh0OiAnQ2FuY2VsYXInLFxuICAgIGNsZWFyVGV4dDogJ0NsYXJvJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IHNlbGVjaW9uYWRvJyxcbiAgICBzZWxlY3RlZFBsdXJhbFRleHQ6ICd7Y291bnR9IHNlbGVjaW9uYWRvcycsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkL21tL3l5JyxcbiAgICBkYXlOYW1lczogWydEb21pbmdvJywgJ1NlZ3VuZGEtZmVpcmEnLCAnVGVyw6dhLWZlaXJhJywgJ1F1YXJ0YS1mZWlyYScsICdRdWludGEtZmVpcmEnLCAnU2V4dGEtZmVpcmEnLCAnU8OhYmFkbyddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnRG9tJywgJ1NlZycsICdUZXInLCAnUXVhJywgJ1F1aScsICdTZXgnLCAnU8OhYiddLFxuICAgIGRheU5hbWVzTWluOiBbJ0QnLCAnUycsICdUJywgJ1EnLCAnUScsICdTJywgJ1MnXSxcbiAgICBkYXlUZXh0OiAnRGlhJyxcbiAgICBob3VyVGV4dDogJ0hvcmEnLFxuICAgIG1pbnV0ZVRleHQ6ICdNaW51dG9zJyxcbiAgICBtb250aE5hbWVzOiBbJ0phbmVpcm8nLCAnRmV2ZXJlaXJvJywgJ01hcsOnbycsICdBYnJpbCcsICdNYWlvJywgJ0p1bmhvJywgJ0p1bGhvJywgJ0Fnb3N0bycsICdTZXRlbWJybycsICdPdXR1YnJvJywgJ05vdmVtYnJvJywgJ0RlemVtYnJvJ10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ0phbicsICdGZXYnLCAnTWFyJywgJ0FicicsICdNYWknLCAnSnVuJywgJ0p1bCcsICdBZ28nLCAnU2V0JywgJ091dCcsICdOb3YnLCAnRGV6J10sXG4gICAgbW9udGhUZXh0OiAnTcOqcycsXG4gICAgc2VjVGV4dDogJ1NlZ3VuZG8nLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaScsXG4gICAgeWVhclRleHQ6ICdBbm8nLFxuICAgIG5vd1RleHQ6ICdBZ29yYScsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICB0b2RheVRleHQ6ICdIb2plJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBkYXRlVGV4dDogJ0RhdGEnLFxuICAgIHRpbWVUZXh0OiAnVGVtcG8nLFxuICAgIGNsb3NlVGV4dDogJ0ZlY2hhcicsXG4gICAgYWxsRGF5VGV4dDogJ0RpYSBpbnRlaXJvJyxcbiAgICBub0V2ZW50c1RleHQ6ICdOZW5odW0gZXZlbnRvJyxcbiAgICBldmVudFRleHQ6ICdFdmVudG8nLFxuICAgIGV2ZW50c1RleHQ6ICdFdmVudG9zJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ01haXMge2NvdW50fScsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnSW4maWFjdXRlO2NpbycsXG4gICAgdG9UZXh0OiAnRmltJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAnSW50ZWlybycsXG4gICAgZnJhY3Rpb25UZXh0OiAnRnJhw6fDo28nLFxuICAgIHVuaXRUZXh0OiAnVW5pZGFkZScsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWydBbm9zJywgJ01lc2VzJywgJ0RpYXMnLCAnSG9yYXMnLCAnTWludXRvcycsICdTZWd1bmRvcycsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydBbm8nLCAnTSZlY2lyYztzJywgJ0RpYScsICdIb3JhJywgJ01pbicsICdTZWcnLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAnQ29tZcOnYXInLFxuICAgIHN0b3BUZXh0OiAnUGFyZScsXG4gICAgcmVzZXRUZXh0OiAnUmVpbmljaWFsaXphcicsXG4gICAgbGFwVGV4dDogJ0xhcCcsXG4gICAgaGlkZVRleHQ6ICdFc2NvbmRlcicsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ0FudGVyaW9yJyxcbiAgICB1bmRvVGV4dDogJ0Rlc2ZhemVyJyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ0Rlc2wnLFxuICAgIG9uVGV4dDogJ0xpZycsXG4gICAgLy8gTnVtcGFkXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogJywnLFxuICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJyAnXG4gIH07XG5cbiAgLy8gUG9ydHVndcOqcyBFdXJvcGV1XG4gIG1vYmlzY3JvbGwuaTE4blsncHQtUFQnXSA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ1NlbGVjY2lvbmFyJyxcbiAgICBjYW5jZWxUZXh0OiAnQ2FuY2VsYXInLFxuICAgIGNsZWFyVGV4dDogJ0NsYXJvJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IHNlbGVjaW9uYWRvJyxcbiAgICBzZWxlY3RlZFBsdXJhbFRleHQ6ICd7Y291bnR9IHNlbGVjaW9uYWRvcycsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkLW1tLXl5JyxcbiAgICBkYXlOYW1lczogWydEb21pbmdvJywgJ1NlZ3VuZGEtZmVpcmEnLCAnVGVyw6dhLWZlaXJhJywgJ1F1YXJ0YS1mZWlyYScsICdRdWludGEtZmVpcmEnLCAnU2V4dGEtZmVpcmEnLCAnU8OhYmFkbyddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnRG9tJywgJ1NlZycsICdUZXInLCAnUXVhJywgJ1F1aScsICdTZXgnLCAnU8OhYiddLFxuICAgIGRheU5hbWVzTWluOiBbJ0QnLCAnUycsICdUJywgJ1EnLCAnUScsICdTJywgJ1MnXSxcbiAgICBkYXlUZXh0OiAnRGlhJyxcbiAgICBob3VyVGV4dDogJ0hvcmFzJyxcbiAgICBtaW51dGVUZXh0OiAnTWludXRvcycsXG4gICAgbW9udGhOYW1lczogWydKYW5laXJvJywgJ0ZldmVyZWlybycsICdNYXLDp28nLCAnQWJyaWwnLCAnTWFpbycsICdKdW5obycsICdKdWxobycsICdBZ29zdG8nLCAnU2V0ZW1icm8nLCAnT3V0dWJybycsICdOb3ZlbWJybycsICdEZXplbWJybyddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydKYW4nLCAnRmV2JywgJ01hcicsICdBYnInLCAnTWFpJywgJ0p1bicsICdKdWwnLCAnQWdvJywgJ1NldCcsICdPdXQnLCAnTm92JywgJ0RleiddLFxuICAgIG1vbnRoVGV4dDogJ03DqnMnLFxuICAgIHNlY1RleHQ6ICdTZWd1bmRvJyxcbiAgICB0aW1lRm9ybWF0OiAnSEg6aWknLFxuICAgIHllYXJUZXh0OiAnQW5vJyxcbiAgICBub3dUZXh0OiAnQWN0dWFsaXphcicsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICB0b2RheVRleHQ6ICdIb3knLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGRhdGVUZXh0OiAnRGF0YScsXG4gICAgdGltZVRleHQ6ICdUZW1wbycsXG4gICAgY2xvc2VUZXh0OiAnRmVjaGFyJyxcbiAgICBhbGxEYXlUZXh0OiAnVG9kbyBvIGRpYScsXG4gICAgbm9FdmVudHNUZXh0OiAnTmVuaHVtIGV2ZW50bycsXG4gICAgZXZlbnRUZXh0OiAnRXZlbnRvJyxcbiAgICBldmVudHNUZXh0OiAnRXZlbnRvcycsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICdtYWlzIHtjb3VudH0nLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ0luw61jaW8nLFxuICAgIHRvVGV4dDogJ0ZpbScsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ0ludGVpcm8nLFxuICAgIGZyYWN0aW9uVGV4dDogJ0ZyYWPDp8OjbycsXG4gICAgdW5pdFRleHQ6ICdVbmlkYWRlJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ0Fub3MnLCAnTWVzZXMnLCAnRGlhcycsICdIb3JhcycsICdNaW51dG9zJywgJ1NlZ3VuZG9zJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ0FubycsICdNw6pzJywgJ0RpYScsICdIb3JhJywgJ01pbicsICdTZWcnLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAnQ29tZcOnYXInLFxuICAgIHN0b3BUZXh0OiAnUGFyYXInLFxuICAgIHJlc2V0VGV4dDogJ1JlaW5pY2lhbGl6YXInLFxuICAgIGxhcFRleHQ6ICdMYXAnLFxuICAgIGhpZGVUZXh0OiAnRXNjb25kZXInLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdBbnRlcmlvcicsXG4gICAgdW5kb1RleHQ6ICdBbnVsYXInLFxuICAgIC8vIEZvcm1cbiAgICBvZmZUZXh0OiAnRGVzbCcsXG4gICAgb25UZXh0OiAnTGlnJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBSb23Dom7Eg1xuICBtb2Jpc2Nyb2xsLmkxOG4ucm8gPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdTZXRhcmUnLFxuICAgIGNhbmNlbFRleHQ6ICdBbnVsYXJlJyxcbiAgICBjbGVhclRleHQ6ICfFnnRlcmdlcmUnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gc2VsZWN0YXQnLFxuICAgIHNlbGVjdGVkUGx1cmFsVGV4dDogJ3tjb3VudH0gc2VsZWN0YXRlJyxcbiAgICAvLyBEYXRldGltZSBjb21wb25lbnRcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIGRheU5hbWVzOiBbJ0R1bWluaWPEgycsICdMdW5pJywgJ01hcsibaScsICdNaWVyY3VyaScsICdKb2knLCAnVmluZXJpJywgJ1PDom1ixIN0xIMnXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ0R1JywgJ0x1JywgJ01hJywgJ01pJywgJ0pvJywgJ1ZpJywgJ1PDoiddLFxuICAgIGRheU5hbWVzTWluOiBbJ0QnLCAnTCcsICdNJywgJ00nLCAnSicsICdWJywgJ1MnXSxcbiAgICBkYXlUZXh0OiAnIFppdWEnLFxuICAgIGRlbGltaXRlcjogJy4nLFxuICAgIGhvdXJUZXh0OiAnIE9yZSAnLFxuICAgIG1pbnV0ZVRleHQ6ICdNaW51dGUnLFxuICAgIG1vbnRoTmFtZXM6IFsnSWFudWFyaWUnLCAnRmVicnVhcmllJywgJ01hcnRpZScsICdBcHJpbGllJywgJ01haScsICdJdW5pZScsICdJdWxpZScsICdBdWd1c3QnLCAnU2VwdGVtYnJpZScsICdPY3RvbWJyaWUnLCAnTm9pZW1icmllJywgJ0RlY2VtYnJpZSddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydJYW4uJywgJ0ZlYi4nLCAnTWFyLicsICdBcHIuJywgJ01haScsICdJdW4uJywgJ0l1bC4nLCAnQXVnLicsICdTZXB0LicsICdPY3QuJywgJ05vdi4nLCAnRGVjLiddLFxuICAgIG1vbnRoVGV4dDogJ0x1bmEnLFxuICAgIHNlY1RleHQ6ICdTZWN1bmRlJyxcbiAgICB0aW1lRm9ybWF0OiAnSEg6aWknLFxuICAgIHllYXJUZXh0OiAnQW51bCcsXG4gICAgbm93VGV4dDogJ0FjdW0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgdG9kYXlUZXh0OiAnQXN0xIN6aScsXG4gICAgcHJldk1vbnRoVGV4dDogJ0x1bmEgYW50ZXJpb2FyxIMnLFxuICAgIG5leHRNb250aFRleHQ6ICdMdW5hIHVybcSDdG9hcmUnLFxuICAgIHByZXZZZWFyVGV4dDogJ0FudWwgYW50ZXJpb3InLFxuICAgIG5leHRZZWFyVGV4dDogJ0FudWwgdXJtxIN0b3InLFxuICAgIGV2ZW50VGV4dDogJ0V2ZW5pbWVudCcsXG4gICAgZXZlbnRzVGV4dDogJ0V2ZW5pbWVudGUnLFxuICAgIGFsbERheVRleHQ6ICdUb2F0xIMgeml1YScsXG4gICAgbm9FdmVudHNUZXh0OiAnTmljaXVuIGV2ZW5pbWVudCcsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICfDjm5jxIMgdW51bCcsXG4gICAgbW9yZUV2ZW50c1BsdXJhbFRleHQ6ICfDjm5jxIMge2NvdW50fScsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZmlyc3REYXk6IDEsXG4gICAgZGF0ZVRleHQ6ICdEYXRhJyxcbiAgICB0aW1lVGV4dDogJ09yYScsXG4gICAgY2xvc2VUZXh0OiAnw45uY2hpZGVyZScsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnU3RhcnQnLFxuICAgIHRvVGV4dDogJ0ZpbmFsJyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAnQ29tcGxldCcsXG4gICAgZnJhY3Rpb25UZXh0OiAnUGFyxaNpYWwnLFxuICAgIHVuaXRUZXh0OiAnVW5pdGF0ZScsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWydBbmknLCAnTHVuaScsICdaaWxlJywgJ09yZScsICdNaW51dGUnLCAnU2VjdW5kZScsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydBbmknLCAnTHVuaScsICdaaWxlJywgJ09yZScsICdNaW4uJywgJ1NlYy4nLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAnU3RhcnQnLFxuICAgIHN0b3BUZXh0OiAnU3RvcCcsXG4gICAgcmVzZXRUZXh0OiAnUmVzZXRhcmUnLFxuICAgIGxhcFRleHQ6ICdUdXLEgycsXG4gICAgaGlkZVRleHQ6ICdBc2N1bmRlcmUnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICfDjm5hcG9pJyxcbiAgICB1bmRvVGV4dDogJ0FudWxlYXrEgycsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdOdScsXG4gICAgb25UZXh0OiAnRGEnLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vINCg0YPRgdGB0LrQuNC5IChVQSlcbiAgbW9iaXNjcm9sbC5pMThuWydydS1VQSddID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAn0KPRgdGC0LDQvdC+0LLQuNGC0YwnLFxuICAgIGNhbmNlbFRleHQ6ICfQntGC0LzQtdC90LjRgtGMJyxcbiAgICBjbGVhclRleHQ6ICfQntGH0LjRgdGC0LjRgtGMcicsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSDQktGW0LHRgNCw0YLRjCcsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcbiAgICBkYXlOYW1lczogWyfQstC+0YHQutGA0LXRgdC10L3RjNC1JywgJ9C/0L7QvdC10LTQtdC70YzQvdC40LonLCAn0LLRgtC+0YDQvdC40LonLCAn0YHRgNC10LTQsCcsICfRh9C10YLQstC10YDQsycsICfQv9GP0YLQvdC40YbQsCcsICfRgdGD0LHQsdC+0YLQsCddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsn0LLRgScsICfQv9C9JywgJ9Cy0YInLCAn0YHRgCcsICfRh9GCJywgJ9C/0YInLCAn0YHQsSddLFxuICAgIGRheU5hbWVzTWluOiBbJ9CyJywgJ9C/JywgJ9CyJywgJ9GBJywgJ9GHJywgJ9C/JywgJ9GBJ10sXG4gICAgZGF5VGV4dDogJ9CU0LXQvdGMJyxcbiAgICBkZWxpbWl0ZXI6ICcuJyxcbiAgICBob3VyVGV4dDogJ9Cn0LDRgdGLJyxcbiAgICBtaW51dGVUZXh0OiAn0JzQuNC90YPRgtGLJyxcbiAgICBtb250aE5hbWVzOiBbJ9Cv0L3QstCw0YDRjCcsICfQpNC10LLRgNCw0LvRjCcsICfQnNCw0YDRgicsICfQkNC/0YDQtdC70YwnLCAn0JzQsNC5JywgJ9CY0Y7QvdGMJywgJ9CY0Y7Qu9GMJywgJ9CQ0LLQs9GD0YHRgicsICfQodC10L3RgtGP0LHRgNGMJywgJ9Ce0LrRgtGP0LHRgNGMJywgJ9Cd0L7Rj9Cx0YDRjCcsICfQlNC10LrQsNCx0YDRjCddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyfQr9C90LIuJywgJ9Ck0LXQstGALicsICfQnNCw0YDRgicsICfQkNC/0YAuJywgJ9Cc0LDQuScsICfQmNGO0L3RjCcsICfQmNGO0LvRjCcsICfQkNCy0LMuJywgJ9Ch0LXQvdGCLicsICfQntC60YIuJywgJ9Cd0L7Rj9CxLicsICfQlNC10LouJ10sXG4gICAgbW9udGhUZXh0OiAn0JzQtdGB0Y/RhtGLJyxcbiAgICBzZWNUZXh0OiAn0KHQuNC60YPQvdC00YsnLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaScsXG4gICAgeWVhclRleHQ6ICfQk9C+0LQnLFxuICAgIG5vd1RleHQ6ICfQodC10LnRh9Cw0YEnLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgdG9kYXlUZXh0OiAnQ9C10LPQvtC00L3RjycsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZmlyc3REYXk6IDEsXG4gICAgZGF0ZVRleHQ6ICfQlNCw0YLQsCcsXG4gICAgdGltZVRleHQ6ICfQktGA0LXQvNGPJyxcbiAgICBjbG9zZVRleHQ6ICfQl9Cw0LrRgNGL0YLRjCcsXG4gICAgYWxsRGF5VGV4dDogJ9CS0LXRgdGMINC00LXQvdGMJyxcbiAgICBub0V2ZW50c1RleHQ6ICfQndC10YIg0YHQvtCx0YvRgtC40LknLFxuICAgIGV2ZW50VGV4dDogJ9Cc0LXRgNC+0L/RgNC40Y/RgtC40Y8nLFxuICAgIGV2ZW50c1RleHQ6ICfQnNC10YDQvtC/0YDQuNGP0YLQuNGPJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ9CV0YnRkSB7Y291bnR9JyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICfQndCw0YfQsNC70L4nLFxuICAgIHRvVGV4dDogJ9Ca0L7QvdC10YYnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICfQktC10YHRjCcsXG4gICAgZnJhY3Rpb25UZXh0OiAn0KfQsNGB0YLRjCcsXG4gICAgdW5pdFRleHQ6ICfQldC00LjQvdC40YbQsCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfQk9C+0LTRiycsICcg0JzQtdGB0Y/RhtGLICcsICcg0JTQvdC4ICcsICcg0KfQsNGB0YsgJywgJyDQnNC40L3Rg9GC0YsgJywgJyDQodC10LrRg9C90LTRiycsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWyfQk9C+0LQnLCAn0JzQtdGBLicsICfQlNC9LicsICfQpy4nLCAn0JzQuNC9LicsICfQodC10LouJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ9Ch0YLQsNGA0YInLFxuICAgIHN0b3BUZXh0OiAn0KHRgtC+0L8nLFxuICAgIHJlc2V0VGV4dDogJyDQodCx0YDQvtGBICcsXG4gICAgbGFwVGV4dDogJyDQrdGC0LDQvyAnLFxuICAgIGhpZGVUZXh0OiAnINCh0LrRgNGL0YLRjCAnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICfQvdCw0LfQsNC0JyxcbiAgICB1bmRvVGV4dDogJ9Ce0YLQvNC10L3QuNGC0KwnLFxuICAgIC8vIEZvcm1cbiAgICBvZmZUZXh0OiAnTycsXG4gICAgb25UZXh0OiAnSScsXG4gICAgLy8gTnVtcGFkXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogJywnLFxuICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJyAnXG4gIH07XG5cbiAgLy8g0KDRg9GB0YHQutC40LlcbiAgbW9iaXNjcm9sbC5pMThuWydydS1SVSddID0gbW9iaXNjcm9sbC5pMThuLnJ1ID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAn0KPRgdGC0LDQvdC+0LLQuNGC0YwnLFxuICAgIGNhbmNlbFRleHQ6ICfQntGC0LzQtdC90LAnLFxuICAgIGNsZWFyVGV4dDogJ9Ce0YfQuNGB0YLQuNGC0YwnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0g0JLRi9Cx0YDQsNGC0YwnLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgZGF5TmFtZXM6IFsn0LLQvtGB0LrRgNC10YHQtdC90YzQtScsICfQv9C+0L3QtdC00LXQu9GM0L3QuNC6JywgJ9Cy0YLQvtGA0L3QuNC6JywgJ9GB0YDQtdC00LAnLCAn0YfQtdGC0LLQtdGA0LMnLCAn0L/Rj9GC0L3QuNGG0LAnLCAn0YHRg9Cx0LHQvtGC0LAnXSxcbiAgICBkYXlOYW1lc1Nob3J0OiBbJ9Cy0YEnLCAn0L/QvScsICfQstGCJywgJ9GB0YAnLCAn0YfRgicsICfQv9GCJywgJ9GB0LEnXSxcbiAgICBkYXlOYW1lc01pbjogWyfQsicsICfQvycsICfQsicsICfRgScsICfRhycsICfQvycsICfRgSddLFxuICAgIGRheVRleHQ6ICfQlNC10L3RjCcsXG4gICAgZGVsaW1pdGVyOiAnLicsXG4gICAgaG91clRleHQ6ICfQp9Cw0YEnLFxuICAgIG1pbnV0ZVRleHQ6ICfQnNC40L3Rg9GCJyxcbiAgICBtb250aE5hbWVzOiBbJ9Cv0L3QstCw0YDRjCcsICfQpNC10LLRgNCw0LvRjCcsICfQnNCw0YDRgicsICfQkNC/0YDQtdC70YwnLCAn0JzQsNC5JywgJ9CY0Y7QvdGMJywgJ9CY0Y7Qu9GMJywgJ9CQ0LLQs9GD0YHRgicsICfQodC10L3RgtGP0LHRgNGMJywgJ9Ce0LrRgtGP0LHRgNGMJywgJ9Cd0L7Rj9Cx0YDRjCcsICfQlNC10LrQsNCx0YDRjCddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyfQr9C90LInLCAn0KTQtdCyJywgJ9Cc0LDRgCcsICfQkNC/0YAnLCAn0JzQsNC5JywgJ9CY0Y7QvScsICfQmNGO0LsnLCAn0JDQstCzJywgJ9Ch0LXQvScsICfQntC60YInLCAn0J3QvtGPJywgJ9CU0LXQuiddLFxuICAgIG1vbnRoVGV4dDogJ9Cc0LXRgdGP0YYnLFxuICAgIHNlY1RleHQ6ICfQodC10LrRg9C90LQnLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaScsXG4gICAgeWVhclRleHQ6ICfQk9C+0LQnLFxuICAgIG5vd1RleHQ6ICfQodC10LnRh9Cw0YEnLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgdG9kYXlUZXh0OiAnQ9C10LPQvtC00L3RjycsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZmlyc3REYXk6IDEsXG4gICAgZGF0ZVRleHQ6ICfQlNCw0YLQsCcsXG4gICAgdGltZVRleHQ6ICfQktGA0LXQvNGPJyxcbiAgICBjbG9zZVRleHQ6ICfQl9Cw0LrRgNGL0YLRjCcsXG4gICAgYWxsRGF5VGV4dDogJ9CS0LXRgdGMINC00LXQvdGMJyxcbiAgICBub0V2ZW50c1RleHQ6ICfQndC10YIg0YHQvtCx0YvRgtC40LknLFxuICAgIGV2ZW50VGV4dDogJ9Cc0LXRgNC+0L/RgNC40Y/RgtC40Y8nLFxuICAgIGV2ZW50c1RleHQ6ICfQnNC10YDQvtC/0YDQuNGP0YLQuNGPJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ9CV0YnRkSB7Y291bnR9JyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICfQndCw0YfQsNC70L4nLFxuICAgIHRvVGV4dDogJ9Ca0L7QvdC10YYnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICfQptC10LvQvtC1JyxcbiAgICBmcmFjdGlvblRleHQ6ICfQlNGA0L7QsdC90L7QtScsXG4gICAgdW5pdFRleHQ6ICfQldC00LjQvdC40YbQsCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfQm9C10YInLCAn0JzQtdGB0Y/RhtC10LInLCAn0JTQvdC10LknLCAn0KfQsNGB0L7QsicsICfQnNC40L3Rg9GCJywgJ9Ch0LXQutGD0L3QtCcsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWyfQm9C10YInLCAn0JzQtdGBJywgJ9CU0L0nLCAn0KfQsNGBJywgJ9Cc0LjQvScsICfQodC10LonLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAn0KHRgtCw0YDRgicsXG4gICAgc3RvcFRleHQ6ICfQodGC0L7QvycsXG4gICAgcmVzZXRUZXh0OiAn0KHQsdGA0L7RgdC40YLRjCcsXG4gICAgbGFwVGV4dDogJ9Ca0YDRg9CzJyxcbiAgICBoaWRlVGV4dDogJ9Ch0LrRgNGL0YLRjCcsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ9C90LDQt9Cw0LQnLFxuICAgIHVuZG9UZXh0OiAn0J7RgtC80LXQvdC40YLQrCcsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdPJyxcbiAgICBvblRleHQ6ICdJJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICAvLyBTbG92ZW5jaW5hXG4gIG1vYmlzY3JvbGwuaTE4bi5zayA9IHtcbiAgICAvLyBDb3JlXG4gICAgc2V0VGV4dDogJ1phZGFqJyxcbiAgICBjYW5jZWxUZXh0OiAnWnJ1xaFpxaUnLFxuICAgIGNsZWFyVGV4dDogJ1Z5bWF6YcWlJyxcbiAgICBzZWxlY3RlZFRleHQ6ICdPem5hxI1lbsO9OiB7Y291bnR9JyxcbiAgICAvLyBEYXRldGltZSBjb21wb25lbnRcbiAgICBkYXRlRm9ybWF0OiAnZC5tLnl5JyxcbiAgICBkYXlOYW1lczogWydOZWRlxL5hJywgJ1BvbmRlbG9rJywgJ1V0b3JvaycsICdTdHJlZGEnLCAnxaB0dnJ0b2snLCAnUGlhdG9rJywgJ1NvYm90YSddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnTmUnLCAnUG8nLCAnVXQnLCAnU3QnLCAnxaB0JywgJ1BpJywgJ1NvJ10sXG4gICAgZGF5TmFtZXNNaW46IFsnTicsICdQJywgJ1UnLCAnUycsICfFoCcsICdQJywgJ1MnXSxcbiAgICBkYXlUZXh0OiAnxI5lxYgnLFxuICAgIGhvdXJUZXh0OiAnSG9kaW55JyxcbiAgICBtaW51dGVUZXh0OiAnTWluw7p0eScsXG4gICAgbW9udGhOYW1lczogWydKYW51w6FyJywgJ0ZlYnJ1w6FyJywgJ01hcmVjJywgJ0FwcsOtbCcsICdNw6FqJywgJ0rDum4nLCAnSsO6bCcsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09rdMOzYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNw6FqJywgJ0rDum4nLCAnSsO6bCcsICdBdWcnLCAnU2VwJywgJ09rdCcsICdOb3YnLCAnRGVjJ10sXG4gICAgbW9udGhUZXh0OiAnTWVzaWFjJyxcbiAgICBzZWNUZXh0OiAnU2VrdW5keScsXG4gICAgdGltZUZvcm1hdDogJ0g6aWknLFxuICAgIHllYXJUZXh0OiAnUm9rJyxcbiAgICBub3dUZXh0OiAnVGVyYXonLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgdG9kYXlUZXh0OiAnRG5lcycsXG4gICAgLy8gQ2FsZW5kYXIgY29tcG9uZW50XG4gICAgZmlyc3REYXk6IDEsXG4gICAgZGF0ZVRleHQ6ICdEYXR1bScsXG4gICAgdGltZVRleHQ6ICfEjGFzJyxcbiAgICBjbG9zZVRleHQ6ICdaYXZyaWXFpScsXG4gICAgYWxsRGF5VGV4dDogJ0NlbMO9IGRlxYgnLFxuICAgIG5vRXZlbnRzVGV4dDogJ8W9aWFkbmUgdWRhbG9zdGknLFxuICAgIGV2ZW50VGV4dDogJ1VkYWxvc3TDrScsXG4gICAgZXZlbnRzVGV4dDogJ1VkYWxvc3RpJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ3tjb3VudH0gxI9hbMWhaWEnLFxuICAgIG1vcmVFdmVudHNQbHVyYWxUZXh0OiAne2NvdW50fSDEj2FsxaFpZScsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnWmHEjWlhdG9rJyxcbiAgICB0b1RleHQ6ICdLb25pZWMnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICdDZWzDvScsXG4gICAgZnJhY3Rpb25UZXh0OiAnxIxhc8WlJyxcbiAgICB1bml0VGV4dDogJ0plZG5vdGthJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ1Jva3knLCAnTWVzaWFjZScsICdEbmknLCAnSG9kaW55JywgJ01pbsO6dHknLCAnU2VrdW5keScsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydSb2snLCAnTWVzJywgJ0RuaScsICdIb2QnLCAnTWluJywgJ1NlYycsICcnXSxcbiAgICAvLyBUaW1lciBjb21wb25lbnRcbiAgICBzdGFydFRleHQ6ICdTdGFydCcsXG4gICAgc3RvcFRleHQ6ICdTdG9wJyxcbiAgICByZXNldFRleHQ6ICdSZXNldG92YcWlJyxcbiAgICBsYXBUZXh0OiAnRXRhcGEnLFxuICAgIGhpZGVUZXh0OiAnU2Nob3ZhxaUnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdTcMOkxaUnLFxuICAgIHVuZG9UZXh0OiAnU3DDpMWlJyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ08nLFxuICAgIG9uVGV4dDogJ0knLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vIFNlcmJpYW5cbiAgbW9iaXNjcm9sbC5pMThuLnNyID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAn0J/QvtGB0YLQsNCy0LgnLFxuICAgIGNhbmNlbFRleHQ6ICfQntGC0LrQsNC20LgnLFxuICAgIGNsZWFyVGV4dDogJ9Ce0LHRgNC40YjQuCcsXG4gICAgc2VsZWN0ZWRUZXh0OiAne2NvdW50fSDQuNC30LDQsdGA0LDQvdCwJyxcbiAgICAvLyBEYXRldGltZSBjb21wb25lbnRcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxuICAgIGRheU5hbWVzOiBbJ9Cd0LXQtNC10ZnQsCcsICfQn9C+0L3QtdC00LXRmdCw0LonLCAn0KPRgtC+0YDQsNC6JywgJ9Ch0YDQtdC00LAnLCAn0KfQtdGC0LLRgNGC0LDQuicsICfQn9C10YLQsNC6JywgJ9Ch0YPQsdC+0YLQsCddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsn0J3QtdC0JywgJ9Cf0L7QvScsICfQo9GC0L4nLCAn0KHRgNC1JywgJ9Cn0LXRgicsICfQn9C10YInLCAn0KHRg9CxJ10sXG4gICAgZGF5TmFtZXNNaW46IFsn0J3QtScsICfQn9C+JywgJ9Cj0YInLCAn0KHRgCcsICfQp9C1JywgJ9Cf0LUnLCAn0KHRgyddLFxuICAgIGRheVRleHQ6ICfQlNCw0L0nLFxuICAgIGRlbGltaXRlcjogJy4nLFxuICAgIGhvdXJUZXh0OiAn0KfQsNGBJyxcbiAgICBtaW51dGVUZXh0OiAn0JzQuNC90YPRgicsXG4gICAgbW9udGhOYW1lczogWyfQiNCw0L3Rg9Cw0YAnLCAn0KTQtdCx0YDRg9Cw0YAnLCAn0JzQsNGA0YInLCAn0JDQv9GA0LjQuycsICfQnNCw0ZgnLCAn0IjRg9C9JywgJ9CI0YPQuycsICfQkNCy0LPRg9GB0YInLCAn0KHQtdC/0YLQtdC80LHQsNGAJywgJ9Ce0LrRgtC+0LHQsNGAJywgJ9Cd0L7QstC10LzQsdCw0YAnLCAn0JTQtdGG0LXQvNCx0LDRgCddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWyfQiNCw0L0nLCAn0KTQtdCxJywgJ9Cc0LDRgCcsICfQkNC/0YAnLCAn0JzQsNGYJywgJ9CI0YPQvScsICfQiNGD0LsnLCAn0JDQstCzJywgJ9Ch0LXQvycsICfQntC60YInLCAn0J3QvtCyJywgJ9CU0LXRhiddLFxuICAgIG1vbnRoVGV4dDogJ9C80LXRgdC10YYnLFxuICAgIHNlY1RleHQ6ICfQodC10LrRg9C90LQnLFxuICAgIHRpbWVGb3JtYXQ6ICdIOmlpJyxcbiAgICB5ZWFyVGV4dDogJ9Cz0L7QtNC40L3QsCcsXG4gICAgbm93VGV4dDogJ9GB0LDQtNCwJyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGZpcnN0RGF5OiAxLFxuICAgIGRhdGVUZXh0OiAn0JTQsNGC0YPQvCcsXG4gICAgdGltZVRleHQ6ICfQstGA0LXQvNC1JyxcbiAgICB0b2RheVRleHQ6ICfQlNCw0L3QsNGBJyxcbiAgICBwcmV2TW9udGhUZXh0OiAn0J/RgNC10YLRhdC+0LTQvdC4INC80ZjQtdGB0LXRhicsXG4gICAgbmV4dE1vbnRoVGV4dDogJ9Ch0LvQtdC00LXRm9C10LMg0LzQtdGB0LXRhtCwJyxcbiAgICBwcmV2WWVhclRleHQ6ICfQn9GA0LXRgtGF0L7QtNC90LAg0LPQvtC00LjQvdC1JyxcbiAgICBuZXh0WWVhclRleHQ6ICfQodC70LXQtNC10ZvQtSDQs9C+0LTQuNC90LUnLFxuICAgIGNsb3NlVGV4dDogJ9CX0LDRgtCy0L7RgNC4JyxcbiAgICBldmVudFRleHQ6ICfQlNC+0LPQsNGS0LDRmCcsXG4gICAgZXZlbnRzVGV4dDogJ9CU0L7Qs9Cw0ZLQsNGY0LgnLFxuICAgIGFsbERheVRleHQ6ICfQptC10L4g0LTQsNC9JyxcbiAgICBub0V2ZW50c1RleHQ6ICfQndC10LzQsCDQtNC+0LPQsNGS0LDRmNCwJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ9CI0L7RiCB7Y291bnR9JyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICfQntC0JyxcbiAgICB0b1RleHQ6ICfQlNC+JyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAn0YbQtdC+JyxcbiAgICBmcmFjdGlvblRleHQ6ICfQpNGA0LDQutGG0LjRmNCwJyxcbiAgICB1bml0VGV4dDogJ9C10LTQuNC90LjRhtCwJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ9CT0L7QtNC40L3QtScsICfQnNC10YHQtdGG0LgnLCAn0JTQsNC90LAnLCAn0KHQsNGC0LgnLCAn0JzQuNC90YPRgtCwJywgJ9Ch0LXQutGD0L3QtNC4JywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ9CT0L7QtCcsICfQnNC10YEnLCAn0JTQsNC90LAnLCAn0KHQsNGC0LgnLCAn0JzQuNC90YMnLCAn0KHQtdC60YMnLCAnJ10sXG4gICAgLy8gVGltZXIgY29tcG9uZW50XG4gICAgc3RhcnRUZXh0OiAn0JfQsNC/0L7Rh9C90LgnLFxuICAgIHN0b3BUZXh0OiAn0KHRgtC+0L8nLFxuICAgIHJlc2V0VGV4dDogJ9Cg0LXRgdC10YLRg9GYJyxcbiAgICBsYXBUZXh0OiAn0JrRgNGD0LMnLFxuICAgIGhpZGVUZXh0OiAn0KHQsNC60YDQuNGC0LgnLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICfQn9C+0LLRgNCw0YLQsNC6JyxcbiAgICB1bmRvVGV4dDogJ9Ce0L/QvtC30L7QstC4JyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ9C9ZScsXG4gICAgb25UZXh0OiAn0LTQsCcsXG4gICAgLy8gTnVtcGFkXG4gICAgZGVjaW1hbFNlcGFyYXRvcjogJywnLFxuICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJyAnXG4gIH07XG5cbiAgLy8gU3ZlbnNrYVxuICBtb2Jpc2Nyb2xsLmkxOG4uc3YgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdPSycsXG4gICAgY2FuY2VsVGV4dDogJ0F2YnJ5dCcsXG4gICAgY2xlYXJUZXh0OiAnS2xhcmEnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gdmFsZCcsXG4gICAgLy8gRGF0ZXRpbWUgY29tcG9uZW50XG4gICAgZGF0ZUZvcm1hdDogJ3l5LW1tLWRkJyxcbiAgICBkYXlOYW1lczogWydTw7ZuZGFnJywgJ03DpW5kYWcnLCAnVGlzZGFnJywgJ09uc2RhZycsICdUb3JzZGFnJywgJ0ZyZWRhZycsICdMw7ZyZGFnJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWydTw7YnLCAnTcOlJywgJ1RpJywgJ09uJywgJ1RvJywgJ0ZyJywgJ0zDtiddLFxuICAgIGRheU5hbWVzTWluOiBbJ1MnLCAnTScsICdUJywgJ08nLCAnVCcsICdGJywgJ0wnXSxcbiAgICBkYXlUZXh0OiAnRGFnJyxcbiAgICBob3VyVGV4dDogJ1RpbW1lJyxcbiAgICBtaW51dGVUZXh0OiAnTWludXQnLFxuICAgIG1vbnRoTmFtZXM6IFsnSmFudWFyaScsICdGZWJydWFyaScsICdNYXJzJywgJ0FwcmlsJywgJ01haicsICdKdW5pJywgJ0p1bGknLCAnQXVndXN0aScsICdTZXB0ZW1iZXInLCAnT2t0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWFqJywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPa3QnLCAnTm92JywgJ0RlYyddLFxuICAgIG1vbnRoVGV4dDogJ03DpW5hZCcsXG4gICAgc2VjVGV4dDogJ1Nla3VuZCcsXG4gICAgdGltZUZvcm1hdDogJ0hIOmlpJyxcbiAgICB5ZWFyVGV4dDogJ8OFcicsXG4gICAgbm93VGV4dDogJ051JyxcbiAgICBwbVRleHQ6ICdwbScsXG4gICAgYW1UZXh0OiAnYW0nLFxuICAgIHRvZGF5VGV4dDogJ0kgZGFnJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ0RhdHVtJyxcbiAgICB0aW1lVGV4dDogJ1RpZCcsXG4gICAgY2xvc2VUZXh0OiAnU3TDpG5nJyxcbiAgICBhbGxEYXlUZXh0OiAnSGVsZGFnJyxcbiAgICBub0V2ZW50c1RleHQ6ICdJbmdhIGFrdGl2aXRldGVyJyxcbiAgICBldmVudFRleHQ6ICdIw6RuZGVsc2UnLFxuICAgIGV2ZW50c1RleHQ6ICdIw6RuZGVsc2VyJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ3tjb3VudH0gdGlsbCcsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnU3RhcnQnLFxuICAgIHRvVGV4dDogJ1NsdXQnLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICdIZWxhJyxcbiAgICBmcmFjdGlvblRleHQ6ICdCcsOlaycsXG4gICAgdW5pdFRleHQ6ICdFbmhldCcsXG4gICAgLy8gVGltZSAvIFRpbWVzcGFuIGNvbXBvbmVudFxuICAgIGxhYmVsczogWyfDhXInLCAnTcOlbmFkZXInLCAnRGFnYXInLCAnVGltbWFyJywgJ01pbnV0ZXInLCAnU2VrdW5kZXInLCAnJ10sXG4gICAgbGFiZWxzU2hvcnQ6IFsnw4VyJywgJ03DpW4nLCAnRGFnJywgJ1RpbScsICdNaW4nLCAnU2VrJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ1N0YXJ0JyxcbiAgICBzdG9wVGV4dDogJ1N0b3BwJyxcbiAgICByZXNldFRleHQ6ICfDhXRlcnN0w6RsbCcsXG4gICAgbGFwVGV4dDogJ1ZhcnYnLFxuICAgIGhpZGVUZXh0OiAnRMO2bGonLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICdUaWxsYmFrYScsXG4gICAgdW5kb1RleHQ6ICfDhW5ncmEnLFxuICAgIC8vIEZvcm1cbiAgICBvZmZUZXh0OiAnQXYnLFxuICAgIG9uVGV4dDogJ1DDpSdcbiAgfTtcblxuICAvLyBUw7xya8OnZVxuICBtb2Jpc2Nyb2xsLmkxOG4udHIgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICdTZcOnJyxcbiAgICBjYW5jZWxUZXh0OiAnxLBwdGFsJyxcbiAgICBjbGVhclRleHQ6ICdUZW1pemxleWluJyxcbiAgICBzZWxlY3RlZFRleHQ6ICd7Y291bnR9IHNlw6dpbG1pxZ8nLFxuICAgIC8vIERhdGV0aW1lIGNvbXBvbmVudFxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXG4gICAgZGF5TmFtZXM6IFsnUGF6YXInLCAnUGF6YXJ0ZXNpJywgJ1NhbMSxJywgJ8OHYXLFn2FtYmEnLCAnUGVyxZ9lbWJlJywgJ0N1bWEnLCAnQ3VtYXJ0ZXNpJ10sXG4gICAgZGF5TmFtZXNTaG9ydDogWydQYXonLCAnUHp0JywgJ1NhbCcsICfDh2FyJywgJ1BlcicsICdDdW0nLCAnQ210J10sXG4gICAgZGF5TmFtZXNNaW46IFsnUCcsICdQJywgJ1MnLCAnw4cnLCAnUCcsICdDJywgJ0MnXSxcbiAgICBkYXlUZXh0OiAnR8O8bicsXG4gICAgZGVsaW1pdGVyOiAnLicsXG4gICAgaG91clRleHQ6ICdTYWF0JyxcbiAgICBtaW51dGVUZXh0OiAnRGFraWthJyxcbiAgICBtb250aE5hbWVzOiBbJ09jYWsnLCAnxZ51YmF0JywgJ01hcnQnLCAnTmlzYW4nLCAnTWF5xLFzJywgJ0hhemlyYW4nLCAnVGVtbXV6JywgJ0HEn3VzdG9zJywgJ0V5bMO8bCcsICdFa2ltJywgJ0thc8SxbScsICdBcmFsxLFrJ10sXG4gICAgbW9udGhOYW1lc1Nob3J0OiBbJ09jYScsICfFnnViJywgJ01hcicsICdOaXMnLCAnTWF5JywgJ0hheicsICdUZW0nLCAnQcSfdScsICdFeWwnLCAnRWtpJywgJ0thcycsICdBcmEnXSxcbiAgICBtb250aFRleHQ6ICdBeScsXG4gICAgc2VjVGV4dDogJ1Nhbml5ZScsXG4gICAgdGltZUZvcm1hdDogJ0hIOmlpJyxcbiAgICB5ZWFyVGV4dDogJ1nEsWwnLFxuICAgIG5vd1RleHQ6ICfFnmltZGknLFxuICAgIHBtVGV4dDogJ3BtJyxcbiAgICBhbVRleHQ6ICdhbScsXG4gICAgdG9kYXlUZXh0OiAnQnVnw7xuJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMSxcbiAgICBkYXRlVGV4dDogJ1RhcmloJyxcbiAgICB0aW1lVGV4dDogJ1phbWFuJyxcbiAgICBjbG9zZVRleHQ6ICdLYXBhdG1haycsXG4gICAgYWxsRGF5VGV4dDogJ1TDvG0gZ8O8bicsXG4gICAgbm9FdmVudHNUZXh0OiAnRXRraW5saWsgWW9rJyxcbiAgICBldmVudFRleHQ6ICdFdGtpbmxpaycsXG4gICAgZXZlbnRzVGV4dDogJ0V0a2lubGlrbGVyJyxcbiAgICBtb3JlRXZlbnRzVGV4dDogJ3tjb3VudH0gdGFuZSBkYWhhJyxcbiAgICAvLyBEYXRlcmFuZ2UgY29tcG9uZW50XG4gICAgZnJvbVRleHQ6ICdCYcWfbGEnLFxuICAgIHRvVGV4dDogJ1NvbicsXG4gICAgLy8gTWVhc3VyZW1lbnQgY29tcG9uZW50c1xuICAgIHdob2xlVGV4dDogJ1RhbScsXG4gICAgZnJhY3Rpb25UZXh0OiAnS2VzaXInLFxuICAgIHVuaXRUZXh0OiAnQmlyaW0nLFxuICAgIC8vIFRpbWUgLyBUaW1lc3BhbiBjb21wb25lbnRcbiAgICBsYWJlbHM6IFsnWcSxbCcsICdBeScsICdHw7xuJywgJ1NhYXQnLCAnRGFraWthJywgJ1Nhbml5ZScsICcnXSxcbiAgICBsYWJlbHNTaG9ydDogWydZxLFsJywgJ0F5JywgJ0fDvG4nLCAnU2EnLCAnRGFrJywgJ1NuJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ0JhxZ9sYScsXG4gICAgc3RvcFRleHQ6ICdEdXJkdXInLFxuICAgIHJlc2V0VGV4dDogJ1PEsWbEsXJsYScsXG4gICAgbGFwVGV4dDogJ1R1cicsXG4gICAgaGlkZVRleHQ6ICdHaXpsZScsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ0dlcmknLFxuICAgIHVuZG9UZXh0OiAnR2VyaSBBbCcsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdPJyxcbiAgICBvblRleHQ6ICdJJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnLidcbiAgfTtcblxuICAvLyBWaWV0bmFtZXNlIFxuICBtb2Jpc2Nyb2xsLmkxOG4udmkgPSB7XG4gICAgLy8gQ29yZVxuICAgIHNldFRleHQ6ICfEkOG6t3QnLFxuICAgIGNhbmNlbFRleHQ6ICdI4buneSBiw7InLFxuICAgIGNsZWFyVGV4dDogJ1jDs2EnLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0gY2jhu41uJyxcbiAgICAvLyBEYXRldGltZSBjb21wb25lbnRcbiAgICBkYXRlRm9ybWF0OiAnZGQvbW0veXknLFxuICAgIGRheU5hbWVzOiBbJ0No4bunIE5o4bqtdCcsICdUaOG7qSBIYWknLCAnVGjhu6kgQmEnLCAnVGjhu6kgVMawJywgJ1Ro4bupIE7Eg20nLCAnVGjhu6kgU8OhdScsICdUaOG7qSBC4bqjeSddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsnQ04nLCAnVDInLCAnVDMnLCAnVDQnLCAnVDUnLCAnVDYnLCAnVDcnXSxcbiAgICBkYXlOYW1lc01pbjogWydDTicsICdUMicsICdUMycsICdUNCcsICdUNScsICdUNicsICdUNyddLFxuICAgIGRheVRleHQ6ICcnLFxuICAgIGRlbGltaXRlcjogJy8nLFxuICAgIGhvdXJUZXh0OiAnR2nhu50nLFxuICAgIG1pbnV0ZVRleHQ6ICdQaMO6dCcsXG4gICAgbW9udGhOYW1lczogWydUaMOhbmcgTeG7mXQnLCAnVGjDoW5nIEhhaScsICdUaMOhbmcgQmEnLCAnVGjDoW5nIFTGsCcsICdUaMOhbmcgTsSDbScsICdUaMOhbmcgU8OhdScsICdUaMOhbmcgQuG6o3knLCAnVGjDoW5nIFTDoW0nLCAnVGjDoW5nIENow61uJywgJ1Row6FuZyBNxrDhu51pJywgJ1Row6FuZyBNxrDhu51pIE3hu5l0JywgJ1Row6FuZyBNxrDhu51pIEhhaSddLFxuICAgIG1vbnRoTmFtZXNTaG9ydDogWydUaMOhbmcgMScsICdUaMOhbmcgMicsICdUaMOhbmcgMycsICdUaMOhbmcgNCcsICdUaMOhbmcgNScsICdUaMOhbmcgNicsICdUaMOhbmcgNycsICdUaMOhbmcgOCcsICdUaMOhbmcgOScsICdUaMOhbmcgMTAnLCAnVGjDoW5nIDExJywgJ1Row6FuZyAxMiddLFxuICAgIG1vbnRoVGV4dDogJ1Row6FuZycsXG4gICAgc2VjVGV4dDogJ0dpw6J5JyxcbiAgICB0aW1lRm9ybWF0OiAnSDppaScsXG4gICAgeWVhclRleHQ6ICdOxINtJyxcbiAgICBub3dUZXh0OiAnQsOieSBnaeG7nScsXG4gICAgcG1UZXh0OiAncG0nLFxuICAgIGFtVGV4dDogJ2FtJyxcbiAgICAvLyBDYWxlbmRhciBjb21wb25lbnRcbiAgICBmaXJzdERheTogMCxcbiAgICBkYXRlVGV4dDogJ05nw6B5JyxcbiAgICB0aW1lVGV4dDogJ0jDtM2AaScsXG4gICAgdG9kYXlUZXh0OiAnSMO0bSBuYXknLFxuICAgIHByZXZNb250aFRleHQ6ICdUaMOhbmcgdHLGsOG7m2MnLFxuICAgIG5leHRNb250aFRleHQ6ICdUaMOhbmcgdOG7m2knLFxuICAgIHByZXZZZWFyVGV4dDogJ03Eg20gdHLGsOG7m2MnLFxuICAgIG5leHRZZWFyVGV4dDogJ07Eg20gdOG7m2knLFxuICAgIGNsb3NlVGV4dDogJ8SQw7NuZycsXG4gICAgZXZlbnRUZXh0OiAnU+G7sSBraeG7h24nLFxuICAgIGV2ZW50c1RleHQ6ICdT4buxIGtp4buHbicsXG4gICAgYWxsRGF5VGV4dDogJ0PhuqMgbmfDoHknLFxuICAgIG5vRXZlbnRzVGV4dDogJ0tow7RuZyBjw7Mgc+G7sSBraeG7h24nLFxuICAgIG1vcmVFdmVudHNUZXh0OiAne2NvdW50fSB0aOG6uyBraMOhYycsXG4gICAgLy8gRGF0ZXJhbmdlIGNvbXBvbmVudFxuICAgIGZyb21UZXh0OiAnVOG7qycsXG4gICAgdG9UZXh0OiAnVOG7m2knLFxuICAgIC8vIE1lYXN1cmVtZW50IGNvbXBvbmVudHNcbiAgICB3aG9sZVRleHQ6ICdUb8OgbiB0aOG7gycsXG4gICAgZnJhY3Rpb25UZXh0OiAnUGjDom4gc+G7kScsXG4gICAgdW5pdFRleHQ6ICfEkcahbiB24buLJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ07Eg20nLCAnVGjDoW5nJywgJ05nw6B5JywgJ0dp4budJywgJ1Bow7p0JywgJ0dpw6J5JywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ07Eg20nLCAnVGjDoW5nJywgJ05nw6B5JywgJ0dp4budJywgJ1Bow7p0JywgJ0dpw6J5JywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ0Lhuq90IMSR4bqndScsXG4gICAgc3RvcFRleHQ6ICdE4burbmcnLFxuICAgIHJlc2V0VGV4dDogJ8SQ4bq3dCBs4bqhaScsXG4gICAgbGFwVGV4dDogJ1bDsm5nJyxcbiAgICBoaWRlVGV4dDogJ0dp4bqldScsXG4gICAgLy8gTGlzdHZpZXdcbiAgICBiYWNrVGV4dDogJ1F1YXkgbOG6oWknLFxuICAgIHVuZG9UZXh0OiAnSG/DoG4gdMOhYycsXG4gICAgLy8gRm9ybVxuICAgIG9mZlRleHQ6ICdU4bqldCcsXG4gICAgb25UZXh0OiAnQuG6rXQnLFxuICAgIC8vIE51bXBhZFxuICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcsJyxcbiAgICB0aG91c2FuZHNTZXBhcmF0b3I6ICcgJ1xuICB9O1xuXG4gIC8vIENoaW5lc2VcbiAgbW9iaXNjcm9sbC5pMThuLnpoID0ge1xuICAgIC8vIENvcmVcbiAgICBzZXRUZXh0OiAn56Gu5a6aJyxcbiAgICBjYW5jZWxUZXh0OiAn5Y+W5raIJyxcbiAgICBjbGVhclRleHQ6ICfmmI7noa4nLFxuICAgIHNlbGVjdGVkVGV4dDogJ3tjb3VudH0g6YCJJyxcbiAgICAvLyBEYXRldGltZSBjb21wb25lbnRcbiAgICBkYXRlRm9ybWF0OiAneXnlubRtbeaciGTml6UnLFxuICAgIGRheU5hbWVzOiBbJ+WRqOaXpScsICflkajkuIAnLCAn5ZGo5LqMJywgJ+WRqOS4iScsICflkajlm5snLCAn5ZGo5LqUJywgJ+WRqOWFrSddLFxuICAgIGRheU5hbWVzU2hvcnQ6IFsn5pelJywgJ+S4gCcsICfkuownLCAn5LiJJywgJ+WbmycsICfkupQnLCAn5YWtJ10sXG4gICAgZGF5TmFtZXNNaW46IFsn5pelJywgJ+S4gCcsICfkuownLCAn5LiJJywgJ+WbmycsICfkupQnLCAn5YWtJ10sXG4gICAgZGF5VGV4dDogJ+aXpScsXG4gICAgaG91clRleHQ6ICfml7YnLFxuICAgIG1pbnV0ZVRleHQ6ICfliIYnLFxuICAgIG1vbnRoTmFtZXM6IFsnMeaciCcsICcy5pyIJywgJzPmnIgnLCAnNOaciCcsICc15pyIJywgJzbmnIgnLCAnN+aciCcsICc45pyIJywgJznmnIgnLCAnMTDmnIgnLCAnMTHmnIgnLCAnMTLmnIgnXSxcbiAgICBtb250aE5hbWVzU2hvcnQ6IFsn5LiAJywgJ+S6jCcsICfkuIknLCAn5ZubJywgJ+S6lCcsICflha0nLCAn5LiDJywgJ+WFqycsICfkuZ0nLCAn5Y2BJywgJ+WNgeS4gCcsICfljYHkuownXSxcbiAgICBtb250aFRleHQ6ICfmnIgnLFxuICAgIHNlY1RleHQ6ICfnp5InLFxuICAgIHRpbWVGb3JtYXQ6ICdISDppaScsXG4gICAgeWVhclRleHQ6ICflubQnLFxuICAgIG5vd1RleHQ6ICflvZPliY0nLFxuICAgIHBtVGV4dDogJ+S4i+WNiCcsXG4gICAgYW1UZXh0OiAn5LiK5Y2IJyxcbiAgICB5ZWFyU3VmZml4OiAn5bm0JyxcbiAgICBtb250aFN1ZmZpeDogJ+aciCcsXG4gICAgZGF5U3VmZml4OiAn5pelJyxcbiAgICB0b2RheVRleHQ6ICfku4rlpKknLFxuICAgIC8vIENhbGVuZGFyIGNvbXBvbmVudFxuICAgIGRhdGVUZXh0OiAn5pelJyxcbiAgICB0aW1lVGV4dDogJ+aXtumXtCcsXG4gICAgY2xvc2VUZXh0OiAn5YWz6ZetJyxcbiAgICBhbGxEYXlUZXh0OiAn5YWo5aSpJyxcbiAgICBub0V2ZW50c1RleHQ6ICfml6Dkuovku7YnLFxuICAgIGV2ZW50VGV4dDogJ+a0u+WKqCcsXG4gICAgZXZlbnRzVGV4dDogJ+a0u+WKqCcsXG4gICAgbW9yZUV2ZW50c1RleHQ6ICfku5Yge2NvdW50fSDku7YnLFxuICAgIC8vIERhdGVyYW5nZSBjb21wb25lbnRcbiAgICBmcm9tVGV4dDogJ+W8gOWni+aXtumXtCcsXG4gICAgdG9UZXh0OiAn57uT5p2f5pe26Ze0JyxcbiAgICAvLyBNZWFzdXJlbWVudCBjb21wb25lbnRzXG4gICAgd2hvbGVUZXh0OiAn5ZCI6K6hJyxcbiAgICBmcmFjdGlvblRleHQ6ICfliIbmlbAnLFxuICAgIHVuaXRUZXh0OiAn5Y2V5L2NJyxcbiAgICAvLyBUaW1lIC8gVGltZXNwYW4gY29tcG9uZW50XG4gICAgbGFiZWxzOiBbJ+W5tCcsICfmnIgnLCAn5pelJywgJ+Wwj+aXticsICfliIbpkp8nLCAn56eSJywgJyddLFxuICAgIGxhYmVsc1Nob3J0OiBbJ+W5tCcsICfmnIgnLCAn5pelJywgJ+eCuScsICfliIYnLCAn56eSJywgJyddLFxuICAgIC8vIFRpbWVyIGNvbXBvbmVudFxuICAgIHN0YXJ0VGV4dDogJ+W8gOWniycsXG4gICAgc3RvcFRleHQ6ICflgZzmraInLFxuICAgIHJlc2V0VGV4dDogJ+mHjee9ricsXG4gICAgbGFwVGV4dDogJ+WciCcsXG4gICAgaGlkZVRleHQ6ICfpmpDol48nLFxuICAgIC8vIExpc3R2aWV3XG4gICAgYmFja1RleHQ6ICfov5Tlm54nLFxuICAgIHVuZG9UZXh0OiAn5aSN5Y6fJyxcbiAgICAvLyBGb3JtXG4gICAgb2ZmVGV4dDogJ+WFs+mXrScsXG4gICAgb25UZXh0OiAn5byA5ZCvJyxcbiAgICAvLyBOdW1wYWRcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnICdcbiAgfTtcblxuICB2YXIgdGhlbWVzJDEgPSBtb2Jpc2Nyb2xsLnRoZW1lcztcbiAgdGhlbWVzJDEuZnJhbWUuaW9zID0ge1xuICAgIGRpc3BsYXk6ICdib3R0b20nLFxuICAgIC8vIGZyYW1lXG4gICAgaGVhZGVyVGV4dDogZmFsc2UsXG4gICAgLy8gZnJhbWVcbiAgICBidG5XaWR0aDogZmFsc2UsXG4gICAgLy8gZnJhbWVcbiAgICBkZWxldGVJY29uOiAnaW9zLWJhY2tzcGFjZScsXG4gICAgLy8gbnVtcGFkXG4gICAgc2Nyb2xsM2Q6IG9zICE9ICd3cCcgJiYgKG9zICE9ICdhbmRyb2lkJyB8fCBtYWpvclZlcnNpb24gPiA3KVxuICB9O1xuICB0aGVtZXMkMS5zY3JvbGxlci5pb3MgPSBleHRlbmQkMSh7fSwgdGhlbWVzJDEuZnJhbWUuaW9zLCB7XG4gICAgcm93czogNSxcbiAgICAvLyBzY3JvbGxlclxuICAgIGhlaWdodDogMzQsXG4gICAgLy8gc2Nyb2xsZXJcbiAgICBtaW5XaWR0aDogNTUsXG4gICAgLy8gc2Nyb2xsZXJcbiAgICBzZWxlY3RlZExpbmVIZWlnaHQ6IHRydWUsXG4gICAgLy8gc2Nyb2xsZXJcbiAgICBzZWxlY3RlZExpbmVCb3JkZXI6IDEsXG4gICAgLy8gc2Nyb2xsZXJcbiAgICBzaG93TGFiZWw6IGZhbHNlLFxuICAgIC8vIHNjcm9sbGVyXG4gICAgdXNlU2hvcnRMYWJlbHM6IHRydWUsXG4gICAgLy8gdGltZXNwYW4vdGltZXJcbiAgICBidG5QbHVzQ2xhc3M6ICdtYnNjLWljIG1ic2MtaWMtYXJyb3ctZG93bjUnLFxuICAgIC8vIHNjcm9sbGVyXG4gICAgYnRuTWludXNDbGFzczogJ21ic2MtaWMgbWJzYy1pYy1hcnJvdy11cDUnLFxuICAgIC8vIHNjcm9sbGVyXG4gICAgY2hlY2tJY29uOiAnaW9uLWlvczctY2hlY2ttYXJrLWVtcHR5JyxcbiAgICAvLyBzZWxlY3RcbiAgICBmaWx0ZXJDbGVhckljb246ICdpb24tY2xvc2UtY2lyY2xlZCcsXG4gICAgLy8gc2VsZWN0XG4gICAgZGF0ZURpc3BsYXk6ICdNTWR5eScsXG4gICAgLy8gZGF0ZVxuICAgIGJ0bkNhbFByZXZDbGFzczogJ21ic2MtaWMgbWJzYy1pYy1hcnJvdy1sZWZ0NScsXG4gICAgLy8gY2FsZW5kYXJcbiAgICBidG5DYWxOZXh0Q2xhc3M6ICdtYnNjLWljIG1ic2MtaWMtYXJyb3ctcmlnaHQ1JyAvLyBjYWxlbmRhclxuXG4gIH0pO1xuICB0aGVtZXMkMS5saXN0dmlldy5pb3MgPSB7XG4gICAgbGVmdEFycm93Q2xhc3M6ICdtYnNjLWljLWlvbi1pb3M3LWFycm93LWJhY2snLFxuICAgIHJpZ2h0QXJyb3dDbGFzczogJ21ic2MtaWMtaW9uLWlvczctYXJyb3ctZm9yd2FyZCdcbiAgfTtcbiAgdGhlbWVzJDEuZm9ybS5pb3MgPSB7fTtcblxuICBmdW5jdGlvbiBfYWRkUmlwcGxlKCRjb250cm9sLCBldikge1xuICAgIHZhciB4ID0gZ2V0Q29vcmQoZXYsICdYJywgdHJ1ZSksXG4gICAgICAgIHkgPSBnZXRDb29yZChldiwgJ1knLCB0cnVlKSxcbiAgICAgICAgY29udHJvbCA9ICRjb250cm9sWzBdLFxuICAgICAgICByZWN0ID0gJGNvbnRyb2wub2Zmc2V0KCksXG4gICAgICAgIGxlZnQgPSB4IC0gcmVjdC5sZWZ0LFxuICAgICAgICB0b3AgPSB5IC0gcmVjdC50b3AsXG4gICAgICAgIHdpZHRoID0gTWF0aC5tYXgobGVmdCwgY29udHJvbC5vZmZzZXRXaWR0aCAtIGxlZnQpLFxuICAgICAgICBoZWlnaHQgPSBNYXRoLm1heCh0b3AsIGNvbnRyb2wub2Zmc2V0SGVpZ2h0IC0gdG9wKSxcbiAgICAgICAgc2l6ZSA9IDIgKiBNYXRoLnNxcnQoTWF0aC5wb3cod2lkdGgsIDIpICsgTWF0aC5wb3coaGVpZ2h0LCAyKSk7XG5cbiAgICBfcmVtb3ZlUmlwcGxlKCRyaXBwbGUpO1xuXG4gICAgJHJpcHBsZSA9ICQkMSgnPHNwYW4gY2xhc3M9XCJtYnNjLXJpcHBsZVwiPjwvc3Bhbj4nKS5jc3Moe1xuICAgICAgYmFja2dyb3VuZENvbG9yOiBnZXRDb21wdXRlZFN0eWxlKGNvbnRyb2wpLmNvbG9yLFxuICAgICAgd2lkdGg6IHNpemUsXG4gICAgICBoZWlnaHQ6IHNpemUsXG4gICAgICB0b3A6IHkgLSByZWN0LnRvcCAtIHNpemUgLyAyLFxuICAgICAgbGVmdDogeCAtIHJlY3QubGVmdCAtIHNpemUgLyAyXG4gICAgfSkuYXBwZW5kVG8oJGNvbnRyb2wpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgJHJpcHBsZS5hZGRDbGFzcygnbWJzYy1yaXBwbGUtc2NhbGVkIG1ic2MtcmlwcGxlLXZpc2libGUnKTtcbiAgICB9LCAxMCk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVtb3ZlUmlwcGxlKCRyKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoJHIpIHtcbiAgICAgICAgJHIucmVtb3ZlQ2xhc3MoJ21ic2MtcmlwcGxlLXZpc2libGUnKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHIucmVtb3ZlKCk7XG4gICAgICAgIH0sIDIwMDApO1xuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0UmlwcGxlKCRtYXJrdXAsIHNlbGVjdG9yLCBkaXNhYmxlZCwgbm9obCkge1xuICAgIHZhciBzdGFydFgsXG4gICAgICAgIHN0YXJ0WSxcbiAgICAgICAgbWFya3VwID0gJG1hcmt1cFswXTtcblxuICAgIGZ1bmN0aW9uIG9uU3RhcnQoZXYpIHtcbiAgICAgIHZhciB0YXJnZXQgPSBjbG9zZXN0KG1hcmt1cCwgZXYudGFyZ2V0LCBzZWxlY3Rvcik7XG5cbiAgICAgIGlmICh0YXJnZXQgJiYgdGVzdFRvdWNoKGV2LCB0YXJnZXQpKSB7XG4gICAgICAgIHN0YXJ0WCA9IGdldENvb3JkKGV2LCAnWCcpO1xuICAgICAgICBzdGFydFkgPSBnZXRDb29yZChldiwgJ1knKTtcbiAgICAgICAgJGFjdGl2ZSQxID0gJCQxKHRhcmdldCk7XG5cbiAgICAgICAgaWYgKCEkYWN0aXZlJDEuaGFzQ2xhc3MoZGlzYWJsZWQpICYmICEkYWN0aXZlJDEuaGFzQ2xhc3Mobm9obCkpIHtcbiAgICAgICAgICBfYWRkUmlwcGxlKCRhY3RpdmUkMSwgZXYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRhY3RpdmUkMSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbk1vdmUoZXYpIHtcbiAgICAgIGlmICgkYWN0aXZlJDEgJiYgTWF0aC5hYnMoZ2V0Q29vcmQoZXYsICdYJykgLSBzdGFydFgpID4gOSB8fCBNYXRoLmFicyhnZXRDb29yZChldiwgJ1knKSAtIHN0YXJ0WSkgPiA5KSB7XG4gICAgICAgIF9yZW1vdmVSaXBwbGUoJHJpcHBsZSk7XG5cbiAgICAgICAgJGFjdGl2ZSQxID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkVuZCgpIHtcbiAgICAgIGlmICgkYWN0aXZlJDEpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3JlbW92ZVJpcHBsZSgkcmlwcGxlKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgJGFjdGl2ZSQxID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWFya3VwKSB7XG4gICAgICBpZiAobWFya3VwLl9fbWJzY1JpcHBsZU9mZikge1xuICAgICAgICBtYXJrdXAuX19tYnNjUmlwcGxlT2ZmKCk7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbihtYXJrdXAsICd0b3VjaHN0YXJ0Jywgb25TdGFydCwge1xuICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGxpc3RlbihtYXJrdXAsICdtb3VzZWRvd24nLCBvblN0YXJ0KTtcbiAgICAgIGxpc3RlbihtYXJrdXAsICd0b3VjaG1vdmUnLCBvbk1vdmUsIHtcbiAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBsaXN0ZW4obWFya3VwLCAnbW91c2Vtb3ZlJywgb25Nb3ZlKTtcbiAgICAgIGxpc3RlbihtYXJrdXAsICd0b3VjaGVuZCcsIG9uRW5kKTtcbiAgICAgIGxpc3RlbihtYXJrdXAsICd0b3VjaGNhbmNlbCcsIG9uRW5kKTtcbiAgICAgIGxpc3RlbihtYXJrdXAsICdtb3VzZWxlYXZlJywgb25FbmQpO1xuICAgICAgbGlzdGVuKG1hcmt1cCwgJ21vdXNldXAnLCBvbkVuZCk7XG5cbiAgICAgIG1hcmt1cC5fX21ic2NSaXBwbGVPZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVubGlzdGVuKG1hcmt1cCwgJ3RvdWNoc3RhcnQnLCBvblN0YXJ0LCB7XG4gICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdW5saXN0ZW4obWFya3VwLCAnbW91c2Vkb3duJywgb25TdGFydCk7XG4gICAgICAgIHVubGlzdGVuKG1hcmt1cCwgJ3RvdWNobW92ZScsIG9uTW92ZSwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHVubGlzdGVuKG1hcmt1cCwgJ21vdXNlbW92ZScsIG9uTW92ZSk7XG4gICAgICAgIHVubGlzdGVuKG1hcmt1cCwgJ3RvdWNoZW5kJywgb25FbmQpO1xuICAgICAgICB1bmxpc3RlbihtYXJrdXAsICd0b3VjaGNhbmNlbCcsIG9uRW5kKTtcbiAgICAgICAgdW5saXN0ZW4obWFya3VwLCAnbW91c2VsZWF2ZScsIG9uRW5kKTtcbiAgICAgICAgdW5saXN0ZW4obWFya3VwLCAnbW91c2V1cCcsIG9uRW5kKTtcbiAgICAgICAgZGVsZXRlIG1hcmt1cC5fX21ic2NSaXBwbGVPZmY7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciAkYWN0aXZlJDEsXG4gICAgICAkcmlwcGxlLFxuICAgICAgdGhlbWVzJDIgPSBtb2Jpc2Nyb2xsLnRoZW1lcztcbiAgdGhlbWVzJDIuZnJhbWUubWF0ZXJpYWwgPSB7XG4gICAgaGVhZGVyVGV4dDogZmFsc2UsXG4gICAgYnRuV2lkdGg6IGZhbHNlLFxuICAgIGRlbGV0ZUljb246ICdtYXRlcmlhbC1iYWNrc3BhY2UnLFxuICAgIG9uTWFya3VwUmVhZHk6IGZ1bmN0aW9uIG9uTWFya3VwUmVhZHkoZXYpIHtcbiAgICAgIGluaXRSaXBwbGUoJCQxKGV2LnRhcmdldCksICcubWJzYy1mci1idG4tZScsICdtYnNjLWRpc2FibGVkJywgJ21ic2MtZnItYnRuLW5obCcpO1xuICAgIH1cbiAgfTtcbiAgdGhlbWVzJDIuc2Nyb2xsZXIubWF0ZXJpYWwgPSBleHRlbmQkMSh7fSwgdGhlbWVzJDIuZnJhbWUubWF0ZXJpYWwsIHtcbiAgICBzaG93TGFiZWw6IGZhbHNlLFxuICAgIHNlbGVjdGVkTGluZUJvcmRlcjogMixcbiAgICB3ZWVrRGF5czogJ21pbicsXG4gICAgaWNvbjoge1xuICAgICAgZmlsbGVkOiAnbWF0ZXJpYWwtc3RhcicsXG4gICAgICBlbXB0eTogJ21hdGVyaWFsLXN0YXItb3V0bGluZSdcbiAgICB9LFxuICAgIGNoZWNrSWNvbjogJ21hdGVyaWFsLWNoZWNrJyxcbiAgICBidG5QbHVzQ2xhc3M6ICdtYnNjLWljIG1ic2MtaWMtbWF0ZXJpYWwta2V5Ym9hcmQtYXJyb3ctZG93bicsXG4gICAgYnRuTWludXNDbGFzczogJ21ic2MtaWMgbWJzYy1pYy1tYXRlcmlhbC1rZXlib2FyZC1hcnJvdy11cCcsXG4gICAgYnRuQ2FsUHJldkNsYXNzOiAnbWJzYy1pYyBtYnNjLWljLW1hdGVyaWFsLWtleWJvYXJkLWFycm93LWxlZnQnLFxuICAgIGJ0bkNhbE5leHRDbGFzczogJ21ic2MtaWMgbWJzYy1pYy1tYXRlcmlhbC1rZXlib2FyZC1hcnJvdy1yaWdodCdcbiAgfSk7XG4gIHRoZW1lcyQyLmxpc3R2aWV3Lm1hdGVyaWFsID0ge1xuICAgIGxlZnRBcnJvd0NsYXNzOiAnbWJzYy1pYy1tYXRlcmlhbC1rZXlib2FyZC1hcnJvdy1sZWZ0JyxcbiAgICByaWdodEFycm93Q2xhc3M6ICdtYnNjLWljLW1hdGVyaWFsLWtleWJvYXJkLWFycm93LXJpZ2h0JyxcbiAgICBvbkl0ZW1BY3RpdmF0ZTogZnVuY3Rpb24gb25JdGVtQWN0aXZhdGUoZXYpIHtcbiAgICAgIF9hZGRSaXBwbGUoJCQxKGV2LnRhcmdldCksIGV2LmRvbUV2ZW50KTtcbiAgICB9LFxuICAgIG9uSXRlbURlYWN0aXZhdGU6IGZ1bmN0aW9uIG9uSXRlbURlYWN0aXZhdGUoKSB7XG4gICAgICBfcmVtb3ZlUmlwcGxlKCRyaXBwbGUpO1xuICAgIH0sXG4gICAgb25TbGlkZVN0YXJ0OiBmdW5jdGlvbiBvblNsaWRlU3RhcnQoZXYpIHtcbiAgICAgICQkMSgnLm1ic2MtcmlwcGxlJywgZXYudGFyZ2V0KS5yZW1vdmUoKTtcbiAgICB9LFxuICAgIG9uU29ydFN0YXJ0OiBmdW5jdGlvbiBvblNvcnRTdGFydChldikge1xuICAgICAgJCQxKCcubWJzYy1yaXBwbGUnLCBldi50YXJnZXQpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgdGhlbWVzJDIubmF2aWdhdGlvbi5tYXRlcmlhbCA9IHtcbiAgICBvbkluaXQ6IGZ1bmN0aW9uIG9uSW5pdCgpIHtcbiAgICAgIGluaXRSaXBwbGUoJCQxKHRoaXMpLCAnLm1ic2MtbXMtaXRlbS5tYnNjLWJ0bi1lJywgJ21ic2MtZGlzYWJsZWQnLCAnbWJzYy1idG4tbmhsJyk7XG4gICAgfSxcbiAgICBvbk1hcmt1cEluaXQ6IGZ1bmN0aW9uIG9uTWFya3VwSW5pdCgpIHtcbiAgICAgICQkMSgnLm1ic2MtcmlwcGxlJywgdGhpcykucmVtb3ZlKCk7XG4gICAgfSxcbiAgICBvbkRlc3Ryb3k6IGZ1bmN0aW9uIG9uRGVzdHJveSgpIHtcbiAgICAgIGlmICh0aGlzLl9fbWJzY1JpcHBsZU9mZikge1xuICAgICAgICB0aGlzLl9fbWJzY1JpcHBsZU9mZigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdGhlbWVzJDIuZm9ybS5tYXRlcmlhbCA9IHtcbiAgICBhZGRSaXBwbGU6IGZ1bmN0aW9uIGFkZFJpcHBsZShlbG0sIGV2KSB7XG4gICAgICBfYWRkUmlwcGxlKGVsbSwgZXYpO1xuICAgIH0sXG4gICAgcmVtb3ZlUmlwcGxlOiBmdW5jdGlvbiByZW1vdmVSaXBwbGUoKSB7XG4gICAgICBfcmVtb3ZlUmlwcGxlKCRyaXBwbGUpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgdGhlbWVzJDMgPSBtb2Jpc2Nyb2xsLnRoZW1lcztcbiAgdGhlbWVzJDMuZnJhbWUud2luZG93cyA9IHtcbiAgICBoZWFkZXJUZXh0OiBmYWxzZSxcbiAgICBkZWxldGVJY29uOiAnYmFja3NwYWNlNCcsXG4gICAgLy9zZXRJY29uOiAnbWF0ZXJpYWwtY2hlY2snLFxuICAgIC8vY2FuY2VsSWNvbjogJ21hdGVyaWFsLWNsb3NlJyxcbiAgICAvL2Nsb3NlSWNvbjogJ21hdGVyaWFsLWNsb3NlJyxcbiAgICAvL2NsZWFySWNvbjogJ21hdGVyaWFsLWNsb3NlJyxcbiAgICAvL29rSWNvbjogJ21hdGVyaWFsLWNoZWNrJyxcbiAgICAvL25vd0ljb246ICdsb29wMicsXG4gICAgLy9zdGFydEljb246ICdwbGF5MycsXG4gICAgLy9zdG9wSWNvbjogJ3BhdXNlMicsXG4gICAgLy9yZXNldEljb246ICdzdG9wMicsXG4gICAgLy9sYXBJY29uOiAnbG9vcDInLFxuICAgIC8vYnRuV2lkdGg6IGZhbHNlLFxuICAgIGJ0blJldmVyc2U6IHRydWVcbiAgfTtcbiAgdGhlbWVzJDMuc2Nyb2xsZXIud2luZG93cyA9IGV4dGVuZCQxKHt9LCB0aGVtZXMkMy5mcmFtZS53aW5kb3dzLCB7XG4gICAgcm93czogNixcbiAgICAvLyBzY3JvbGxlclxuICAgIG1pbldpZHRoOiA4OCxcbiAgICBoZWlnaHQ6IDQ0LFxuICAgIGJ0blBsdXNDbGFzczogJ21ic2MtaWMgbWJzYy1pYy1hcnJvdy1kb3duNScsXG4gICAgYnRuTWludXNDbGFzczogJ21ic2MtaWMgbWJzYy1pYy1hcnJvdy11cDUnLFxuICAgIGNoZWNrSWNvbjogJ21hdGVyaWFsLWNoZWNrJyxcbiAgICBkYXRlRGlzcGxheTogJ01NZHl5JyxcbiAgICAvLyBkYXRlXG4gICAgc2hvd0xhYmVsOiBmYWxzZSxcbiAgICBzaG93U2Nyb2xsQXJyb3dzOiB0cnVlLFxuICAgIGJ0bkNhbFByZXZDbGFzczogJ21ic2MtaWMgbWJzYy1pYy1hcnJvdy1sZWZ0NScsXG4gICAgLy8gY2FsZW5kYXJcbiAgICBidG5DYWxOZXh0Q2xhc3M6ICdtYnNjLWljIG1ic2MtaWMtYXJyb3ctcmlnaHQ1JyxcbiAgICAvLyBjYWxlbmRhclxuICAgIGRheU5hbWVzU2hvcnQ6IFsnU3UnLCAnTW8nLCAnVHUnLCAnV2UnLCAnVGgnLCAnRnInLCAnU2EnXSxcbiAgICB1c2VTaG9ydExhYmVsczogdHJ1ZSAvLyB0aW1lc3Bhbi90aW1lclxuXG4gIH0pO1xuICB0aGVtZXMkMy5mb3JtLndpbmRvd3MgPSB7fTtcblxuICBtb2Jpc2Nyb2xsLmN1c3RvbVRoZW1lKCdpb3MtZGFyaycsICdpb3MnKTtcblxuICBtb2Jpc2Nyb2xsLmN1c3RvbVRoZW1lKCdtYXRlcmlhbC1kYXJrJywgJ21hdGVyaWFsJyk7XG5cbiAgbW9iaXNjcm9sbC5jdXN0b21UaGVtZSgnbW9iaXNjcm9sbC1kYXJrJywgJ21vYmlzY3JvbGwnKTtcblxuICBtb2Jpc2Nyb2xsLmN1c3RvbVRoZW1lKCd3aW5kb3dzLWRhcmsnLCAnd2luZG93cycpO1xuXG4gIHZhciB0aGVtZXMkNCA9IG1vYmlzY3JvbGwudGhlbWVzO1xuICB2YXIgdGhlbWUgPSAnbW9iaXNjcm9sbCc7XG5cbiAgaWYgKG9zID09ICdhbmRyb2lkJykge1xuICAgIHRoZW1lID0gJ21hdGVyaWFsJztcbiAgfSBlbHNlIGlmIChvcyA9PSAnaW9zJykge1xuICAgIHRoZW1lID0gJ2lvcyc7XG4gIH0gZWxzZSBpZiAob3MgPT0gJ3dwJykge1xuICAgIHRoZW1lID0gJ3dpbmRvd3MnO1xuICB9XG5cbiAgJCQxLmVhY2godGhlbWVzJDQuZnJhbWUsIGZ1bmN0aW9uIChrZXksIHNldHRpbmdzKSB7XG4gICAgLy8gU3RvcCBhdCB0aGUgZmlyc3QgY3VzdG9tIHRoZW1lIHdpdGggdGhlIE9TIGJhc2UgdGhlbWVcbiAgICBpZiAodGhlbWUgJiYgc2V0dGluZ3MuYmFzZVRoZW1lID09IHRoZW1lICYmIGtleSAhPSB0aGVtZSArICctZGFyaycpIHtcbiAgICAgIG1vYmlzY3JvbGwuYXV0b1RoZW1lID0ga2V5O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09IHRoZW1lKSB7XG4gICAgICBtb2Jpc2Nyb2xsLmF1dG9UaGVtZSA9IGtleTtcbiAgICB9XG4gIH0pO1xuXG4gIGV4cG9ydHMuTWJzY0F2YXRhciA9IE1ic2NBdmF0YXI7XG4gIGV4cG9ydHMuTWJzY0J1dHRvbiA9IE1ic2NCdXR0b247XG4gIGV4cG9ydHMuTWJzY0NoZWNrYm94ID0gTWJzY0NoZWNrYm94O1xuICBleHBvcnRzLk1ic2NDb21tZXJjaWFsQ29tcG9uZW50ID0gTWJzY0NvbW1lcmNpYWxDb21wb25lbnQ7XG4gIGV4cG9ydHMuTWJzY0Ryb3Bkb3duID0gTWJzY0Ryb3Bkb3duO1xuICBleHBvcnRzLk1ic2NGb3JtID0gTWJzY0Zvcm07XG4gIGV4cG9ydHMuTWJzY0Zvcm1zTW9kdWxlID0gTWJzY0Zvcm1zTW9kdWxlO1xuICBleHBvcnRzLk1ic2NJbnB1dCA9IE1ic2NJbnB1dDtcbiAgZXhwb3J0cy5NYnNjSW5wdXRNb2R1bGUgPSBNYnNjSW5wdXRNb2R1bGU7XG4gIGV4cG9ydHMuTWJzY01vZHVsZSA9IE1ic2NNb2R1bGU7XG4gIGV4cG9ydHMuTWJzY05vdGUgPSBNYnNjTm90ZTtcbiAgZXhwb3J0cy5NYnNjUGFnZSA9IE1ic2NQYWdlO1xuICBleHBvcnRzLk1ic2NQYWdlTW9kdWxlID0gTWJzY1BhZ2VNb2R1bGU7XG4gIGV4cG9ydHMuTWJzY1Byb2dyZXNzID0gTWJzY1Byb2dyZXNzO1xuICBleHBvcnRzLk1ic2NSYWRpbyA9IE1ic2NSYWRpbztcbiAgZXhwb3J0cy5NYnNjUmFkaW9Hcm91cCA9IE1ic2NSYWRpb0dyb3VwO1xuICBleHBvcnRzLk1ic2NSYXRpbmcgPSBNYnNjUmF0aW5nO1xuICBleHBvcnRzLk1ic2NTZWdtZW50ZWQgPSBNYnNjU2VnbWVudGVkO1xuICBleHBvcnRzLk1ic2NTZWdtZW50ZWRHcm91cCA9IE1ic2NTZWdtZW50ZWRHcm91cDtcbiAgZXhwb3J0cy5NYnNjU2xpZGVyID0gTWJzY1NsaWRlcjtcbiAgZXhwb3J0cy5NYnNjU3RlcHBlciA9IE1ic2NTdGVwcGVyO1xuICBleHBvcnRzLk1ic2NTd2l0Y2ggPSBNYnNjU3dpdGNoO1xuICBleHBvcnRzLk1ic2NUZXh0YXJlYSA9IE1ic2NUZXh0YXJlYTtcbiAgZXhwb3J0cy5tb2Jpc2Nyb2xsID0gbW9iaXNjcm9sbDtcbiAgZXhwb3J0cy7JtWEgPSBNYnNjT3B0aW9uc1NlcnZpY2U7XG4gIGV4cG9ydHMuybViID0gTWJzY0lucHV0U2VydmljZTtcbiAgZXhwb3J0cy7JtWMgPSBNYnNjQmFzZTtcbiAgZXhwb3J0cy7JtWQgPSBNYnNjVmFsdWVCYXNlO1xuICBleHBvcnRzLsm1ZSA9IE1ic2NDbG9uZUJhc2U7XG4gIGV4cG9ydHMuybVmID0gTWJzY0NvbnRyb2xCYXNlO1xuICBleHBvcnRzLsm1ZyA9IE1ic2NCYXNlTW9kdWxlO1xuICBleHBvcnRzLsm1aCA9IE1ic2NGb3JtQmFzZTtcbiAgZXhwb3J0cy7JtWkgPSBNYnNjRm9ybVZhbHVlQmFzZTtcbiAgZXhwb3J0cy7JtWogPSBNYnNjSW5wdXRCYXNlO1xuICBleHBvcnRzLsm1ayA9IE1ic2NSYWRpb1NlcnZpY2U7XG4gIGV4cG9ydHMuybVsID0gTWJzY1JhZGlvR3JvdXBCYXNlO1xuICBleHBvcnRzLsm1bSA9IE1ic2NGb3JtR3JvdXA7XG4gIGV4cG9ydHMuybVuID0gTWJzY0Zvcm1Hcm91cFRpdGxlO1xuICBleHBvcnRzLsm1byA9IE1ic2NGb3JtR3JvdXBDb250ZW50O1xuICBleHBvcnRzLsm1cCA9IE1ic2NBY2NvcmRpb247XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcbiJdfQ==